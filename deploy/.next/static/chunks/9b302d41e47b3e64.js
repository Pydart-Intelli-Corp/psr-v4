(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,119612,e=>{"use strict";var a=e.i(843476),t=e.i(271645),r=e.i(618566),s=e.i(846932),i=e.i(88653),d=e.i(833277),l=e.i(111110),n=e.i(871689),o=e.i(339707),c=e.i(346897),x=e.i(343432),m=e.i(263488),g=e.i(284614),y=e.i(87316),h=e.i(21218),p=e.i(727612),u=e.i(607486),b=e.i(25652),j=e.i(63209),k=e.i(37727),f=e.i(16715),N=e.i(283627),v=e.i(286536),w=e.i(77705),C=e.i(842009),S=e.i(503116),P=e.i(761911);e.i(633999);var T=e.i(269111),A=e.i(344803),E=e.i(199083),F=e.i(948168),I=e.i(545292),L=e.i(506296),D=e.i(145858),$=e.i(892892),B=e.i(784623),M=e.i(931194),O=e.i(952733);function U(){let e=(0,r.useRouter)(),U=(0,r.useParams)().id,{user:z}=(0,d.useUser)(),{t:R}=(0,l.useLanguage)(),[Q,J]=(0,t.useState)(null),[Y,V]=(0,t.useState)(!0),[q,K]=(0,t.useState)(""),[X,H]=(0,t.useState)(""),[G,W]=(0,t.useState)("overview"),[Z,_]=(0,t.useState)(!1),[ee,ea]=(0,t.useState)(!1),[et,er]=(0,t.useState)({}),[es,ei]=(0,t.useState)({name:"",location:"",contactPerson:"",phone:"",email:"",password:"",status:"active"}),[ed,el]=(0,t.useState)(!1),[en,eo]=(0,t.useState)(!1),[ec,ex]=(0,t.useState)(!1),[em,eg]=(0,t.useState)([]),[ey,eh]=(0,t.useState)([]),[ep,eu]=(0,t.useState)(!1),[eb,ej]=(0,t.useState)(!1),[ek,ef]=(0,t.useState)(!1),[eN,ev]=(0,t.useState)(!1),[ew,eC]=(0,t.useState)(!1),[eS,eP]=(0,t.useState)(!1),[eT,eA]=(0,t.useState)(""),[eE,eF]=(0,t.useState)({name:"",dairyId:"",password:"",location:"",contactPerson:"",phone:"",email:"",capacity:"",status:"active",monthlyTarget:""}),eI=(0,t.useCallback)(async()=>{try{let e=localStorage.getItem("authToken");if(!e)return;let a=await fetch("/api/user/dairy",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(a.ok){let e=await a.json();eh(e.data||[])}}catch(e){console.error("Error fetching dairies:",e)}},[]),eL=async e=>{try{let a=localStorage.getItem("authToken"),t=await fetch("/api/user/bmc",{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(t.ok)return((await t.json()).data||[]).filter(a=>a.dairyFarmId===e).map(e=>({id:e.id,name:e.name,bmcId:e.bmcId}));return[]}catch(e){return console.error("Error fetching BMCs:",e),[]}},eD=(0,t.useCallback)(async()=>{try{V(!0);let a=localStorage.getItem("authToken");if(!a)return void e.push("/login");let t=await fetch(`/api/user/dairy/${U}`,{headers:{Authorization:`Bearer ${a}`}});if(!t.ok)throw Error("Failed to fetch dairy details");let r=await t.json();if(!r.data){K("Dairy not found"),J(null);return}J(r.data)}catch(e){console.error("Error fetching dairy details:",e),K("Failed to load dairy details")}finally{V(!1)}},[U,e]),e$=async()=>{if(!Q?.dairy)return;let e=await eL(Q.dairy.id);eg(e),e.length>0?(await eI(),ex(!0)):(window.selectedDairyIdForDelete=Q.dairy.id,eo(!0))},eB=async(a,t,r)=>{if(Q?.dairy)try{let s=localStorage.getItem("authToken"),i=await fetch("/api/user/dairy",{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({id:Q.dairy.id,newDairyId:a,deleteAll:t,otp:r})}),d=await i.json();i.ok?(t?H("Dairy and all related data deleted successfully!"):H(`${d.data.transferredBMCs} BMC(s) transferred and dairy deleted successfully!`),ex(!1),setTimeout(()=>{e.push("/admin/dairy")},2e3)):K(d.message||"Failed to delete dairy")}catch(e){console.error("Error deleting dairy:",e),K("Failed to delete dairy")}},eM=async a=>{if(Q?.dairy)try{let t=localStorage.getItem("authToken"),r={id:Q.dairy.id};a&&(r.otp=a);let s=await fetch("/api/user/dairy",{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(s.ok)H("Dairy deleted successfully!"),eo(!1),setTimeout(()=>{e.push("/admin/dairy")},2e3);else{let e=await s.json();K(e.message||"Failed to delete dairy")}}catch(e){console.error("Error deleting dairy:",e),K("Failed to delete dairy")}},eO=async e=>{if(e.preventDefault(),Q?.dairy){eu(!0),K("");try{let e=localStorage.getItem("authToken"),a={id:Q.dairy.id,name:eE.name,location:eE.location,contactPerson:eE.contactPerson,phone:eE.phone,email:eE.email,capacity:eE.capacity?parseInt(eE.capacity):void 0,status:eE.status,monthlyTarget:eE.monthlyTarget?parseInt(eE.monthlyTarget):void 0};eE.password&&(a.password=eE.password);let t=await fetch("/api/user/dairy",{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(t.ok)H("Dairy updated successfully!"),el(!1),await eD(),setTimeout(()=>H(""),3e3);else{let e=await t.json();K(e.error||"Failed to update dairy")}}catch(e){console.error("Error updating dairy:",e),K("Failed to update dairy")}finally{eu(!1)}}},eU=(e,a)=>{eF(t=>({...t,[e]:a}))},ez=e=>{switch(e){case"active":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 border-green-200 dark:border-green-800";case"inactive":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400 border-red-200 dark:border-red-800";case"maintenance":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400 border-yellow-200 dark:border-yellow-800";default:return"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 border-gray-200 dark:border-gray-600"}};if((0,t.useEffect)(()=>{eD()},[U,eD]),(0,t.useEffect)(()=>{(async()=>{if(Z&&Q?.dairy&&!eT)try{let e=localStorage.getItem("authToken"),a=await fetch(`/api/user/dairy/password?id=${Q.dairy.id}`,{headers:{Authorization:`Bearer ${e}`}});if(a.ok){let e=await a.json(),t="";"object"==typeof e.data&&e.data.password?t=String(e.data.password):e.data?t=String(e.data):e.password&&(t=String(e.password)),eA(t),ei(e=>({...e,password:t}))}}catch(e){console.error("Error fetching password:",e)}})()},[Z,Q,eT]),(0,t.useEffect)(()=>{z||e.push("/login")},[z,e]),!z)return null;if(Y)return(0,a.jsx)(A.LoadingSpinner,{});if(q||!Q)return(0,a.jsx)(F.EmptyState,{icon:(0,a.jsx)(j.AlertCircle,{className:"w-10 h-10"}),title:`${R.dairyManagement.dairyDetails} ${R.common.noDataAvailable}`,message:q||R.dairyManagement.noDairiesFound,actionText:`${R.common.back} to ${R.nav.dairyManagement}`,onAction:()=>e.push("/admin/dairy"),showAction:!0});let eR=Q.dairy,eQ=Q.analytics;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 lg:pb-8",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("div",{className:"px-4 sm:px-6 py-3 sm:py-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>e.push("/admin/dairy"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center",children:(0,a.jsx)(n.ArrowLeft,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"p-2 sm:p-3 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg sm:rounded-xl flex-shrink-0",children:(0,a.jsx)(o.Milk,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 dark:text-gray-100 truncate",children:eR.name}),(0,a.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 truncate",children:["Dairy ID: ",eR.dairyId]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsx)("span",{className:`px-3 py-1 text-xs sm:text-sm font-medium rounded-full border ${ez(eR.status)}`,children:eR.status}),(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,a.jsxs)("button",{onClick:eD,className:"flex items-center px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm text-blue-600 dark:text-blue-500 border border-blue-600 dark:border-blue-500 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors min-h-[44px]",children:[(0,a.jsx)(f.RefreshCw,{className:"w-4 h-4 sm:mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:R.common.refresh||"Refresh"})]}),(0,a.jsxs)("button",{onClick:e$,className:"flex items-center px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm text-red-600 dark:text-red-500 border border-red-600 dark:border-red-500 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors min-h-[44px]",children:[(0,a.jsx)(p.Trash2,{className:"w-4 h-4 sm:mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:R.common.delete})]})]})]})]})}),(0,a.jsx)("div",{className:"px-4 sm:px-6 overflow-x-auto scrollbar-hide",children:(0,a.jsx)("div",{className:"flex gap-1 sm:gap-2 border-b border-gray-200 dark:border-gray-700 min-w-max sm:min-w-0",children:[{id:"overview",label:R.dashboard.overview,icon:u.Building2},{id:"details",label:"Details",icon:h.Activity}].map(e=>(0,a.jsxs)("button",{onClick:()=>W(e.id),className:`flex items-center gap-2 px-3 sm:px-4 py-2.5 sm:py-3 font-medium transition-all relative whitespace-nowrap text-sm sm:text-base ${G===e.id?"text-green-600 dark:text-green-500":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[(0,a.jsx)(e.icon,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm md:text-base",children:e.label}),G===e.id&&(0,a.jsx)(s.motion.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-green-500 to-emerald-500",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]},e.id))})})]}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg sm:rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:(0,a.jsx)("div",{className:"p-4 sm:p-6",children:(0,a.jsxs)(i.AnimatePresence,{mode:"wait",children:["overview"===G&&(0,a.jsxs)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"space-y-4 sm:space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(o.Milk,{className:"w-8 h-8 text-white/80"}),(0,a.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-2xl font-bold text-white",children:eQ.totalCollections||0})})]}),(0,a.jsx)("p",{className:"text-white/90 font-medium text-sm",children:"Collections"}),(0,a.jsx)("p",{className:"text-white/70 text-xs mt-1",children:"Last 30 days"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(b.TrendingUp,{className:"w-8 h-8 text-white/80"}),(0,a.jsx)("div",{className:"flex-1 text-right",children:(0,a.jsxs)("span",{className:"text-xl sm:text-2xl font-bold text-white block",children:[Number(eQ.totalQuantity||0).toFixed(0)," L"]})})]}),(0,a.jsx)("p",{className:"text-white/90 font-medium text-sm",children:"Volume"}),(0,a.jsx)("p",{className:"text-white/70 text-xs mt-1",children:"Last 30 days"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(b.TrendingUp,{className:"w-8 h-8 text-white/80"}),(0,a.jsx)("div",{className:"flex-1 text-right",children:(0,a.jsxs)("span",{className:"text-lg sm:text-xl font-bold text-white block",children:["₹",Number(eQ.totalRevenue||0).toLocaleString()]})})]}),(0,a.jsx)("p",{className:"text-white/90 font-medium text-sm",children:"Total Revenue"}),(0,a.jsx)("p",{className:"text-white/70 text-xs mt-1",children:"Last 30 days"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(C.Award,{className:"w-8 h-8 text-white/80"}),(0,a.jsx)("div",{className:"flex-1 text-right",children:(0,a.jsxs)("span",{className:"text-xl sm:text-2xl font-bold text-white block",children:["₹",Number(eQ.avgRate||0).toFixed(2),"/L"]})})]}),(0,a.jsx)("p",{className:"text-white/90 font-medium text-sm",children:"Avg Rate"}),(0,a.jsx)("p",{className:"text-white/70 text-xs mt-1",children:"Last 30 days"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{onClick:()=>(eQ.totalBmcs||0)>0&&ej(!0),className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-4 transition-all ${(eQ.totalBmcs||0)>0?"cursor-pointer hover:shadow-md hover:border-purple-300 dark:hover:border-purple-600":"cursor-default"}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:(0,a.jsx)(u.Building2,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"BMCs"})]}),(0,a.jsx)("span",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:eQ.totalBmcs||0})]}),(eQ.totalBmcs||0)>0&&(0,a.jsx)("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Click to view all BMCs →"})]}),(0,a.jsxs)("div",{onClick:()=>(eQ.totalSocieties||0)>0&&ef(!0),className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-4 transition-all ${(eQ.totalSocieties||0)>0?"cursor-pointer hover:shadow-md hover:border-pink-300 dark:hover:border-pink-600":"cursor-default"}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"p-2 bg-pink-100 dark:bg-pink-900/30 rounded-lg",children:(0,a.jsx)(u.Building2,{className:"w-5 h-5 text-pink-600 dark:text-pink-400"})}),(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Societies"})]}),(0,a.jsx)("span",{className:"text-2xl font-bold text-pink-600 dark:text-pink-400",children:eQ.totalSocieties||0})]}),(eQ.totalSocieties||0)>0&&(0,a.jsx)("p",{className:"text-xs text-pink-600 dark:text-pink-400",children:"Click to view all societies →"})]}),(0,a.jsxs)("div",{onClick:()=>(eQ.totalMachines||0)>0&&ev(!0),className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-4 transition-all ${(eQ.totalMachines||0)>0?"cursor-pointer hover:shadow-md hover:border-cyan-300 dark:hover:border-cyan-600":"cursor-default"}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"p-2 bg-cyan-100 dark:bg-cyan-900/30 rounded-lg",children:(0,a.jsx)(h.Activity,{className:"w-5 h-5 text-cyan-600 dark:text-cyan-400"})}),(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Machines"})]}),(0,a.jsx)("span",{className:"text-2xl font-bold text-cyan-600 dark:text-cyan-400",children:eQ.totalMachines||0})]}),(eQ.totalMachines||0)>0&&(0,a.jsx)("p",{className:"text-xs text-cyan-600 dark:text-cyan-400",children:"Click to view all machines →"})]}),(0,a.jsxs)("div",{onClick:()=>(eQ.totalFarmers||0)>0&&eC(!0),className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-4 transition-all ${(eQ.totalFarmers||0)>0?"cursor-pointer hover:shadow-md hover:border-cyan-300 dark:hover:border-cyan-600":"cursor-default"}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"p-2 bg-cyan-100 dark:bg-cyan-900/30 rounded-lg",children:(0,a.jsx)(P.Users,{className:"w-5 h-5 text-cyan-600 dark:text-cyan-400"})}),(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Farmers"})]}),(0,a.jsx)("span",{className:"text-2xl font-bold text-cyan-600 dark:text-cyan-400",children:eQ.totalFarmers||0})]}),(eQ.totalFarmers||0)>0&&(0,a.jsx)("p",{className:"text-xs text-cyan-600 dark:text-cyan-400",children:"Click to view all farmers →"})]})]}),Q?.topPerformers?.societies&&Q.topPerformers.societies.length>0&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-4 sm:p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[(0,a.jsx)(C.Award,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),"Society Performance (Last 30 Days)"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Q.topPerformers.societies[0]&&(0,a.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"p-2 bg-green-500 rounded-lg",children:(0,a.jsx)(C.Award,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-green-700 dark:text-green-400",children:"Best Society"}),(0,a.jsx)("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:Q.topPerformers.societies[0].name})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Collections"}),(0,a.jsx)("p",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:Q.topPerformers.societies[0].collections})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Volume"}),(0,a.jsxs)("p",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:[Number(Q.topPerformers.societies[0].totalQuantity||0).toLocaleString(),"L"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Avg Fat"}),(0,a.jsxs)("p",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:[Number(Q.topPerformers.societies[0].avgFat||0).toFixed(2),"%"]})]})]})]}),Q.topPerformers.societies.length>1&&Q.topPerformers.societies[Q.topPerformers.societies.length-1]&&(0,a.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 rounded-lg p-4 border border-red-200 dark:border-red-800",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"p-2 bg-red-500 rounded-lg",children:(0,a.jsx)(b.TrendingUp,{className:"w-4 h-4 text-white rotate-180"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-red-700 dark:text-red-400",children:"Needs Attention"}),(0,a.jsx)("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:Q.topPerformers.societies[Q.topPerformers.societies.length-1].name})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Collections"}),(0,a.jsx)("p",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:Q.topPerformers.societies[Q.topPerformers.societies.length-1].collections})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Volume"}),(0,a.jsxs)("p",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:[Number(Q.topPerformers.societies[Q.topPerformers.societies.length-1].totalQuantity||0).toLocaleString(),"L"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Avg Fat"}),(0,a.jsxs)("p",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:[Number(Q.topPerformers.societies[Q.topPerformers.societies.length-1].avgFat||0).toFixed(2),"%"]})]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-4 sm:p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[(0,a.jsx)(o.Milk,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),"Dairy Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,a.jsx)(o.Milk,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Dairy ID"}),(0,a.jsx)("p",{className:"font-medium text-sm text-gray-900 dark:text-white font-mono break-words",children:eR.dairyId})]})]}),eR.capacity&&(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,a.jsx)(h.Activity,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Capacity"}),(0,a.jsxs)("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:[eR.capacity.toLocaleString()," L"]})]})]}),eR.monthlyTarget&&eR.monthlyTarget>0&&(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,a.jsx)(b.TrendingUp,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Monthly Target"}),(0,a.jsxs)("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:[eR.monthlyTarget.toLocaleString()," L"]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[eR.location&&(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,a.jsx)(c.MapPin,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Location"}),(0,a.jsx)("p",{className:"font-medium text-sm text-gray-900 dark:text-white break-words",children:eR.location})]})]}),eR.contactPerson&&(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,a.jsx)(g.User,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Contact Person"}),(0,a.jsx)("p",{className:"font-medium text-sm text-gray-900 dark:text-white break-words",children:eR.contactPerson})]})]}),eR.phone&&(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,a.jsx)(x.Phone,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Contact Phone"}),(0,a.jsx)("p",{className:"font-medium text-sm text-gray-900 dark:text-white break-words",children:eR.phone})]})]}),eR.email&&(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,a.jsx)(m.Mail,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Email"}),(0,a.jsx)("p",{className:"font-medium text-sm text-gray-900 dark:text-white break-words",children:eR.email})]})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-4 sm:p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[(0,a.jsx)(C.Award,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),"Quality Metrics (Last 30 Days)"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[(0,a.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg",children:(0,a.jsx)(v.Eye,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Avg Fat %"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[Number(eQ.avgFat||0).toFixed(2),"%"]})]})]})}),(0,a.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:(0,a.jsx)(C.Award,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Avg SNF %"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[Number(eQ.avgSnf||0).toFixed(2),"%"]})]})]})})]})]})]}),(0,a.jsx)("div",{className:"space-y-4 sm:space-y-6",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-4 sm:p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[(0,a.jsx)(S.Clock,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),"Timeline"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,a.jsx)(y.Calendar,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Created At"}),(0,a.jsx)("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:new Date(eR.createdAt).toLocaleString()})]})]}),eR.lastActivity&&(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,a.jsx)(h.Activity,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Last Activity"}),(0,a.jsx)("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:new Date(eR.lastActivity).toLocaleString()})]})]})]})]})})]})]},"overview"),"details"===G&&(0,a.jsx)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Dairy Details"}),(0,a.jsx)("div",{className:"flex gap-2",children:Z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{type:"button",onClick:()=>{_(!1),eP(!1),eA(""),ei({name:Q.dairy.name,location:Q.dairy.location||"",contactPerson:Q.dairy.contactPerson||"",phone:Q.dairy.phone||"",email:Q.dairy.email||"",password:"",status:Q.dairy.status})},className:"flex items-center gap-2 px-4 py-2 bg-gray-600 dark:bg-gray-700 text-white rounded-lg hover:bg-gray-700 dark:hover:bg-gray-600 transition-colors",children:[(0,a.jsx)(k.X,{className:"w-4 h-4"}),"Cancel"]}),(0,a.jsxs)("button",{type:"button",onClick:async()=>{try{ea(!0),K("");let a=localStorage.getItem("authToken");if(!a)return void e.push("/login");let t={id:Q.dairy.id,name:es.name,location:es.location,contactPerson:es.contactPerson,phone:es.phone,email:es.email,status:es.status};es.password&&es.password!==eT&&(t.password=es.password);let r=await fetch("/api/user/dairy",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(t)}),s=await r.json();r.ok?(H("Dairy details updated successfully!"),_(!1),eD(),setTimeout(()=>H(""),3e3)):(K(s.message||"Failed to update dairy details"),setTimeout(()=>K(""),5e3))}catch(e){console.error("Error updating dairy:",e),K("Failed to update dairy details. Please try again."),setTimeout(()=>K(""),5e3)}finally{ea(!1)}},disabled:ee,className:"flex items-center gap-2 px-4 py-2 bg-green-600 dark:bg-green-700 text-white rounded-lg hover:bg-green-700 dark:hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(N.Edit3,{className:"w-4 h-4"}),ee?"Saving...":"Save Changes"]})]}):(0,a.jsxs)("button",{type:"button",onClick:()=>{ei({name:Q.dairy.name,location:Q.dairy.location||"",contactPerson:Q.dairy.contactPerson||"",phone:Q.dairy.phone||"",email:Q.dairy.email||"",password:"",status:Q.dairy.status}),eP(!1),eA(""),_(!0)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 dark:bg-green-700 text-white rounded-lg hover:bg-green-700 dark:hover:bg-green-600 transition-colors",children:[(0,a.jsx)(N.Edit3,{className:"w-4 h-4"}),"Edit Details"]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Z?(0,a.jsx)(I.FormInput,{label:"Dairy Name",type:"text",value:es.name,onChange:e=>ei({...es,name:e}),placeholder:"Enter dairy name",required:!0}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Dairy Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,a.jsx)("p",{className:"text-gray-900 dark:text-white",children:Q.dairy.name})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dairy ID"}),(0,a.jsx)("div",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 font-mono",children:Q.dairy.dairyId})})]}),Z?(0,a.jsx)(I.FormInput,{label:"Contact Person",type:"text",value:es.contactPerson,onChange:e=>ei({...es,contactPerson:e}),placeholder:"Enter contact person"}):(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Contact Person"}),(0,a.jsx)("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,a.jsx)("p",{className:"text-gray-900 dark:text-white",children:Q.dairy.contactPerson||"N/A"})})]}),Z?(0,a.jsx)(I.FormInput,{label:"Location",type:"text",value:es.location,onChange:e=>ei({...es,location:e}),placeholder:"Enter location"}):(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location"}),(0,a.jsx)("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,a.jsx)("p",{className:"text-gray-900 dark:text-white",children:Q.dairy.location||"N/A"})})]}),Z?(0,a.jsx)(I.FormInput,{label:"Phone Number",type:"tel",value:es.phone,onChange:e=>{let a=(0,M.formatPhoneInput)(e);ei({...es,phone:a}),et.phone&&er({...et,phone:void 0})},onBlur:()=>{if(es.phone){let e=(0,M.validatePhoneOnBlur)(es.phone);er({...et,phone:e||void 0})}},maxLength:10,placeholder:"Enter 10-digit phone number",error:et.phone}):(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),(0,a.jsx)("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,a.jsx)("p",{className:"text-gray-900 dark:text-white",children:Q.dairy.phone||"N/A"})})]}),Z?(0,a.jsx)(I.FormInput,{label:"Email",type:"email",value:es.email,onChange:e=>{ei({...es,email:e}),et.email&&er({...et,email:void 0})},onBlur:()=>{if(es.email){let e=(0,O.validateEmailQuick)(es.email);er({...et,email:e||void 0})}},placeholder:"Enter email",error:et.email}):(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),(0,a.jsx)("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,a.jsx)("p",{className:"text-gray-900 dark:text-white",children:Q.dairy.email||"N/A"})})]}),Z?(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:eS?"text":"password",value:es.password||"",onChange:e=>ei({...es,password:e.target.value}),placeholder:"Enter new password (leave blank to keep current)",className:"form-input-custom w-full px-3 sm:px-4 py-2 sm:py-2.5 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-200 focus:outline-none"}),(0,a.jsx)("button",{type:"button",onClick:()=>eP(!eS),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",title:eS?"Hide password":"Show password",children:eS?(0,a.jsx)(w.EyeOff,{className:"w-5 h-5"}):(0,a.jsx)(v.Eye,{className:"w-5 h-5"})})]}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Leave blank to keep current password"})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),(0,a.jsxs)("div",{className:"relative px-4 py-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600 flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-gray-900 dark:text-white font-mono",children:eS&&eT?eT:"••••••••"}),(0,a.jsx)("button",{type:"button",onClick:async()=>{if(eS||eT)eP(!eS);else try{let e=localStorage.getItem("authToken"),a=await fetch(`/api/user/dairy/password?id=${Q.dairy.id}`,{headers:{Authorization:`Bearer ${e}`}});if(a.ok){let e=await a.json(),t="";"object"==typeof e.data&&e.data.password?t=String(e.data.password):e.data?t=String(e.data):e.password&&(t=String(e.password)),eA(t),eP(!0)}}catch(e){console.error("Error fetching password:",e)}},className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 flex-shrink-0 ml-2",children:eS?(0,a.jsx)(w.EyeOff,{className:"w-5 h-5"}):(0,a.jsx)(v.Eye,{className:"w-5 h-5"})})]})]}),Z?(0,a.jsx)(L.FormSelect,{label:"Status",value:es.status,onChange:e=>ei({...es,status:e}),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"maintenance",label:"Maintenance"}],placeholder:"Select status"}):(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),(0,a.jsx)("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,a.jsx)("span",{className:`inline-flex px-3 py-1 text-xs font-medium rounded-full ${ez(Q.dairy.status)}`,children:Q.dairy.status})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Capacity (Liters)"}),(0,a.jsx)("div",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[Q.dairy.capacity?.toLocaleString()||"N/A"," L"]})})]})]}),(0,a.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h4",{className:"text-base font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Additional Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Created"}),(0,a.jsx)("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:new Date(Q.dairy.createdAt).toLocaleDateString()})]}),Q.dairy.monthlyTarget&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monthly Target"}),(0,a.jsxs)("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:[Q.dairy.monthlyTarget.toLocaleString()," L"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total BMCs"}),(0,a.jsx)("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:Q.bmcs.length})]})]})]})]})})},"details")]})})})]}),(0,a.jsx)(E.StatusMessage,{success:X,error:q}),(0,a.jsx)(i.AnimatePresence,{children:ed&&Q&&(0,a.jsx)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-end sm:items-center justify-center z-[9999] p-0 sm:p-4",style:{position:"fixed",top:0,left:0,right:0,bottom:0},onClick:e=>{e.target===e.currentTarget&&(el(!1),eF({name:"",dairyId:"",password:"",location:"",contactPerson:"",phone:"",email:"",capacity:"",status:"active",monthlyTarget:""}))},children:(0,a.jsxs)(s.motion.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-gray-800 rounded-t-2xl sm:rounded-xl shadow-2xl w-full sm:max-w-lg md:max-w-2xl max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"sm:hidden flex justify-center pt-3 pb-1",children:(0,a.jsx)("div",{className:"w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full"})}),(0,a.jsx)("div",{className:"p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100",children:["Edit ",Q.dairy.name]}),(0,a.jsx)("button",{onClick:()=>{el(!1),eF({name:"",dairyId:"",password:"",location:"",contactPerson:"",phone:"",email:"",capacity:"",status:"active",monthlyTarget:""})},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors text-gray-600 dark:text-gray-400 touch-target sm:min-h-0 sm:min-w-0",children:(0,a.jsx)(k.X,{className:"w-5 h-5"})})]})}),(0,a.jsxs)("form",{onSubmit:eO,className:"p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dairy Name *"}),(0,a.jsx)("input",{type:"text",value:eE.name,onChange:e=>eU("name",e.target.value),className:"psr-input placeholder:text-gray-300 dark:placeholder:text-gray-600 placeholder:opacity-100 !text-gray-900 dark:!text-gray-100",placeholder:"Enter dairy name",autoComplete:"off",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dairy ID"}),(0,a.jsx)("input",{type:"text",value:eE.dairyId,className:"psr-input !bg-gray-100 dark:!bg-gray-700 !text-gray-500 dark:!text-gray-400 cursor-not-allowed",disabled:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password (leave blank to keep current)"}),(0,a.jsx)("input",{type:"password",value:eE.password,onChange:e=>eU("password",e.target.value),className:"psr-input placeholder:text-gray-300 dark:placeholder:text-gray-600 placeholder:opacity-100 !text-gray-900 dark:!text-gray-100",placeholder:"Enter new password",autoComplete:"new-password"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Contact Person"}),(0,a.jsx)("input",{type:"text",value:eE.contactPerson,onChange:e=>eU("contactPerson",e.target.value),className:"psr-input placeholder:text-gray-300 dark:placeholder:text-gray-600 placeholder:opacity-100 !text-gray-900 dark:!text-gray-100",placeholder:"Enter contact person name",autoComplete:"off"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),(0,a.jsx)("input",{type:"tel",value:eE.phone,onChange:e=>eU("phone",e.target.value),className:"psr-input placeholder:text-gray-300 dark:placeholder:text-gray-600 placeholder:opacity-100 !text-gray-900 dark:!text-gray-100",placeholder:"Enter phone number",autoComplete:"off"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),(0,a.jsx)("input",{type:"email",value:eE.email,onChange:e=>eU("email",e.target.value),className:"psr-input placeholder:text-gray-300 dark:placeholder:text-gray-600 placeholder:opacity-100 !text-gray-900 dark:!text-gray-100",placeholder:"Enter email",autoComplete:"off"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location"}),(0,a.jsx)("input",{type:"text",value:eE.location,onChange:e=>eU("location",e.target.value),className:"psr-input placeholder:text-gray-300 dark:placeholder:text-gray-600 placeholder:opacity-100 !text-gray-900 dark:!text-gray-100",placeholder:"Enter location",autoComplete:"off"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Capacity (Liters)"}),(0,a.jsx)("input",{type:"number",value:eE.capacity,onChange:e=>eU("capacity",e.target.value),className:"psr-input placeholder:text-gray-300 dark:placeholder:text-gray-600 placeholder:opacity-100 !text-gray-900 dark:!text-gray-100",placeholder:"Enter capacity",autoComplete:"off"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),(0,a.jsxs)("select",{value:eE.status,onChange:e=>eU("status",e.target.value),className:"psr-input !text-gray-900 dark:!text-gray-100",children:[(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"}),(0,a.jsx)("option",{value:"maintenance",children:"Maintenance"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Monthly Target (Liters)"}),(0,a.jsx)("input",{type:"number",value:eE.monthlyTarget,onChange:e=>eU("monthlyTarget",e.target.value),className:"psr-input placeholder:text-gray-300 dark:placeholder:text-gray-600 placeholder:opacity-100 !text-gray-900 dark:!text-gray-100",placeholder:"Enter monthly target",autoComplete:"off"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row gap-3 sm:gap-4 mt-6 sm:mt-8 sm:justify-end",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{el(!1),eF({name:"",dairyId:"",password:"",location:"",contactPerson:"",phone:"",email:"",capacity:"",status:"active",monthlyTarget:""})},className:"w-full sm:w-auto px-6 py-3 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:ep,className:"w-full sm:w-auto flex items-center justify-center px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 dark:from-green-700 dark:to-emerald-700 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 dark:hover:from-green-600 dark:hover:to-emerald-600 disabled:opacity-50 transition-all duration-200 shadow-lg shadow-green-500/25",children:ep?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.FlowerSpinner,{size:16,className:"mr-2"}),"Updating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.Edit3,{className:"w-4 h-4 mr-2"}),"Update Dairy"]})})]})]})]})})}),(0,a.jsx)(D.default,{isOpen:en,onClose:()=>eo(!1),onConfirm:eM,dairyName:Q?.dairy.name||"this dairy",bmcCount:Q?.analytics?.totalBmcs||0,societyCount:Q?.analytics?.totalSocieties||0,farmerCount:Q?.analytics?.totalFarmers||0,collectionCount:Q?.analytics?.totalCollections||0,machineCount:Q?.analytics?.totalMachines||0}),(0,a.jsx)(B.default,{isOpen:ec,onClose:()=>{ex(!1),eg([])},onConfirm:eB,bmcs:em,dairies:ey,dairyName:Q?.dairy.name||"",currentDairyId:Q?.dairy.id||0,adminEmail:z?.email||""}),(0,a.jsx)($.default,{isOpen:eb,onClose:()=>ej(!1),onConfirm:()=>{ej(!1),Q?.dairy.id&&e.push(`/admin/bmc?dairyFilter=${Q.dairy.id}`)},title:"Navigate to BMCs",message:`You will be redirected to view all BMCs under ${Q?.dairy.name||"this dairy"}. Any unsaved changes will be lost. Continue?`}),(0,a.jsx)($.default,{isOpen:ek,onClose:()=>ef(!1),onConfirm:()=>{ef(!1),Q?.dairy.id&&e.push(`/admin/society?dairyFilter=${Q.dairy.id}`)},title:"Navigate to Societies",message:`You will be redirected to view all societies under ${Q?.dairy.name||"this dairy"}. Any unsaved changes will be lost. Continue?`}),(0,a.jsx)($.default,{isOpen:eN,onClose:()=>ev(!1),onConfirm:()=>{ev(!1),Q?.dairy.id&&e.push(`/admin/machine?dairyFilter=${Q.dairy.id}`)},title:"Navigate to Machines",message:`You will be redirected to view all machines under ${Q?.dairy.name||"this dairy"}. Any unsaved changes will be lost. Continue?`}),(0,a.jsx)($.default,{isOpen:ew,onClose:()=>eC(!1),onConfirm:()=>{eC(!1),Q?.dairy.id&&e.push(`/admin/farmer?dairyFilter=${Q.dairy.id}`)},title:"Navigate to Farmers",message:`You will be redirected to view all farmers under ${Q?.dairy.name||"this dairy"}. Any unsaved changes will be lost. Continue?`})]})}e.s(["default",()=>U])}]);