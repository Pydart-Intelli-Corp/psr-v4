{"version":3,"sources":["turbopack:///[project]/src/components/dialogs/EmailReportModal.tsx","turbopack:///[project]/src/components/reports/CollectionReports.tsx","turbopack:///[project]/src/components/reports/DispatchReports.tsx","turbopack:///[project]/src/components/reports/SalesReports.tsx","turbopack:///[project]/src/app/admin/reports/page.tsx","turbopack:///[project]/node_modules/lucide-react/src/icons/package.ts","turbopack:///[project]/node_modules/lucide-react/src/icons/file-down.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { Mail, X, Send } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ninterface EmailReportModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSend: (email: string) => Promise<void>;\r\n  defaultEmail?: string;\r\n  recordCount?: number;\r\n  reportType?: string;\r\n}\r\n\r\nexport default function EmailReportModal({\r\n  isOpen,\r\n  onClose,\r\n  onSend,\r\n  defaultEmail = '',\r\n  recordCount = 0,\r\n  reportType = 'Report'\r\n}: EmailReportModalProps) {\r\n  const [email, setEmail] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  // Update email when defaultEmail changes\r\n  useEffect(() => {\r\n    if (isOpen && defaultEmail) {\r\n      setEmail(defaultEmail);\r\n    }\r\n  }, [isOpen, defaultEmail]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    // Validate email\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!email) {\r\n      setError('Email address is required');\r\n      return;\r\n    }\r\n    if (!emailRegex.test(email)) {\r\n      setError('Please enter a valid email address');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      await onSend(email);\r\n      setEmail('');\r\n      onClose();\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to send email');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setEmail('');\r\n    setError('');\r\n    onClose();\r\n  };\r\n\r\n  // Render modal in a portal to escape parent overflow-hidden\r\n  const modalContent = (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <motion.div \r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          className=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-end sm:items-center justify-center z-[9999] p-0 sm:p-4\"\r\n          style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0 }}\r\n          onClick={(e) => {\r\n            if (e.target === e.currentTarget) handleClose();\r\n          }}\r\n        >\r\n          <motion.div\r\n            initial={{ y: '100%', opacity: 0 }}\r\n            animate={{ y: 0, opacity: 1 }}\r\n            exit={{ y: '100%', opacity: 0 }}\r\n            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n            className=\"bg-white dark:bg-gray-800 rounded-t-2xl sm:rounded-xl shadow-2xl w-full sm:max-w-md max-h-[90vh] overflow-y-auto\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            {/* Mobile drag handle */}\r\n            <div className=\"sm:hidden flex justify-center pt-3 pb-1\">\r\n              <div className=\"w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full\" />\r\n            </div>\r\n\r\n            {/* Modal Header */}\r\n            <div className=\"p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"p-2 bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700 rounded-lg\">\r\n                    <Mail className=\"w-5 h-5 text-white\" />\r\n                  </div>\r\n                  <h2 className=\"text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100\">\r\n                    Send {reportType}\r\n                  </h2>\r\n                </div>\r\n                <button\r\n                  onClick={handleClose}\r\n                  className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors\"\r\n                >\r\n                  <X className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Modal Content */}\r\n            <div className=\"p-4 sm:p-6\">\r\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                {/* Info Box */}\r\n                <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <Mail className=\"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5\" />\r\n                    <div className=\"flex-1\">\r\n                      <h4 className=\"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1\">\r\n                        Email Report\r\n                      </h4>\r\n                      <p className=\"text-xs text-blue-700 dark:text-blue-300\">\r\n                        The filtered report ({recordCount} records) will be sent as both CSV and PDF attachments to the email address you specify below.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Email Input */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                    Email Address <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"email\"\r\n                    value={email}\r\n                    onChange={(e) => {\r\n                      setEmail(e.target.value);\r\n                      setError('');\r\n                    }}\r\n                    placeholder=\"Enter email address\"\r\n                    required\r\n                    disabled={loading}\r\n                    className={`form-input-custom w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 focus:outline-none ${error ? 'border-red-300 bg-red-50 dark:border-red-700 dark:bg-red-900/20' : ''}`}\r\n                  />\r\n                  {error && (\r\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{error}</p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex gap-3 pt-2\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={handleClose}\r\n                    disabled={loading}\r\n                    className=\"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={loading || !email}\r\n                    className=\"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2\"\r\n                  >\r\n                    {loading ? (\r\n                      <>\r\n                        <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n                        Sending...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Send className=\"w-4 h-4\" />\r\n                        Send Email\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </motion.div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n\r\n  // Only render portal on client side\r\n  if (typeof window === 'undefined') return null;\r\n  \r\n  return createPortal(modalContent, document.body);\r\n}\r\n","'use client';\r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { \r\n  Download,\r\n  FileDown,\r\n  Droplet,\r\n  TrendingUp,\r\n  BarChart3,\r\n  RefreshCw,\r\n  Trash2,\r\n  Mail,\r\n  X\r\n} from 'lucide-react';\r\nimport jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\nimport StatsCard from '@/components/management/StatsCard';\r\nimport { FlowerSpinner } from '@/components';\r\nimport { FilterDropdown, LoadingSnackbar, StatusMessage, BulkActionsToolbar } from '@/components/management';\r\nimport PasswordConfirmDialog from '@/components/dialogs/PasswordConfirmDialog';\r\nimport EmailReportModal from '@/components/dialogs/EmailReportModal';\r\n\r\ninterface CollectionRecord {\r\n  id: number;\r\n  farmer_id: string;\r\n  farmer_name: string;\r\n  society_id: string;\r\n  society_name: string;\r\n  bmc_id?: number;\r\n  bmc_name?: string;\r\n  dairy_id?: number;\r\n  dairy_name?: string;\r\n  machine_id: string;\r\n  collection_date: string;\r\n  collection_time: string;\r\n  shift_type: string;\r\n  channel: string;\r\n  quantity: string;\r\n  fat_percentage: string;\r\n  snf_percentage: string;\r\n  clr_value: string;\r\n  protein_percentage: string;\r\n  lactose_percentage: string;\r\n  salt_percentage: string;\r\n  water_percentage: string;\r\n  temperature: string;\r\n  rate_per_liter: string;\r\n  total_amount: string;\r\n  bonus: string;\r\n  machine_type: string;\r\n  machine_version: string;\r\n}\r\n\r\ninterface CollectionStats {\r\n  totalCollections: number;\r\n  totalQuantity: number;\r\n  totalAmount: number;\r\n  averageRate: number;\r\n  weightedFat: number;\r\n  weightedSnf: number;\r\n  weightedClr: number;\r\n}\r\n\r\n// Helper function to highlight matching text in search results\r\nconst highlightText = (text: string | number | null | undefined, searchQuery: string) => {\r\n  if (!text && text !== 0) return text || '';\r\n  if (!searchQuery) return text;\r\n  \r\n  const textStr = text.toString();\r\n  const regex = new RegExp(`(${searchQuery.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\r\n  const parts = textStr.split(regex);\r\n  \r\n  return parts.map((part, index) => \r\n    regex.test(part) ? (\r\n      <span key={index} className=\"bg-yellow-200 dark:bg-yellow-800 px-0.5 rounded\">\r\n        {part}\r\n      </span>\r\n    ) : (\r\n      part\r\n    )\r\n  );\r\n};\r\n\r\n// Helper function to map channel codes to display names\r\nconst getChannelDisplay = (channel: string): string => {\r\n  const channelMap: { [key: string]: string } = {\r\n    'ch1': 'COW',\r\n    'ch2': 'BUFFALO',\r\n    'ch3': 'MIXED',\r\n    'CH1': 'COW',\r\n    'CH2': 'BUFFALO',\r\n    'CH3': 'MIXED',\r\n    'COW': 'COW',\r\n    'BUFFALO': 'BUFFALO',\r\n    'MIXED': 'MIXED',\r\n    'cow': 'COW',\r\n    'buffalo': 'BUFFALO',\r\n    'mixed': 'MIXED',\r\n    'BUF': 'BUFFALO',\r\n    'MIX': 'MIXED'\r\n  };\r\n  return channelMap[channel] || channel.toUpperCase();\r\n};\r\n\r\ninterface CollectionReportsProps {\r\n  globalSearch?: string;\r\n  initialSocietyId?: string | null;\r\n  initialSocietyName?: string | null;\r\n  initialFromDate?: string | null;\r\n  initialToDate?: string | null;\r\n  initialBmcFilter?: string | null;\r\n  initialMachineFilter?: string | null;\r\n}\r\n\r\nexport default function CollectionReports({ globalSearch = '', initialSocietyId = null, initialSocietyName = null, initialFromDate = null, initialToDate = null, initialBmcFilter = null, initialMachineFilter = null }: CollectionReportsProps) {\r\n  console.log('CollectionReports received props:', { initialSocietyId, initialSocietyName, initialFromDate, initialToDate, initialMachineFilter });\r\n  \r\n  const [records, setRecords] = useState<CollectionRecord[]>([]);\r\n  const [filteredRecords, setFilteredRecords] = useState<CollectionRecord[]>([]);\r\n  const [stats, setStats] = useState<CollectionStats>({\r\n    totalCollections: 0,\r\n    totalQuantity: 0,\r\n    totalAmount: 0,\r\n    averageRate: 0,\r\n    weightedFat: 0,\r\n    weightedSnf: 0,\r\n    weightedClr: 0\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  \r\n  // Sync global search with local search\r\n  useEffect(() => {\r\n    if (globalSearch !== undefined) {\r\n      setSearchQuery(globalSearch);\r\n    }\r\n  }, [globalSearch]);\r\n\r\n  // Combined search from global header and local search\r\n  const combinedSearch = useMemo(() => globalSearch || searchQuery, [globalSearch, searchQuery]);\r\n  \r\n  const [dateFilter, setDateFilter] = useState('');\r\n  const [dateFromFilter, setDateFromFilter] = useState('');\r\n  const [dateToFilter, setDateToFilter] = useState('');\r\n  const [shiftFilter, setShiftFilter] = useState('all');\r\n  const [channelFilter, setChannelFilter] = useState('all');\r\n  const [dairyFilter, setDairyFilter] = useState<string[]>([]);\r\n  const [bmcFilter, setBmcFilter] = useState<string[]>([]);\r\n  const [societyFilter, setSocietyFilter] = useState<string[]>([]);\r\n  const [machineFilter, setMachineFilter] = useState<string[]>([]);\r\n  const [farmerFilter, setFarmerFilter] = useState<string[]>([]);\r\n  \r\n  // Fetch dairies and BMCs\r\n  const [dairies, setDairies] = useState<Array<{ id: number; name: string; dairyId: string }>>([]);\r\n  const [bmcs, setBmcs] = useState<Array<{ id: number; name: string; bmcId: string; dairyFarmId?: number }>>([]);\r\n  const [societiesData, setSocietiesData] = useState<Array<{ id: number; name: string; society_id: string; bmc_id?: number }>>([]);\r\n  const [machinesData, setMachinesData] = useState<Array<{ id: number; machineId: string; machineType: string; societyId?: number; collectionCount?: number }>>([]);\r\n  const [farmersData, setFarmersData] = useState<Array<{ id: number; farmerId: string; farmerName: string; societyId?: number }>>([]);\r\n\r\n  // Delete functionality\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [recordToDelete, setRecordToDelete] = useState<number | null>(null);\r\n  const [deleting, setDeleting] = useState(false);\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  // Bulk selection and delete\r\n  const [selectedRecords, setSelectedRecords] = useState<Set<number>>(new Set());\r\n  const [selectAll, setSelectAll] = useState(false);\r\n  const [showBulkDeleteConfirm, setShowBulkDeleteConfirm] = useState(false);\r\n  const [isDeletingBulk, setIsDeletingBulk] = useState(false);\r\n  const [bulkDeletePassword, setBulkDeletePassword] = useState('');\r\n\r\n  // Email modal state\r\n  const [showEmailModal, setShowEmailModal] = useState(false);\r\n  const [adminEmail, setAdminEmail] = useState('');\r\n\r\n  // Initialize society filter from URL parameters\r\n  useEffect(() => {\r\n    if (initialSocietyId) {\r\n      // Find society by society_id string (e.g., \"S101\")\r\n      const society = societiesData.find(s => s.society_id === initialSocietyId);\r\n      \r\n      if (society && !societyFilter.includes(society.id.toString())) {\r\n        setSocietyFilter([society.id.toString()]);\r\n        \r\n        // Show success message with society name and date range if present\r\n        if (initialSocietyName) {\r\n          let message = `Filter Applied: ${decodeURIComponent(initialSocietyName)}`;\r\n          \r\n          if (initialFromDate && initialToDate) {\r\n            message += ` • Date: ${initialFromDate} to ${initialToDate}`;\r\n          }\r\n          \r\n          setSuccessMessage(message);\r\n          setTimeout(() => setSuccessMessage(''), 5000);\r\n        }\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [societiesData]); // Run when societies data loads\r\n\r\n  // Initialize machine filter from URL parameters\r\n  useEffect(() => {\r\n    if (initialMachineFilter && machinesData.length > 0) {\r\n      // Find machine by machineId string (e.g., \"m103\")\r\n      const machine = machinesData.find(m => m.machineId === initialMachineFilter);\r\n      \r\n      if (machine && !machineFilter.includes(machine.id.toString())) {\r\n        console.log('Setting machineFilter to machine:', machine.machineId, 'ID:', machine.id);\r\n        setMachineFilter([machine.id.toString()]);\r\n        \r\n        // Show success message\r\n        setSuccessMessage(`Filter Applied: Machine ${machine.machineId}`);\r\n        setTimeout(() => setSuccessMessage(''), 5000);\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [machinesData]); // Run when machines data loads\r\n\r\n  // Initialize date filters from URL parameters\r\n  useEffect(() => {\r\n    if (initialFromDate) {\r\n      console.log('Setting dateFromFilter to:', initialFromDate);\r\n      setDateFromFilter(initialFromDate);\r\n    }\r\n    \r\n    if (initialToDate) {\r\n      console.log('Setting dateToFilter to:', initialToDate);\r\n      setDateToFilter(initialToDate);\r\n    }\r\n    \r\n    if (initialBmcFilter) {\r\n      console.log('Setting bmcFilter to:', initialBmcFilter);\r\n      setBmcFilter([initialBmcFilter]);\r\n    }\r\n  }, [initialFromDate, initialToDate, initialBmcFilter]); // Re-run when props change\r\n\r\n  // Fetch admin email\r\n  useEffect(() => {\r\n    const fetchAdminEmail = async () => {\r\n      try {\r\n        const token = localStorage.getItem('authToken');\r\n        if (!token) return;\r\n\r\n        const response = await fetch('/api/user/profile', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          const email = data.email || '';\r\n          setAdminEmail(email);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching admin email:', error);\r\n      }\r\n    };\r\n\r\n    fetchAdminEmail();\r\n  }, []);\r\n\r\n  // Debug: Log filter states\r\n  useEffect(() => {\r\n    console.log('Current filter states:', {\r\n      dateFromFilter,\r\n      dateToFilter,\r\n      societyFilter,\r\n      recordsCount: records.length,\r\n      filteredCount: filteredRecords.length\r\n    });\r\n  }, [dateFromFilter, dateToFilter, societyFilter, records.length, filteredRecords.length]);\r\n\r\n  useEffect(() => {\r\n    const fetchDairiesAndBmcs = async () => {\r\n      try {\r\n        const token = localStorage.getItem('authToken');\r\n        if (!token) return;\r\n\r\n        // Fetch dairies\r\n        const dairyRes = await fetch('/api/user/dairy', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (dairyRes.ok) {\r\n          const dairyData = await dairyRes.json();\r\n          setDairies(dairyData.data || []);\r\n        }\r\n\r\n        // Fetch BMCs\r\n        const bmcRes = await fetch('/api/user/bmc', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (bmcRes.ok) {\r\n          const bmcData = await bmcRes.json();\r\n          setBmcs(bmcData.data || []);\r\n        }\r\n\r\n        // Fetch Societies\r\n        const societyRes = await fetch('/api/user/society', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (societyRes.ok) {\r\n          const societyData = await societyRes.json();\r\n          setSocietiesData(societyData.data || []);\r\n        }\r\n\r\n        // Fetch Machines\r\n        const machineRes = await fetch('/api/user/machine', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (machineRes.ok) {\r\n          const machineData = await machineRes.json();\r\n          setMachinesData(machineData.data || []);\r\n        }\r\n\r\n        // Fetch Farmers\r\n        const farmerRes = await fetch('/api/user/farmer', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (farmerRes.ok) {\r\n          const farmerData = await farmerRes.json();\r\n          setFarmersData(farmerData.data || []);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching dairies/BMCs/societies/machines/farmers:', error);\r\n      }\r\n    };\r\n\r\n    fetchDairiesAndBmcs();\r\n  }, []);\r\n  \r\n  // Filter dairies to only show those with collection records\r\n  const dairiesWithCollections = useMemo(() => {\r\n    if (!dairies.length || !records.length) return dairies;\r\n    \r\n    const dairyIdsInCollections = new Set(\r\n      records\r\n        .filter(r => r.dairy_id)\r\n        .map(r => r.dairy_id)\r\n    );\r\n    \r\n    return dairies.filter(dairy => dairyIdsInCollections.has(dairy.id));\r\n  }, [dairies, records]);\r\n  \r\n  // Filter BMCs to only show those with collection records\r\n  const bmcsWithCollections = useMemo(() => {\r\n    if (!bmcs.length || !records.length) return bmcs;\r\n    \r\n    const bmcIdsInCollections = new Set(\r\n      records\r\n        .filter(r => r.bmc_id)\r\n        .map(r => r.bmc_id)\r\n    );\r\n    \r\n    return bmcs.filter(bmc => bmcIdsInCollections.has(bmc.id));\r\n  }, [bmcs, records]);\r\n  \r\n  // Extract unique societies and machines from records (memoized)\r\n  const societies = useMemo(() => {\r\n    if (!records.length) return [];\r\n    \r\n    // Get unique society IDs from collection records\r\n    const societyIdsInCollections = new Set(\r\n      records\r\n        .filter(r => r.society_id)\r\n        .map(r => r.society_id)\r\n    );\r\n    \r\n    // If we have fetched society data, filter it to only show societies with collections\r\n    if (societiesData.length > 0) {\r\n      return societiesData.filter(society => \r\n        societyIdsInCollections.has(society.society_id)\r\n      );\r\n    }\r\n    \r\n    // Fallback to extracting from records if API data not available\r\n    const uniqueSocieties = new Map<string, { society_id: string; society_name: string }>();\r\n    records.forEach(r => {\r\n      if (r.society_id && !uniqueSocieties.has(r.society_id)) {\r\n        uniqueSocieties.set(r.society_id, {\r\n          society_id: r.society_id,\r\n          society_name: r.society_name || r.society_id\r\n        });\r\n      }\r\n    });\r\n    return Array.from(uniqueSocieties.values()).map((society, index) => ({\r\n      id: index + 1,\r\n      name: society.society_name,\r\n      society_id: society.society_id,\r\n      bmc_id: undefined\r\n    }));\r\n  }, [records, societiesData]);\r\n  \r\n  const machines = useMemo(() => {\r\n    if (!machinesData.length || !records.length) return machinesData;\r\n    \r\n    const machineIdsInCollections = new Set(\r\n      records\r\n        .filter(r => r.machine_id)\r\n        .map(r => r.machine_id)\r\n    );\r\n    \r\n    const filteredMachines = machinesData.filter(machine => machineIdsInCollections.has(machine.machineId));\r\n    \r\n    // Add collection counts to machines\r\n    return filteredMachines.map(machine => ({\r\n      ...machine,\r\n      collectionCount: records.filter(r => r.machine_id === machine.machineId).length\r\n    }));\r\n  }, [machinesData, records]);\r\n  \r\n  const farmers = useMemo(() => {\r\n    if (!farmersData.length || !records.length) return farmersData;\r\n    \r\n    const farmerIdsInCollections = new Set(\r\n      records\r\n        .filter(r => r.farmer_id)\r\n        .map(r => r.farmer_id)\r\n    );\r\n    \r\n    return farmersData.filter(farmer => farmerIdsInCollections.has(farmer.farmerId));\r\n  }, [farmersData, records]);\r\n\r\n  // Clear all filters\r\n  const clearFilters = () => {\r\n    setShiftFilter('all');\r\n    setDairyFilter([]);\r\n    setBmcFilter([]);\r\n    setSocietyFilter([]);\r\n    setMachineFilter([]);\r\n    setFarmerFilter([]);\r\n    setDateFilter('');\r\n    setDateFromFilter('');\r\n    setDateToFilter('');\r\n    setChannelFilter('all');\r\n    setSearchQuery('');\r\n    \r\n    // Clear header search\r\n    const event = new CustomEvent('globalSearch', {\r\n      detail: { query: '' }\r\n    });\r\n    window.dispatchEvent(event);\r\n  };\r\n\r\n  // Delete record handler\r\n  const handleDeleteClick = (recordId: number) => {\r\n    setRecordToDelete(recordId);\r\n    setDeleteDialogOpen(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = async (password: string) => {\r\n    if (!recordToDelete) return;\r\n\r\n    setDeleting(true);\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/reports/collections/delete', {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          recordId: recordToDelete,\r\n          password\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to delete record');\r\n      }\r\n\r\n      // Show success message\r\n      setSuccessMessage('Collection record deleted successfully');\r\n      setTimeout(() => setSuccessMessage(''), 5000);\r\n      \r\n      // Refresh the records\r\n      fetchData();\r\n    } catch (error) {\r\n      console.error('Delete error:', error);\r\n      setErrorMessage(error instanceof Error ? error.message : 'Failed to delete record');\r\n      setTimeout(() => setErrorMessage(''), 5000);\r\n      throw error; // Re-throw to be handled by the dialog\r\n    } finally {\r\n      setDeleting(false);\r\n      setRecordToDelete(null);\r\n    }\r\n  };\r\n\r\n  // Bulk selection handlers\r\n  const handleSelectAll = () => {\r\n    if (selectAll) {\r\n      setSelectedRecords(new Set());\r\n      setSelectAll(false);\r\n    } else {\r\n      setSelectedRecords(new Set(filteredRecords.map(r => r.id)));\r\n      setSelectAll(true);\r\n    }\r\n  };\r\n\r\n  const handleSelectOne = (recordId: number) => {\r\n    const newSelected = new Set(selectedRecords);\r\n    if (newSelected.has(recordId)) {\r\n      newSelected.delete(recordId);\r\n    } else {\r\n      newSelected.add(recordId);\r\n    }\r\n    setSelectedRecords(newSelected);\r\n    setSelectAll(newSelected.size === filteredRecords.length && filteredRecords.length > 0);\r\n  };\r\n\r\n  const handleClearSelection = () => {\r\n    setSelectedRecords(new Set());\r\n    setSelectAll(false);\r\n  };\r\n\r\n  const handleBulkDeleteClick = () => {\r\n    if (selectedRecords.size === 0) return;\r\n    setShowBulkDeleteConfirm(true);\r\n  };\r\n\r\n  const handleBulkDeleteConfirm = async (password: string) => {\r\n    setShowBulkDeleteConfirm(false);\r\n    setIsDeletingBulk(true);\r\n    \r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const recordIds = Array.from(selectedRecords);\r\n      \r\n      // Delete records in parallel with password verification\r\n      const deletePromises = recordIds.map(recordId =>\r\n        fetch('/api/user/reports/collections/delete', {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n          },\r\n          body: JSON.stringify({ recordId, password })\r\n        }).then(async (res) => {\r\n          if (!res.ok) {\r\n            const error = await res.json();\r\n            throw new Error(error.message || 'Delete failed');\r\n          }\r\n          return res.json();\r\n        })\r\n      );\r\n\r\n      const results = await Promise.allSettled(deletePromises);\r\n      const successful = results.filter(r => r.status === 'fulfilled').length;\r\n      const failed = results.filter(r => r.status === 'rejected').length;\r\n\r\n      if (successful > 0) {\r\n        setSuccessMessage(`Successfully deleted ${successful} record(s)${failed > 0 ? `. ${failed} failed.` : ''}`);\r\n        setTimeout(() => setSuccessMessage(''), 5000);\r\n        fetchData();\r\n        handleClearSelection();\r\n      } else {\r\n        // Get error message from first failed promise\r\n        const firstError = results.find(r => r.status === 'rejected') as PromiseRejectedResult;\r\n        const errorMsg = firstError?.reason?.message || 'Failed to delete selected records';\r\n        setErrorMessage(errorMsg);\r\n        setTimeout(() => setErrorMessage(''), 5000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Bulk delete error:', error);\r\n      setErrorMessage(error instanceof Error ? error.message : 'Failed to delete selected records');\r\n      setTimeout(() => setErrorMessage(''), 5000);\r\n    } finally {\r\n      setIsDeletingBulk(false);\r\n      setBulkDeletePassword('');\r\n    }\r\n  };\r\n\r\n  // Calculate statistics\r\n  const calculateStats = useCallback((data: CollectionRecord[]) => {\r\n    const totalQuantity = data.reduce((sum, record) => sum + parseFloat(record.quantity || '0'), 0);\r\n    const totalAmount = data.reduce((sum, record) => sum + parseFloat(record.total_amount || '0'), 0);\r\n    \r\n    // Calculate simple average rate from rate_per_liter column\r\n    const totalRate = data.reduce((sum, record) => sum + parseFloat(record.rate_per_liter || '0'), 0);\r\n    const averageRate = data.length > 0 ? totalRate / data.length : 0;\r\n    \r\n    // Calculate weighted averages: Σ(quantity × value) / Σquantity\r\n    const sumQuantityFat = data.reduce((sum, record) => {\r\n      const qty = parseFloat(record.quantity || '0');\r\n      const fat = parseFloat(record.fat_percentage || '0');\r\n      return sum + (qty * fat);\r\n    }, 0);\r\n    const sumQuantitySnf = data.reduce((sum, record) => {\r\n      const qty = parseFloat(record.quantity || '0');\r\n      const snf = parseFloat(record.snf_percentage || '0');\r\n      return sum + (qty * snf);\r\n    }, 0);\r\n    const sumQuantityClr = data.reduce((sum, record) => {\r\n      const qty = parseFloat(record.quantity || '0');\r\n      const clr = parseFloat(record.clr_value || '0');\r\n      return sum + (qty * clr);\r\n    }, 0);\r\n    \r\n    const weightedFat = totalQuantity > 0 ? sumQuantityFat / totalQuantity : 0;\r\n    const weightedSnf = totalQuantity > 0 ? sumQuantitySnf / totalQuantity : 0;\r\n    const weightedClr = totalQuantity > 0 ? sumQuantityClr / totalQuantity : 0;\r\n\r\n    setStats({\r\n      totalCollections: data.length,\r\n      totalQuantity: parseFloat(totalQuantity.toFixed(2)),\r\n      totalAmount: parseFloat(totalAmount.toFixed(2)),\r\n      averageRate: parseFloat(averageRate.toFixed(2)),\r\n      weightedFat: parseFloat(weightedFat.toFixed(2)),\r\n      weightedSnf: parseFloat(weightedSnf.toFixed(2)),\r\n      weightedClr: parseFloat(weightedClr.toFixed(2))\r\n    });\r\n  }, []);\r\n\r\n  // Fetch collection data\r\n  const fetchData = useCallback(async (showLoading = true) => {\r\n    const token = localStorage.getItem('authToken');\r\n    if (!token) return;\r\n\r\n    try {\r\n      if (showLoading) setLoading(true);\r\n      const response = await fetch('/api/user/reports/collections', {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        \r\n        // Only update state if data has changed to prevent unnecessary re-renders\r\n        setRecords(prevRecords => {\r\n          const hasChanged = JSON.stringify(prevRecords) !== JSON.stringify(data);\r\n          if (hasChanged) {\r\n            calculateStats(data);\r\n            return data;\r\n          }\r\n          return prevRecords;\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching collection data:', error);\r\n    } finally {\r\n      if (showLoading) setLoading(false);\r\n    }\r\n  }, [calculateStats]);\r\n\r\n  useEffect(() => {\r\n    fetchData(true);\r\n    \r\n    // Auto-refresh every 1 second without showing loading\r\n    const intervalId = setInterval(() => {\r\n      fetchData(false);\r\n    }, 1000);\r\n    \r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  // Filter records with multi-field search (matching machine management pattern)\r\n  useEffect(() => {\r\n    let filtered = records;\r\n\r\n    // Dairy filter (now array-based)\r\n    if (dairyFilter.length > 0) {\r\n      const selectedDairyIds = dairyFilter.map(id => {\r\n        const dairy = dairies.find(d => d.id.toString() === id);\r\n        return dairy?.id;\r\n      }).filter(Boolean) as number[];\r\n      if (selectedDairyIds.length > 0) {\r\n        filtered = filtered.filter(record => record.dairy_id !== undefined && selectedDairyIds.includes(record.dairy_id));\r\n      }\r\n    }\r\n\r\n    // BMC filter (now array-based)\r\n    if (bmcFilter.length > 0) {\r\n      const selectedBmcIds = bmcFilter.map(id => {\r\n        const bmc = bmcs.find(b => b.id.toString() === id);\r\n        return bmc?.id;\r\n      }).filter(Boolean) as number[];\r\n      if (selectedBmcIds.length > 0) {\r\n        filtered = filtered.filter(record => record.bmc_id !== undefined && selectedBmcIds.includes(record.bmc_id));\r\n      }\r\n    }\r\n\r\n    // Status/Shift filter\r\n    if (shiftFilter !== 'all') {\r\n      if (shiftFilter === 'morning') {\r\n        filtered = filtered.filter(record => ['MR', 'MX', 'morning'].includes(record.shift_type));\r\n      } else if (shiftFilter === 'evening') {\r\n        filtered = filtered.filter(record => ['EV', 'EX', 'evening'].includes(record.shift_type));\r\n      } else {\r\n        filtered = filtered.filter(record => record.shift_type === shiftFilter);\r\n      }\r\n    }\r\n\r\n    // Society filter\r\n    if (Array.isArray(societyFilter) && societyFilter.length > 0) {\r\n      const selectedSocietyIds = societyFilter.map(id => {\r\n        const society = societies.find(s => s.id.toString() === id);\r\n        return society?.society_id;\r\n      }).filter(Boolean);\r\n      if (selectedSocietyIds.length > 0) {\r\n        filtered = filtered.filter(record => selectedSocietyIds.includes(record.society_id));\r\n      }\r\n    }\r\n\r\n    // Machine filter\r\n    if (machineFilter.length > 0) {\r\n      const selectedMachineIds = machineFilter\r\n        .map(id => machines.find(m => m.id.toString() === id)?.machineId)\r\n        .filter(Boolean) as string[];\r\n      if (selectedMachineIds.length > 0) {\r\n        filtered = filtered.filter(record => selectedMachineIds.includes(record.machine_id));\r\n      }\r\n    }\r\n\r\n    // Farmer filter\r\n    if (farmerFilter.length > 0) {\r\n      const selectedFarmerIds = farmerFilter\r\n        .map(id => farmers.find(f => f.id.toString() === id)?.farmerId)\r\n        .filter(Boolean) as string[];\r\n      if (selectedFarmerIds.length > 0) {\r\n        filtered = filtered.filter(record => selectedFarmerIds.includes(record.farmer_id));\r\n      }\r\n    }\r\n\r\n    // Channel filter\r\n    if (channelFilter !== 'all') {\r\n      filtered = filtered.filter(record => {\r\n        const displayChannel = getChannelDisplay(record.channel);\r\n        return displayChannel === channelFilter;\r\n      });\r\n    }\r\n\r\n    // Date filter\r\n    if (dateFilter) {\r\n      filtered = filtered.filter(record => record.collection_date === dateFilter);\r\n    }\r\n\r\n    // Date range filter\r\n    if (dateFromFilter) {\r\n      filtered = filtered.filter(record => record.collection_date >= dateFromFilter);\r\n    }\r\n    if (dateToFilter) {\r\n      filtered = filtered.filter(record => record.collection_date <= dateToFilter);\r\n    }\r\n\r\n    // Multi-field search across collection details (matching machine management pattern)\r\n    if (combinedSearch) {\r\n      const searchLower = combinedSearch.toLowerCase();\r\n      filtered = filtered.filter(record => {\r\n        // Get display value for shift\r\n        const shiftDisplay = ['MR', 'MX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'morning'\r\n          ? 'Morning' \r\n          : ['EV', 'EX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'evening'\r\n          ? 'Evening' \r\n          : record.shift_type;\r\n        \r\n        return [\r\n          record.farmer_id,\r\n          record.farmer_name,\r\n          record.society_id,\r\n          record.society_name,\r\n          record.bmc_name,\r\n          record.dairy_name,\r\n          record.machine_id,\r\n          record.machine_type,\r\n          record.machine_version,\r\n          record.channel,\r\n          getChannelDisplay(record.channel),\r\n          record.collection_date,\r\n          record.collection_time,\r\n          record.shift_type,\r\n          shiftDisplay,\r\n          record.quantity,\r\n          record.fat_percentage,\r\n          record.snf_percentage,\r\n          record.clr_value,\r\n          record.protein_percentage,\r\n          record.lactose_percentage,\r\n          record.salt_percentage,\r\n          record.water_percentage,\r\n          record.temperature,\r\n          record.rate_per_liter,\r\n          record.total_amount,\r\n          record.bonus\r\n        ].some(field =>\r\n          field?.toString().toLowerCase().includes(searchLower)\r\n        );\r\n      });\r\n    }\r\n\r\n    setFilteredRecords(filtered);\r\n    calculateStats(filtered);\r\n  }, [globalSearch, searchQuery, dateFilter, dateFromFilter, dateToFilter, shiftFilter, channelFilter, societyFilter, machineFilter, farmerFilter, dairyFilter, bmcFilter, records, societies, machines, farmers, dairies, bmcs, calculateStats]);\r\n\r\n  // Export to CSV\r\n  const exportToCSV = () => {\r\n    if (filteredRecords.length === 0) return;\r\n\r\n    const dateRange = dateFromFilter && dateToFilter \r\n      ? `${dateFromFilter} To ${dateToFilter}`\r\n      : dateFilter || 'All Dates';\r\n    const currentDateTime = new Date().toLocaleString('en-IN', { \r\n      year: 'numeric', month: '2-digit', day: '2-digit', \r\n      hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false \r\n    });\r\n\r\n    // Detailed data rows\r\n    const dataRows = filteredRecords.map(record => [\r\n      record.collection_date,\r\n      record.collection_time,\r\n      record.channel,\r\n      record.shift_type,\r\n      `${record.machine_id} (${record.machine_type})`,\r\n      `${record.society_name} (${record.society_id})`,\r\n      record.farmer_id,\r\n      record.farmer_name,\r\n      record.fat_percentage,\r\n      record.snf_percentage,\r\n      record.clr_value,\r\n      record.water_percentage,\r\n      record.rate_per_liter,\r\n      record.quantity,\r\n      record.total_amount,\r\n      record.bonus\r\n    ]);\r\n\r\n    const csvContent = [\r\n      'Admin Report - LactoConnect Milk Collection System',\r\n      `Date From ${dateRange}`,\r\n      '',\r\n      'DETAILED COLLECTION DATA',\r\n      '',\r\n      'Date,Time,Channel,Shift,Machine,Society,Farmer ID,Farmer Name,Fat (%),SNF (%),CLR,Water (%),Rate,Quantity (L),Total Amount,Incentive',\r\n      ...dataRows.map(row => row.join(',')),\r\n      '',\r\n      '',\r\n      'OVERALL SUMMARY',\r\n      `Total Collections:,${stats.totalCollections}`,\r\n      `Total Quantity (L):,${stats.totalQuantity.toFixed(2)}`,\r\n      `Overall Weighted Fat (%):,${stats.weightedFat.toFixed(2)}`,\r\n      `Overall Weighted SNF (%):,${stats.weightedSnf.toFixed(2)}`,\r\n      `Overall Weighted CLR:,${stats.weightedClr.toFixed(2)}`,\r\n      `Total Amount (Rs):,${stats.totalAmount.toFixed(2)}`,\r\n      `Overall Average Rate (Rs/L):,${stats.averageRate.toFixed(2)}`,\r\n      '',\r\n      'Thank you',\r\n      'Poornasree Equipments',\r\n      `Generated on: ${currentDateTime}`\r\n    ].join('\\n');\r\n\r\n    const blob = new Blob([csvContent], { type: 'text/csv' });\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `collection-report-${new Date().toISOString().split('T')[0]}.csv`;\r\n    a.click();\r\n  };\r\n\r\n  // Export to PDF\r\n  const exportToPDF = () => {\r\n    if (filteredRecords.length === 0) return;\r\n\r\n    const doc = new jsPDF({ orientation: 'landscape', unit: 'mm', format: 'a4' });\r\n    const dateRange = dateFromFilter && dateToFilter \r\n      ? `${dateFromFilter} To ${dateToFilter}`\r\n      : dateFilter \r\n      ? `${dateFilter} To ${dateFilter}`\r\n      : 'All Dates';\r\n\r\n    // Add Logo\r\n    const logoPath = '/fulllogo.png';\r\n    doc.addImage(logoPath, 'PNG', 14, 8, 0, 12);\r\n\r\n    // Logo and Header\r\n    doc.setFontSize(14);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('Daily Collection Report - LactoConnect Milk Collection System', 148.5, 15, { align: 'center' });\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(`Date From ${dateRange}`, 148.5, 21, { align: 'center' });\r\n    \r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('DETAILED COLLECTION DATA', 148.5, 28, { align: 'center' });\r\n\r\n    // Detailed Data Table with SI No\r\n    const tableData = filteredRecords.map((record, index) => [\r\n      (index + 1).toString(),\r\n      record.collection_date,\r\n      record.collection_time,\r\n      getChannelDisplay(record.channel),\r\n      record.shift_type,\r\n      `${record.machine_id} (${record.machine_type})`,\r\n      `${record.society_name} (${record.society_id})`,\r\n      record.farmer_id,\r\n      record.farmer_name || '',\r\n      record.fat_percentage,\r\n      record.snf_percentage,\r\n      record.clr_value,\r\n      record.water_percentage,\r\n      record.rate_per_liter,\r\n      record.quantity,\r\n      record.total_amount,\r\n      record.bonus\r\n    ]);\r\n\r\n    autoTable(doc, {\r\n      startY: 32,\r\n      head: [['SI No', 'Date', 'Time', 'Channel', 'Shift', 'Machine', 'Society', 'Farmer ID', 'Farmer Name', 'Fat (%)', 'SNF (%)', 'CLR', 'Water (%)', 'Rate', 'Quantity (L)', 'Total Amount', 'Incentive']],\r\n      body: tableData,\r\n      theme: 'grid',\r\n      styles: { fontSize: 6, cellPadding: 1, halign: 'center' },\r\n      headStyles: { fillColor: [255, 255, 255], textColor: [0, 0, 0], fontStyle: 'bold', fontSize: 7, lineWidth: 0.5, lineColor: [0, 0, 0] },\r\n      bodyStyles: { lineWidth: 0.3, lineColor: [200, 200, 200] },\r\n      columnStyles: {\r\n        0: { cellWidth: 10 },\r\n        8: { halign: 'left' }\r\n      }\r\n    });\r\n\r\n    // Summary Section\r\n    const finalY = doc.lastAutoTable.finalY + 8;\r\n    \r\n    // Left side - Weighted Averages\r\n    doc.setFontSize(11);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('WEIGHTED AVERAGES', 14, finalY);\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    let leftY = finalY + 6;\r\n    doc.text(`Weighted Fat      : ${stats.weightedFat.toFixed(2)}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Weighted SNF      : ${stats.weightedSnf.toFixed(2)}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Weighted CLR      : ${stats.weightedClr.toFixed(2)}`, 14, leftY);\r\n    \r\n    leftY += 8;\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('OVERALL SUMMARY', 14, leftY);\r\n    doc.setFont('helvetica', 'normal');\r\n    leftY += 6;\r\n    doc.text(`Total Collections  : ${stats.totalCollections}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Total Quantity (L) : ${stats.totalQuantity.toFixed(2)}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Total Amount       : ${stats.totalAmount.toFixed(2)}`, 14, leftY);\r\n\r\n    // Right side - Report Notes\r\n    doc.setFontSize(11);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('REPORT NOTES', 283, finalY, { align: 'right' });\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    let rightY = finalY + 6;\r\n    doc.text('Prepared by: POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n    rightY += 5;\r\n    doc.text('Contact: marketing@poornasree.com', 283, rightY, { align: 'right' });\r\n    \r\n    rightY += 8;\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n    doc.setFont('helvetica', 'normal');\r\n    rightY += 5;\r\n    doc.text('Thank you for using LactoConnect', 283, rightY, { align: 'right' });\r\n    rightY += 5;\r\n    doc.text('For support, visit: www.poornasree.com', 283, rightY, { align: 'right' });\r\n\r\n    doc.save(`collection-report-${new Date().toISOString().split('T')[0]}.pdf`);\r\n  };\r\n\r\n  // Send email with CSV and PDF attachments\r\n  const handleSendEmail = async (email: string) => {\r\n    if (!email || !email.includes('@')) {\r\n      throw new Error('Please enter a valid email address');\r\n    }\r\n\r\n    try {\r\n      // Generate CSV content\r\n      const dateRange = dateFromFilter && dateToFilter \r\n        ? `${dateFromFilter} To ${dateToFilter}`\r\n        : dateFilter || 'All Dates';\r\n      const currentDateTime = new Date().toLocaleString('en-IN', { \r\n        year: 'numeric', month: '2-digit', day: '2-digit', \r\n        hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false \r\n      });\r\n\r\n      const dataRows = filteredRecords.map(record => [\r\n        record.collection_date,\r\n        record.collection_time,\r\n        record.channel,\r\n        record.shift_type,\r\n        `${record.machine_id} (${record.machine_type})`,\r\n        record.society_name || '',\r\n        record.farmer_id || '',\r\n        record.farmer_name || '',\r\n        record.fat_percentage,\r\n        record.snf_percentage,\r\n        record.clr_value,\r\n        record.water_percentage,\r\n        record.rate_per_liter,\r\n        record.quantity,\r\n        record.total_amount,\r\n        record.bonus\r\n      ]);\r\n\r\n      const csvContent = [\r\n        ['POORNASREE EQUIPMENTS MILK COLLECTION REPORT'],\r\n        ['Admin Report with Weighted Averages'],\r\n        [],\r\n        ['Report Generated:', currentDateTime],\r\n        ['Date Range:', dateRange],\r\n        ['Total Collections:', stats.totalCollections],\r\n        ['Total Quantity (L):', stats.totalQuantity.toFixed(2)],\r\n        ['Total Amount (₹):', stats.totalAmount.toFixed(2)],\r\n        ['Average Rate (₹/L):', stats.averageRate.toFixed(2)],\r\n        ['Weighted FAT (%):', stats.weightedFat.toFixed(2)],\r\n        ['Weighted SNF (%):', stats.weightedSnf.toFixed(2)],\r\n        ['Weighted CLR:', stats.weightedClr.toFixed(2)],\r\n        [],\r\n        ['Date', 'Time', 'Channel', 'Shift', 'Machine', 'Society', 'Farmer ID', 'Farmer Name', 'Fat (%)', 'SNF (%)', 'CLR', 'Water (%)', 'Rate (₹/L)', 'Quantity (L)', 'Total Amount (₹)', 'Incentive'],\r\n        ...dataRows\r\n      ].map(row => row.join(',')).join('\\n');\r\n\r\n      // Generate PDF as base64 - matching current PDF design exactly\r\n      const doc = new jsPDF({ orientation: 'landscape', unit: 'mm', format: 'a4' });\r\n      \r\n      // Add Logo (same as current PDF)\r\n      const logoPath = '/fulllogo.png';\r\n      doc.addImage(logoPath, 'PNG', 14, 8, 0, 12);\r\n\r\n      // Logo and Header (same as current PDF)\r\n      doc.setFontSize(14);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('Daily Collection Report - LactoConnect Milk Collection System', 148.5, 15, { align: 'center' });\r\n      doc.setFontSize(9);\r\n      doc.setFont('helvetica', 'normal');\r\n      doc.text(`Date From ${dateRange}`, 148.5, 21, { align: 'center' });\r\n      \r\n      doc.setFontSize(10);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('DETAILED COLLECTION DATA', 148.5, 28, { align: 'center' });\r\n\r\n      // Detailed Data Table with SI No (same as current PDF)\r\n      const tableData = filteredRecords.map((record, index) => [\r\n        (index + 1).toString(),\r\n        record.collection_date,\r\n        record.collection_time,\r\n        getChannelDisplay(record.channel),\r\n        record.shift_type,\r\n        `${record.machine_id} (${record.machine_type})`,\r\n        `${record.society_name} (${record.society_id})`,\r\n        record.farmer_id,\r\n        record.farmer_name || '',\r\n        record.fat_percentage,\r\n        record.snf_percentage,\r\n        record.clr_value,\r\n        record.water_percentage,\r\n        record.rate_per_liter,\r\n        record.quantity,\r\n        record.total_amount,\r\n        record.bonus\r\n      ]);\r\n\r\n      autoTable(doc, {\r\n        startY: 32,\r\n        head: [['SI No', 'Date', 'Time', 'Channel', 'Shift', 'Machine', 'Society', 'Farmer ID', 'Farmer Name', 'Fat (%)', 'SNF (%)', 'CLR', 'Water (%)', 'Rate', 'Quantity (L)', 'Total Amount', 'Incentive']],\r\n        body: tableData,\r\n        theme: 'grid',\r\n        styles: { fontSize: 6, cellPadding: 1, halign: 'center' },\r\n        headStyles: { fillColor: [255, 255, 255], textColor: [0, 0, 0], fontStyle: 'bold', fontSize: 7, lineWidth: 0.5, lineColor: [0, 0, 0] },\r\n        bodyStyles: { lineWidth: 0.3, lineColor: [200, 200, 200] },\r\n        columnStyles: {\r\n          0: { cellWidth: 10 },\r\n          8: { halign: 'left' }\r\n        }\r\n      });\r\n\r\n      // Summary Section (same as current PDF)\r\n      const finalY = doc.lastAutoTable.finalY + 8;\r\n      \r\n      // Left side - Weighted Averages\r\n      doc.setFontSize(11);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('WEIGHTED AVERAGES', 14, finalY);\r\n      doc.setFontSize(9);\r\n      doc.setFont('helvetica', 'normal');\r\n      let leftY = finalY + 6;\r\n      doc.text(`Weighted Fat      : ${stats.weightedFat.toFixed(2)}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Weighted SNF      : ${stats.weightedSnf.toFixed(2)}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Weighted CLR      : ${stats.weightedClr.toFixed(2)}`, 14, leftY);\r\n      \r\n      leftY += 8;\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('OVERALL SUMMARY', 14, leftY);\r\n      doc.setFont('helvetica', 'normal');\r\n      leftY += 6;\r\n      doc.text(`Total Collections  : ${stats.totalCollections}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Total Quantity (L) : ${stats.totalQuantity.toFixed(2)}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Total Amount       : ${stats.totalAmount.toFixed(2)}`, 14, leftY);\r\n\r\n      // Right side - Report Notes\r\n      doc.setFontSize(11);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('REPORT NOTES', 283, finalY, { align: 'right' });\r\n      doc.setFontSize(9);\r\n      doc.setFont('helvetica', 'normal');\r\n      let rightY = finalY + 6;\r\n      doc.text('Prepared by: POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n      rightY += 5;\r\n      doc.text('Contact: marketing@poornasree.com', 283, rightY, { align: 'right' });\r\n      \r\n      rightY += 8;\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n      doc.setFont('helvetica', 'normal');\r\n      rightY += 5;\r\n      doc.text('Thank you for using LactoConnect', 283, rightY, { align: 'right' });\r\n      rightY += 5;\r\n      doc.text('For support, visit: www.poornasree.com', 283, rightY, { align: 'right' });\r\n\r\n      const pdfBase64 = doc.output('datauristring').split(',')[1];\r\n\r\n      // Send email with attachments\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/reports/send-email', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          email: email,\r\n          csvContent,\r\n          pdfContent: pdfBase64,\r\n          reportType: 'Collection Report',\r\n          dateRange,\r\n          stats\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        throw new Error(errorData.error || 'Failed to send email');\r\n      }\r\n\r\n      setSuccessMessage(`Report sent successfully to ${email}`);\r\n      setTimeout(() => setSuccessMessage(''), 5000);\r\n    } catch (error) {\r\n      console.error('Error sending email:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <FlowerSpinner size={48} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Statistics Cards */}\r\n      <div className=\"grid grid-cols-7 gap-3\">\r\n        <StatsCard\r\n          title=\"Total Collections\"\r\n          value={stats.totalCollections}\r\n          icon={<Droplet className=\"w-full h-full\" />}\r\n          color=\"blue\"\r\n        />\r\n        <StatsCard\r\n          title=\"Total Quantity (L)\"\r\n          value={stats.totalQuantity}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"green\"\r\n        />\r\n        <StatsCard\r\n          title=\"Total Amount (₹)\"\r\n          value={`₹${stats.totalAmount.toFixed(2)}`}\r\n          icon={<TrendingUp className=\"w-full h-full\" />}\r\n          color=\"yellow\"\r\n        />\r\n        <StatsCard\r\n          title=\"Avg Rate (₹/L)\"\r\n          value={`₹${stats.averageRate.toFixed(2)}`}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"gray\"\r\n        />\r\n        <StatsCard\r\n          title=\"Weighted FAT (%)\"\r\n          value={stats.weightedFat.toFixed(2)}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"blue\"\r\n        />\r\n        <StatsCard\r\n          title=\"Weighted SNF (%)\"\r\n          value={stats.weightedSnf.toFixed(2)}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"green\"\r\n        />\r\n        <StatsCard\r\n          title=\"Weighted CLR\"\r\n          value={stats.weightedClr.toFixed(2)}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"red\"\r\n        />\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 sm:p-6\">\r\n        <div className=\"space-y-4\">\r\n          {/* Filter Info */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n              Showing {filteredRecords.length} of {records.length} records\r\n            </span>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={() => {\r\n                  clearFilters();\r\n                  fetchData();\r\n                }}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-psr-primary-600 text-white rounded-lg hover:bg-psr-primary-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <RefreshCw className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">Refresh</span>\r\n              </button>\r\n              <button\r\n                onClick={exportToCSV}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-psr-green-600 text-white rounded-lg hover:bg-psr-green-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <Download className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">CSV</span>\r\n              </button>\r\n              <button\r\n                onClick={exportToPDF}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <FileDown className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">PDF</span>\r\n              </button>\r\n              <button\r\n                onClick={() => setShowEmailModal(true)}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <Mail className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">Send Mail</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Filter Dropdown - All Filters Inside */}\r\n          <FilterDropdown\r\n            statusFilter={shiftFilter}\r\n            onStatusChange={setShiftFilter}\r\n            dairyFilter={dairyFilter}\r\n            onDairyChange={(value) => setDairyFilter(Array.isArray(value) ? value : [value])}\r\n            bmcFilter={bmcFilter}\r\n            onBmcChange={(value) => setBmcFilter(Array.isArray(value) ? value : [value])}\r\n            societyFilter={societyFilter}\r\n            onSocietyChange={(value) => setSocietyFilter(Array.isArray(value) ? value : [value])}\r\n            machineFilter={machineFilter}\r\n            onMachineChange={(value) => setMachineFilter(Array.isArray(value) ? value : [value])}\r\n            farmerFilter={farmerFilter}\r\n            onFarmerChange={(value) => setFarmerFilter(Array.isArray(value) ? value : [value])}\r\n            dairies={dairiesWithCollections}\r\n            bmcs={bmcsWithCollections}\r\n            societies={societies}\r\n            machines={machines}\r\n            farmers={farmers}\r\n            filteredCount={filteredRecords.length}\r\n            totalCount={records.length}\r\n            searchQuery={searchQuery}\r\n            onSearchChange={setSearchQuery}\r\n            icon={<Droplet className=\"w-5 h-5\" />}\r\n            dateFilter={dateFilter}\r\n            onDateChange={setDateFilter}\r\n            dateFromFilter={dateFromFilter}\r\n            onDateFromChange={setDateFromFilter}\r\n            dateToFilter={dateToFilter}\r\n            onDateToChange={setDateToFilter}\r\n            channelFilter={channelFilter}\r\n            onChannelChange={setChannelFilter}\r\n            showDateFilter\r\n            showChannelFilter\r\n            showShiftFilter\r\n            showMachineFilter\r\n            hideMainFilterButton={true}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Data Table */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden\">\r\n        <div className=\"overflow-auto max-h-[600px]\" tabIndex={0}>\r\n          <table className=\"w-auto min-w-full table-auto\">\r\n            <thead className=\"bg-gray-50 dark:bg-gray-700 sticky top-0 z-10\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectAll}\r\n                    onChange={handleSelectAll}\r\n                    className=\"w-4 h-4 text-emerald-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 cursor-pointer\"\r\n                  />\r\n                </th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Date & Time</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Farmer</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Society</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Machine</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Shift</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Channel</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Fat %</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">SNF %</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">CLR</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Protein %</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Lactose %</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Salt %</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Water %</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Temp (°C)</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Rate/L</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Bonus</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Qty (L)</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Amount</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n              {filteredRecords.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan={20} className=\"px-4 py-8 text-center text-gray-500 dark:text-gray-400\">\r\n                    No collection records found\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                filteredRecords.map((record) => (\r\n                  <tr key={record.id} className={`transition-colors ${\r\n                    selectedRecords.has(record.id)\r\n                      ? 'bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30'\r\n                      : 'hover:bg-gray-50 dark:hover:bg-gray-700'\r\n                  }`}>\r\n                    <td className=\"px-4 py-3 text-center\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedRecords.has(record.id)}\r\n                        onChange={() => handleSelectOne(record.id)}\r\n                        className=\"w-4 h-4 text-emerald-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 cursor-pointer\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                      <div>{highlightText(record.collection_date, combinedSearch)}</div>\r\n                      <div className=\"text-xs text-gray-500\">{record.collection_time}</div>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                      <div className=\"font-medium\">{highlightText(record.farmer_name, combinedSearch)}</div>\r\n                      <div className=\"text-xs text-gray-500\">ID: {highlightText(record.farmer_id, combinedSearch)}</div>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                      <div className=\"font-medium\">{highlightText(record.society_name, combinedSearch)}</div>\r\n                      <div className=\"text-xs text-gray-500\">ID: {highlightText(record.society_id, combinedSearch)}</div>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                      <div className=\"font-medium\">{highlightText(record.machine_id, combinedSearch)}</div>\r\n                      <div className=\"text-xs text-gray-500\">{highlightText(record.machine_type, combinedSearch)}</div>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center\">\r\n                      <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                        ['MR', 'MX', 'morning'].includes(record.shift_type?.toUpperCase() === 'MORNING' ? 'morning' : record.shift_type)\r\n                          ? 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400'\r\n                          : ['EV', 'EX', 'evening'].includes(record.shift_type?.toUpperCase() === 'EVENING' ? 'evening' : record.shift_type)\r\n                          ? 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400'\r\n                          : 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400'\r\n                      }`}>\r\n                        {highlightText(\r\n                          ['MR', 'MX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'morning'\r\n                            ? 'Morning' \r\n                            : ['EV', 'EX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'evening'\r\n                            ? 'Evening' \r\n                            : record.shift_type,\r\n                          combinedSearch\r\n                        )}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center\">\r\n                      <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                        getChannelDisplay(record.channel) === 'COW'\r\n                          ? 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400'\r\n                          : getChannelDisplay(record.channel) === 'BUFFALO'\r\n                          ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400'\r\n                          : 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400'\r\n                      }`}>\r\n                        {highlightText(getChannelDisplay(record.channel), combinedSearch)}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.fat_percentage).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.snf_percentage).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.clr_value).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.protein_percentage).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.lactose_percentage).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.salt_percentage).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.water_percentage).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.temperature).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">₹{highlightText(parseFloat(record.rate_per_liter).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">₹{highlightText(parseFloat(record.bonus).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center font-medium text-gray-900 dark:text-white\">{highlightText(parseFloat(record.quantity).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center font-medium text-green-600 dark:text-green-400\">\r\n                      ₹{highlightText(parseFloat(record.total_amount).toFixed(2), combinedSearch)}\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center\">\r\n                      <button\r\n                        onClick={() => handleDeleteClick(record.id)}\r\n                        className=\"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors\"\r\n                        title=\"Delete record\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Password Confirmation Dialog */}\r\n      <PasswordConfirmDialog\r\n        isOpen={deleteDialogOpen}\r\n        onClose={() => setDeleteDialogOpen(false)}\r\n        onConfirm={handleDeleteConfirm}\r\n        title=\"Delete Collection Record\"\r\n        message=\"Enter your admin password to confirm deletion. This action cannot be undone and will be logged for security purposes.\"\r\n      />\r\n\r\n      {/* Bulk Delete Password Confirmation Modal */}\r\n      <PasswordConfirmDialog\r\n        isOpen={showBulkDeleteConfirm}\r\n        onClose={() => {\r\n          setShowBulkDeleteConfirm(false);\r\n          setBulkDeletePassword('');\r\n        }}\r\n        onConfirm={handleBulkDeleteConfirm}\r\n        title={`Delete ${selectedRecords.size} Collection Record${selectedRecords.size > 1 ? 's' : ''}`}\r\n        message={`Enter your admin password to confirm deletion of ${selectedRecords.size} selected record(s). This action cannot be undone and will be logged for security purposes.`}\r\n      />\r\n\r\n      {/* Bulk Actions Toolbar */}\r\n      <BulkActionsToolbar\r\n        selectedCount={selectedRecords.size}\r\n        totalCount={filteredRecords.length}\r\n        onBulkDelete={handleBulkDeleteClick}\r\n        onClearSelection={handleClearSelection}\r\n        itemType=\"record\"\r\n        showStatusUpdate={false}\r\n      />\r\n\r\n      {/* Loading Snackbar */}\r\n      <LoadingSnackbar\r\n        isVisible={deleting || isDeletingBulk}\r\n        message={isDeletingBulk ? `Deleting ${selectedRecords.size} Records` : \"Deleting Record\"}\r\n        submessage=\"Verifying credentials and removing data...\"\r\n        showProgress={false}\r\n      />\r\n\r\n      {/* Email Modal */}\r\n      <EmailReportModal\r\n        isOpen={showEmailModal}\r\n        onClose={() => setShowEmailModal(false)}\r\n        onSend={handleSendEmail}\r\n        defaultEmail={adminEmail}\r\n        recordCount={filteredRecords.length}\r\n        reportType=\"Collection Report\"\r\n      />\r\n\r\n      {/* Status Messages */}\r\n      <StatusMessage\r\n        success={successMessage}\r\n        error={errorMessage}\r\n        onClose={() => {\r\n          setSuccessMessage('');\r\n          setErrorMessage('');\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { \r\n  Download,\r\n  FileDown,\r\n  Truck,\r\n  Package,\r\n  TrendingUp,\r\n  BarChart3,\r\n  RefreshCw,\r\n  Trash2,\r\n  Mail\r\n} from 'lucide-react';\r\nimport jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\nimport StatsCard from '@/components/management/StatsCard';\r\nimport { FlowerSpinner } from '@/components';\r\nimport { FilterDropdown, LoadingSnackbar, StatusMessage, BulkActionsToolbar } from '@/components/management';\r\nimport PasswordConfirmDialog from '@/components/dialogs/PasswordConfirmDialog';\r\nimport EmailReportModal from '@/components/dialogs/EmailReportModal';\r\n\r\ninterface DispatchRecord {\r\n  id: number;\r\n  dispatch_id: string;\r\n  society_id: string;\r\n  society_name: string;\r\n  bmc_id?: number;\r\n  bmc_name?: string;\r\n  dairy_id?: number;\r\n  dairy_name?: string;\r\n  machine_id: string;\r\n  dispatch_date: string;\r\n  dispatch_time: string;\r\n  shift_type: string;\r\n  channel: string;\r\n  quantity: string;\r\n  fat_percentage: string;\r\n  snf_percentage: string;\r\n  clr_value: string;\r\n  rate_per_liter: string;\r\n  total_amount: string;\r\n  machine_type: string;\r\n  machine_version: string;\r\n}\r\n\r\ninterface DispatchStats {\r\n  totalDispatches: number;\r\n  totalQuantity: number;\r\n  totalAmount: number;\r\n  averageRate: number;\r\n  weightedFat: number;\r\n  weightedSnf: number;\r\n  weightedClr: number;\r\n}\r\n\r\n// Helper function to highlight matching text in search results\r\nconst highlightText = (text: string | number | null | undefined, searchQuery: string) => {\r\n  if (!text && text !== 0) return text || '';\r\n  if (!searchQuery) return text;\r\n  \r\n  const textStr = text.toString();\r\n  const regex = new RegExp(`(${searchQuery.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\r\n  const parts = textStr.split(regex);\r\n  \r\n  return parts.map((part, index) => \r\n    regex.test(part) ? (\r\n      <span key={index} className=\"bg-yellow-200 dark:bg-yellow-800 px-0.5 rounded\">\r\n        {part}\r\n      </span>\r\n    ) : (\r\n      part\r\n    )\r\n  );\r\n};\r\n\r\n// Helper function to map channel codes to display names\r\nconst getChannelDisplay = (channel: string): string => {\r\n  const channelMap: { [key: string]: string } = {\r\n    'ch1': 'COW',\r\n    'ch2': 'BUFFALO',\r\n    'ch3': 'MIXED',\r\n    'CH1': 'COW',\r\n    'CH2': 'BUFFALO',\r\n    'CH3': 'MIXED',\r\n    'COW': 'COW',\r\n    'BUFFALO': 'BUFFALO',\r\n    'MIXED': 'MIXED',\r\n    'cow': 'COW',\r\n    'buffalo': 'BUFFALO',\r\n    'mixed': 'MIXED',\r\n    'BUF': 'BUFFALO',\r\n    'MIX': 'MIXED'\r\n  };\r\n  return channelMap[channel] || channel.toUpperCase();\r\n};\r\n\r\ninterface DispatchReportsProps {\r\n  globalSearch?: string;\r\n}\r\n\r\nexport default function DispatchReports({ globalSearch = '' }: DispatchReportsProps) {\r\n  const [records, setRecords] = useState<DispatchRecord[]>([]);\r\n  const [filteredRecords, setFilteredRecords] = useState<DispatchRecord[]>([]);\r\n  const [stats, setStats] = useState<DispatchStats>({\r\n    totalDispatches: 0,\r\n    totalQuantity: 0,\r\n    totalAmount: 0,\r\n    averageRate: 0,\r\n    weightedFat: 0,\r\n    weightedSnf: 0,\r\n    weightedClr: 0\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  \r\n  // Sync global search with local search\r\n  useEffect(() => {\r\n    if (globalSearch !== undefined) {\r\n      setSearchQuery(globalSearch);\r\n    }\r\n  }, [globalSearch]);\r\n\r\n  // Combined search from global header and local search\r\n  const combinedSearch = useMemo(() => globalSearch || searchQuery, [globalSearch, searchQuery]);\r\n  \r\n  const [dateFilter, setDateFilter] = useState('');\r\n  const [dateFromFilter, setDateFromFilter] = useState('');\r\n  const [dateToFilter, setDateToFilter] = useState('');\r\n  const [shiftFilter, setShiftFilter] = useState('all');\r\n  const [channelFilter, setChannelFilter] = useState('all');\r\n  const [dairyFilter, setDairyFilter] = useState<string[]>([]);\r\n  const [bmcFilter, setBmcFilter] = useState<string[]>([]);\r\n  const [societyFilter, setSocietyFilter] = useState<string[]>([]);\r\n  const [machineFilter, setMachineFilter] = useState<string[]>([]);\r\n\r\n  // Fetch dairies and BMCs\r\n  const [dairies, setDairies] = useState<Array<{ id: number; name: string; dairyId: string }>>([]);\r\n  const [bmcs, setBmcs] = useState<Array<{ id: number; name: string; bmcId: string; dairyFarmId?: number }>>([]);\r\n\r\n  // Delete functionality\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [recordToDelete, setRecordToDelete] = useState<number | null>(null);\r\n  const [deleting, setDeleting] = useState(false);\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  // Bulk selection and delete\r\n  const [selectedRecords, setSelectedRecords] = useState<Set<number>>(new Set());\r\n  const [selectAll, setSelectAll] = useState(false);\r\n  const [showBulkDeleteConfirm, setShowBulkDeleteConfirm] = useState(false);\r\n  const [isDeletingBulk, setIsDeletingBulk] = useState(false);\r\n  const [bulkDeletePassword, setBulkDeletePassword] = useState('');\r\n\r\n  // Email modal state\r\n  const [showEmailModal, setShowEmailModal] = useState(false);\r\n  const [adminEmail, setAdminEmail] = useState('');\r\n  \r\n  // Fetch dairies, BMCs, societies, and machines\r\n  const [societiesData, setSocietiesData] = useState<Array<{ id: number; name: string; society_id: string; bmc_id?: number }>>([]);\r\n  const [machinesData, setMachinesData] = useState<Array<{ id: number; machineId: string; machineType: string; societyId?: number }>>([]);\r\n\r\n  useEffect(() => {\r\n    const fetchDairiesAndBmcs = async () => {\r\n      try {\r\n        const token = localStorage.getItem('authToken');\r\n        if (!token) return;\r\n\r\n        const dairyRes = await fetch('/api/user/dairy', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (dairyRes.ok) {\r\n          const dairyData = await dairyRes.json();\r\n          setDairies(dairyData.data || []);\r\n        }\r\n\r\n        const bmcRes = await fetch('/api/user/bmc', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (bmcRes.ok) {\r\n          const bmcData = await bmcRes.json();\r\n          setBmcs(bmcData.data || []);\r\n        }\r\n\r\n        const societyRes = await fetch('/api/user/society', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (societyRes.ok) {\r\n          const societyData = await societyRes.json();\r\n          setSocietiesData(societyData.data || []);\r\n        }\r\n\r\n        const machineRes = await fetch('/api/user/machine', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (machineRes.ok) {\r\n          const machineData = await machineRes.json();\r\n          setMachinesData(machineData.data || []);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching dairies/BMCs/Societies/Machines:', error);\r\n      }\r\n    };\r\n\r\n    fetchDairiesAndBmcs();\r\n  }, []);\r\n\r\n  // Filter dairies to only show those with dispatch records\r\n  const dairiesWithDispatches = useMemo(() => {\r\n    if (!dairies.length || !records.length) return dairies;\r\n    \r\n    const dairyIdsInDispatches = new Set(\r\n      records\r\n        .filter(r => r.dairy_id)\r\n        .map(r => r.dairy_id)\r\n    );\r\n    \r\n    return dairies.filter(dairy => dairyIdsInDispatches.has(dairy.id));\r\n  }, [dairies, records]);\r\n\r\n  // Clear all filters\r\n  const clearFilters = () => {\r\n    setShiftFilter('all');\r\n    setDairyFilter([]);\r\n    setBmcFilter([]);\r\n    setSocietyFilter([]);\r\n    setMachineFilter([]);\r\n    setDateFilter('');\r\n    setDateFromFilter('');\r\n    setDateToFilter('');\r\n    setChannelFilter('all');\r\n    setSearchQuery('');\r\n    \r\n    // Clear header search\r\n    const event = new CustomEvent('globalSearch', {\r\n      detail: { query: '' }\r\n    });\r\n    window.dispatchEvent(event);\r\n  };\r\n\r\n  // Delete record handler\r\n  const handleDeleteClick = (recordId: number) => {\r\n    setRecordToDelete(recordId);\r\n    setDeleteDialogOpen(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = async (password: string) => {\r\n    if (!recordToDelete) return;\r\n\r\n    setDeleting(true);\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/reports/dispatches/delete', {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          recordId: recordToDelete,\r\n          password\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to delete record');\r\n      }\r\n\r\n      // Show success message\r\n      setSuccessMessage('Dispatch record deleted successfully');\r\n      setTimeout(() => setSuccessMessage(''), 5000);\r\n      \r\n      // Refresh the records\r\n      fetchData();\r\n    } catch (error) {\r\n      console.error('Delete error:', error);\r\n      setErrorMessage(error instanceof Error ? error.message : 'Failed to delete record');\r\n      setTimeout(() => setErrorMessage(''), 5000);\r\n      throw error; // Re-throw to be handled by the dialog\r\n    } finally {\r\n      setDeleting(false);\r\n      setRecordToDelete(null);\r\n    }\r\n  };\r\n\r\n  // Bulk selection handlers\r\n  const handleSelectAll = () => {\r\n    if (selectAll) {\r\n      setSelectedRecords(new Set());\r\n      setSelectAll(false);\r\n    } else {\r\n      setSelectedRecords(new Set(filteredRecords.map(r => r.id)));\r\n      setSelectAll(true);\r\n    }\r\n  };\r\n\r\n  const handleSelectOne = (recordId: number) => {\r\n    const newSelected = new Set(selectedRecords);\r\n    if (newSelected.has(recordId)) {\r\n      newSelected.delete(recordId);\r\n    } else {\r\n      newSelected.add(recordId);\r\n    }\r\n    setSelectedRecords(newSelected);\r\n    setSelectAll(newSelected.size === filteredRecords.length && filteredRecords.length > 0);\r\n  };\r\n\r\n  const handleClearSelection = () => {\r\n    setSelectedRecords(new Set());\r\n    setSelectAll(false);\r\n  };\r\n\r\n  const handleBulkDeleteClick = () => {\r\n    if (selectedRecords.size === 0) return;\r\n    setShowBulkDeleteConfirm(true);\r\n  };\r\n\r\n  const handleBulkDeleteConfirm = async (password: string) => {\r\n    setShowBulkDeleteConfirm(false);\r\n    setIsDeletingBulk(true);\r\n    \r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const recordIds = Array.from(selectedRecords);\r\n      \r\n      const deletePromises = recordIds.map(recordId =>\r\n        fetch('/api/user/reports/dispatches/delete', {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n          },\r\n          body: JSON.stringify({ recordId, password })\r\n        }).then(async (res) => {\r\n          if (!res.ok) {\r\n            const error = await res.json();\r\n            throw new Error(error.message || 'Delete failed');\r\n          }\r\n          return res.json();\r\n        })\r\n      );\r\n\r\n      const results = await Promise.allSettled(deletePromises);\r\n      const successful = results.filter(r => r.status === 'fulfilled').length;\r\n      const failed = results.filter(r => r.status === 'rejected').length;\r\n\r\n      if (successful > 0) {\r\n        setSuccessMessage(`Successfully deleted ${successful} record(s)${failed > 0 ? `. ${failed} failed.` : ''}`);\r\n        setTimeout(() => setSuccessMessage(''), 5000);\r\n        fetchData();\r\n        handleClearSelection();\r\n      } else {\r\n        const firstError = results.find(r => r.status === 'rejected') as PromiseRejectedResult;\r\n        const errorMsg = firstError?.reason?.message || 'Failed to delete selected records';\r\n        setErrorMessage(errorMsg);\r\n        setTimeout(() => setErrorMessage(''), 5000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Bulk delete error:', error);\r\n      setErrorMessage(error instanceof Error ? error.message : 'Failed to delete selected records');\r\n      setTimeout(() => setErrorMessage(''), 5000);\r\n    } finally {\r\n      setIsDeletingBulk(false);\r\n      setBulkDeletePassword('');\r\n    }\r\n  };\r\n  \r\n  // Filter societies to only show those with dispatch records\r\n  const societies = useMemo(() => {\r\n    if (!societiesData.length || !records.length) return societiesData;\r\n    \r\n    const societyIdsInDispatches = new Set(\r\n      records\r\n        .filter(r => r.society_id)\r\n        .map(r => r.society_id)\r\n    );\r\n    \r\n    return societiesData.filter(society => societyIdsInDispatches.has(society.society_id));\r\n  }, [societiesData, records]);\r\n  \r\n  // Filter machines to only show those with dispatch records\r\n  const machines = useMemo(() => {\r\n    if (!machinesData.length || !records.length) return machinesData;\r\n    \r\n    const machineIdsInDispatches = new Set(\r\n      records\r\n        .filter(r => r.machine_id)\r\n        .map(r => r.machine_id)\r\n    );\r\n    \r\n    const filteredMachines = machinesData.filter(machine => machineIdsInDispatches.has(machine.machineId));\r\n    \r\n    // Add dispatch counts to machines\r\n    return filteredMachines.map(machine => ({\r\n      ...machine,\r\n      collectionCount: records.filter(r => r.machine_id === machine.machineId).length\r\n    }));\r\n  }, [machinesData, records]);\r\n\r\n  // Calculate statistics\r\n  const calculateStats = useCallback((data: DispatchRecord[]) => {\r\n    const totalQuantity = data.reduce((sum, record) => sum + parseFloat(record.quantity || '0'), 0);\r\n    const totalAmount = data.reduce((sum, record) => sum + parseFloat(record.total_amount || '0'), 0);\r\n    \r\n    // Calculate simple average rate from rate_per_liter column\r\n    const totalRate = data.reduce((sum, record) => sum + parseFloat(record.rate_per_liter || '0'), 0);\r\n    const averageRate = data.length > 0 ? totalRate / data.length : 0;\r\n    \r\n    // Calculate weighted averages\r\n    const sumQuantityFat = data.reduce((sum, record) => {\r\n      const qty = parseFloat(record.quantity || '0');\r\n      const fat = parseFloat(record.fat_percentage || '0');\r\n      return sum + (qty * fat);\r\n    }, 0);\r\n    const sumQuantitySnf = data.reduce((sum, record) => {\r\n      const qty = parseFloat(record.quantity || '0');\r\n      const snf = parseFloat(record.snf_percentage || '0');\r\n      return sum + (qty * snf);\r\n    }, 0);\r\n    const sumQuantityClr = data.reduce((sum, record) => {\r\n      const qty = parseFloat(record.quantity || '0');\r\n      const clr = parseFloat(record.clr_value || '0');\r\n      return sum + (qty * clr);\r\n    }, 0);\r\n    \r\n    const weightedFat = totalQuantity > 0 ? sumQuantityFat / totalQuantity : 0;\r\n    const weightedSnf = totalQuantity > 0 ? sumQuantitySnf / totalQuantity : 0;\r\n    const weightedClr = totalQuantity > 0 ? sumQuantityClr / totalQuantity : 0;\r\n\r\n    setStats({\r\n      totalDispatches: data.length,\r\n      totalQuantity: parseFloat(totalQuantity.toFixed(2)),\r\n      totalAmount: parseFloat(totalAmount.toFixed(2)),\r\n      averageRate: parseFloat(averageRate.toFixed(2)),\r\n      weightedFat: parseFloat(weightedFat.toFixed(2)),\r\n      weightedSnf: parseFloat(weightedSnf.toFixed(2)),\r\n      weightedClr: parseFloat(weightedClr.toFixed(2))\r\n    });\r\n  }, []);\r\n\r\n  // Fetch dispatch data\r\n  const fetchData = useCallback(async (showLoading = true) => {\r\n    const token = localStorage.getItem('authToken');\r\n    if (!token) return;\r\n\r\n    try {\r\n      if (showLoading) setLoading(true);\r\n      const response = await fetch('/api/user/reports/dispatches', {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        \r\n        // Only update state if data has changed to prevent unnecessary re-renders\r\n        setRecords(prevRecords => {\r\n          const hasChanged = JSON.stringify(prevRecords) !== JSON.stringify(data);\r\n          if (hasChanged) {\r\n            calculateStats(data);\r\n            return data;\r\n          }\r\n          return prevRecords;\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching dispatch data:', error);\r\n    } finally {\r\n      if (showLoading) setLoading(false);\r\n    }\r\n  }, [calculateStats]);\r\n\r\n  useEffect(() => {\r\n    fetchData(true);\r\n    \r\n    // Auto-refresh every 1 second without showing loading\r\n    const intervalId = setInterval(() => {\r\n      fetchData(false);\r\n    }, 1000);\r\n    \r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  // Fetch admin email for email functionality\r\n  useEffect(() => {\r\n    const fetchAdminEmail = async () => {\r\n      try {\r\n        const token = localStorage.getItem('authToken');\r\n        if (!token) return;\r\n\r\n        const response = await fetch('/api/user/profile', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          const email = data.email || '';\r\n          setAdminEmail(email);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching admin email:', error);\r\n      }\r\n    };\r\n\r\n    fetchAdminEmail();\r\n  }, []);\r\n\r\n  // Filter records with multi-field search (matching machine management pattern)\r\n  useEffect(() => {\r\n    let filtered = records;\r\n\r\n    // Dairy filter\r\n    if (dairyFilter.length > 0) {\r\n      const selectedDairyIds = dairyFilter\r\n        .map(id => dairies.find(d => d.id.toString() === id)?.id)\r\n        .filter(Boolean) as number[];\r\n      if (selectedDairyIds.length > 0) {\r\n        filtered = filtered.filter(record => record.dairy_id && selectedDairyIds.includes(record.dairy_id));\r\n      }\r\n    }\r\n\r\n    // BMC filter\r\n    if (bmcFilter.length > 0) {\r\n      const selectedBmcIds = bmcFilter\r\n        .map(id => bmcs.find(b => b.id.toString() === id)?.id)\r\n        .filter(Boolean) as number[];\r\n      if (selectedBmcIds.length > 0) {\r\n        filtered = filtered.filter(record => record.bmc_id && selectedBmcIds.includes(record.bmc_id));\r\n      }\r\n    }\r\n\r\n    // Status/Shift filter\r\n    if (shiftFilter !== 'all') {\r\n      if (shiftFilter === 'morning') {\r\n        filtered = filtered.filter(record => ['MR', 'MX', 'morning'].includes(record.shift_type));\r\n      } else if (shiftFilter === 'evening') {\r\n        filtered = filtered.filter(record => ['EV', 'EX', 'evening'].includes(record.shift_type));\r\n      } else {\r\n        filtered = filtered.filter(record => record.shift_type === shiftFilter);\r\n      }\r\n    }\r\n\r\n    // Society filter\r\n    if (Array.isArray(societyFilter) && societyFilter.length > 0) {\r\n      const selectedSocietyIds = societyFilter.map(id => {\r\n        const society = societies.find(s => s.id.toString() === id);\r\n        return society?.society_id;\r\n      }).filter(Boolean);\r\n      if (selectedSocietyIds.length > 0) {\r\n        filtered = filtered.filter(record => selectedSocietyIds.includes(record.society_id));\r\n      }\r\n    }\r\n\r\n    // Machine filter\r\n    if (machineFilter.length > 0) {\r\n      const selectedMachineIds = machineFilter\r\n        .map(id => machines.find(m => m.id.toString() === id)?.machineId)\r\n        .filter(Boolean) as string[];\r\n      if (selectedMachineIds.length > 0) {\r\n        filtered = filtered.filter(record => selectedMachineIds.includes(record.machine_id));\r\n      }\r\n    }\r\n\r\n    // Channel filter\r\n    if (channelFilter !== 'all') {\r\n      filtered = filtered.filter(record => {\r\n        const displayChannel = getChannelDisplay(record.channel);\r\n        return displayChannel === channelFilter;\r\n      });\r\n    }\r\n\r\n    // Date filter\r\n    if (dateFilter) {\r\n      filtered = filtered.filter(record => record.dispatch_date === dateFilter);\r\n    }\r\n\r\n    // Date range filter\r\n    if (dateFromFilter) {\r\n      filtered = filtered.filter(record => record.dispatch_date >= dateFromFilter);\r\n    }\r\n    if (dateToFilter) {\r\n      filtered = filtered.filter(record => record.dispatch_date <= dateToFilter);\r\n    }\r\n\r\n    // Multi-field search across dispatch details (matching machine management pattern)\r\n    if (combinedSearch) {\r\n      const searchLower = combinedSearch.toLowerCase();\r\n      filtered = filtered.filter(record => {\r\n        // Get display value for shift\r\n        const shiftDisplay = ['MR', 'MX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'morning'\r\n          ? 'Morning' \r\n          : ['EV', 'EX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'evening'\r\n          ? 'Evening' \r\n          : record.shift_type;\r\n        \r\n        return [\r\n          record.dispatch_id,\r\n          record.society_id,\r\n          record.society_name,\r\n          record.bmc_name,\r\n          record.dairy_name,\r\n          record.machine_id,\r\n          record.machine_type,\r\n          record.machine_version,\r\n          record.channel,\r\n          getChannelDisplay(record.channel),\r\n          record.dispatch_date,\r\n          record.dispatch_time,\r\n          record.shift_type,\r\n          shiftDisplay,\r\n          record.quantity,\r\n          record.fat_percentage,\r\n          record.snf_percentage,\r\n          record.clr_value,\r\n          record.rate_per_liter,\r\n          record.total_amount\r\n        ].some(field =>\r\n          field?.toString().toLowerCase().includes(searchLower)\r\n        );\r\n      });\r\n    }\r\n\r\n    setFilteredRecords(filtered);\r\n    calculateStats(filtered);\r\n  }, [globalSearch, searchQuery, dateFilter, dateFromFilter, dateToFilter, shiftFilter, channelFilter, societyFilter, machineFilter, dairyFilter, bmcFilter, records, societies, machines, dairies, bmcs, calculateStats]);\r\n\r\n  // Export to CSV\r\n  const exportToCSV = () => {\r\n    if (filteredRecords.length === 0) return;\r\n\r\n    const dateRange = dateFromFilter && dateToFilter \r\n      ? `${dateFromFilter} To ${dateToFilter}`\r\n      : dateFilter || 'All Dates';\r\n    const currentDateTime = new Date().toLocaleString('en-IN', { \r\n      year: 'numeric', month: '2-digit', day: '2-digit', \r\n      hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false \r\n    });\r\n\r\n    // Detailed data rows\r\n    const dataRows = filteredRecords.map(record => [\r\n      record.dispatch_date,\r\n      record.dispatch_time,\r\n      record.channel,\r\n      record.shift_type,\r\n      `${record.machine_id} (${record.machine_type})`,\r\n      `${record.society_name} (${record.society_id})`,\r\n      record.fat_percentage,\r\n      record.snf_percentage,\r\n      record.clr_value,\r\n      record.rate_per_liter,\r\n      record.quantity,\r\n      record.total_amount\r\n    ]);\r\n\r\n    const csvContent = [\r\n      'Admin Report - LactoConnect Milk Dispatch System',\r\n      `Date From ${dateRange}`,\r\n      '',\r\n      'DETAILED DISPATCH DATA',\r\n      '',\r\n      'Date,Time,Channel,Shift,Machine,Society,Fat (%),SNF (%),CLR,Rate,Quantity (L),Total Amount',\r\n      ...dataRows.map(row => row.join(',')),\r\n      '',\r\n      '',\r\n      'OVERALL SUMMARY',\r\n      `Total Dispatches:,${stats.totalDispatches}`,\r\n      `Total Quantity (L):,${stats.totalQuantity.toFixed(2)}`,\r\n      `Overall Weighted Fat (%):,${stats.weightedFat.toFixed(2)}`,\r\n      `Overall Weighted SNF (%):,${stats.weightedSnf.toFixed(2)}`,\r\n      `Overall Weighted CLR:,${stats.weightedClr.toFixed(2)}`,\r\n      `Total Amount (Rs):,${stats.totalAmount.toFixed(2)}`,\r\n      `Overall Average Rate (Rs/L):,${stats.averageRate.toFixed(2)}`,\r\n      '',\r\n      'Thank you',\r\n      'Poornasree Equipments',\r\n      `Generated on: ${currentDateTime}`\r\n    ].join('\\n');\r\n\r\n    const blob = new Blob([csvContent], { type: 'text/csv' });\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `dispatch-report-${new Date().toISOString().split('T')[0]}.csv`;\r\n    a.click();\r\n  };\r\n\r\n  // Export to PDF\r\n  const exportToPDF = () => {\r\n    if (filteredRecords.length === 0) return;\r\n\r\n    const doc = new jsPDF({ orientation: 'landscape', unit: 'mm', format: 'a4' });\r\n    const dateRange = dateFromFilter && dateToFilter \r\n      ? `${dateFromFilter} To ${dateToFilter}`\r\n      : dateFilter \r\n      ? `${dateFilter} To ${dateFilter}`\r\n      : 'All Dates';\r\n\r\n    // Add Logo\r\n    const logoPath = '/fulllogo.png';\r\n    doc.addImage(logoPath, 'PNG', 14, 8, 0, 12);\r\n\r\n    // Header\r\n    doc.setFontSize(14);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('Daily Dispatch Report - LactoConnect Milk Dispatch System', 148.5, 15, { align: 'center' });\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(`Date From ${dateRange}`, 148.5, 21, { align: 'center' });\r\n    \r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('DETAILED DISPATCH DATA', 148.5, 28, { align: 'center' });\r\n\r\n    // Detailed Data Table with SI No\r\n    const tableData = filteredRecords.map((record, index) => [\r\n      (index + 1).toString(),\r\n      record.dispatch_date,\r\n      record.dispatch_time,\r\n      getChannelDisplay(record.channel),\r\n      record.shift_type,\r\n      `${record.machine_id} (${record.machine_type})`,\r\n      `${record.society_name} (${record.society_id})`,\r\n      record.fat_percentage,\r\n      record.snf_percentage,\r\n      record.clr_value,\r\n      record.rate_per_liter,\r\n      record.quantity,\r\n      record.total_amount\r\n    ]);\r\n\r\n    autoTable(doc, {\r\n      startY: 32,\r\n      head: [['SI No', 'Date', 'Time', 'Channel', 'Shift', 'Machine', 'Society', 'Fat (%)', 'SNF (%)', 'CLR', 'Rate', 'Quantity (L)', 'Total Amount']],\r\n      body: tableData,\r\n      theme: 'grid',\r\n      styles: { fontSize: 7, cellPadding: 1.5, halign: 'center' },\r\n      headStyles: { fillColor: [255, 255, 255], textColor: [0, 0, 0], fontStyle: 'bold', fontSize: 8, lineWidth: 0.5, lineColor: [0, 0, 0] },\r\n      bodyStyles: { lineWidth: 0.3, lineColor: [200, 200, 200] },\r\n      columnStyles: {\r\n        0: { cellWidth: 12 }\r\n      }\r\n    });\r\n\r\n    // Summary Section\r\n    const finalY = doc.lastAutoTable.finalY + 8;\r\n    \r\n    // Left side - Weighted Averages\r\n    doc.setFontSize(11);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('WEIGHTED AVERAGES', 14, finalY);\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    let leftY = finalY + 6;\r\n    doc.text(`Weighted Fat      : ${stats.weightedFat.toFixed(2)}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Weighted SNF      : ${stats.weightedSnf.toFixed(2)}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Weighted CLR      : ${stats.weightedClr.toFixed(2)}`, 14, leftY);\r\n    \r\n    leftY += 8;\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('OVERALL SUMMARY', 14, leftY);\r\n    doc.setFont('helvetica', 'normal');\r\n    leftY += 6;\r\n    doc.text(`Total Dispatches   : ${stats.totalDispatches}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Total Quantity (L) : ${stats.totalQuantity.toFixed(2)}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Total Amount       : ${stats.totalAmount.toFixed(2)}`, 14, leftY);\r\n\r\n    // Right side - Report Notes\r\n    doc.setFontSize(11);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('REPORT NOTES', 283, finalY, { align: 'right' });\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    let rightY = finalY + 6;\r\n    doc.text('Prepared by: POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n    rightY += 5;\r\n    doc.text('Contact: marketing@poornasree.com', 283, rightY, { align: 'right' });\r\n    \r\n    rightY += 8;\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n    doc.setFont('helvetica', 'normal');\r\n    rightY += 5;\r\n    doc.text('Thank you for using LactoConnect', 283, rightY, { align: 'right' });\r\n    rightY += 5;\r\n    doc.text('For support, visit: www.poornasree.com', 283, rightY, { align: 'right' });\r\n\r\n    doc.save(`dispatch-report-${new Date().toISOString().split('T')[0]}.pdf`);\r\n  };\r\n\r\n  // Send email with CSV and PDF attachments\r\n  const handleSendEmail = async (email: string) => {\r\n    if (!email || !email.includes('@')) {\r\n      throw new Error('Please enter a valid email address');\r\n    }\r\n\r\n    try {\r\n      // Generate CSV content\r\n      const dateRange = dateFromFilter && dateToFilter \r\n        ? `${dateFromFilter} To ${dateToFilter}`\r\n        : dateFilter || 'All Dates';\r\n      const currentDateTime = new Date().toLocaleString('en-IN', { \r\n        year: 'numeric', month: '2-digit', day: '2-digit', \r\n        hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false \r\n      });\r\n\r\n      const dataRows = filteredRecords.map(record => [\r\n        record.dispatch_date,\r\n        record.dispatch_time,\r\n        record.channel,\r\n        record.shift_type,\r\n        `${record.machine_id} (${record.machine_type})`,\r\n        record.society_name || '',\r\n        record.fat_percentage,\r\n        record.snf_percentage,\r\n        record.clr_value,\r\n        record.rate_per_liter,\r\n        record.quantity,\r\n        record.total_amount\r\n      ]);\r\n\r\n      const csvContent = [\r\n        ['POORNASREE EQUIPMENTS MILK DISPATCH REPORT'],\r\n        ['Admin Report with Weighted Averages'],\r\n        [],\r\n        ['Report Generated:', currentDateTime],\r\n        ['Date Range:', dateRange],\r\n        ['Total Dispatches:', stats.totalDispatches],\r\n        ['Total Quantity (L):', stats.totalQuantity.toFixed(2)],\r\n        ['Total Amount (₹):', stats.totalAmount.toFixed(2)],\r\n        ['Average Rate (₹/L):', stats.averageRate.toFixed(2)],\r\n        ['Weighted FAT (%):', stats.weightedFat.toFixed(2)],\r\n        ['Weighted SNF (%):', stats.weightedSnf.toFixed(2)],\r\n        ['Weighted CLR:', stats.weightedClr.toFixed(2)],\r\n        [],\r\n        ['Date', 'Time', 'Channel', 'Shift', 'Machine', 'Society', 'Fat (%)', 'SNF (%)', 'CLR', 'Rate (₹/L)', 'Quantity (L)', 'Total Amount (₹)'],\r\n        ...dataRows\r\n      ].map(row => row.join(',')).join('\\n');\r\n\r\n      // Generate PDF as base64 - matching current PDF design exactly\r\n      const doc = new jsPDF({ orientation: 'landscape', unit: 'mm', format: 'a4' });\r\n      \r\n      // Add Logo (same as current PDF)\r\n      const logoPath = '/fulllogo.png';\r\n      doc.addImage(logoPath, 'PNG', 14, 8, 0, 12);\r\n\r\n      // Header (same as current PDF)\r\n      doc.setFontSize(14);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('Daily Dispatch Report - LactoConnect Milk Dispatch System', 148.5, 15, { align: 'center' });\r\n      doc.setFontSize(9);\r\n      doc.setFont('helvetica', 'normal');\r\n      doc.text(`Date From ${dateRange}`, 148.5, 21, { align: 'center' });\r\n      \r\n      doc.setFontSize(10);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('DETAILED DISPATCH DATA', 148.5, 28, { align: 'center' });\r\n\r\n      // Detailed Data Table with SI No (same as current PDF)\r\n      const tableData = filteredRecords.map((record, index) => [\r\n        (index + 1).toString(),\r\n        record.dispatch_date,\r\n        record.dispatch_time,\r\n        getChannelDisplay(record.channel),\r\n        record.shift_type,\r\n        `${record.machine_id} (${record.machine_type})`,\r\n        `${record.society_name} (${record.society_id})`,\r\n        record.fat_percentage,\r\n        record.snf_percentage,\r\n        record.clr_value,\r\n        record.rate_per_liter,\r\n        record.quantity,\r\n        record.total_amount\r\n      ]);\r\n\r\n      autoTable(doc, {\r\n        startY: 32,\r\n        head: [['SI No', 'Date', 'Time', 'Channel', 'Shift', 'Machine', 'Society', 'Fat (%)', 'SNF (%)', 'CLR', 'Rate', 'Quantity (L)', 'Total Amount']],\r\n        body: tableData,\r\n        theme: 'grid',\r\n        styles: { fontSize: 7, cellPadding: 1.5, halign: 'center' },\r\n        headStyles: { fillColor: [255, 255, 255], textColor: [0, 0, 0], fontStyle: 'bold', fontSize: 8, lineWidth: 0.5, lineColor: [0, 0, 0] },\r\n        bodyStyles: { lineWidth: 0.3, lineColor: [200, 200, 200] },\r\n        columnStyles: {\r\n          0: { cellWidth: 12 }\r\n        }\r\n      });\r\n\r\n      // Summary Section (same as current PDF)\r\n      const finalY = doc.lastAutoTable.finalY + 8;\r\n      \r\n      // Left side - Weighted Averages\r\n      doc.setFontSize(11);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('WEIGHTED AVERAGES', 14, finalY);\r\n      doc.setFontSize(9);\r\n      doc.setFont('helvetica', 'normal');\r\n      let leftY = finalY + 6;\r\n      doc.text(`Weighted Fat      : ${stats.weightedFat.toFixed(2)}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Weighted SNF      : ${stats.weightedSnf.toFixed(2)}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Weighted CLR      : ${stats.weightedClr.toFixed(2)}`, 14, leftY);\r\n      \r\n      leftY += 8;\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('OVERALL SUMMARY', 14, leftY);\r\n      doc.setFont('helvetica', 'normal');\r\n      leftY += 6;\r\n      doc.text(`Total Dispatches   : ${stats.totalDispatches}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Total Quantity (L) : ${stats.totalQuantity.toFixed(2)}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Total Amount       : ${stats.totalAmount.toFixed(2)}`, 14, leftY);\r\n\r\n      // Right side - Report Notes\r\n      doc.setFontSize(11);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('REPORT NOTES', 283, finalY, { align: 'right' });\r\n      doc.setFontSize(9);\r\n      doc.setFont('helvetica', 'normal');\r\n      let rightY = finalY + 6;\r\n      doc.text('Prepared by: POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n      rightY += 5;\r\n      doc.text('Contact: marketing@poornasree.com', 283, rightY, { align: 'right' });\r\n      \r\n      rightY += 8;\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n      doc.setFont('helvetica', 'normal');\r\n      rightY += 5;\r\n      doc.text('Thank you for using LactoConnect', 283, rightY, { align: 'right' });\r\n      rightY += 5;\r\n      doc.text('For support, visit: www.poornasree.com', 283, rightY, { align: 'right' });\r\n\r\n      const pdfBase64 = doc.output('datauristring').split(',')[1];\r\n\r\n      // Send email with attachments\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/reports/send-email', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          email: email,\r\n          csvContent,\r\n          pdfContent: pdfBase64,\r\n          reportType: 'Dispatch Report',\r\n          dateRange,\r\n          stats\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        throw new Error(errorData.error || 'Failed to send email');\r\n      }\r\n\r\n      setSuccessMessage(`Report sent successfully to ${email}`);\r\n      setTimeout(() => setSuccessMessage(''), 5000);\r\n    } catch (error) {\r\n      console.error('Error sending email:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <FlowerSpinner size={48} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Statistics Cards */}\r\n      <div className=\"grid grid-cols-7 gap-3\">\r\n        <StatsCard\r\n          title=\"Total Dispatches\"\r\n          value={stats.totalDispatches}\r\n          icon={<Truck className=\"w-full h-full\" />}\r\n          color=\"green\"\r\n        />\r\n        <StatsCard\r\n          title=\"Total Quantity (L)\"\r\n          value={stats.totalQuantity}\r\n          icon={<Package className=\"w-full h-full\" />}\r\n          color=\"blue\"\r\n        />\r\n        <StatsCard\r\n          title=\"Total Amount (₹)\"\r\n          value={`₹${stats.totalAmount.toFixed(2)}`}\r\n          icon={<TrendingUp className=\"w-full h-full\" />}\r\n          color=\"yellow\"\r\n        />\r\n        <StatsCard\r\n          title=\"Avg Rate (₹/L)\"\r\n          value={`₹${stats.averageRate.toFixed(2)}`}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"gray\"\r\n        />\r\n        <StatsCard\r\n          title=\"Weighted FAT (%)\"\r\n          value={stats.weightedFat.toFixed(2)}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"blue\"\r\n        />\r\n        <StatsCard\r\n          title=\"Weighted SNF (%)\"\r\n          value={stats.weightedSnf.toFixed(2)}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"green\"\r\n        />\r\n        <StatsCard\r\n          title=\"Weighted CLR\"\r\n          value={stats.weightedClr.toFixed(2)}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"red\"\r\n        />\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 sm:p-6\">\r\n        <div className=\"space-y-4\">\r\n          {/* Filter Info */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n              Showing {filteredRecords.length} of {records.length} records\r\n            </span>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={() => {\r\n                  clearFilters();\r\n                  fetchData();\r\n                }}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-psr-primary-600 text-white rounded-lg hover:bg-psr-primary-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <RefreshCw className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">Refresh</span>\r\n              </button>\r\n              <button\r\n                onClick={exportToCSV}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-psr-green-600 text-white rounded-lg hover:bg-psr-green-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <Download className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">CSV</span>\r\n              </button>\r\n              <button\r\n                onClick={exportToPDF}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <FileDown className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">PDF</span>\r\n              </button>\r\n              <button\r\n                onClick={() => setShowEmailModal(true)}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <Mail className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">Send Mail</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Filter Dropdown - All Filters Inside */}\r\n          <FilterDropdown\r\n            statusFilter={shiftFilter}\r\n            onStatusChange={setShiftFilter}\r\n            dairyFilter={dairyFilter}\r\n            onDairyChange={(value) => setDairyFilter(Array.isArray(value) ? value : [value])}\r\n            bmcFilter={bmcFilter}\r\n            onBmcChange={(value) => setBmcFilter(Array.isArray(value) ? value : [value])}\r\n            societyFilter={societyFilter}\r\n            onSocietyChange={(value) => setSocietyFilter(Array.isArray(value) ? value : [value])}\r\n            machineFilter={machineFilter}\r\n            onMachineChange={(value) => setMachineFilter(Array.isArray(value) ? value : [value])}\r\n            dairies={dairiesWithDispatches}\r\n            bmcs={bmcs}\r\n            societies={societies}\r\n            machines={machines}\r\n            filteredCount={filteredRecords.length}\r\n            totalCount={records.length}\r\n            searchQuery={searchQuery}\r\n            onSearchChange={setSearchQuery}\r\n            icon={<Truck className=\"w-5 h-5\" />}\r\n            dateFilter={dateFilter}\r\n            onDateChange={setDateFilter}\r\n            dateFromFilter={dateFromFilter}\r\n            onDateFromChange={setDateFromFilter}\r\n            dateToFilter={dateToFilter}\r\n            onDateToChange={setDateToFilter}\r\n            channelFilter={channelFilter}\r\n            onChannelChange={setChannelFilter}\r\n            showDateFilter\r\n            showChannelFilter\r\n            showShiftFilter\r\n            showMachineFilter\r\n            hideMainFilterButton={true}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Data Table */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden\">\r\n        <div className=\"overflow-auto max-h-[600px]\" tabIndex={0}>\r\n          <table className=\"w-auto min-w-full table-auto\">\r\n            <thead className=\"bg-gray-50 dark:bg-gray-700 sticky top-0 z-10\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectAll}\r\n                    onChange={handleSelectAll}\r\n                    className=\"w-4 h-4 text-emerald-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 cursor-pointer\"\r\n                  />\r\n                </th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Date & Time</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Dispatch ID</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Society</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Shift</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Channel</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Machine</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Fat %</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">SNF %</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">CLR</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Rate/L</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Qty (L)</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Amount</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n              {filteredRecords.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan={14} className=\"px-4 py-8 text-center text-gray-500 dark:text-gray-400\">\r\n                    No dispatch records found\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                filteredRecords.map((record) => (\r\n                  <React.Fragment key={record.id}>\r\n                    <tr className={`transition-colors ${\r\n                      selectedRecords.has(record.id)\r\n                        ? 'bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30'\r\n                        : 'hover:bg-gray-50 dark:hover:bg-gray-700'\r\n                    }`}>\r\n                      <td className=\"px-4 py-3 text-center\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={selectedRecords.has(record.id)}\r\n                          onChange={() => handleSelectOne(record.id)}\r\n                          className=\"w-4 h-4 text-emerald-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 cursor-pointer\"\r\n                        />\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                        <div>{highlightText(record.dispatch_date, combinedSearch)}</div>\r\n                        <div className=\"text-xs text-gray-500\">{record.dispatch_time}</div>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center font-medium text-gray-900 dark:text-white\">\r\n                        {highlightText(record.dispatch_id, combinedSearch)}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                        <div className=\"font-medium\">{highlightText(record.society_name, combinedSearch)}</div>\r\n                        <div className=\"text-xs text-gray-500\">ID: {highlightText(record.society_id, combinedSearch)}</div>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center\">\r\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                          ['MR', 'MX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'morning'\r\n                            ? 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400'\r\n                            : ['EV', 'EX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'evening'\r\n                            ? 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400'\r\n                            : 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400'\r\n                        }`}>\r\n                          {highlightText(\r\n                            ['MR', 'MX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'morning'\r\n                              ? 'Morning' \r\n                              : ['EV', 'EX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'evening'\r\n                              ? 'Evening' \r\n                              : record.shift_type,\r\n                            combinedSearch\r\n                          )}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center\">\r\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                          getChannelDisplay(record.channel) === 'COW'\r\n                            ? 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400'\r\n                            : getChannelDisplay(record.channel) === 'BUFFALO'\r\n                            ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400'\r\n                            : 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400'\r\n                        }`}>\r\n                          {highlightText(getChannelDisplay(record.channel), combinedSearch)}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                        <div className=\"font-medium\">{highlightText(record.machine_id || 'N/A', combinedSearch)}</div>\r\n                        <div className=\"text-xs text-gray-500\">{highlightText(record.machine_type, combinedSearch)}</div>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.fat_percentage).toFixed(2), combinedSearch)}</td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.snf_percentage).toFixed(2), combinedSearch)}</td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.clr_value).toFixed(2), combinedSearch)}</td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">₹{highlightText(parseFloat(record.rate_per_liter).toFixed(2), combinedSearch)}</td>\r\n                      <td className=\"px-4 py-3 text-sm text-center font-medium text-gray-900 dark:text-white\">{highlightText(parseFloat(record.quantity).toFixed(2), combinedSearch)}</td>\r\n                      <td className=\"px-4 py-3 text-sm text-center font-medium text-green-600 dark:text-green-400\">\r\n                        ₹{highlightText(parseFloat(record.total_amount).toFixed(2), combinedSearch)}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center\">\r\n                        <button\r\n                          onClick={() => handleDeleteClick(record.id)}\r\n                          className=\"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors\"\r\n                          title=\"Delete record\"\r\n                        >\r\n                          <Trash2 className=\"w-4 h-4\" />\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  </React.Fragment>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Password Confirmation Dialog */}\r\n      <PasswordConfirmDialog\r\n        isOpen={deleteDialogOpen}\r\n        onClose={() => setDeleteDialogOpen(false)}\r\n        onConfirm={handleDeleteConfirm}\r\n        title=\"Delete Dispatch Record\"\r\n        message=\"Enter your admin password to confirm deletion. This action cannot be undone and will be logged for security purposes.\"\r\n      />\r\n\r\n      {/* Bulk Delete Password Confirmation Modal */}\r\n      <PasswordConfirmDialog\r\n        isOpen={showBulkDeleteConfirm}\r\n        onClose={() => {\r\n          setShowBulkDeleteConfirm(false);\r\n          setBulkDeletePassword('');\r\n        }}\r\n        onConfirm={handleBulkDeleteConfirm}\r\n        title={`Delete ${selectedRecords.size} Dispatch Record${selectedRecords.size > 1 ? 's' : ''}`}\r\n        message={`Enter your admin password to confirm deletion of ${selectedRecords.size} selected record(s). This action cannot be undone and will be logged for security purposes.`}\r\n      />\r\n\r\n      {/* Bulk Actions Toolbar */}\r\n      <BulkActionsToolbar\r\n        selectedCount={selectedRecords.size}\r\n        totalCount={filteredRecords.length}\r\n        onBulkDelete={handleBulkDeleteClick}\r\n        onClearSelection={handleClearSelection}\r\n        itemType=\"record\"\r\n        showStatusUpdate={false}\r\n      />\r\n\r\n      {/* Loading Snackbar */}\r\n      <LoadingSnackbar\r\n        isVisible={deleting || isDeletingBulk}\r\n        message={isDeletingBulk ? `Deleting ${selectedRecords.size} Records` : \"Deleting Record\"}\r\n        submessage=\"Verifying credentials and removing data...\"\r\n        showProgress={false}\r\n      />\r\n\r\n      {/* Email Modal */}\r\n      <EmailReportModal\r\n        isOpen={showEmailModal}\r\n        onClose={() => setShowEmailModal(false)}\r\n        onSend={handleSendEmail}\r\n        defaultEmail={adminEmail}\r\n        recordCount={filteredRecords.length}\r\n        reportType=\"Dispatch Report\"\r\n      />\r\n\r\n      {/* Status Messages */}\r\n      <StatusMessage\r\n        success={successMessage}\r\n        error={errorMessage}\r\n        onClose={() => {\r\n          setSuccessMessage('');\r\n          setErrorMessage('');\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { \r\n  Download,\r\n  FileDown,\r\n  DollarSign,\r\n  ShoppingCart,\r\n  TrendingUp,\r\n  BarChart3,\r\n  RefreshCw,\r\n  Trash2,\r\n  Mail\r\n} from 'lucide-react';\r\nimport jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\nimport StatsCard from '@/components/management/StatsCard';\r\nimport { FlowerSpinner } from '@/components';\r\nimport { FilterDropdown, LoadingSnackbar, StatusMessage, BulkActionsToolbar } from '@/components/management';\r\nimport PasswordConfirmDialog from '@/components/dialogs/PasswordConfirmDialog';\r\nimport EmailReportModal from '@/components/dialogs/EmailReportModal';\r\n\r\ninterface SalesRecord {\r\n  id: number;\r\n  count: string;\r\n  society_id: string;\r\n  society_name: string;\r\n  bmc_id?: number;\r\n  bmc_name?: string;\r\n  dairy_id?: number;\r\n  dairy_name?: string;\r\n  machine_id: string;\r\n  sales_date: string;\r\n  sales_time: string;\r\n  shift_type: string;\r\n  channel: string;\r\n  quantity: string;\r\n  rate_per_liter: string;\r\n  total_amount: string;\r\n  machine_type: string;\r\n  machine_version: string;\r\n}\r\n\r\ninterface SalesStats {\r\n  totalSales: number;\r\n  totalQuantity: number;\r\n  totalAmount: number;\r\n  averageRate: number;\r\n}\r\n\r\n// Helper function to highlight matching text in search results\r\nconst highlightText = (text: string | number | null | undefined, searchQuery: string) => {\r\n  if (!text && text !== 0) return text || '';\r\n  if (!searchQuery) return text;\r\n  \r\n  const textStr = text.toString();\r\n  const regex = new RegExp(`(${searchQuery.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\r\n  const parts = textStr.split(regex);\r\n  \r\n  return parts.map((part, index) => \r\n    regex.test(part) ? (\r\n      <span key={index} className=\"bg-yellow-200 dark:bg-yellow-800 px-0.5 rounded\">\r\n        {part}\r\n      </span>\r\n    ) : (\r\n      part\r\n    )\r\n  );\r\n};\r\n\r\n// Helper function to map channel codes to display names\r\nconst getChannelDisplay = (channel: string): string => {\r\n  const channelMap: { [key: string]: string } = {\r\n    'ch1': 'COW',\r\n    'ch2': 'BUFFALO',\r\n    'ch3': 'MIXED',\r\n    'CH1': 'COW',\r\n    'CH2': 'BUFFALO',\r\n    'CH3': 'MIXED',\r\n    'COW': 'COW',\r\n    'BUFFALO': 'BUFFALO',\r\n    'MIXED': 'MIXED',\r\n    'cow': 'COW',\r\n    'buffalo': 'BUFFALO',\r\n    'mixed': 'MIXED',\r\n    'BUF': 'BUFFALO',\r\n    'MIX': 'MIXED'\r\n  };\r\n  return channelMap[channel] || channel.toUpperCase();\r\n};\r\n\r\ninterface SalesReportsProps {\r\n  globalSearch?: string;\r\n}\r\n\r\nexport default function SalesReports({ globalSearch = '' }: SalesReportsProps) {\r\n  const [records, setRecords] = useState<SalesRecord[]>([]);\r\n  const [filteredRecords, setFilteredRecords] = useState<SalesRecord[]>([]);\r\n  const [stats, setStats] = useState<SalesStats>({\r\n    totalSales: 0,\r\n    totalQuantity: 0,\r\n    totalAmount: 0,\r\n    averageRate: 0\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  \r\n  // Sync global search with local search\r\n  useEffect(() => {\r\n    if (globalSearch !== undefined) {\r\n      setSearchQuery(globalSearch);\r\n    }\r\n  }, [globalSearch]);\r\n\r\n  // Combined search from global header and local search\r\n  const combinedSearch = useMemo(() => globalSearch || searchQuery, [globalSearch, searchQuery]);\r\n  \r\n  const [dateFilter, setDateFilter] = useState('');\r\n  const [dateFromFilter, setDateFromFilter] = useState('');\r\n  const [dateToFilter, setDateToFilter] = useState('');\r\n  const [shiftFilter, setShiftFilter] = useState('all');\r\n  const [channelFilter, setChannelFilter] = useState('all');\r\n  const [dairyFilter, setDairyFilter] = useState<string[]>([]);\r\n  const [bmcFilter, setBmcFilter] = useState<string[]>([]);\r\n  const [societyFilter, setSocietyFilter] = useState<string[]>([]);\r\n  const [machineFilter, setMachineFilter] = useState<string[]>([]);\r\n\r\n  // Fetch dairies and BMCs\r\n  const [dairies, setDairies] = useState<Array<{ id: number; name: string; dairyId: string }>>([]);\r\n  const [bmcs, setBmcs] = useState<Array<{ id: number; name: string; bmcId: string; dairyFarmId?: number }>>([]);\r\n\r\n  // Delete functionality\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [recordToDelete, setRecordToDelete] = useState<number | null>(null);\r\n  const [deleting, setDeleting] = useState(false);\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  // Bulk selection and delete\r\n  const [selectedRecords, setSelectedRecords] = useState<Set<number>>(new Set());\r\n  const [selectAll, setSelectAll] = useState(false);\r\n  const [showBulkDeleteConfirm, setShowBulkDeleteConfirm] = useState(false);\r\n  const [isDeletingBulk, setIsDeletingBulk] = useState(false);\r\n  const [bulkDeletePassword, setBulkDeletePassword] = useState('');\r\n\r\n  // Email modal state\r\n  const [showEmailModal, setShowEmailModal] = useState(false);\r\n  const [adminEmail, setAdminEmail] = useState('');\r\n  \r\n  // Fetch dairies, BMCs, societies, and machines\r\n  const [societiesData, setSocietiesData] = useState<Array<{ id: number; name: string; society_id: string; bmc_id?: number }>>([]);\r\n  const [machinesData, setMachinesData] = useState<Array<{ id: number; machineId: string; machineType: string; societyId?: number }>>([]);\r\n\r\n  useEffect(() => {\r\n    const fetchDairiesAndBmcs = async () => {\r\n      try {\r\n        const token = localStorage.getItem('authToken');\r\n        if (!token) return;\r\n\r\n        const dairyRes = await fetch('/api/user/dairy', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (dairyRes.ok) {\r\n          const dairyData = await dairyRes.json();\r\n          setDairies(dairyData.data || []);\r\n        }\r\n\r\n        const bmcRes = await fetch('/api/user/bmc', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (bmcRes.ok) {\r\n          const bmcData = await bmcRes.json();\r\n          setBmcs(bmcData.data || []);\r\n        }\r\n\r\n        const societyRes = await fetch('/api/user/society', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (societyRes.ok) {\r\n          const societyData = await societyRes.json();\r\n          setSocietiesData(societyData.data || []);\r\n        }\r\n\r\n        const machineRes = await fetch('/api/user/machine', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (machineRes.ok) {\r\n          const machineData = await machineRes.json();\r\n          setMachinesData(machineData.data || []);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching dairies/BMCs/Societies/Machines:', error);\r\n      }\r\n    };\r\n\r\n    fetchDairiesAndBmcs();\r\n  }, []);\r\n\r\n  // Filter dairies to only show those with sales records\r\n  const dairiesWithSales = useMemo(() => {\r\n    if (!dairies.length || !records.length) return dairies;\r\n    \r\n    const dairyIdsInSales = new Set(\r\n      records\r\n        .filter(r => r.dairy_id)\r\n        .map(r => r.dairy_id)\r\n    );\r\n    \r\n    return dairies.filter(dairy => dairyIdsInSales.has(dairy.id));\r\n  }, [dairies, records]);\r\n\r\n  // Clear all filters\r\n  const clearFilters = () => {\r\n    setShiftFilter('all');\r\n    setDairyFilter([]);\r\n    setBmcFilter([]);\r\n    setSocietyFilter([]);\r\n    setMachineFilter([]);\r\n    setDateFilter('');\r\n    setDateFromFilter('');\r\n    setDateToFilter('');\r\n    setChannelFilter('all');\r\n    setSearchQuery('');\r\n    \r\n    // Clear header search\r\n    const event = new CustomEvent('globalSearch', {\r\n      detail: { query: '' }\r\n    });\r\n    window.dispatchEvent(event);\r\n  };\r\n\r\n  // Delete record handler\r\n  const handleDeleteClick = (recordId: number) => {\r\n    setRecordToDelete(recordId);\r\n    setDeleteDialogOpen(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = async (password: string) => {\r\n    if (!recordToDelete) return;\r\n\r\n    setDeleting(true);\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/reports/sales/delete', {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          recordId: recordToDelete,\r\n          password\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to delete record');\r\n      }\r\n\r\n      // Show success message\r\n      setSuccessMessage('Sales record deleted successfully');\r\n      setTimeout(() => setSuccessMessage(''), 5000);\r\n      \r\n      // Refresh the records\r\n      fetchData();\r\n    } catch (error) {\r\n      console.error('Delete error:', error);\r\n      setErrorMessage(error instanceof Error ? error.message : 'Failed to delete record');\r\n      setTimeout(() => setErrorMessage(''), 5000);\r\n      throw error; // Re-throw to be handled by the dialog\r\n    } finally {\r\n      setDeleting(false);\r\n      setRecordToDelete(null);\r\n    }\r\n  };\r\n\r\n  // Bulk selection handlers\r\n  const handleSelectAll = () => {\r\n    if (selectAll) {\r\n      setSelectedRecords(new Set());\r\n      setSelectAll(false);\r\n    } else {\r\n      setSelectedRecords(new Set(filteredRecords.map(r => r.id)));\r\n      setSelectAll(true);\r\n    }\r\n  };\r\n\r\n  const handleSelectOne = (recordId: number) => {\r\n    const newSelected = new Set(selectedRecords);\r\n    if (newSelected.has(recordId)) {\r\n      newSelected.delete(recordId);\r\n    } else {\r\n      newSelected.add(recordId);\r\n    }\r\n    setSelectedRecords(newSelected);\r\n    setSelectAll(newSelected.size === filteredRecords.length && filteredRecords.length > 0);\r\n  };\r\n\r\n  const handleClearSelection = () => {\r\n    setSelectedRecords(new Set());\r\n    setSelectAll(false);\r\n  };\r\n\r\n  const handleBulkDeleteClick = () => {\r\n    if (selectedRecords.size === 0) return;\r\n    setShowBulkDeleteConfirm(true);\r\n  };\r\n\r\n  const handleBulkDeleteConfirm = async (password: string) => {\r\n    setShowBulkDeleteConfirm(false);\r\n    setIsDeletingBulk(true);\r\n    \r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const recordIds = Array.from(selectedRecords);\r\n      \r\n      const deletePromises = recordIds.map(recordId =>\r\n        fetch('/api/user/reports/sales/delete', {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n          },\r\n          body: JSON.stringify({ recordId, password })\r\n        }).then(async (res) => {\r\n          if (!res.ok) {\r\n            const error = await res.json();\r\n            throw new Error(error.message || 'Delete failed');\r\n          }\r\n          return res.json();\r\n        })\r\n      );\r\n\r\n      const results = await Promise.allSettled(deletePromises);\r\n      const successful = results.filter(r => r.status === 'fulfilled').length;\r\n      const failed = results.filter(r => r.status === 'rejected').length;\r\n\r\n      if (successful > 0) {\r\n        setSuccessMessage(`Successfully deleted ${successful} record(s)${failed > 0 ? `. ${failed} failed.` : ''}`);\r\n        setTimeout(() => setSuccessMessage(''), 5000);\r\n        fetchData();\r\n        handleClearSelection();\r\n      } else {\r\n        const firstError = results.find(r => r.status === 'rejected') as PromiseRejectedResult;\r\n        const errorMsg = firstError?.reason?.message || 'Failed to delete selected records';\r\n        setErrorMessage(errorMsg);\r\n        setTimeout(() => setErrorMessage(''), 5000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Bulk delete error:', error);\r\n      setErrorMessage(error instanceof Error ? error.message : 'Failed to delete selected records');\r\n      setTimeout(() => setErrorMessage(''), 5000);\r\n    } finally {\r\n      setIsDeletingBulk(false);\r\n      setBulkDeletePassword('');\r\n    }\r\n  };\r\n  \r\n  // Filter societies to only show those with sales records\r\n  const societies = useMemo(() => {\r\n    if (!societiesData.length || !records.length) return societiesData;\r\n    \r\n    const societyIdsInSales = new Set(\r\n      records\r\n        .filter(r => r.society_id)\r\n        .map(r => r.society_id)\r\n    );\r\n    \r\n    return societiesData.filter(society => societyIdsInSales.has(society.society_id));\r\n  }, [societiesData, records]);\r\n  \r\n  // Filter machines to only show those with sales records\r\n  const machines = useMemo(() => {\r\n    if (!machinesData.length || !records.length) return machinesData;\r\n    \r\n    const machineIdsInSales = new Set(\r\n      records\r\n        .filter(r => r.machine_id)\r\n        .map(r => r.machine_id)\r\n    );\r\n    \r\n    const filteredMachines = machinesData.filter(machine => machineIdsInSales.has(machine.machineId));\r\n    \r\n    // Add sales counts to machines\r\n    return filteredMachines.map(machine => ({\r\n      ...machine,\r\n      collectionCount: records.filter(r => r.machine_id === machine.machineId).length\r\n    }));\r\n  }, [machinesData, records]);\r\n\r\n  // Calculate statistics\r\n  const calculateStats = useCallback((data: SalesRecord[]) => {\r\n    const totalQuantity = data.reduce((sum, record) => sum + parseFloat(record.quantity || '0'), 0);\r\n    const totalAmount = data.reduce((sum, record) => sum + parseFloat(record.total_amount || '0'), 0);\r\n    \r\n    // Calculate simple average rate from rate_per_liter column\r\n    const totalRate = data.reduce((sum, record) => sum + parseFloat(record.rate_per_liter || '0'), 0);\r\n    const averageRate = data.length > 0 ? totalRate / data.length : 0;\r\n\r\n    setStats({\r\n      totalSales: data.length,\r\n      totalQuantity: parseFloat(totalQuantity.toFixed(2)),\r\n      totalAmount: parseFloat(totalAmount.toFixed(2)),\r\n      averageRate: parseFloat(averageRate.toFixed(2))\r\n    });\r\n  }, []);\r\n\r\n  // Fetch sales data\r\n  const fetchData = useCallback(async (showLoading = true) => {\r\n    const token = localStorage.getItem('authToken');\r\n    if (!token) return;\r\n\r\n    try {\r\n      if (showLoading) setLoading(true);\r\n      const response = await fetch('/api/user/reports/sales', {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        \r\n        // Only update state if data has changed to prevent unnecessary re-renders\r\n        setRecords(prevRecords => {\r\n          const hasChanged = JSON.stringify(prevRecords) !== JSON.stringify(data);\r\n          if (hasChanged) {\r\n            calculateStats(data);\r\n            return data;\r\n          }\r\n          return prevRecords;\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching sales data:', error);\r\n    } finally {\r\n      if (showLoading) setLoading(false);\r\n    }\r\n  }, [calculateStats]);\r\n\r\n  useEffect(() => {\r\n    fetchData(true);\r\n    \r\n    // Auto-refresh every 1 second without showing loading\r\n    const intervalId = setInterval(() => {\r\n      fetchData(false);\r\n    }, 1000);\r\n    \r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  // Fetch admin email for email functionality\r\n  useEffect(() => {\r\n    const fetchAdminEmail = async () => {\r\n      try {\r\n        const token = localStorage.getItem('authToken');\r\n        if (!token) return;\r\n\r\n        const response = await fetch('/api/user/profile', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          const email = data.email || '';\r\n          setAdminEmail(email);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching admin email:', error);\r\n      }\r\n    };\r\n\r\n    fetchAdminEmail();\r\n  }, []);\r\n\r\n  // Filter records with multi-field search (matching machine management pattern)\r\n  useEffect(() => {\r\n    let filtered = records;\r\n\r\n    // Dairy filter\r\n    if (dairyFilter.length > 0) {\r\n      const selectedDairyIds = dairyFilter\r\n        .map(id => dairies.find(d => d.id.toString() === id)?.id)\r\n        .filter(Boolean) as number[];\r\n      if (selectedDairyIds.length > 0) {\r\n        filtered = filtered.filter(record => record.dairy_id && selectedDairyIds.includes(record.dairy_id));\r\n      }\r\n    }\r\n\r\n    // BMC filter\r\n    if (bmcFilter.length > 0) {\r\n      const selectedBmcIds = bmcFilter\r\n        .map(id => bmcs.find(b => b.id.toString() === id)?.id)\r\n        .filter(Boolean) as number[];\r\n      if (selectedBmcIds.length > 0) {\r\n        filtered = filtered.filter(record => record.bmc_id && selectedBmcIds.includes(record.bmc_id));\r\n      }\r\n    }\r\n\r\n    // Status/Shift filter\r\n    if (shiftFilter !== 'all') {\r\n      if (shiftFilter === 'morning') {\r\n        filtered = filtered.filter(record => ['MR', 'MX'].includes(record.shift_type));\r\n      } else if (shiftFilter === 'evening') {\r\n        filtered = filtered.filter(record => ['EV', 'EX'].includes(record.shift_type));\r\n      } else {\r\n        filtered = filtered.filter(record => record.shift_type === shiftFilter);\r\n      }\r\n    }\r\n\r\n    // Society filter\r\n    if (Array.isArray(societyFilter) && societyFilter.length > 0) {\r\n      const selectedSocietyIds = societyFilter.map(id => {\r\n        const society = societies.find(s => s.id.toString() === id);\r\n        return society?.society_id;\r\n      }).filter(Boolean);\r\n      if (selectedSocietyIds.length > 0) {\r\n        filtered = filtered.filter(record => selectedSocietyIds.includes(record.society_id));\r\n      }\r\n    }\r\n\r\n    // Machine filter\r\n    if (machineFilter.length > 0) {\r\n      const selectedMachineIds = machineFilter\r\n        .map(id => machines.find(m => m.id.toString() === id)?.machineId)\r\n        .filter(Boolean) as string[];\r\n      if (selectedMachineIds.length > 0) {\r\n        filtered = filtered.filter(record => selectedMachineIds.includes(record.machine_id));\r\n      }\r\n    }\r\n\r\n    // Channel filter\r\n    if (channelFilter !== 'all') {\r\n      filtered = filtered.filter(record => {\r\n        const displayChannel = getChannelDisplay(record.channel);\r\n        return displayChannel === channelFilter;\r\n      });\r\n    }\r\n\r\n    // Date filter\r\n    if (dateFilter) {\r\n      filtered = filtered.filter(record => record.sales_date === dateFilter);\r\n    }\r\n\r\n    // Date range filter\r\n    if (dateFromFilter) {\r\n      filtered = filtered.filter(record => record.sales_date >= dateFromFilter);\r\n    }\r\n    if (dateToFilter) {\r\n      filtered = filtered.filter(record => record.sales_date <= dateToFilter);\r\n    }\r\n\r\n    // Multi-field search across sales details (matching machine management pattern)\r\n    if (combinedSearch) {\r\n      const searchLower = combinedSearch.toLowerCase();\r\n      filtered = filtered.filter(record => {\r\n        // Get display value for shift\r\n        const shiftDisplay = ['MR', 'MX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'morning'\r\n          ? 'Morning' \r\n          : ['EV', 'EX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'evening'\r\n          ? 'Evening' \r\n          : record.shift_type;\r\n        \r\n        return [\r\n          record.count,\r\n          record.society_id,\r\n          record.society_name,\r\n          record.bmc_name,\r\n          record.dairy_name,\r\n          record.machine_id,\r\n          record.machine_type,\r\n          record.machine_version,\r\n          record.channel,\r\n          getChannelDisplay(record.channel),\r\n          record.sales_date,\r\n          record.sales_time,\r\n          record.shift_type,\r\n          shiftDisplay,\r\n          record.quantity,\r\n          record.rate_per_liter,\r\n          record.total_amount\r\n        ].some(field =>\r\n          field?.toString().toLowerCase().includes(searchLower)\r\n        );\r\n      });\r\n    }\r\n\r\n    setFilteredRecords(filtered);\r\n    calculateStats(filtered);\r\n  }, [globalSearch, searchQuery, dateFilter, dateFromFilter, dateToFilter, shiftFilter, channelFilter, societyFilter, machineFilter, dairyFilter, bmcFilter, records, societies, machines, dairies, bmcs, calculateStats]);\r\n\r\n  // Export to CSV\r\n  const exportToCSV = () => {\r\n    if (filteredRecords.length === 0) return;\r\n\r\n    const dateRange = dateFromFilter && dateToFilter \r\n      ? `${dateFromFilter} To ${dateToFilter}`\r\n      : dateFilter || 'All Dates';\r\n    const currentDateTime = new Date().toLocaleString('en-IN', { \r\n      year: 'numeric', month: '2-digit', day: '2-digit', \r\n      hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false \r\n    });\r\n\r\n    // Detailed data rows\r\n    const dataRows = filteredRecords.map(record => [\r\n      record.sales_date,\r\n      record.sales_time,\r\n      record.channel,\r\n      `${record.machine_id} (${record.machine_type})`,\r\n      `${record.society_name} (${record.society_id})`,\r\n      record.rate_per_liter,\r\n      record.quantity,\r\n      record.total_amount\r\n    ]);\r\n\r\n    const csvContent = [\r\n      'Admin Report - LactoConnect Milk Sales System',\r\n      `Date From ${dateRange}`,\r\n      '',\r\n      'DETAILED SALES DATA',\r\n      '',\r\n      'Date,Time,Channel,Machine,Society,Rate,Quantity (L),Total Amount',\r\n      ...dataRows.map(row => row.join(',')),\r\n      '',\r\n      '',\r\n      'OVERALL SUMMARY',\r\n      `Total Sales:,${stats.totalSales}`,\r\n      `Total Quantity (L):,${stats.totalQuantity.toFixed(2)}`,\r\n      `Total Amount (Rs):,${stats.totalAmount.toFixed(2)}`,\r\n      `Overall Average Rate (Rs/L):,${stats.averageRate.toFixed(2)}`,\r\n      '',\r\n      'Thank you',\r\n      'Poornasree Equipments',\r\n      `Generated on: ${currentDateTime}`\r\n    ].join('\\n');\r\n\r\n    const blob = new Blob([csvContent], { type: 'text/csv' });\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `sales-report-${new Date().toISOString().split('T')[0]}.csv`;\r\n    a.click();\r\n  };\r\n\r\n  // Export to PDF\r\n  const exportToPDF = () => {\r\n    if (filteredRecords.length === 0) return;\r\n\r\n    const doc = new jsPDF({ orientation: 'landscape', unit: 'mm', format: 'a4' });\r\n    const dateRange = dateFromFilter && dateToFilter \r\n      ? `${dateFromFilter} To ${dateToFilter}`\r\n      : dateFilter \r\n      ? `${dateFilter} To ${dateFilter}`\r\n      : 'All Dates';\r\n\r\n    // Add Logo\r\n    const logoPath = '/fulllogo.png';\r\n    doc.addImage(logoPath, 'PNG', 14, 8, 0, 12);\r\n\r\n    // Header\r\n    doc.setFontSize(14);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('Daily Sales Report - LactoConnect Milk Sales System', 148.5, 15, { align: 'center' });\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(`Date From ${dateRange}`, 148.5, 21, { align: 'center' });\r\n    \r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('DETAILED SALES DATA', 148.5, 28, { align: 'center' });\r\n\r\n    // Detailed Data Table with SI No\r\n    const tableData = filteredRecords.map((record, index) => [\r\n      (index + 1).toString(),\r\n      record.sales_date,\r\n      record.sales_time,\r\n      getChannelDisplay(record.channel),\r\n      `${record.machine_id} (${record.machine_type})`,\r\n      `${record.society_name} (${record.society_id})`,\r\n      record.rate_per_liter,\r\n      record.quantity,\r\n      record.total_amount\r\n    ]);\r\n\r\n    autoTable(doc, {\r\n      startY: 32,\r\n      head: [['SI No', 'Date', 'Time', 'Channel', 'Machine', 'Society', 'Rate', 'Quantity (L)', 'Total Amount']],\r\n      body: tableData,\r\n      theme: 'grid',\r\n      styles: { fontSize: 8, cellPadding: 2, halign: 'center' },\r\n      headStyles: { fillColor: [255, 255, 255], textColor: [0, 0, 0], fontStyle: 'bold', fontSize: 9, lineWidth: 0.5, lineColor: [0, 0, 0] },\r\n      bodyStyles: { lineWidth: 0.3, lineColor: [200, 200, 200] },\r\n      columnStyles: {\r\n        0: { cellWidth: 15 }\r\n      }\r\n    });\r\n\r\n    // Summary Section\r\n    const finalY = doc.lastAutoTable.finalY + 8;\r\n    \r\n    // Left side - Overall Summary\r\n    doc.setFontSize(11);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('OVERALL SUMMARY', 14, finalY);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setFontSize(9);\r\n    let leftY = finalY + 6;\r\n    doc.text(`Total Sales        : ${stats.totalSales}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Total Quantity (L) : ${stats.totalQuantity.toFixed(2)}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Total Amount       : ${stats.totalAmount.toFixed(2)}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Avg Rate (Rs/L)    : ${stats.averageRate.toFixed(2)}`, 14, leftY);\r\n\r\n    // Right side - Report Notes\r\n    doc.setFontSize(11);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('REPORT NOTES', 283, finalY, { align: 'right' });\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    let rightY = finalY + 6;\r\n    doc.text('Prepared by: POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n    rightY += 5;\r\n    doc.text('Contact: marketing@poornasree.com', 283, rightY, { align: 'right' });\r\n    \r\n    rightY += 8;\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n    doc.setFont('helvetica', 'normal');\r\n    rightY += 5;\r\n    doc.text('Thank you for using LactoConnect', 283, rightY, { align: 'right' });\r\n    rightY += 5;\r\n    doc.text('For support, visit: www.poornasree.com', 283, rightY, { align: 'right' });\r\n\r\n    doc.save(`sales-report-${new Date().toISOString().split('T')[0]}.pdf`);\r\n  };\r\n\r\n  // Send email with CSV and PDF attachments\r\n  const handleSendEmail = async (email: string) => {\r\n    if (!email || !email.includes('@')) {\r\n      throw new Error('Please enter a valid email address');\r\n    }\r\n\r\n    try {\r\n      // Generate CSV content\r\n      const dateRange = dateFromFilter && dateToFilter \r\n        ? `${dateFromFilter} To ${dateToFilter}`\r\n        : dateFilter || 'All Dates';\r\n      const currentDateTime = new Date().toLocaleString('en-IN', { \r\n        year: 'numeric', month: '2-digit', day: '2-digit', \r\n        hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false \r\n      });\r\n\r\n      const dataRows = filteredRecords.map(record => [\r\n        record.count,\r\n        record.sales_date,\r\n        record.sales_time,\r\n        record.channel,\r\n        record.shift_type,\r\n        `${record.machine_id} (${record.machine_type})`,\r\n        record.society_name || '',\r\n        record.quantity,\r\n        record.rate_per_liter,\r\n        record.total_amount\r\n      ]);\r\n\r\n      const csvContent = [\r\n        ['POORNASREE EQUIPMENTS MILK SALES REPORT'],\r\n        ['Admin Report with Sales Summary'],\r\n        [],\r\n        ['Report Generated:', currentDateTime],\r\n        ['Date Range:', dateRange],\r\n        ['Total Sales:', stats.totalSales],\r\n        ['Total Quantity (L):', stats.totalQuantity.toFixed(2)],\r\n        ['Total Amount (₹):', stats.totalAmount.toFixed(2)],\r\n        ['Average Rate (₹/L):', stats.averageRate.toFixed(2)],\r\n        [],\r\n        ['Count', 'Date', 'Time', 'Channel', 'Shift', 'Machine', 'Society', 'Quantity (L)', 'Rate (₹/L)', 'Total Amount (₹)'],\r\n        ...dataRows\r\n      ].map(row => row.join(',')).join('\\n');\r\n\r\n      // Generate PDF as base64 - matching current PDF design exactly\r\n      const doc = new jsPDF({ orientation: 'landscape', unit: 'mm', format: 'a4' });\r\n      \r\n      // Add Logo (same as current PDF)\r\n      const logoPath = '/fulllogo.png';\r\n      doc.addImage(logoPath, 'PNG', 14, 8, 0, 12);\r\n\r\n      // Header (same as current PDF)\r\n      doc.setFontSize(14);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('Daily Sales Report - LactoConnect Milk Sales System', 148.5, 15, { align: 'center' });\r\n      doc.setFontSize(9);\r\n      doc.setFont('helvetica', 'normal');\r\n      doc.text(`Date From ${dateRange}`, 148.5, 21, { align: 'center' });\r\n      \r\n      doc.setFontSize(10);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('DETAILED SALES DATA', 148.5, 28, { align: 'center' });\r\n\r\n      // Detailed Data Table with SI No (same as current PDF)\r\n      const tableData = filteredRecords.map((record, index) => [\r\n        (index + 1).toString(),\r\n        record.count,\r\n        record.sales_date,\r\n        record.sales_time,\r\n        getChannelDisplay(record.channel),\r\n        record.shift_type,\r\n        `${record.machine_id} (${record.machine_type})`,\r\n        `${record.society_name} (${record.society_id})`,\r\n        record.quantity,\r\n        record.rate_per_liter,\r\n        record.total_amount\r\n      ]);\r\n\r\n      autoTable(doc, {\r\n        startY: 32,\r\n        head: [['SI No', 'Count', 'Date', 'Time', 'Channel', 'Shift', 'Machine', 'Society', 'Quantity (L)', 'Rate', 'Total Amount']],\r\n        body: tableData,\r\n        theme: 'grid',\r\n        styles: { fontSize: 7, cellPadding: 1.5, halign: 'center' },\r\n        headStyles: { fillColor: [255, 255, 255], textColor: [0, 0, 0], fontStyle: 'bold', fontSize: 8, lineWidth: 0.5, lineColor: [0, 0, 0] },\r\n        bodyStyles: { lineWidth: 0.3, lineColor: [200, 200, 200] },\r\n        columnStyles: {\r\n          0: { cellWidth: 12 }\r\n        }\r\n      });\r\n\r\n      // Summary Section (same as current PDF)\r\n      const finalY = doc.lastAutoTable.finalY + 8;\r\n      \r\n      // Left side - Overall Summary\r\n      doc.setFontSize(11);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('OVERALL SUMMARY', 14, finalY);\r\n      doc.setFont('helvetica', 'normal');\r\n      let leftY = finalY + 6;\r\n      doc.text(`Total Sales        : ${stats.totalSales}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Total Quantity (L) : ${stats.totalQuantity.toFixed(2)}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Total Amount       : ${stats.totalAmount.toFixed(2)}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Average Rate       : ${stats.averageRate.toFixed(2)}`, 14, leftY);\r\n\r\n      // Right side - Report Notes\r\n      doc.setFontSize(11);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('REPORT NOTES', 283, finalY, { align: 'right' });\r\n      doc.setFontSize(9);\r\n      doc.setFont('helvetica', 'normal');\r\n      let rightY = finalY + 6;\r\n      doc.text('Prepared by: POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n      rightY += 5;\r\n      doc.text('Contact: marketing@poornasree.com', 283, rightY, { align: 'right' });\r\n      \r\n      rightY += 8;\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n      doc.setFont('helvetica', 'normal');\r\n      rightY += 5;\r\n      doc.text('Thank you for using LactoConnect', 283, rightY, { align: 'right' });\r\n      rightY += 5;\r\n      doc.text('For support, visit: www.poornasree.com', 283, rightY, { align: 'right' });\r\n\r\n      const pdfBase64 = doc.output('datauristring').split(',')[1];\r\n\r\n      // Send email with attachments\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/reports/send-email', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          email: email,\r\n          csvContent,\r\n          pdfContent: pdfBase64,\r\n          reportType: 'Sales Report',\r\n          dateRange,\r\n          stats\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        throw new Error(errorData.error || 'Failed to send email');\r\n      }\r\n\r\n      setSuccessMessage(`Report sent successfully to ${email}`);\r\n      setTimeout(() => setSuccessMessage(''), 5000);\r\n    } catch (error) {\r\n      console.error('Error sending email:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <FlowerSpinner size={48} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Statistics Cards */}\r\n      <div className=\"grid grid-cols-4 gap-3\">\r\n        <StatsCard\r\n          title=\"Total Sales\"\r\n          value={stats.totalSales}\r\n          icon={<ShoppingCart className=\"w-full h-full\" />}\r\n          color=\"blue\"\r\n        />\r\n        <StatsCard\r\n          title=\"Total Quantity (L)\"\r\n          value={stats.totalQuantity}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"green\"\r\n        />\r\n        <StatsCard\r\n          title=\"Total Amount (₹)\"\r\n          value={`₹${stats.totalAmount.toFixed(2)}`}\r\n          icon={<DollarSign className=\"w-full h-full\" />}\r\n          color=\"yellow\"\r\n        />\r\n        <StatsCard\r\n          title=\"Avg Rate (₹/L)\"\r\n          value={`₹${stats.averageRate.toFixed(2)}`}\r\n          icon={<TrendingUp className=\"w-full h-full\" />}\r\n          color=\"gray\"\r\n        />\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 sm:p-6\">\r\n        <div className=\"space-y-4\">\r\n          {/* Filter Info */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n              Showing {filteredRecords.length} of {records.length} records\r\n            </span>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={() => {\r\n                  clearFilters();\r\n                  fetchData();\r\n                }}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-psr-primary-600 text-white rounded-lg hover:bg-psr-primary-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <RefreshCw className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">Refresh</span>\r\n              </button>\r\n              <button\r\n                onClick={exportToCSV}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-psr-green-600 text-white rounded-lg hover:bg-psr-green-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <Download className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">CSV</span>\r\n              </button>\r\n              <button\r\n                onClick={exportToPDF}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <FileDown className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">PDF</span>\r\n              </button>\r\n              <button\r\n                onClick={() => setShowEmailModal(true)}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <Mail className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">Send Mail</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Filter Dropdown - All Filters Inside */}\r\n          <FilterDropdown\r\n            statusFilter={shiftFilter}\r\n            onStatusChange={setShiftFilter}\r\n            dairyFilter={dairyFilter}\r\n            onDairyChange={(value) => setDairyFilter(Array.isArray(value) ? value : [value])}\r\n            bmcFilter={bmcFilter}\r\n            onBmcChange={(value) => setBmcFilter(Array.isArray(value) ? value : [value])}\r\n            societyFilter={societyFilter}\r\n            onSocietyChange={(value) => setSocietyFilter(Array.isArray(value) ? value : [value])}\r\n            machineFilter={machineFilter}\r\n            onMachineChange={(value) => setMachineFilter(Array.isArray(value) ? value : [value])}\r\n            dairies={dairiesWithSales}\r\n            bmcs={bmcs}\r\n            societies={societies}\r\n            machines={machines}\r\n            filteredCount={filteredRecords.length}\r\n            totalCount={records.length}\r\n            searchQuery={searchQuery}\r\n            onSearchChange={setSearchQuery}\r\n            icon={<DollarSign className=\"w-5 h-5\" />}\r\n            dateFilter={dateFilter}\r\n            onDateChange={setDateFilter}\r\n            dateFromFilter={dateFromFilter}\r\n            onDateFromChange={setDateFromFilter}\r\n            dateToFilter={dateToFilter}\r\n            onDateToChange={setDateToFilter}\r\n            channelFilter={channelFilter}\r\n            onChannelChange={setChannelFilter}\r\n            showDateFilter\r\n            showChannelFilter\r\n            showShiftFilter\r\n            showMachineFilter\r\n            hideMainFilterButton={true}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Data Table */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden\">\r\n        <div className=\"overflow-auto max-h-[600px]\" tabIndex={0}>\r\n          <table className=\"w-auto min-w-full table-auto\">\r\n            <thead className=\"bg-gray-50 dark:bg-gray-700 sticky top-0 z-10\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectAll}\r\n                    onChange={handleSelectAll}\r\n                    className=\"w-4 h-4 text-emerald-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 cursor-pointer\"\r\n                  />\r\n                </th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Date & Time</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Count</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Society</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Shift</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Channel</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Machine</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Rate/L</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Qty (L)</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Amount</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n              {filteredRecords.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan={11} className=\"px-4 py-8 text-center text-gray-500 dark:text-gray-400\">\r\n                    No sales records found\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                filteredRecords.map((record) => (\r\n                  <React.Fragment key={record.id}>\r\n                    <tr className={`transition-colors ${\r\n                      selectedRecords.has(record.id)\r\n                        ? 'bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30'\r\n                        : 'hover:bg-gray-50 dark:hover:bg-gray-700'\r\n                    }`}>\r\n                      <td className=\"px-4 py-3 text-center\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={selectedRecords.has(record.id)}\r\n                          onChange={() => handleSelectOne(record.id)}\r\n                          className=\"w-4 h-4 text-emerald-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 cursor-pointer\"\r\n                        />\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                        <div>{highlightText(record.sales_date, combinedSearch)}</div>\r\n                        <div className=\"text-xs text-gray-500\">{record.sales_time}</div>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center font-medium text-gray-900 dark:text-white\">\r\n                        #{highlightText(record.count, combinedSearch)}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                        <div className=\"font-medium\">{highlightText(record.society_name, combinedSearch)}</div>\r\n                        <div className=\"text-xs text-gray-500\">ID: {highlightText(record.society_id, combinedSearch)}</div>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center\">\r\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                          ['MR', 'MX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'morning'\r\n                            ? 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400'\r\n                            : ['EV', 'EX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'evening'\r\n                            ? 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400'\r\n                            : 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400'\r\n                        }`}>\r\n                          {highlightText(\r\n                            ['MR', 'MX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'morning'\r\n                              ? 'Morning' \r\n                              : ['EV', 'EX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'evening'\r\n                              ? 'Evening' \r\n                              : record.shift_type,\r\n                            combinedSearch\r\n                          )}\r\n                        </span>\r\n                      </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center\">\r\n                      <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                        getChannelDisplay(record.channel) === 'COW'\r\n                          ? 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400'\r\n                          : getChannelDisplay(record.channel) === 'BUFFALO'\r\n                          ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400'\r\n                          : 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400'\r\n                      }`}>\r\n                        {highlightText(getChannelDisplay(record.channel), combinedSearch)}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                      <div className=\"font-medium\">{highlightText(record.machine_id || 'N/A', combinedSearch)}</div>\r\n                      <div className=\"text-xs text-gray-500\">{highlightText(record.machine_type, combinedSearch)}</div>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">\r\n                      ₹{highlightText(parseFloat(record.rate_per_liter).toFixed(2), combinedSearch)}\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center font-medium text-gray-900 dark:text-white\">\r\n                      {highlightText(parseFloat(record.quantity).toFixed(2), combinedSearch)}\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center font-medium text-green-600 dark:text-green-400\">\r\n                      ₹{highlightText(parseFloat(record.total_amount).toFixed(2), combinedSearch)}\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center\">\r\n                      <button\r\n                        onClick={() => handleDeleteClick(record.id)}\r\n                        className=\"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors\"\r\n                        title=\"Delete record\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                </React.Fragment>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Password Confirmation Dialog */}\r\n      <PasswordConfirmDialog\r\n        isOpen={deleteDialogOpen}\r\n        onClose={() => setDeleteDialogOpen(false)}\r\n        onConfirm={handleDeleteConfirm}\r\n        title=\"Delete Sales Record\"\r\n        message=\"Enter your admin password to confirm deletion. This action cannot be undone and will be logged for security purposes.\"\r\n      />\r\n\r\n      {/* Bulk Delete Password Confirmation Modal */}\r\n      <PasswordConfirmDialog\r\n        isOpen={showBulkDeleteConfirm}\r\n        onClose={() => {\r\n          setShowBulkDeleteConfirm(false);\r\n          setBulkDeletePassword('');\r\n        }}\r\n        onConfirm={handleBulkDeleteConfirm}\r\n        title={`Delete ${selectedRecords.size} Sales Record${selectedRecords.size > 1 ? 's' : ''}`}\r\n        message={`Enter your admin password to confirm deletion of ${selectedRecords.size} selected record(s). This action cannot be undone and will be logged for security purposes.`}\r\n      />\r\n\r\n      {/* Bulk Actions Toolbar */}\r\n      <BulkActionsToolbar\r\n        selectedCount={selectedRecords.size}\r\n        totalCount={filteredRecords.length}\r\n        onBulkDelete={handleBulkDeleteClick}\r\n        onClearSelection={handleClearSelection}\r\n        itemType=\"record\"\r\n        showStatusUpdate={false}\r\n      />\r\n\r\n      {/* Loading Snackbar */}\r\n      <LoadingSnackbar\r\n        isVisible={deleting || isDeletingBulk}\r\n        message={isDeletingBulk ? `Deleting ${selectedRecords.size} Records` : \"Deleting Record\"}\r\n        submessage=\"Verifying credentials and removing data...\"\r\n        showProgress={false}\r\n      />\r\n\r\n      {/* Email Modal */}\r\n      <EmailReportModal\r\n        isOpen={showEmailModal}\r\n        onClose={() => setShowEmailModal(false)}\r\n        onSend={handleSendEmail}\r\n        defaultEmail={adminEmail}\r\n        recordCount={filteredRecords.length}\r\n        reportType=\"Sales Report\"\r\n      />\r\n\r\n      {/* Status Messages */}\r\n      <StatusMessage\r\n        success={successMessage}\r\n        error={errorMessage}\r\n        onClose={() => {\r\n          setSuccessMessage('');\r\n          setErrorMessage('');\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, Suspense } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { FileText, Droplet, Truck, DollarSign } from 'lucide-react';\r\nimport CollectionReports from '@/components/reports/CollectionReports';\r\nimport DispatchReports from '@/components/reports/DispatchReports';\r\nimport SalesReports from '@/components/reports/SalesReports';\r\n\r\nexport const dynamic = 'force-dynamic';\r\n\r\ntype ReportType = 'collection' | 'dispatch' | 'sales';\r\n\r\ninterface TabConfig {\r\n  id: ReportType;\r\n  label: string;\r\n  icon: typeof Droplet;\r\n  color: string;\r\n  gradient: string;\r\n}\r\n\r\nconst tabs: TabConfig[] = [\r\n  {\r\n    id: 'collection',\r\n    label: 'Collection',\r\n    icon: Droplet,\r\n    color: 'text-blue-600 dark:text-blue-400',\r\n    gradient: 'from-blue-600 to-cyan-600'\r\n  },\r\n  {\r\n    id: 'dispatch',\r\n    label: 'Dispatch',\r\n    icon: Truck,\r\n    color: 'text-green-600 dark:text-green-400',\r\n    gradient: 'from-green-600 to-emerald-600'\r\n  },\r\n  {\r\n    id: 'sales',\r\n    label: 'Sales',\r\n    icon: DollarSign,\r\n    color: 'text-purple-600 dark:text-purple-400',\r\n    gradient: 'from-purple-600 to-pink-600'\r\n  }\r\n];\r\n\r\nfunction ReportsPage() {\r\n  const searchParams = useSearchParams();\r\n  const [activeTab, setActiveTab] = useState<ReportType>('collection');\r\n  const [globalSearch, setGlobalSearch] = useState('');\r\n  const [initialSocietyId, setInitialSocietyId] = useState<string | null>(null);\r\n  const [initialSocietyName, setInitialSocietyName] = useState<string | null>(null);\r\n  const [initialFromDate, setInitialFromDate] = useState<string | null>(null);\r\n  const [initialToDate, setInitialToDate] = useState<string | null>(null);\r\n  const [initialBmcFilter, setInitialBmcFilter] = useState<string | null>(null);\r\n  const [initialMachineFilter, setInitialMachineFilter] = useState<string | null>(null);\r\n\r\n  // Read URL parameters on mount\r\n  useEffect(() => {\r\n    const societyId = searchParams.get('societyId');\r\n    const societyName = searchParams.get('societyName');\r\n    const fromDate = searchParams.get('fromDate');\r\n    const toDate = searchParams.get('toDate');\r\n    const bmcFilter = searchParams.get('bmcFilter');\r\n    const machineFilter = searchParams.get('machineFilter');\r\n    \r\n    console.log('Reports Page - URL Params:', { societyId, societyName, fromDate, toDate, machineFilter });\r\n    \r\n    if (societyId) {\r\n      setInitialSocietyId(societyId);\r\n      setInitialSocietyName(societyName);\r\n    }\r\n    \r\n    if (fromDate) {\r\n      console.log('Setting initialFromDate:', fromDate);\r\n      setInitialFromDate(fromDate);\r\n    }\r\n    \r\n    if (toDate) {\r\n      console.log('Setting initialToDate:', toDate);\r\n      setInitialToDate(toDate);\r\n    }\r\n    \r\n    if (bmcFilter) {\r\n      console.log('Setting initialBmcFilter:', bmcFilter);\r\n      setInitialBmcFilter(bmcFilter);\r\n    }\r\n    \r\n    if (machineFilter) {\r\n      console.log('Setting initialMachineFilter:', machineFilter);\r\n      setInitialMachineFilter(machineFilter);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // Run once on mount\r\n\r\n  // Listen to global search event from header\r\n  useEffect(() => {\r\n    const handleGlobalSearch = (event: CustomEvent<{ query: string }>) => {\r\n      setGlobalSearch(event.detail.query);\r\n    };\r\n\r\n    window.addEventListener('globalSearch', handleGlobalSearch as EventListener);\r\n    return () => {\r\n      window.removeEventListener('globalSearch', handleGlobalSearch as EventListener);\r\n    };\r\n  }, []);\r\n\r\n  const renderContent = () => {\r\n    console.log('Rendering with date filters:', { initialFromDate, initialToDate, initialBmcFilter, initialMachineFilter });\r\n    switch (activeTab) {\r\n      case 'collection':\r\n        return <CollectionReports key=\"collection\" globalSearch={globalSearch} initialSocietyId={initialSocietyId} initialSocietyName={initialSocietyName} initialFromDate={initialFromDate} initialToDate={initialToDate} initialBmcFilter={initialBmcFilter} initialMachineFilter={initialMachineFilter} />;\r\n      case 'dispatch':\r\n        return <DispatchReports key=\"dispatch\" globalSearch={globalSearch} />;\r\n      case 'sales':\r\n        return <SalesReports key=\"sales\" globalSearch={globalSearch} />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\r\n      {/* Header */}\r\n      <div className=\"border-b border-gray-200 dark:border-gray-700\">\r\n        <div className=\"px-4 sm:px-6 lg:px-8 py-4 sm:py-6\">\r\n          <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\">\r\n            {/* Reports Title - Left Side */}\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 sm:p-3 bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl shadow-lg\">\r\n                <FileText className=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" />\r\n              </div>\r\n              <div>\r\n                <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white\">\r\n                  Reports\r\n                </h1>\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1 hidden sm:block\">\r\n                  View and analyze data\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Toggle Button - Right Side */}\r\n            <div className=\"inline-flex bg-psr-green-50 dark:bg-gray-800 rounded-xl p-1 shadow-inner\">\r\n              {tabs.map((tab) => {\r\n                const Icon = tab.icon;\r\n                const isActive = activeTab === tab.id;\r\n\r\n                return (\r\n                  <button\r\n                    key={tab.id}\r\n                    onClick={() => setActiveTab(tab.id)}\r\n                    className={`\r\n                      relative flex items-center gap-2 px-4 sm:px-6 py-2 sm:py-2.5 rounded-lg font-medium\r\n                      transition-all duration-200\r\n                      ${\r\n                        isActive\r\n                          ? 'bg-psr-green-600 dark:bg-psr-green-700 text-white shadow-md'\r\n                          : 'text-gray-600 dark:text-gray-400 hover:text-psr-green-600 dark:hover:text-psr-green-400'\r\n                      }\r\n                    `}\r\n                  >\r\n                    <Icon className=\"w-4 h-4 sm:w-5 sm:h-5\" />\r\n                    <span className=\"hidden sm:inline\">{tab.label}</span>\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content Area */}\r\n      <div className=\"px-4 sm:px-6 lg:px-8 py-6\">\r\n        <AnimatePresence mode=\"wait\">\r\n          <motion.div\r\n            key={activeTab}\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -20 }}\r\n            transition={{ duration: 0.2 }}\r\n          >\r\n            {renderContent()}\r\n          </motion.div>\r\n        </AnimatePresence>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Wrapper component with Suspense boundary for useSearchParams\r\nexport default function ReportsPageWrapper() {\r\n  return (\r\n    <Suspense fallback={\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500\"></div>\r\n      </div>\r\n    }>\r\n      <ReportsPage />\r\n    </Suspense>\r\n  );\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z',\n      key: '1a0edw',\n    },\n  ],\n  ['path', { d: 'M12 22V12', key: 'd0xqtd' }],\n  ['polyline', { points: '3.29 7 12 12 20.71 7', key: 'ousv84' }],\n  ['path', { d: 'm7.5 4.27 9 5.15', key: '1c824w' }],\n];\n\n/**\n * @component @name Package\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTEgMjEuNzNhMiAyIDAgMCAwIDIgMGw3LTRBMiAyIDAgMCAwIDIxIDE2VjhhMiAyIDAgMCAwLTEtMS43M2wtNy00YTIgMiAwIDAgMC0yIDBsLTcgNEEyIDIgMCAwIDAgMyA4djhhMiAyIDAgMCAwIDEgMS43M3oiIC8+CiAgPHBhdGggZD0iTTEyIDIyVjEyIiAvPgogIDxwb2x5bGluZSBwb2ludHM9IjMuMjkgNyAxMiAxMiAyMC43MSA3IiAvPgogIDxwYXRoIGQ9Im03LjUgNC4yNyA5IDUuMTUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/package\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Package = createLucideIcon('package', __iconNode);\n\nexport default Package;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z', key: '1rqfz7' }],\n  ['path', { d: 'M14 2v4a2 2 0 0 0 2 2h4', key: 'tnqrlb' }],\n  ['path', { d: 'M12 18v-6', key: '17g6i2' }],\n  ['path', { d: 'm9 15 3 3 3-3', key: '1npd3o' }],\n];\n\n/**\n * @component @name FileDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgMkg2YTIgMiAwIDAgMC0yIDJ2MTZhMiAyIDAgMCAwIDIgMmgxMmEyIDIgMCAwIDAgMi0yVjdaIiAvPgogIDxwYXRoIGQ9Ik0xNCAydjRhMiAyIDAgMCAwIDIgMmg0IiAvPgogIDxwYXRoIGQ9Ik0xMiAxOHYtNiIgLz4KICA8cGF0aCBkPSJtOSAxNSAzIDMgMy0zIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/file-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst FileDown = createLucideIcon('file-down', __iconNode);\n\nexport default FileDown;\n"],"names":[],"mappings":"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","ignoreList":[5,6]}