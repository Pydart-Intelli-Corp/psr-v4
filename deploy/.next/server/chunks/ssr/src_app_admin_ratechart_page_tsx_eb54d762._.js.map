{"version":3,"sources":["turbopack:///[project]/src/components/ratechart/RateChartUploadModal.tsx","turbopack:///[project]/src/components/ratechart/RateChartMinimalCard.tsx","turbopack:///[project]/src/components/ratechart/AssignSocietyModal.tsx","turbopack:///[project]/src/components/ratechart/TotalAssignmentsModal.tsx","turbopack:///[project]/src/components/ratechart/ResetDownloadModal.tsx","turbopack:///[project]/src/app/admin/ratechart/page.tsx","turbopack:///[project]/node_modules/lucide-react/src/icons/chevron-up.ts","turbopack:///[project]/node_modules/lucide-react/src/icons/power.ts","turbopack:///[project]/node_modules/lucide-react/src/icons/power-off.ts","turbopack:///[project]/node_modules/lucide-react/src/icons/user-plus.ts"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { Upload, Download } from 'lucide-react';\r\nimport { FormModal, FormSelect, FormActions } from '@/components';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\n\r\ninterface Society {\r\n  id: number;\r\n  name: string;\r\n  society_id: string;\r\n}\r\n\r\ninterface RateChartUploadModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  societies: Society[];\r\n  onUploadSuccess: (message: string) => void;\r\n  onUploadError: (message: string) => void;\r\n  onUploadStart?: () => void;\r\n  onUploadEnd?: () => void;\r\n  onProgressUpdate?: (progress: number) => void;\r\n}\r\n\r\ntype ChannelType = 'COW' | 'BUF' | 'MIX';\r\n\r\n/**\r\n * Reusable rate chart upload modal\r\n * Handles CSV file selection, society and channel selection, and upload\r\n * Supports multiple society selection\r\n */\r\nconst RateChartUploadModal: React.FC<RateChartUploadModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  societies,\r\n  onUploadSuccess,\r\n  onUploadError,\r\n  onUploadStart,\r\n  onUploadEnd,\r\n  onProgressUpdate\r\n}) => {\r\n  const { t } = useLanguage();\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n  const [selectedSocieties, setSelectedSocieties] = useState<number[]>([]);\r\n  const [channel, setChannel] = useState<ChannelType | ''>('');\r\n  const [isUploading, setIsUploading] = useState(false);\r\n\r\n  // Update progress and notify parent\r\n  const updateProgress = (progress: number) => {\r\n    onProgressUpdate?.(progress);\r\n  };\r\n\r\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      if (!file.name.toLowerCase().endsWith('.csv')) {\r\n        onUploadError('Please select a CSV file');\r\n        return;\r\n      }\r\n      setSelectedFile(file);\r\n    }\r\n  };\r\n\r\n  const handleSocietyToggle = (societyId: number) => {\r\n    setSelectedSocieties(prev => {\r\n      if (prev.includes(societyId)) {\r\n        return prev.filter(id => id !== societyId);\r\n      } else {\r\n        return [...prev, societyId];\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    if (selectedSocieties.length === societies.length) {\r\n      setSelectedSocieties([]);\r\n    } else {\r\n      setSelectedSocieties(societies.map(s => s.id));\r\n    }\r\n  };\r\n\r\n  const handleUpload = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (selectedSocieties.length === 0 || !channel || !selectedFile) {\r\n      onUploadError('Please select at least one society, channel, and CSV file');\r\n      return;\r\n    }\r\n\r\n    setIsUploading(true);\r\n    updateProgress(0);\r\n    onUploadStart?.();\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      updateProgress(10);\r\n\r\n      // Single API call with multiple society IDs\r\n      const uploadFormData = new FormData();\r\n      uploadFormData.append('file', selectedFile);\r\n      uploadFormData.append('societyIds', selectedSocieties.join(','));\r\n      uploadFormData.append('channel', channel);\r\n\r\n      updateProgress(30);\r\n\r\n      const response = await fetch('/api/user/ratechart/upload', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: uploadFormData\r\n      });\r\n\r\n      updateProgress(70);\r\n\r\n      const data = await response.json();\r\n\r\n      updateProgress(90);\r\n\r\n      if (data.success) {\r\n        updateProgress(100);\r\n        const message = `Rate chart uploaded to ${selectedSocieties.length} ${selectedSocieties.length === 1 ? 'society' : 'societies'}! Total ${data.data.recordCount} records imported.`;\r\n        onUploadSuccess(message);\r\n        handleClose();\r\n      } else {\r\n        onUploadError(data.message || 'Failed to upload rate chart');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error uploading rate chart:', error);\r\n      onUploadError('Error uploading rate chart. Please try again.');\r\n    } finally {\r\n      setIsUploading(false);\r\n      updateProgress(0);\r\n      onUploadEnd?.();\r\n    }\r\n  };\r\n\r\n  const downloadSampleCSV = () => {\r\n    const csvContent = `CLR,FAT,SNF,RATE\r\n7,3,3,15\r\n8,3,3.1,15.25\r\n8,3,3.2,15.5\r\n8,3,3.3,15.75\r\n9,3,3.4,16\r\n9,3,3.5,16.25\r\n10,3,3.6,16.5`;\r\n\r\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    const url = URL.createObjectURL(blob);\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', 'ratechart_sample.csv');\r\n    link.style.visibility = 'hidden';\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setSelectedFile(null);\r\n    setSelectedSocieties([]);\r\n    setChannel('');\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <FormModal\r\n      isOpen={isOpen}\r\n      onClose={handleClose}\r\n      title={t.ratechartManagement.uploadRateChart}\r\n      maxWidth=\"lg\"\r\n    >\r\n      <form onSubmit={handleUpload} className=\"space-y-4 sm:space-y-6\">\r\n        {/* Instructions */}\r\n        <div className=\"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg\">\r\n          <h3 className=\"font-medium text-blue-900 dark:text-blue-100 mb-2 text-sm\">\r\n            {t.ratechartManagement.csvFormatRequirements}:\r\n          </h3>\r\n          <ul className=\"list-disc list-inside space-y-1 text-xs text-blue-800 dark:text-blue-200\">\r\n            <li>{t.ratechartManagement.headersRequired}: CLR, FAT, SNF, RATE</li>\r\n            <li>{t.ratechartManagement.clrDescription}: {t.ratechartManagement.colorDegreeNumeric}</li>\r\n            <li>{t.ratechartManagement.fatDescription}: {t.ratechartManagement.fatPercentageNumeric}</li>\r\n            <li>{t.ratechartManagement.snfDescription}: {t.ratechartManagement.snfPercentageNumeric}</li>\r\n            <li>{t.ratechartManagement.rateDescription}: {t.ratechartManagement.ratePerLiterNumeric}</li>\r\n            <li>{t.ratechartManagement.fileEncodingUTF8}</li>\r\n          </ul>\r\n          <button\r\n            type=\"button\"\r\n            onClick={downloadSampleCSV}\r\n            className=\"mt-3 flex items-center text-xs text-blue-600 dark:text-blue-400 hover:underline\"\r\n          >\r\n            <Download className=\"w-4 h-4 mr-1\" />\r\n            {t.ratechartManagement.downloadSampleCSV}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Society Selection */}\r\n        <div>\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n              {t.ratechartManagement.selectSociety} <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleSelectAll}\r\n              className=\"text-sm text-green-600 dark:text-green-400 hover:underline\"\r\n            >\r\n              {selectedSocieties.length === societies.length ? t.common.clearAll : t.common.selectAll}\r\n            </button>\r\n          </div>\r\n          <div className=\"border border-gray-300 dark:border-gray-600 rounded-lg p-3 max-h-48 overflow-y-auto space-y-2\">\r\n            {societies.length === 0 ? (\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400 text-center py-2\">\r\n                {t.ratechartManagement.noSocietiesAvailable}\r\n              </p>\r\n            ) : (\r\n              societies.map(society => (\r\n                <label\r\n                  key={society.id}\r\n                  className=\"flex items-center space-x-3 p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded cursor-pointer\"\r\n                >\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedSocieties.includes(society.id)}\r\n                    onChange={() => handleSocietyToggle(society.id)}\r\n                    className=\"w-4 h-4 text-green-600 border-gray-300 dark:border-gray-600 rounded focus:ring-green-500\"\r\n                  />\r\n                  <span className=\"text-sm text-gray-900 dark:text-white\">\r\n                    {society.name} ({society.society_id})\r\n                  </span>\r\n                </label>\r\n              ))\r\n            )}\r\n          </div>\r\n          {selectedSocieties.length > 0 && (\r\n            <p className=\"mt-2 text-xs text-gray-600 dark:text-gray-400\">\r\n              {selectedSocieties.length} {selectedSocieties.length === 1 ? t.ratechartManagement.society : t.ratechartManagement.societies} {t.common.selected}\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        <FormSelect\r\n          label={t.ratechartManagement.milkChannel}\r\n          value={channel}\r\n          onChange={(value) => setChannel(value as ChannelType)}\r\n          options={[\r\n            { value: 'COW', label: t.ratechartManagement.cow },\r\n            { value: 'BUF', label: t.ratechartManagement.buffalo },\r\n            { value: 'MIX', label: t.ratechartManagement.mixed }\r\n          ]}\r\n          placeholder={t.ratechartManagement.selectChannel}\r\n          required\r\n        />\r\n\r\n        {/* File Upload */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            {t.ratechartManagement.csvFile} <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-green-400 dark:hover:border-green-500 transition-colors\">\r\n            <input\r\n              type=\"file\"\r\n              accept=\".csv\"\r\n              onChange={handleFileSelect}\r\n              className=\"hidden\"\r\n              id=\"csv-upload\"\r\n            />\r\n            <label\r\n              htmlFor=\"csv-upload\"\r\n              className=\"cursor-pointer flex flex-col items-center\"\r\n            >\r\n              <Upload className=\"w-12 h-12 text-gray-400 mb-3\" />\r\n              {selectedFile ? (\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                    {selectedFile.name}\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n                    {(selectedFile.size / 1024).toFixed(2)} KB\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                    {t.ratechartManagement.clickToUploadCSV}\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n                    {t.ratechartManagement.orDragAndDrop}\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        <FormActions\r\n          onCancel={handleClose}\r\n          submitText={`${t.common.upload} to ${selectedSocieties.length} ${selectedSocieties.length === 1 ? t.ratechartManagement.society : t.ratechartManagement.societies}`}\r\n          isLoading={isUploading}\r\n          isSubmitDisabled={selectedSocieties.length === 0 || !channel || !selectedFile}\r\n          submitType=\"submit\"\r\n        />\r\n      </form>\r\n    </FormModal>\r\n  );\r\n};\r\n\r\nexport default RateChartUploadModal;\r\n","'use client';\r\n\r\nimport React from 'react';\r\nimport { Receipt, Trash2, UserPlus, Power, PowerOff, Eye, RefreshCw, FileText, X, MoreVertical, ChevronDown, ChevronUp, Building2, CheckCircle, Download, Clock } from 'lucide-react';\r\nimport { ConfirmDeleteModal } from '@/components/management';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\n\r\n// Helper function to convert database channel values to display format\r\nconst getChannelDisplay = (channel: string): string => {\r\n  const channelMap: { [key: string]: string } = {\r\n    'COW': 'COW',\r\n    'BUF': 'BUFFALO',\r\n    'MIX': 'MIXED',\r\n    'BUFFALO': 'BUFFALO',\r\n    'MIXED': 'MIXED'\r\n  };\r\n  return channelMap[channel] || channel;\r\n};\r\n\r\ninterface DownloadStatus {\r\n  allDownloaded: boolean;\r\n  totalMachines: number;\r\n  totalDownloaded: number;\r\n  totalPending: number;\r\n  societies: Record<number, {\r\n    societyId: number;\r\n    societyName: string;\r\n    societyIdentifier: string;\r\n    totalMachines: number;\r\n    downloadedMachines: number;\r\n    pendingMachines: number;\r\n    machines: Array<{\r\n      id: number;\r\n      machineId: string;\r\n      machineType: string;\r\n      location: string | null;\r\n      downloaded: boolean;\r\n      downloadedAt: string | null;\r\n    }>;\r\n  }>;\r\n}\r\n\r\n// Helper function to highlight matching text\r\nconst highlightText = (text: string, searchQuery: string) => {\r\n  if (!searchQuery) return text;\r\n  \r\n  const regex = new RegExp(`(${searchQuery.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\r\n  const parts = text.split(regex);\r\n  \r\n  return parts.map((part, index) => \r\n    regex.test(part) ? (\r\n      <span key={index} className=\"bg-yellow-200 dark:bg-yellow-800 px-0.5 rounded\">\r\n        {part}\r\n      </span>\r\n    ) : (\r\n      part\r\n    )\r\n  );\r\n};\r\n\r\n// Helper function to render status indicator with download info\r\nconst getStatusIndicator = (\r\n  status: number, \r\n  downloadStatus: DownloadStatus | null, \r\n  isLoading: boolean,\r\n  onClick?: () => void,\r\n  hasDropdown?: boolean\r\n) => {\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center gap-1.5\">\r\n        <div className=\"w-2 h-2 rounded-full bg-gray-400 dark:bg-gray-500 animate-pulse\" />\r\n        <span className=\"text-xs font-medium text-gray-600 dark:text-gray-400\">Loading...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Status 0 means chart is inactive\r\n  if (status === 0) {\r\n    return (\r\n      <div className=\"flex items-center gap-1.5\">\r\n        <div className=\"w-2 h-2 rounded-full bg-gray-500 dark:bg-gray-400\" />\r\n        <span className=\"text-xs font-medium text-gray-600 dark:text-gray-400\">Inactive</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // If we have download status data\r\n  if (downloadStatus) {\r\n    const { allDownloaded, totalDownloaded, totalMachines } = downloadStatus;\r\n\r\n    if (totalMachines === 0) {\r\n      // No machines assigned\r\n      return (\r\n        <div className=\"flex items-center gap-1.5\">\r\n          <div className=\"w-2 h-2 rounded-full bg-amber-500 dark:bg-amber-400 animate-pulse\" />\r\n          <span className=\"text-xs font-medium text-amber-600 dark:text-amber-400\">Ready</span>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const baseClasses = \"flex items-center gap-1.5\";\r\n    const clickableClasses = onClick \r\n      ? \"cursor-pointer hover:opacity-80 transition-opacity\" \r\n      : \"\";\r\n\r\n    if (allDownloaded) {\r\n      // All machines have downloaded\r\n      return (\r\n        <div className={`${baseClasses} ${clickableClasses}`} onClick={onClick}>\r\n          <CheckCircle className=\"w-3.5 h-3.5 text-green-600 dark:text-green-400\" />\r\n          <span className=\"text-xs font-medium text-green-600 dark:text-green-400\">\r\n            Downloaded ({totalDownloaded}/{totalMachines})\r\n          </span>\r\n          {hasDropdown && <ChevronDown className=\"w-3 h-3 text-green-600 dark:text-green-400\" />}\r\n        </div>\r\n      );\r\n    } else {\r\n      // Partial downloads\r\n      return (\r\n        <div className={`${baseClasses} ${clickableClasses}`} onClick={onClick}>\r\n          <Clock className=\"w-3.5 h-3.5 text-blue-600 dark:text-blue-400\" />\r\n          <span className=\"text-xs font-medium text-blue-600 dark:text-blue-400\">\r\n            Pending ({totalDownloaded}/{totalMachines})\r\n          </span>\r\n          {hasDropdown && <ChevronDown className=\"w-3 h-3 text-blue-600 dark:text-blue-400\" />}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  // Fallback to old behavior\r\n  return (\r\n    <div className=\"flex items-center gap-1.5\">\r\n      <div className=\"w-2 h-2 rounded-full bg-amber-500 dark:bg-amber-400 animate-pulse\" />\r\n      <span className=\"text-xs font-medium text-amber-600 dark:text-amber-400\">Ready</span>\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface Society {\r\n  societyId: number;\r\n  societyName: string;\r\n  societyIdentifier: string;\r\n  chartRecordId: number;\r\n}\r\n\r\ninterface RateChartMinimalCardProps {\r\n  chartId: number;\r\n  fileName: string;\r\n  channel: string;\r\n  uploadedBy: string;\r\n  createdAt: string;\r\n  societies: Society[];\r\n  status: number;\r\n  isSelected: boolean;\r\n  onToggleSelection: () => void;\r\n  onDelete: () => void;\r\n  onAssignSociety: () => void;\r\n  onToggleStatus: (chartId: number, currentStatus: number) => void;\r\n  onView: () => void;\r\n  onResetDownload: () => void;\r\n  onRemoveSociety?: (chartRecordId: number, societyId: number, societyName: string) => void;\r\n  searchQuery?: string;\r\n}\r\n\r\nexport default function RateChartMinimalCard({\r\n  chartId,\r\n  fileName,\r\n  channel,\r\n  uploadedBy,\r\n  createdAt,\r\n  societies,\r\n  status,\r\n  isSelected,\r\n  onToggleSelection,\r\n  onDelete,\r\n  onAssignSociety,\r\n  onToggleStatus,\r\n  onView,\r\n  onResetDownload,\r\n  onRemoveSociety,\r\n  searchQuery = '',\r\n}: RateChartMinimalCardProps) {\r\n  const { t } = useLanguage();\r\n  const [showActionsMenu, setShowActionsMenu] = React.useState(false);\r\n  const [showSocietiesDropdown, setShowSocietiesDropdown] = React.useState(false);\r\n  const [showMachineStatusDropdown, setShowMachineStatusDropdown] = React.useState(false);\r\n  const [societyToRemove, setSocietyToRemove] = React.useState<{ chartRecordId: number; societyId: number; societyName: string } | null>(null);\r\n  const [downloadStatus, setDownloadStatus] = React.useState<DownloadStatus | null>(null);\r\n  const [loadingStatus, setLoadingStatus] = React.useState(false);\r\n  const menuRef = React.useRef<HTMLDivElement>(null);\r\n\r\n  // Fetch download status when component mounts or chartId changes\r\n  React.useEffect(() => {\r\n    const fetchDownloadStatus = async () => {\r\n      if (status === 0) return; // Don't fetch if chart is inactive\r\n      \r\n      setLoadingStatus(true);\r\n      try {\r\n        const token = localStorage.getItem('authToken');\r\n        if (!token) return;\r\n\r\n        const response = await fetch(`/api/user/ratechart/download-status?chartId=${chartId}`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n\r\n        const data = await response.json();\r\n        if (data.success) {\r\n          setDownloadStatus(data.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching download status:', error);\r\n      } finally {\r\n        setLoadingStatus(false);\r\n      }\r\n    };\r\n\r\n    fetchDownloadStatus();\r\n  }, [chartId, status]);\r\n\r\n  // Close menu when clicking outside\r\n  React.useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n        setShowActionsMenu(false);\r\n      }\r\n    };\r\n\r\n    if (showActionsMenu) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, [showActionsMenu]);\r\n\r\n  return (\r\n    <div\r\n      className={`relative border rounded-xl p-5 transition-all duration-300 hover:shadow-lg ${\r\n        isSelected\r\n          ? 'border-green-500 dark:border-green-400 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 shadow-md ring-2 ring-green-200 dark:ring-green-700'\r\n          : 'border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-green-300 dark:hover:border-green-600'\r\n      }`}\r\n    >\r\n      {/* Header Section */}\r\n      <div className=\"flex items-start justify-between mb-4\">\r\n        {/* Left: Checkbox */}\r\n        <div className=\"flex items-start gap-3\">\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={isSelected}\r\n            onChange={onToggleSelection}\r\n            className=\"mt-1 w-4 h-4 text-green-600 dark:text-green-500 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-green-500 dark:focus:ring-green-400 focus:ring-2 cursor-pointer transition-transform hover:scale-110\"\r\n          />\r\n          \r\n          {/* File Info */}\r\n          <div className=\"flex-1 min-w-0\">\r\n            <div className=\"flex items-center gap-2 mb-2\">\r\n              <Receipt className=\"w-4 h-4 text-gray-400 dark:text-gray-500 flex-shrink-0\" />\r\n              <h3 className=\"text-sm font-semibold text-gray-900 dark:text-gray-100 truncate\" title={fileName}>\r\n                {highlightText(fileName, searchQuery)}\r\n              </h3>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className={`inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-semibold ${\r\n                channel === 'COW' \r\n                  ? 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300'\r\n                  : channel === 'BUF'\r\n                  ? 'bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300'\r\n                  : 'bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300'\r\n              }`}>\r\n                {highlightText(getChannelDisplay(channel), searchQuery)}\r\n              </span>\r\n              \r\n              {/* Status Indicator - Now Clickable with Dropdown */}\r\n              <div className=\"relative\">\r\n                <div className={`inline-flex items-center px-2.5 py-0.5 rounded-md ${\r\n                  status === 0\r\n                    ? 'bg-gray-50 dark:bg-gray-900/20 border border-gray-200 dark:border-gray-800'\r\n                    : downloadStatus?.allDownloaded\r\n                    ? 'bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800'\r\n                    : downloadStatus?.totalMachines === 0\r\n                    ? 'bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800'\r\n                    : 'bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800'\r\n                }`}>\r\n                  {getStatusIndicator(\r\n                    status,\r\n                    downloadStatus,\r\n                    loadingStatus,\r\n                    downloadStatus && downloadStatus.totalMachines > 0\r\n                      ? () => setShowMachineStatusDropdown(!showMachineStatusDropdown)\r\n                      : undefined,\r\n                    !!(downloadStatus && downloadStatus.totalMachines > 0)\r\n                  )}\r\n                </div>\r\n\r\n                {/* Compact Machine Status Dropdown */}\r\n                {showMachineStatusDropdown && downloadStatus && downloadStatus.totalMachines > 0 && (\r\n                  <div className=\"absolute top-full left-0 mt-1 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-10 max-h-80 overflow-y-auto\">\r\n                    {/* Dropdown Header */}\r\n                    <div className=\"px-3 py-2 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700 rounded-t-lg flex items-center justify-between\">\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <h4 className=\"text-xs font-semibold text-gray-900 dark:text-gray-100 truncate\">\r\n                          {downloadStatus.totalDownloaded}/{downloadStatus.totalMachines} Downloaded\r\n                        </h4>\r\n                      </div>\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          setShowMachineStatusDropdown(false);\r\n                        }}\r\n                        className=\"ml-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors\"\r\n                      >\r\n                        <X className=\"w-3.5 h-3.5\" />\r\n                      </button>\r\n                    </div>\r\n\r\n                    {/* Society-wise Machine List */}\r\n                    <div className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n                      {Object.entries(downloadStatus.societies).map(([societyName, societyData]) => (\r\n                        <div key={societyName} className=\"p-2\">\r\n                          <div className=\"flex items-center justify-between mb-1.5\">\r\n                            <h5 className=\"text-xs font-medium text-gray-700 dark:text-gray-300 truncate\">\r\n                              {societyName}\r\n                            </h5>\r\n                            <span className=\"text-xs text-gray-500 dark:text-gray-400 ml-2\">\r\n                              {societyData.downloadedMachines}/{societyData.totalMachines}\r\n                            </span>\r\n                          </div>\r\n\r\n                          {/* Downloaded Machines */}\r\n                          {societyData.machines.filter(m => m.downloaded).length > 0 && (\r\n                            <div className=\"mb-1.5\">\r\n                              <div className=\"text-xs font-medium text-green-600 dark:text-green-400 mb-1 flex items-center gap-1\">\r\n                                <CheckCircle className=\"w-2.5 h-2.5\" />\r\n                                <span>Done</span>\r\n                              </div>\r\n                              <div className=\"space-y-0.5\">\r\n                                {societyData.machines\r\n                                  .filter(m => m.downloaded)\r\n                                  .map((machine) => (\r\n                                    <div\r\n                                      key={machine.id}\r\n                                      className=\"text-xs bg-green-50 dark:bg-green-900/20 rounded px-1.5 py-1\"\r\n                                    >\r\n                                      <div className=\"font-medium text-green-700 dark:text-green-300 truncate\">\r\n                                        {machine.machineId}\r\n                                      </div>\r\n                                      <div className=\"text-[10px] text-green-600 dark:text-green-400 truncate\">\r\n                                        {machine.machineType} • {machine.location}\r\n                                      </div>\r\n                                    </div>\r\n                                  ))}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n\r\n                          {/* Pending Machines */}\r\n                          {societyData.machines.filter(m => !m.downloaded).length > 0 && (\r\n                            <div>\r\n                              <div className=\"text-xs font-medium text-amber-600 dark:text-amber-400 mb-1 flex items-center gap-1\">\r\n                                <Clock className=\"w-2.5 h-2.5\" />\r\n                                <span>Pending</span>\r\n                              </div>\r\n                              <div className=\"space-y-0.5\">\r\n                                {societyData.machines\r\n                                  .filter(m => !m.downloaded)\r\n                                  .map((machine) => (\r\n                                    <div\r\n                                      key={machine.id}\r\n                                      className=\"text-xs bg-amber-50 dark:bg-amber-900/20 rounded px-1.5 py-1\"\r\n                                    >\r\n                                      <div className=\"font-medium text-amber-700 dark:text-amber-300 truncate\">\r\n                                        {machine.machineId}\r\n                                      </div>\r\n                                      <div className=\"text-[10px] text-amber-600 dark:text-amber-400 truncate\">\r\n                                        {machine.machineType} • {machine.location}\r\n                                      </div>\r\n                                    </div>\r\n                                  ))}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right: Actions Menu */}\r\n        <div className=\"relative\" ref={menuRef}>\r\n          <button\r\n            onClick={() => setShowActionsMenu(!showActionsMenu)}\r\n            className=\"p-1.5 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\r\n            title=\"Actions\"\r\n          >\r\n            <MoreVertical className=\"w-5 h-5\" />\r\n          </button>\r\n\r\n          {/* Dropdown Menu */}\r\n          {showActionsMenu && (\r\n            <div className=\"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-50 py-1\">\r\n              <button\r\n                onClick={() => {\r\n                  onView();\r\n                  setShowActionsMenu(false);\r\n                }}\r\n                className=\"w-full flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\r\n              >\r\n                <Eye className=\"w-4 h-4 text-blue-600 dark:text-blue-400\" />\r\n                <span>{t.common.view || 'View'} {t.ratechartManagement.rateChart}</span>\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  onAssignSociety();\r\n                  setShowActionsMenu(false);\r\n                }}\r\n                className=\"w-full flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\r\n              >\r\n                <UserPlus className=\"w-4 h-4 text-green-600 dark:text-green-400\" />\r\n                <span>{t.common.add} {t.ratechartManagement.societies}</span>\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  onResetDownload();\r\n                  setShowActionsMenu(false);\r\n                }}\r\n                className=\"w-full flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\r\n              >\r\n                <RefreshCw className=\"w-4 h-4 text-purple-600 dark:text-purple-400\" />\r\n                <span>{t.ratechartManagement.resetDownload}</span>\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  onToggleStatus(chartId, status);\r\n                  setShowActionsMenu(false);\r\n                }}\r\n                className=\"w-full flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\r\n              >\r\n                {status === 1 ? (\r\n                  <>\r\n                    <PowerOff className=\"w-4 h-4 text-gray-600 dark:text-gray-400\" />\r\n                    <span>{t.ratechartManagement.inactive}</span>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Power className=\"w-4 h-4 text-green-600 dark:text-green-400\" />\r\n                    <span>{t.ratechartManagement.active}</span>\r\n                  </>\r\n                )}\r\n              </button>\r\n              <div className=\"border-t border-gray-200 dark:border-gray-700 my-1\"></div>\r\n              <button\r\n                onClick={() => {\r\n                  onDelete();\r\n                  setShowActionsMenu(false);\r\n                }}\r\n                className=\"w-full flex items-center gap-3 px-4 py-2.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors\"\r\n              >\r\n                <Trash2 className=\"w-4 h-4\" />\r\n                <span>{t.common.delete}</span>\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Metadata Section */}\r\n      <div className=\"flex items-center gap-4 mb-4 text-xs text-gray-500 dark:text-gray-400\">\r\n        <div className=\"flex items-center gap-1.5\">\r\n          <FileText className=\"w-3.5 h-3.5\" />\r\n          <span>{uploadedBy}</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-1.5\">\r\n          <span>•</span>\r\n          <span>{new Date(createdAt).toLocaleDateString('en-US', { \r\n            month: 'short', \r\n            day: 'numeric',\r\n            year: 'numeric'\r\n          })}</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Societies Section */}\r\n      <div className=\"relative bg-gray-50 dark:bg-gray-900/50 rounded-lg p-3 border border-gray-200 dark:border-gray-700 mb-3\">\r\n        <button\r\n          onClick={() => setShowSocietiesDropdown(!showSocietiesDropdown)}\r\n          className=\"w-full flex items-center justify-between text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors\"\r\n        >\r\n          <div className=\"flex items-center gap-2\">\r\n            <Building2 className=\"w-4 h-4 text-green-600 dark:text-green-400\" />\r\n            <span>{t.ratechartManagement.societies} ({societies.length})</span>\r\n          </div>\r\n          {showSocietiesDropdown ? (\r\n            <ChevronUp className=\"w-4 h-4\" />\r\n          ) : (\r\n            <ChevronDown className=\"w-4 h-4\" />\r\n          )}\r\n        </button>\r\n\r\n        {/* Societies Dropdown */}\r\n        {showSocietiesDropdown && (\r\n          <div className=\"absolute left-0 right-0 top-full mt-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50 overflow-hidden max-h-64 overflow-y-auto\">\r\n            {societies.map((society) => (\r\n              <div\r\n                key={society.societyId}\r\n                className=\"group flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0\"\r\n              >\r\n                <div className=\"flex items-center gap-3 flex-1 min-w-0\">\r\n                  <div className=\"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0\">\r\n                    <span className=\"text-xs font-bold text-green-700 dark:text-green-300\">\r\n                      {society.societyName.charAt(0).toUpperCase()}\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <p className=\"text-sm font-medium text-gray-900 dark:text-gray-100 truncate\" title={society.societyName}>\r\n                      {highlightText(society.societyName, searchQuery)}\r\n                    </p>\r\n                    {society.societyIdentifier && (\r\n                      <p className=\"text-xs text-gray-500 dark:text-gray-400 truncate\">\r\n                        {highlightText(society.societyIdentifier, searchQuery)}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                \r\n                {onRemoveSociety && societies.length > 1 && (\r\n                  <button\r\n                    onClick={() => {\r\n                      setSocietyToRemove({\r\n                        chartRecordId: society.chartRecordId,\r\n                        societyId: society.societyId,\r\n                        societyName: society.societyName\r\n                      });\r\n                    }}\r\n                    className=\"ml-2 p-1.5 text-red-500 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all opacity-0 group-hover:opacity-100\"\r\n                    title={`Remove ${society.societyName}`}\r\n                  >\r\n                    <X className=\"w-4 h-4\" />\r\n                  </button>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Remove Society Confirmation Modal */}\r\n      <ConfirmDeleteModal\r\n        isOpen={!!societyToRemove}\r\n        onClose={() => setSocietyToRemove(null)}\r\n        onConfirm={() => {\r\n          if (societyToRemove && onRemoveSociety) {\r\n            onRemoveSociety(societyToRemove.chartRecordId, societyToRemove.societyId, societyToRemove.societyName);\r\n            if (societies.length === 2) {\r\n              setShowSocietiesDropdown(false);\r\n            }\r\n          }\r\n          setSocietyToRemove(null);\r\n        }}\r\n        itemName={societyToRemove?.societyName || ''}\r\n        itemType={t.ratechartManagement.society}\r\n        title={`${t.common.delete} ${t.ratechartManagement.society}`}\r\n        message={t.common.confirm}\r\n        confirmText={`${t.common.delete} ${t.ratechartManagement.society}`}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Users, Plus, AlertTriangle } from 'lucide-react';\r\nimport { FormModal, FormActions } from '@/components/forms';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\n\r\ninterface Society {\r\n  id: number;\r\n  name: string;\r\n  society_id: string;\r\n}\r\n\r\ninterface AssignSocietyModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onAssign: (societyIds: number[], replaceExisting: boolean) => Promise<{ requiresConfirmation?: boolean; conflicts?: Array<{ societyId: number; societyName: string; currentFileName: string }> } | void>;\r\n  chartId: number;\r\n  fileName: string;\r\n  currentSocieties: Array<{ societyId: number; societyName: string; societyIdentifier: string }>;\r\n  allSocieties: Society[];\r\n}\r\n\r\nexport default function AssignSocietyModal({\r\n  isOpen,\r\n  onClose,\r\n  onAssign,\r\n  fileName,\r\n  currentSocieties,\r\n  allSocieties,\r\n}: AssignSocietyModalProps) {\r\n  const { t } = useLanguage();\r\n  const [selectedSocieties, setSelectedSocieties] = useState<Set<number>>(new Set());\r\n  const [isAssigning, setIsAssigning] = useState(false);\r\n  const [conflicts, setConflicts] = useState<Array<{\r\n    societyId: number;\r\n    societyName: string;\r\n    currentFileName: string;\r\n  }> | null>(null);\r\n  const [showConflictWarning, setShowConflictWarning] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setSelectedSocieties(new Set());\r\n      setConflicts(null);\r\n      setShowConflictWarning(false);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  // Get societies that are not already assigned\r\n  const currentSocietyIds = new Set(currentSocieties.map(s => s.societyId));\r\n  const availableSocieties = allSocieties.filter(s => !currentSocietyIds.has(s.id));\r\n\r\n  const handleToggleSociety = (societyId: number) => {\r\n    const newSelected = new Set(selectedSocieties);\r\n    if (newSelected.has(societyId)) {\r\n      newSelected.delete(societyId);\r\n    } else {\r\n      newSelected.add(societyId);\r\n    }\r\n    setSelectedSocieties(newSelected);\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    if (selectedSocieties.size === availableSocieties.length) {\r\n      setSelectedSocieties(new Set());\r\n    } else {\r\n      setSelectedSocieties(new Set(availableSocieties.map(s => s.id)));\r\n    }\r\n  };\r\n\r\n  const handleAssign = async (replaceExisting = false) => {\r\n    if (selectedSocieties.size === 0) return;\r\n\r\n    setIsAssigning(true);\r\n    try {\r\n      const result = await onAssign(Array.from(selectedSocieties), replaceExisting);\r\n      \r\n      // Check if result indicates conflicts\r\n      if (result && result.requiresConfirmation && result.conflicts) {\r\n        setConflicts(result.conflicts);\r\n        setShowConflictWarning(true);\r\n        setIsAssigning(false);\r\n        return;\r\n      }\r\n      \r\n      onClose();\r\n    } catch (error: unknown) {\r\n      if (error && typeof error === 'object' && 'requiresConfirmation' in error && 'conflicts' in error) {\r\n        const err = error as { requiresConfirmation: boolean; conflicts: Array<{ societyId: number; societyName: string; currentFileName: string }> };\r\n        setConflicts(err.conflicts);\r\n        setShowConflictWarning(true);\r\n      } else {\r\n        console.error('Error assigning societies:', error);\r\n      }\r\n    } finally {\r\n      setIsAssigning(false);\r\n    }\r\n  };\r\n\r\n  const handleConfirmReplace = () => {\r\n    setShowConflictWarning(false);\r\n    handleAssign(true);\r\n  };\r\n\r\n  const handleCancelReplace = () => {\r\n    setShowConflictWarning(false);\r\n    setConflicts(null);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <FormModal\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        title={t.ratechartManagement.chartAssignedSuccessfully.split(' ')[0] + ' ' + t.ratechartManagement.societies}\r\n        maxWidth=\"2xl\"\r\n      >\r\n        <div className=\"space-y-6\">\r\n          {/* File Name */}\r\n          <div className=\"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl p-4 border border-green-200 dark:border-green-800\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 bg-green-500 dark:bg-green-600 rounded-lg\">\r\n                <Users className=\"w-5 h-5 text-white\" />\r\n              </div>\r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"text-xs font-medium text-green-700 dark:text-green-300 mb-0.5\">Rate Chart File</p>\r\n                <p className=\"text-sm font-semibold text-gray-900 dark:text-gray-100 truncate\" title={fileName}>\r\n                  {fileName}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Currently Assigned */}\r\n          <div>\r\n            <h3 className=\"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2\">\r\n              <div className=\"w-1.5 h-1.5 rounded-full bg-green-500\" />\r\n              Currently Assigned ({currentSocieties.length})\r\n            </h3>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {currentSocieties.map(society => (\r\n                <span\r\n                  key={society.societyId}\r\n                  className=\"inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600\"\r\n                >\r\n                  {society.societyName}\r\n                </span>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Divider */}\r\n          <div className=\"border-t border-gray-200 dark:border-gray-700\" />\r\n\r\n          {/* Available Societies */}\r\n          <div>\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n              <h3 className=\"text-sm font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2\">\r\n                <div className=\"w-1.5 h-1.5 rounded-full bg-blue-500\" />\r\n                Available Societies ({availableSocieties.length})\r\n              </h3>\r\n              {availableSocieties.length > 0 && (\r\n                <button\r\n                  onClick={handleSelectAll}\r\n                  className=\"text-xs text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 font-semibold transition-colors\"\r\n                >\r\n                  {selectedSocieties.size === availableSocieties.length ? 'Deselect All' : 'Select All'}\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            {/* Society List */}\r\n            {availableSocieties.length === 0 ? (\r\n              <div className=\"text-center py-12 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl\">\r\n                <Users className=\"w-12 h-12 mx-auto mb-3 text-gray-400 dark:text-gray-500\" />\r\n                <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">All societies assigned</p>\r\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">All available societies already have this chart</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden max-h-80 overflow-y-auto bg-gray-50 dark:bg-gray-900/50\">\r\n                <div className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n                  {availableSocieties.map(society => (\r\n                    <label\r\n                      key={society.id}\r\n                      className=\"flex items-center gap-3 p-4 hover:bg-white dark:hover:bg-gray-800 cursor-pointer transition-colors group\"\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedSocieties.has(society.id)}\r\n                        onChange={() => handleToggleSociety(society.id)}\r\n                        className=\"w-4 h-4 text-green-600 dark:text-green-500 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-green-500 dark:focus:ring-green-400 focus:ring-2 cursor-pointer transition-all\"\r\n                      />\r\n                      <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-green-100 to-emerald-100 dark:from-green-900/50 dark:to-emerald-900/50 flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform\">\r\n                        <span className=\"text-xs font-bold text-green-700 dark:text-green-300\">\r\n                          {society.name.charAt(0).toUpperCase()}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <p className=\"text-sm font-semibold text-gray-900 dark:text-gray-100 truncate\">{society.name}</p>\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 truncate\">{society.society_id}</p>\r\n                      </div>\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Selected Count */}\r\n            {selectedSocieties.size > 0 && (\r\n              <div className=\"mt-3 flex items-center gap-2 text-sm\">\r\n                <div className=\"flex items-center justify-center w-6 h-6 rounded-full bg-green-100 dark:bg-green-900/30\">\r\n                  <span className=\"text-xs font-bold text-green-600 dark:text-green-400\">\r\n                    {selectedSocieties.size}\r\n                  </span>\r\n                </div>\r\n                <span className=\"text-gray-700 dark:text-gray-300 font-medium\">\r\n                  {selectedSocieties.size} {selectedSocieties.size === 1 ? 'society' : 'societies'} selected\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Form Actions */}\r\n          <FormActions\r\n            onCancel={onClose}\r\n            onSubmit={() => handleAssign(false)}\r\n            submitText={selectedSocieties.size > 0 ? `Assign to ${selectedSocieties.size} ${selectedSocieties.size === 1 ? 'Society' : 'Societies'}` : 'Select Societies'}\r\n            isLoading={isAssigning}\r\n            isSubmitDisabled={selectedSocieties.size === 0}\r\n            loadingText=\"Assigning...\"\r\n            submitIcon={<Plus className=\"w-4 h-4\" />}\r\n            submitType=\"button\"\r\n          />\r\n        </div>\r\n      </FormModal>\r\n\r\n      {/* Conflict Warning Modal */}\r\n      <AnimatePresence>\r\n        {showConflictWarning && conflicts && conflicts.length > 0 && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 bg-black/60 dark:bg-black/80 flex items-center justify-center z-[10000] p-4\"\r\n            onClick={handleCancelReplace}\r\n          >\r\n            <motion.div\r\n              initial={{ scale: 0.9, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0.9, opacity: 0 }}\r\n              transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n              className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md\"\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <div className=\"p-6\">\r\n                {/* Warning Icon */}\r\n                <div className=\"flex items-start gap-4 mb-4\">\r\n                  <div className=\"flex-shrink-0 w-12 h-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center\">\r\n                    <AlertTriangle className=\"w-6 h-6 text-yellow-600 dark:text-yellow-400\" />\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <h3 className=\"text-lg font-bold text-gray-900 dark:text-gray-100 mb-1\">\r\n                      Replace Existing Charts?\r\n                    </h3>\r\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                      The following {conflicts.length === 1 ? 'society already has' : 'societies already have'} a rate chart assigned:\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Conflicts List */}\r\n                <div className=\"space-y-2 mb-5 max-h-48 overflow-y-auto\">\r\n                  {conflicts.map((conflict) => (\r\n                    <div \r\n                      key={conflict.societyId}\r\n                      className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3\"\r\n                    >\r\n                      <p className=\"text-sm font-semibold text-gray-900 dark:text-gray-100\">{conflict.societyName}</p>\r\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400 mt-0.5\">\r\n                        Current: <span className=\"font-medium\">{conflict.currentFileName}</span>\r\n                      </p>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                <p className=\"text-sm font-medium text-gray-900 dark:text-gray-100 mb-6\">\r\n                  Do you want to replace {conflicts.length === 1 ? 'this chart' : 'these charts'} with the new one?\r\n                </p>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex gap-3\">\r\n                  <button\r\n                    onClick={handleCancelReplace}\r\n                    disabled={isAssigning}\r\n                    className=\"flex-1 px-4 py-2.5 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl transition-colors disabled:opacity-50\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    onClick={handleConfirmReplace}\r\n                    disabled={isAssigning}\r\n                    className=\"flex-1 px-4 py-2.5 text-sm font-semibold text-white bg-yellow-600 dark:bg-yellow-600 hover:bg-yellow-700 dark:hover:bg-yellow-500 rounded-xl transition-colors disabled:opacity-50 flex items-center justify-center gap-2\"\r\n                  >\r\n                    {isAssigning ? (\r\n                      <>\r\n                        <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n                        Replacing...\r\n                      </>\r\n                    ) : (\r\n                      'Yes, Replace'\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { Receipt } from 'lucide-react';\r\nimport { FormModal } from '@/components/forms';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\n\r\n// Helper function to convert database channel values to display format\r\nconst getChannelDisplay = (channel: string): string => {\r\n  const channelMap: { [key: string]: string } = {\r\n    'COW': 'COW',\r\n    'BUF': 'BUFFALO',\r\n    'MIX': 'MIXED',\r\n    'BUFFALO': 'BUFFALO',\r\n    'MIXED': 'MIXED'\r\n  };\r\n  return channelMap[channel] || channel;\r\n};\r\n\r\ninterface RateChart {\r\n  id: number;\r\n  societyId: number;\r\n  societyName: string;\r\n  societyIdentifier: string;\r\n  channel: 'COW' | 'BUF' | 'MIX';\r\n  uploadedAt: string;\r\n  uploadedBy: string;\r\n  fileName: string;\r\n  recordCount: number;\r\n  shared_chart_id: number | null;\r\n}\r\n\r\ninterface TotalAssignmentsModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  rateCharts: RateChart[];\r\n}\r\n\r\nexport default function TotalAssignmentsModal({\r\n  isOpen,\r\n  onClose,\r\n  rateCharts,\r\n}: TotalAssignmentsModalProps) {\r\n  const { t } = useLanguage();\r\n  const [channelFilter, setChannelFilter] = useState<string>('all');\r\n\r\n  if (!isOpen) return null;\r\n\r\n  // Filter assignments\r\n  const filteredAssignments = rateCharts.filter(chart => {\r\n    if (channelFilter !== 'all' && chart.channel !== channelFilter) return false;\r\n    return true;\r\n  });\r\n\r\n  // Group by channel\r\n  const cowAssignments = filteredAssignments.filter(c => c.channel === 'COW');\r\n  const bufAssignments = filteredAssignments.filter(c => c.channel === 'BUF');\r\n  const mixAssignments = filteredAssignments.filter(c => c.channel === 'MIX');\r\n\r\n  return (\r\n    <FormModal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title={`${t.ratechartManagement.totalAssignments} (${rateCharts.length})`}\r\n      maxWidth=\"2xl\"\r\n    >\r\n      <div className=\"space-y-6\">\r\n        {/* Info Text */}\r\n        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n          {t.ratechartManagement.allRateChartAssignments}\r\n        </p>\r\n\r\n        {/* Channel Filter Tabs */}\r\n        <div className=\"flex gap-2 flex-wrap\">\r\n          <button\r\n            onClick={() => setChannelFilter('all')}\r\n            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n              channelFilter === 'all'\r\n                ? 'bg-blue-600 dark:bg-blue-500 text-white'\r\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n            }`}\r\n          >\r\n            {t.dashboard.all} ({rateCharts.length})\r\n          </button>\r\n          <button\r\n            onClick={() => setChannelFilter('COW')}\r\n            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n              channelFilter === 'COW'\r\n                ? 'bg-green-600 dark:bg-green-500 text-white'\r\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n            }`}\r\n          >\r\n            {t.ratechartManagement.cow} ({rateCharts.filter(c => c.channel === 'COW').length})\r\n          </button>\r\n          <button\r\n            onClick={() => setChannelFilter('BUF')}\r\n            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n              channelFilter === 'BUF'\r\n                ? 'bg-blue-600 dark:bg-blue-500 text-white'\r\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n            }`}\r\n          >\r\n            {t.ratechartManagement.buf} ({rateCharts.filter(c => c.channel === 'BUF').length})\r\n          </button>\r\n          <button\r\n            onClick={() => setChannelFilter('MIX')}\r\n            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n              channelFilter === 'MIX'\r\n                ? 'bg-purple-600 dark:bg-purple-500 text-white'\r\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n            }`}\r\n          >\r\n            {t.ratechartManagement.mix} ({rateCharts.filter(c => c.channel === 'MIX').length})\r\n          </button>\r\n        </div>\r\n\r\n        {/* Assignments List */}\r\n        <div className=\"max-h-96 overflow-y-auto space-y-2 border border-gray-200 dark:border-gray-700 rounded-xl p-3 bg-gray-50 dark:bg-gray-900/50\">\r\n          {filteredAssignments.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <Receipt className=\"w-12 h-12 mx-auto mb-3 text-gray-400 dark:text-gray-500\" />\r\n              <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">{t.ratechartManagement.noAssignmentsFound}</p>\r\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">{t.ratechartManagement.tryChangingFilter}</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {/* COW Assignments */}\r\n              {(channelFilter === 'all' || channelFilter === 'COW') && cowAssignments.length > 0 && (\r\n                <div>\r\n                  <h3 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2\">\r\n                    <span className=\"inline-block w-2 h-2 rounded-full bg-green-500\"></span>\r\n                    {t.ratechartManagement.cow} {t.ratechartManagement.channel} ({cowAssignments.length})\r\n                  </h3>\r\n                  <div className=\"space-y-2\">\r\n                    {cowAssignments.map((chart) => (\r\n                      <AssignmentRow key={chart.id} chart={chart} />\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* BUF Assignments */}\r\n              {(channelFilter === 'all' || channelFilter === 'BUF') && bufAssignments.length > 0 && (\r\n                <div>\r\n                  <h3 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2\">\r\n                    <span className=\"inline-block w-2 h-2 rounded-full bg-blue-500\"></span>\r\n                    {t.ratechartManagement.buffalo} {t.ratechartManagement.channel} ({bufAssignments.length})\r\n                  </h3>\r\n                  <div className=\"space-y-2\">\r\n                    {bufAssignments.map((chart) => (\r\n                      <AssignmentRow key={chart.id} chart={chart} />\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* MIX Assignments */}\r\n              {(channelFilter === 'all' || channelFilter === 'MIX') && mixAssignments.length > 0 && (\r\n                <div>\r\n                  <h3 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2\">\r\n                    <span className=\"inline-block w-2 h-2 rounded-full bg-purple-500\"></span>\r\n                    {t.ratechartManagement.mixed} {t.ratechartManagement.channel} ({mixAssignments.length})\r\n                  </h3>\r\n                  <div className=\"space-y-2\">\r\n                    {mixAssignments.map((chart) => (\r\n                      <AssignmentRow key={chart.id} chart={chart} />\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer Info */}\r\n        <div className=\"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700\">\r\n          <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n            {t.ratechartManagement.showing} {filteredAssignments.length} {t.ratechartManagement.of} {rateCharts.length} {t.ratechartManagement.assignments}\r\n          </p>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 dark:bg-blue-500 rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors\"\r\n          >\r\n            {t.common.close}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </FormModal>\r\n  );\r\n}\r\n\r\n// Assignment Row Component\r\nfunction AssignmentRow({ chart }: { chart: RateChart }) {\r\n  const getChannelColor = (channel: string) => {\r\n    switch (channel) {\r\n      case 'COW': return 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 border-green-200 dark:border-green-800';\r\n      case 'BUF': return 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border-blue-200 dark:border-blue-800';\r\n      case 'MIX': return 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 border-yellow-200 dark:border-yellow-800';\r\n      default: return 'bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-700';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-between p-3 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-700 transition-colors\">\r\n      <div className=\"flex-1 min-w-0\">\r\n        <div className=\"flex items-center gap-2 mb-1\">\r\n          <p className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">\r\n            {chart.societyName}\r\n          </p>\r\n          <span className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n            ({chart.societyIdentifier})\r\n          </span>\r\n          <span className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium border ${getChannelColor(chart.channel)}`}>\r\n            {getChannelDisplay(chart.channel)}\r\n          </span>\r\n          {chart.shared_chart_id && (\r\n            <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-200 dark:border-purple-800\">\r\n              Shared\r\n            </span>\r\n          )}\r\n        </div>\r\n        <p className=\"text-xs text-gray-600 dark:text-gray-400 truncate\">\r\n          {chart.fileName}\r\n        </p>\r\n      </div>\r\n      <div className=\"text-right ml-4 flex-shrink-0\">\r\n        <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n          {new Date(chart.uploadedAt).toLocaleDateString('en-US', { \r\n            month: 'short', \r\n            day: 'numeric',\r\n            year: 'numeric'\r\n          })}\r\n        </p>\r\n        <p className=\"text-xs text-gray-400 dark:text-gray-500\">{chart.recordCount} records</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { RefreshCw } from 'lucide-react';\r\nimport { FlowerSpinner } from '@/components';\r\nimport { FormModal, FormActions, FormSelect } from '@/components/forms';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\n\r\ninterface Machine {\r\n  id: number;\r\n  machineId: string;\r\n  machineType: string;\r\n  societyName: string;\r\n  societyId: number;\r\n  societyIdentifier?: string;\r\n  location?: string;\r\n}\r\n\r\ninterface ResetDownloadModalProps {\r\n  show: boolean;\r\n  onClose: () => void;\r\n  onConfirm: (machineIds: number[]) => Promise<void>;\r\n  chartId: number;\r\n  fileName: string;\r\n  channel: string;\r\n  societies: Array<{ societyId: number; societyName: string }>;\r\n}\r\n\r\nexport default function ResetDownloadModal({\r\n  show,\r\n  onClose,\r\n  onConfirm,\r\n  chartId,\r\n  fileName,\r\n  channel,\r\n  societies\r\n}: ResetDownloadModalProps) {\r\n  const { t } = useLanguage();\r\n  const [machines, setMachines] = useState<Machine[]>([]);\r\n  const [selectedMachines, setSelectedMachines] = useState<Set<number>>(new Set());\r\n  const [loading, setLoading] = useState(false);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [societyFilter, setSocietyFilter] = useState<number | 'all'>('all');\r\n\r\n  useEffect(() => {\r\n    const fetchMachines = async () => {\r\n      if (!show) return;\r\n      \r\n      setLoading(true);\r\n      try {\r\n        const token = localStorage.getItem('authToken');\r\n        if (!token) return;\r\n\r\n        const response = await fetch(`/api/user/ratechart/data?chartId=${chartId}`, {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n\r\n        if (response.ok) {\r\n          const result = await response.json();\r\n          setMachines(result.data?.machines || []);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching machines:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (show) {\r\n      fetchMachines();\r\n      setSelectedMachines(new Set());\r\n      setSocietyFilter('all');\r\n    }\r\n  }, [show, chartId]);\r\n\r\n  const handleToggleSelection = (machineId: number) => {\r\n    setSelectedMachines(prev => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(machineId)) {\r\n        newSet.delete(machineId);\r\n      } else {\r\n        newSet.add(machineId);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    if (selectedMachines.size === filteredMachines.length) {\r\n      setSelectedMachines(new Set());\r\n    } else {\r\n      setSelectedMachines(new Set(filteredMachines.map(m => m.id)));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (selectedMachines.size === 0) return;\r\n\r\n    setSubmitting(true);\r\n    try {\r\n      await onConfirm(Array.from(selectedMachines));\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Error resetting download:', error);\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const filteredMachines = machines.filter(machine => {\r\n    const matchesSociety = societyFilter === 'all' || \r\n      societies.find(s => s.societyId === societyFilter && s.societyName === machine.societyName);\r\n\r\n    return matchesSociety;\r\n  });\r\n\r\n  if (!show) return null;\r\n\r\n  return (\r\n    <FormModal\r\n      isOpen={show}\r\n      onClose={onClose}\r\n      title={`${t.common.reset} ${t.ratechartManagement.channelDownloadStatus}`}\r\n      maxWidth=\"2xl\"\r\n    >\r\n      <div className=\"space-y-6\">\r\n        {/* Channel Badge */}\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className={`px-2.5 py-1 rounded-lg text-xs font-semibold ${\r\n            channel === 'COW' ? 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300' :\r\n            channel === 'BUF' ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300' :\r\n            'bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300'\r\n          }`}>\r\n            {channel} {t.ratechartManagement.channel}\r\n          </span>\r\n        </div>\r\n\r\n        {/* File Info */}\r\n        <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2 bg-blue-500 dark:bg-blue-600 rounded-lg\">\r\n              <RefreshCw className=\"w-5 h-5 text-white\" />\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className=\"text-xs font-medium text-blue-700 dark:text-blue-300 mb-0.5\">{t.ratechartManagement.rateChartFile}</p>\r\n              <p className=\"text-sm font-semibold text-gray-900 dark:text-gray-100 truncate\" title={fileName}>\r\n                {fileName}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Info Text */}\r\n        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n          {t.ratechartManagement.selectMachinesToReset} <span className=\"font-semibold text-gray-900 dark:text-gray-100\">{channel} {t.ratechartManagement.channel}</span> {t.ratechartManagement.downloadStatusAllowRedownload} {channel} {t.ratechartManagement.milkType}.\r\n        </p>\r\n\r\n        {/* Society Filter */}\r\n        <FormSelect\r\n          label={t.ratechartManagement.filterBySociety}\r\n          value={societyFilter.toString()}\r\n          onChange={(value) => setSocietyFilter(value === 'all' ? 'all' : parseInt(value))}\r\n          options={[\r\n            { value: 'all', label: t.ratechartManagement.allSocieties },\r\n            ...societies.map(society => ({\r\n              value: society.societyId.toString(),\r\n              label: society.societyName\r\n            }))\r\n          ]}\r\n        />\r\n\r\n        {/* Select All */}\r\n        {filteredMachines.length > 0 && (\r\n          <div className=\"flex items-center justify-between pb-3 border-b border-gray-200 dark:border-gray-700\">\r\n            <label className=\"flex items-center gap-2 cursor-pointer group\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={selectedMachines.size === filteredMachines.length && filteredMachines.length > 0}\r\n                onChange={handleSelectAll}\r\n                className=\"w-4 h-4 text-blue-600 dark:text-blue-500 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2 cursor-pointer transition-all\"\r\n              />\r\n              <span className=\"text-sm font-semibold text-gray-900 dark:text-gray-100 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors\">\r\n                {t.common.selectAll} ({filteredMachines.length})\r\n              </span>\r\n            </label>\r\n            {selectedMachines.size > 0 && (\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"flex items-center justify-center w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900/30\">\r\n                  <span className=\"text-xs font-bold text-blue-600 dark:text-blue-400\">\r\n                    {selectedMachines.size}\r\n                  </span>\r\n                </div>\r\n                <span className=\"text-sm text-gray-700 dark:text-gray-300 font-medium\">selected</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Machines List */}\r\n        <div className=\"max-h-80 overflow-y-auto space-y-2 border border-gray-200 dark:border-gray-700 rounded-xl p-3 bg-gray-50 dark:bg-gray-900/50\">\r\n          {loading ? (\r\n            <div className=\"flex flex-col items-center justify-center py-12\">\r\n              <FlowerSpinner size={32} />\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-3\">{t.ratechartManagement.loadingMachines}</p>\r\n            </div>\r\n          ) : filteredMachines.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <RefreshCw className=\"w-12 h-12 mx-auto mb-3 text-gray-400 dark:text-gray-500\" />\r\n              <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">{t.ratechartManagement.noMachinesFound}</p>\r\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">{t.ratechartManagement.tryChangingSocietyFilter}</p>\r\n            </div>\r\n          ) : (\r\n            filteredMachines.map(machine => (\r\n              <label\r\n                key={machine.id}\r\n                className={`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all group ${\r\n                  selectedMachines.has(machine.id)\r\n                    ? 'border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-900/20'\r\n                    : 'border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-blue-300 dark:hover:border-blue-600 hover:bg-blue-50/50 dark:hover:bg-blue-900/10'\r\n                }`}\r\n              >\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selectedMachines.has(machine.id)}\r\n                  onChange={() => handleToggleSelection(machine.id)}\r\n                  className=\"w-4 h-4 text-blue-600 dark:text-blue-500 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2 cursor-pointer transition-all\"\r\n                />\r\n                <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-blue-900/50 dark:to-indigo-900/50 flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform\">\r\n                  <span className=\"text-xs font-bold text-blue-700 dark:text-blue-300\">\r\n                    {machine.machineId.charAt(0).toUpperCase()}\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <p className=\"text-sm font-semibold text-gray-900 dark:text-gray-100\">\r\n                      {machine.machineId}\r\n                    </p>\r\n                    <span className=\"text-xs px-2 py-0.5 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded font-medium\">\r\n                      {machine.machineType}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2 mt-1 text-xs\">\r\n                    <span className=\"font-medium text-gray-700 dark:text-gray-300\">{machine.societyName}</span>\r\n                    <span className=\"text-gray-400 dark:text-gray-500\">•</span>\r\n                    <span className=\"text-gray-500 dark:text-gray-400\">\r\n                      {machine.societyIdentifier || `ID: ${machine.societyId}`}\r\n                    </span>\r\n                    {machine.location && (\r\n                      <>\r\n                        <span className=\"text-gray-400 dark:text-gray-500\">•</span>\r\n                        <span className=\"text-gray-500 dark:text-gray-400\">{machine.location}</span>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </label>\r\n            ))\r\n          )}\r\n        </div>\r\n\r\n        {/* Form Actions */}\r\n        <FormActions\r\n          onCancel={onClose}\r\n          onSubmit={handleSubmit}\r\n          submitText={selectedMachines.size > 0 ? `${t.common.reset} ${channel} ${t.ratechartManagement.download} (${selectedMachines.size})` : t.ratechartManagement.selectMachines}\r\n          isLoading={submitting}\r\n          isSubmitDisabled={selectedMachines.size === 0}\r\n          loadingText={`${t.ratechartManagement.resetting} ${channel}...`}\r\n          submitIcon={<RefreshCw className=\"w-4 h-4\" />}\r\n          submitType=\"button\"\r\n        />\r\n      </div>\r\n    </FormModal>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useUser } from '@/contexts/UserContext';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\nimport { Receipt, Trash2, Eye, FileText, Upload } from 'lucide-react';\r\nimport { \r\n  FlowerSpinner,\r\n  StatusMessage,\r\n  StatsCard,\r\n  EmptyState,\r\n  LoadingSnackbar\r\n} from '@/components';\r\nimport { BulkActionsToolbar, FloatingActionButton } from '@/components/management';\r\nimport BulkDeleteConfirmModal from '@/components/management/BulkDeleteConfirmModal';\r\nimport RateChartUploadModal from '@/components/ratechart/RateChartUploadModal';\r\nimport RateChartMinimalCard from '@/components/ratechart/RateChartMinimalCard';\r\nimport AssignSocietyModal from '@/components/ratechart/AssignSocietyModal';\r\nimport TotalAssignmentsModal from '@/components/ratechart/TotalAssignmentsModal';\r\nimport ResetDownloadModal from '@/components/ratechart/ResetDownloadModal';\r\nimport ManagementPageHeader from '@/components/management/ManagementPageHeader';\r\nimport FilterDropdown from '@/components/management/FilterDropdown';\r\n\r\n// Helper function to convert database channel values to display format\r\nconst getChannelDisplay = (channel: string): string => {\r\n  const channelMap: { [key: string]: string } = {\r\n    'COW': 'COW',\r\n    'BUF': 'BUFFALO',\r\n    'MIX': 'MIXED',\r\n    'BUFFALO': 'BUFFALO',\r\n    'MIXED': 'MIXED'\r\n  };\r\n  return channelMap[channel] || channel;\r\n};\r\n\r\ninterface Society {\r\n  id: number;\r\n  name: string;\r\n  society_id: string;\r\n  bmc_id?: number;\r\n}\r\n\r\ninterface RateChart {\r\n  id: number;\r\n  societyId: number;\r\n  societyName: string;\r\n  societyIdentifier: string;\r\n  channel: 'COW' | 'BUF' | 'MIX';\r\n  uploadedAt: string;\r\n  uploadedBy: string;\r\n  fileName: string;\r\n  recordCount: number;\r\n  shared_chart_id: number | null;\r\n  status: number;\r\n}\r\n\r\nexport default function RatechartManagement() {\r\n  const router = useRouter();\r\n  const { user } = useUser();\r\n  const { t } = useLanguage();\r\n  \r\n  // State management\r\n  const [rateCharts, setRateCharts] = useState<RateChart[]>([]);\r\n  const [societies, setSocieties] = useState<Society[]>([]);\r\n  const [dairies, setDairies] = useState<Array<{ id: number; name: string; dairyId: string }>>([]);\r\n  const [bmcs, setBmcs] = useState<Array<{ id: number; name: string; bmcId: string; dairyFarmId?: number }>>([]);\r\n  const [machines, setMachines] = useState<Array<{ id: number; machineId: string; machineType: string; societyId?: number }>>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showUploadModal, setShowUploadModal] = useState(false);\r\n  const [success, setSuccess] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n\r\n  // Filter states\r\n  const [dairyFilter, setDairyFilter] = useState<string[]>([]);\r\n  const [bmcFilter, setBmcFilter] = useState<string[]>([]);\r\n  const [societyFilter, setSocietyFilter] = useState<string[]>([]);\r\n  const [machineFilter, setMachineFilter] = useState<string[]>([]);\r\n  const [channelFilter, setChannelFilter] = useState<string>('all');\r\n  const [searchQuery, setSearchQuery] = useState<string>('');\r\n\r\n  // Selection and bulk operations\r\n  const [selectedCharts, setSelectedCharts] = useState<Set<number>>(new Set());\r\n  const [selectAll, setSelectAll] = useState(false);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n  const [isDeletingBulk, setIsDeletingBulk] = useState(false);\r\n\r\n  // Single delete confirmation\r\n  const [showSingleDeleteConfirm, setShowSingleDeleteConfirm] = useState(false);\r\n  const [chartToDelete, setChartToDelete] = useState<number | null>(null);\r\n  const [chartToDeleteSocieties, setChartToDeleteSocieties] = useState<string>('');\r\n\r\n  // Assign society modal\r\n  const [showAssignModal, setShowAssignModal] = useState(false);\r\n  const [selectedChartForAssign, setSelectedChartForAssign] = useState<{\r\n    chartId: number;\r\n    fileName: string;\r\n    societies: Array<{ societyId: number; societyName: string; societyIdentifier: string }>;\r\n  } | null>(null);\r\n\r\n  // Bulk status\r\n  const [bulkStatus, setBulkStatus] = useState<string>('active');\r\n\r\n  // Total assignments modal\r\n  const [showAssignmentsModal, setShowAssignmentsModal] = useState(false);\r\n\r\n  // Rate chart view modal\r\n  const [showRateChartModal, setShowRateChartModal] = useState(false);\r\n  const [selectedRateChart, setSelectedRateChart] = useState<{ fileName: string; channel: string; societyId: number } | null>(null);\r\n  const [rateChartData, setRateChartData] = useState<Array<{ fat: string; snf: string; clr: string; rate: string }>>([]);\r\n  const [loadingChartData, setLoadingChartData] = useState(false);\r\n  const [searchFat, setSearchFat] = useState('');\r\n  const [searchSnf, setSearchSnf] = useState('');\r\n  const [searchClr, setSearchClr] = useState('');\r\n\r\n  // Reset download modal\r\n  const [showResetDownloadModal, setShowResetDownloadModal] = useState(false);\r\n  const [selectedChartForReset, setSelectedChartForReset] = useState<{\r\n    chartId: number;\r\n    fileName: string;\r\n    channel: string;\r\n    societies: Array<{ societyId: number; societyName: string }>;\r\n    chartRecordIds: number[];\r\n  } | null>(null);\r\n\r\n  // Redirect if not admin\r\n  useEffect(() => {\r\n    if (user && user.role !== 'admin' && user.role !== 'super_admin') {\r\n      router.push('/dashboard');\r\n    }\r\n  }, [user, router]);\r\n\r\n  // Fetch rate charts\r\n  const fetchRateCharts = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch('/api/user/ratechart', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setRateCharts(data.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching rate charts:', error);\r\n      setError(t.ratechartManagement.failedToLoadCharts);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch societies\r\n  const fetchSocieties = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch('/api/user/society', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n      console.log('Societies API response:', data);\r\n      if (data.success) {\r\n        const societiesList = data.data || [];\r\n        console.log('Societies list:', societiesList);\r\n        setSocieties(societiesList);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching societies:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch dairies\r\n  const fetchDairies = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch('/api/user/dairy', {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setDairies(data.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching dairies:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch BMCs\r\n  const fetchBmcs = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch('/api/user/bmc', {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setBmcs(data.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching BMCs:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch machines\r\n  const fetchMachines = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch('/api/user/machine', {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setMachines(data.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching machines:', error);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchRateCharts();\r\n      fetchSocieties();\r\n      fetchDairies();\r\n      fetchBmcs();\r\n      fetchMachines();\r\n    }\r\n  }, [user, fetchRateCharts, fetchSocieties, fetchDairies, fetchBmcs, fetchMachines]);\r\n\r\n  // Listen for global search events from header\r\n  useEffect(() => {\r\n    const handleGlobalSearch = (event: Event) => {\r\n      const customEvent = event as CustomEvent;\r\n      const query = customEvent.detail?.query || '';\r\n      setSearchQuery(query);\r\n    };\r\n\r\n    window.addEventListener('globalSearch', handleGlobalSearch);\r\n    return () => {\r\n      window.removeEventListener('globalSearch', handleGlobalSearch);\r\n    };\r\n  }, []);\r\n\r\n  // Fetch rate chart data\r\n  const fetchRateChartData = async (fileName: string, channel: string, societyId: number) => {\r\n    try {\r\n      setLoadingChartData(true);\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch(`/api/user/ratechart/data?fileName=${encodeURIComponent(fileName)}&channel=${channel}&societyId=${societyId}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setRateChartData(data.data || []);\r\n      } else {\r\n        setError(typeof data.error === 'string' ? data.error : data.error?.message || t.ratechartManagement.failedToFetchData);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching rate chart data:', error);\r\n      setError(t.ratechartManagement.failedToFetchData);\r\n    } finally {\r\n      setLoadingChartData(false);\r\n    }\r\n  };\r\n\r\n  // Handle view rate chart\r\n  const handleViewRateChart = (fileName: string, channel: string, societyId: number) => {\r\n    setSelectedRateChart({ fileName, channel, societyId });\r\n    setShowRateChartModal(true);\r\n    fetchRateChartData(fileName, channel, societyId);\r\n  };\r\n\r\n  // Close rate chart modal\r\n  const closeRateChartModal = () => {\r\n    setShowRateChartModal(false);\r\n    setSelectedRateChart(null);\r\n    setRateChartData([]);\r\n    setSearchFat('');\r\n    setSearchSnf('');\r\n    setSearchClr('');\r\n  };\r\n\r\n  // Handle delete - open confirmation modal\r\n  const handleDelete = async (id: number) => {\r\n    setChartToDelete(id);\r\n    \r\n    // Find the group that contains this chart ID to get society information\r\n    const group = Object.values(groupedCharts).find(g => \r\n      g.chartRecordIds.includes(id) || g.chartId === id\r\n    );\r\n    \r\n    if (group && group.societies.length > 0) {\r\n      const societyIds = group.societies\r\n        .map(s => s.societyIdentifier || s.societyId.toString())\r\n        .join(', ');\r\n      setChartToDeleteSocieties(societyIds);\r\n    } else {\r\n      setChartToDeleteSocieties('');\r\n    }\r\n    \r\n    setShowSingleDeleteConfirm(true);\r\n  };\r\n\r\n  // Confirm single delete\r\n  const confirmSingleDelete = async () => {\r\n    if (!chartToDelete) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch(`/api/user/ratechart/${chartToDelete}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        setSuccess('Rate chart deleted successfully');\r\n        fetchRateCharts();\r\n        // Auto-hide success message after 5 seconds\r\n        setTimeout(() => {\r\n          setSuccess('');\r\n        }, 5000);\r\n      } else {\r\n        setError(data.message || 'Failed to delete rate chart');\r\n        // Auto-hide error message after 5 seconds\r\n        setTimeout(() => {\r\n          setError('');\r\n        }, 5000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting rate chart:', error);\r\n      setError('Error deleting rate chart');\r\n      // Auto-hide error message after 5 seconds\r\n      setTimeout(() => {\r\n        setError('');\r\n      }, 5000);\r\n    } finally {\r\n      setShowSingleDeleteConfirm(false);\r\n      setChartToDelete(null);\r\n      setChartToDeleteSocieties('');\r\n    }\r\n  };\r\n\r\n  // Upload success/error handlers\r\n  const handleUploadSuccess = (message: string) => {\r\n    setSuccess(message);\r\n    fetchRateCharts();\r\n    // Auto-hide success message after 5 seconds\r\n    setTimeout(() => {\r\n      setSuccess('');\r\n    }, 5000);\r\n  };\r\n\r\n  const handleUploadError = (message: string) => {\r\n    setError(message);\r\n    // Auto-hide error message after 5 seconds\r\n    setTimeout(() => {\r\n      setError('');\r\n    }, 5000);\r\n  };\r\n\r\n  // Toggle status (active/inactive)\r\n  const handleToggleStatus = async (chartId: number, currentStatus: number) => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const newStatus = currentStatus === 1 ? 0 : 1;\r\n\r\n      // Find the group and get all chart record IDs (master + shared)\r\n      const group = Object.values(groupedCharts).find(g => g.chartId === chartId);\r\n      const chartIds = group?.chartRecordIds || [chartId];\r\n\r\n      const response = await fetch('/api/user/ratechart/status', {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ chartIds, status: newStatus })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        setSuccess(`${t.ratechartManagement.statusUpdatedSuccessfully} ${newStatus === 1 ? t.ratechartManagement.active.toLowerCase() : t.ratechartManagement.inactive.toLowerCase()}`);\r\n        fetchRateCharts();\r\n        // Auto-hide success message after 5 seconds\r\n        setTimeout(() => {\r\n          setSuccess('');\r\n        }, 5000);\r\n      } else {\r\n        setError(data.message || t.ratechartManagement.failedToUpdateStatus);\r\n        // Auto-hide error message after 5 seconds\r\n        setTimeout(() => {\r\n          setError('');\r\n        }, 5000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating status:', error);\r\n      setError(t.ratechartManagement.errorUpdatingStatus);\r\n      // Auto-hide error message after 5 seconds\r\n      setTimeout(() => {\r\n        setError('');\r\n      }, 5000);\r\n    }\r\n  };\r\n\r\n  // Handle bulk status update\r\n  const handleBulkStatusUpdate = async (status: string) => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const newStatus = status === 'active' ? 1 : 0;\r\n      \r\n      // Get all chart IDs from selected groups\r\n      const selectedGroups = Object.values(groupedCharts).filter(group => \r\n        group.chartRecordIds.some(id => selectedCharts.has(id))\r\n      );\r\n\r\n      const allChartIds = selectedGroups.flatMap(group => group.chartRecordIds);\r\n\r\n      const response = await fetch('/api/user/ratechart/status', {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ chartIds: allChartIds, status: newStatus })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        setSuccess(`✅ ${selectedGroups.length} ${t.ratechartManagement.bulkStatusUpdated} ${status === 'active' ? t.ratechartManagement.active.toLowerCase() : t.ratechartManagement.inactive.toLowerCase()}`);\r\n        setTimeout(() => setSuccess(''), 5000);\r\n        // Clear selection and refresh\r\n        setSelectedCharts(new Set());\r\n        setSelectAll(false);\r\n        await fetchRateCharts();\r\n      } else {\r\n        setError(data.message || t.ratechartManagement.failedToUpdateStatus);\r\n        setTimeout(() => setError(''), 5000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating bulk status:', error);\r\n      setError(t.ratechartManagement.errorUpdatingStatus);\r\n      setTimeout(() => setError(''), 5000);\r\n    }\r\n  };\r\n\r\n  // Filter rate charts - DON'T apply society filter here, apply after grouping\r\n  const filteredRateCharts = rateCharts.filter(chart => {\r\n    // Handle channel filter including 'unique' option\r\n    if (channelFilter !== 'all') {\r\n      if (channelFilter === 'unique') {\r\n        // For unique filter, only show charts that are not shared\r\n        // This means: shared_chart_id is null AND no other charts reference this chart\r\n        const isShared = rateCharts.some(c => c.shared_chart_id === chart.id);\r\n        if (chart.shared_chart_id !== null || isShared) return false;\r\n      } else {\r\n        // For specific channel filters (COW, BUFFALO, MIXED)\r\n        // Convert database channel value to display format for comparison\r\n        const displayChannel = getChannelDisplay(chart.channel);\r\n        if (displayChannel !== channelFilter) return false;\r\n      }\r\n    }\r\n    \r\n    // Search functionality\r\n    if (searchQuery !== '') {\r\n      const query = searchQuery.toLowerCase();\r\n      const matchesSearch = \r\n        chart.societyName.toLowerCase().includes(query) ||\r\n        chart.societyIdentifier.toLowerCase().includes(query) ||\r\n        chart.channel.toLowerCase().includes(query) ||\r\n        chart.fileName.toLowerCase().includes(query) ||\r\n        chart.uploadedBy.toLowerCase().includes(query);\r\n      \r\n      if (!matchesSearch) return false;\r\n    }\r\n    \r\n    return true;\r\n  });\r\n\r\n  // Get only master charts (where shared_chart_id is null)\r\n  const masterCharts = filteredRateCharts.filter(chart => chart.shared_chart_id === null);\r\n  \r\n  // For each master chart, find all societies using it (including shared references)\r\n  const groupedCharts = masterCharts.reduce((acc, masterChart) => {\r\n    acc[masterChart.id] = {\r\n      chartId: masterChart.id,\r\n      fileName: masterChart.fileName,\r\n      channel: masterChart.channel,\r\n      uploadedBy: masterChart.uploadedBy,\r\n      createdAt: masterChart.uploadedAt,\r\n      recordCount: masterChart.recordCount,\r\n      status: masterChart.status,\r\n      societies: [],\r\n      chartRecordIds: [masterChart.id] // Start with master chart ID\r\n    };\r\n    \r\n    // Add the master chart's society with its chart record ID\r\n    acc[masterChart.id].societies.push({\r\n      societyId: masterChart.societyId,\r\n      societyName: masterChart.societyName,\r\n      societyIdentifier: masterChart.societyIdentifier,\r\n      chartRecordId: masterChart.id // Add the chart record ID for this society\r\n    });\r\n    \r\n    // Find all societies that share this chart\r\n    filteredRateCharts.forEach(chart => {\r\n      if (chart.shared_chart_id === masterChart.id) {\r\n        acc[masterChart.id].societies.push({\r\n          societyId: chart.societyId,\r\n          societyName: chart.societyName,\r\n          societyIdentifier: chart.societyIdentifier,\r\n          chartRecordId: chart.id // Add the chart record ID for this society\r\n        });\r\n        acc[masterChart.id].chartRecordIds.push(chart.id);\r\n      }\r\n    });\r\n    \r\n    return acc;\r\n  }, {} as Record<number, { \r\n    chartId: number; \r\n    fileName: string; \r\n    channel: string; \r\n    uploadedBy: string; \r\n    createdAt: string;\r\n    recordCount: number;\r\n    status: number;\r\n    societies: { societyId: number; societyName: string; societyIdentifier: string; chartRecordId: number }[];\r\n    chartRecordIds: number[];\r\n  }>);\r\n\r\n  // Apply dairy, BMC, society, and machine filters AFTER grouping\r\n  const societyFilteredGroupedCharts = Object.values(groupedCharts).filter(group => {\r\n    // Check each society in the group for filter matches\r\n    return group.societies.some(groupSociety => {\r\n      // Get society details\r\n      const society = societies.find(s => s.id === groupSociety.societyId);\r\n      if (!society) return false;\r\n\r\n      // Get BMC and dairy for this society\r\n      const societyBmc = society.bmc_id ? bmcs.find(b => b.id === society.bmc_id) : null;\r\n      const societyDairy = societyBmc?.dairyFarmId ? dairies.find(d => d.id === societyBmc.dairyFarmId) : null;\r\n\r\n      // Check dairy filter (now array-based)\r\n      const matchesDairy = dairyFilter.length === 0 || dairyFilter.includes(societyDairy?.id.toString() || '');\r\n      if (!matchesDairy) return false;\r\n\r\n      // Check BMC filter (now array-based)\r\n      const matchesBmc = bmcFilter.length === 0 || bmcFilter.includes(societyBmc?.id.toString() || '');\r\n      if (!matchesBmc) return false;\r\n\r\n      // Check society filter\r\n      const matchesSociety = societyFilter.length === 0 || societyFilter.includes(groupSociety.societyId.toString());\r\n      if (!matchesSociety) return false;\r\n\r\n      // Check machine filter\r\n      if (machineFilter.length > 0) {\r\n        const societyMachines = machines.filter(m => m.societyId === groupSociety.societyId);\r\n        const hasMachine = societyMachines.some(m => machineFilter.includes(m.id.toString()));\r\n        if (!hasMachine) return false;\r\n      }\r\n\r\n      return true;\r\n    });\r\n  });\r\n\r\n  // Selection handlers\r\n  const handleSelectAll = () => {\r\n    if (selectAll) {\r\n      setSelectedCharts(new Set());\r\n      setSelectAll(false);\r\n    } else {\r\n      setSelectedCharts(new Set(filteredRateCharts.map(c => c.id)));\r\n      setSelectAll(true);\r\n    }\r\n  };\r\n\r\n  // Clear selections when filters change\r\n  useEffect(() => {\r\n    if (selectedCharts.size > 0) {\r\n      const visibleChartIds = new Set(filteredRateCharts.map(c => c.id));\r\n      const updatedSelection = new Set(\r\n        Array.from(selectedCharts).filter(id => visibleChartIds.has(id))\r\n      );\r\n      \r\n      if (updatedSelection.size !== selectedCharts.size) {\r\n        setSelectedCharts(updatedSelection);\r\n        setSelectAll(false);\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [societyFilter, channelFilter, searchQuery, rateCharts]);\r\n\r\n  // Bulk delete handler\r\n  const handleBulkDelete = async () => {\r\n    if (selectedCharts.size === 0) return;\r\n\r\n    setShowDeleteConfirm(false);\r\n    setIsDeletingBulk(true);\r\n    setUploadProgress(0);\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      setUploadProgress(10);\r\n\r\n      const ids = Array.from(selectedCharts);\r\n      const deletePromises = ids.map(id =>\r\n        fetch(`/api/user/ratechart/${id}`, {\r\n          method: 'DELETE',\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        })\r\n      );\r\n\r\n      setUploadProgress(30);\r\n      await Promise.all(deletePromises);\r\n      setUploadProgress(70);\r\n\r\n      await fetchRateCharts();\r\n      setUploadProgress(95);\r\n\r\n      setSelectedCharts(new Set());\r\n      setSelectAll(false);\r\n      setSuccess(`Successfully deleted ${ids.length} rate chart(s)`);\r\n      setError('');\r\n      \r\n      setUploadProgress(100);\r\n      setTimeout(() => {\r\n        setSuccess('');\r\n      }, 5000);\r\n    } catch (error) {\r\n      console.error('Error deleting rate charts:', error);\r\n      setError('Error deleting selected rate charts');\r\n      setTimeout(() => {\r\n        setError('');\r\n      }, 5000);\r\n    } finally {\r\n      setIsDeletingBulk(false);\r\n      setUploadProgress(0);\r\n    }\r\n  };\r\n\r\n  // Handle opening assign modal\r\n  const handleOpenAssignModal = (chartId: number, fileName: string, societies: Array<{ societyId: number; societyName: string; societyIdentifier: string }>) => {\r\n    setSelectedChartForAssign({ chartId, fileName, societies });\r\n    setShowAssignModal(true);\r\n  };\r\n\r\n  // Handle assigning chart to additional societies\r\n  const handleAssignSocieties = async (societyIds: number[], replaceExisting: boolean) => {\r\n    if (!selectedChartForAssign) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch('/api/user/ratechart/assign', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          masterChartId: selectedChartForAssign.chartId,\r\n          societyIds,\r\n          replaceExisting\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      // Handle conflict scenario (409 status)\r\n      if (response.status === 409 && data.requiresConfirmation) {\r\n        return {\r\n          requiresConfirmation: true,\r\n          conflicts: data.conflicts\r\n        };\r\n      }\r\n      \r\n      if (data.success) {\r\n        setSuccess(`Successfully assigned chart to ${data.data.assignedCount} ${data.data.assignedCount === 1 ? 'society' : 'societies'}`);\r\n        setTimeout(() => setSuccess(''), 5000);\r\n        \r\n        // Refresh rate charts to show updated assignments\r\n        await fetchRateCharts();\r\n        \r\n        setShowAssignModal(false);\r\n        setSelectedChartForAssign(null);\r\n        return;\r\n      } else {\r\n        setError(data.message || 'Failed to assign chart to societies');\r\n        setTimeout(() => setError(''), 5000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error assigning chart to societies:', error);\r\n      setError('Error assigning chart to societies');\r\n      setTimeout(() => setError(''), 5000);\r\n    }\r\n  };\r\n\r\n  // Handle opening reset download modal\r\n  const handleOpenResetDownloadModal = (chartId: number, fileName: string, channel: string, societies: Array<{ societyId: number; societyName: string; societyIdentifier: string }>, chartRecordIds: number[]) => {\r\n    setSelectedChartForReset({\r\n      chartId,\r\n      fileName,\r\n      channel,\r\n      societies: societies.map(s => ({ societyId: s.societyId, societyName: s.societyName })),\r\n      chartRecordIds\r\n    });\r\n    setShowResetDownloadModal(true);\r\n  };\r\n\r\n  // Handle resetting download history\r\n  const handleResetDownload = async (machineIds: number[]) => {\r\n    if (!selectedChartForReset) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch('/api/user/ratechart/reset-download', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          chartIds: selectedChartForReset.chartRecordIds || [selectedChartForReset.chartId],\r\n          machineIds,\r\n          channel: selectedChartForReset.channel\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        const machineCount = machineIds.length;\r\n        const chartName = selectedChartForReset.fileName;\r\n        const channel = selectedChartForReset.channel;\r\n        setSuccess(`✅ Successfully reset ${channel} channel download status for ${machineCount} machine${machineCount > 1 ? 's' : ''}. Chart \"${chartName}\" can now be re-downloaded by selected machines.`);\r\n        setTimeout(() => setSuccess(''), 6000);\r\n        setShowResetDownloadModal(false);\r\n        setSelectedChartForReset(null);\r\n      } else {\r\n        setError(data.message || 'Failed to reset download history');\r\n        setTimeout(() => setError(''), 5000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error resetting download history:', error);\r\n      setError('❌ Error resetting download history. Please try again.');\r\n      setTimeout(() => setError(''), 5000);\r\n    }\r\n  };\r\n\r\n  // Handle removing society from rate chart\r\n  const handleRemoveSociety = async (chartRecordId: number, societyId: number, societyName: string) => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch('/api/user/ratechart/remove-society', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ chartId: chartRecordId, societyId })\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        setSuccess(`✅ Successfully removed ${societyName} from rate chart`);\r\n        setTimeout(() => setSuccess(''), 5000);\r\n        // Force a fresh fetch to update the UI\r\n        setRateCharts([]);\r\n        await fetchRateCharts();\r\n      } else {\r\n        setError(data.message || 'Failed to remove society');\r\n        setTimeout(() => setError(''), 5000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error removing society:', error);\r\n      setError('❌ Error removing society. Please try again.');\r\n      setTimeout(() => setError(''), 5000);\r\n    }\r\n  };\r\n\r\n  // Calculate stats - only count unique master charts\r\n  const allMasterCharts = rateCharts.filter(chart => chart.shared_chart_id === null);\r\n  // Count unique charts (master charts that are NOT being shared by others)\r\n  const uniqueCharts = allMasterCharts.filter(chart => {\r\n    const isShared = rateCharts.some(c => c.shared_chart_id === chart.id);\r\n    return !isShared;\r\n  }).length;\r\n  // Count only valid assignments (those with a master chart or valid shared reference)\r\n  const totalAssignments = rateCharts.length;\r\n  const cowCharts = allMasterCharts.filter(c => c.channel === 'COW').length;\r\n  const bufCharts = allMasterCharts.filter(c => c.channel === 'BUF').length;\r\n  const mixCharts = allMasterCharts.filter(c => c.channel === 'MIX').length;\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <FlowerSpinner size={48} isLoading={true} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n    {/* Loading Snackbar */}\r\n    <LoadingSnackbar\r\n      isVisible={isUploading || isDeletingBulk}\r\n      message={isDeletingBulk ? t.ratechartManagement.deletingRateCharts : t.ratechartManagement.uploadingRateChart}\r\n      submessage={isDeletingBulk ? t.ratechartManagement.pleaseWaitDeleting : t.ratechartManagement.pleaseWaitUploading}\r\n      progress={uploadProgress}\r\n      showProgress={true}\r\n    />\r\n\r\n    <div className=\"p-4 sm:p-6 lg:p-8 space-y-4 sm:space-y-6 lg:pb-8\">\r\n      {/* Page Header */}\r\n      <ManagementPageHeader\r\n        title={t.ratechartManagement.title}\r\n        subtitle={t.ratechartManagement.subtitle}\r\n        icon={<Receipt className=\"w-5 h-5 sm:w-6 sm:h-6\" />}\r\n        onRefresh={fetchRateCharts}\r\n      />\r\n\r\n      {/* Success/Error Messages */}\r\n      <StatusMessage \r\n        success={success} \r\n        error={error}\r\n        onClose={() => {\r\n          setSuccess('');\r\n          setError('');\r\n        }}\r\n      />\r\n\r\n      {/* Stats Cards */}\r\n      <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-2 sm:gap-3\">\r\n        <StatsCard\r\n          title={t.ratechartManagement.uniqueCharts}\r\n          value={uniqueCharts}\r\n          icon={<Receipt className=\"w-4 h-4\" />}\r\n          color=\"blue\"\r\n          onClick={() => setChannelFilter('unique')}\r\n          clickable={true}\r\n          isActive={channelFilter === 'unique'}\r\n        />\r\n        <StatsCard\r\n          title={t.ratechartManagement.totalAssignments}\r\n          value={totalAssignments}\r\n          icon={<Receipt className=\"w-4 h-4\" />}\r\n          color=\"gray\"\r\n          onClick={() => {\r\n            setChannelFilter('all');\r\n            setShowAssignmentsModal(true);\r\n          }}\r\n          clickable={true}\r\n          isActive={channelFilter === 'all'}\r\n        />\r\n        <StatsCard\r\n          title={t.ratechartManagement.cowCharts}\r\n          value={cowCharts}\r\n          icon={<Receipt className=\"w-4 h-4\" />}\r\n          color=\"green\"\r\n          onClick={() => setChannelFilter('COW')}\r\n          clickable={true}\r\n          isActive={channelFilter === 'COW'}\r\n        />\r\n        <StatsCard\r\n          title={t.ratechartManagement.buffaloCharts}\r\n          value={bufCharts}\r\n          icon={<Receipt className=\"w-4 h-4\" />}\r\n          color=\"blue\"\r\n          onClick={() => setChannelFilter('BUFFALO')}\r\n          clickable={true}\r\n          isActive={channelFilter === 'BUFFALO'}\r\n        />\r\n        <StatsCard\r\n          title={t.ratechartManagement.mixedCharts}\r\n          value={mixCharts}\r\n          icon={<Receipt className=\"w-4 h-4\" />}\r\n          color=\"yellow\"\r\n          onClick={() => setChannelFilter('MIXED')}\r\n          clickable={true}\r\n          isActive={channelFilter === 'MIXED'}\r\n        />\r\n      </div>\r\n\r\n      {/* Filter Controls */}\r\n      <FilterDropdown\r\n        statusFilter={'all'}\r\n        onStatusChange={() => {}}\r\n        dairyFilter={dairyFilter}\r\n        onDairyChange={(value) => setDairyFilter(Array.isArray(value) ? value : [value])}\r\n        bmcFilter={bmcFilter}\r\n        onBmcChange={(value) => setBmcFilter(Array.isArray(value) ? value : [value])}\r\n        societyFilter={societyFilter}\r\n        onSocietyChange={(value) => setSocietyFilter(Array.isArray(value) ? value : [value])}\r\n        machineFilter={machineFilter}\r\n        onMachineChange={(value) => setMachineFilter(Array.isArray(value) ? value : [value])}\r\n        channelFilter={channelFilter}\r\n        onChannelChange={setChannelFilter}\r\n        dairies={dairies}\r\n        bmcs={bmcs}\r\n        societies={societies}\r\n        machines={machines}\r\n        filteredCount={societyFilteredGroupedCharts.length}\r\n        totalCount={rateCharts.length}\r\n        searchQuery={searchQuery}\r\n        onSearchChange={setSearchQuery}\r\n        icon={<Receipt className=\"w-5 h-5\" />}\r\n        showChannelFilter={true}\r\n        hideMainFilterButton={true}\r\n      />\r\n\r\n      {/* Bulk Actions Toolbar */}\r\n      {selectedCharts.size > 0 && (\r\n        <BulkActionsToolbar\r\n          selectedCount={(() => {\r\n            const selectedGroupCount = societyFilteredGroupedCharts.filter(group => \r\n              group.chartRecordIds.some(id => selectedCharts.has(id))\r\n            ).length;\r\n            return selectedGroupCount;\r\n          })()}\r\n          totalCount={societyFilteredGroupedCharts.length}\r\n          onBulkDelete={() => setShowDeleteConfirm(true)}\r\n          onClearSelection={() => {\r\n            setSelectedCharts(new Set());\r\n            setSelectAll(false);\r\n          }}\r\n          itemType=\"rate chart\"\r\n          showStatusUpdate={true}\r\n          currentBulkStatus={bulkStatus}\r\n          onBulkStatusChange={(status) => {\r\n            setBulkStatus(status);\r\n            handleBulkStatusUpdate(status);\r\n          }}\r\n          statusOptions={[\r\n            { status: 'active', label: t.ratechartManagement.active, color: 'bg-green-500', bgColor: 'hover:bg-green-50 dark:hover:bg-green-900/30' },\r\n            { status: 'inactive', label: t.ratechartManagement.inactive, color: 'bg-red-500', bgColor: 'hover:bg-red-50 dark:hover:bg-red-900/30' }\r\n          ]}\r\n        />\r\n      )}\r\n\r\n      {/* Rate Charts Display */}\r\n      <div className=\"space-y-6\">\r\n        {societyFilteredGroupedCharts.length === 0 ? (\r\n          <EmptyState\r\n            icon={<Receipt className=\"w-12 h-12\" />}\r\n            title={t.ratechartManagement.noRateChartsFound}\r\n            message={t.ratechartManagement.uploadFirstChart}\r\n            actionText={t.ratechartManagement.uploadRateChart}\r\n            onAction={() => setShowUploadModal(true)}\r\n            showAction={true}\r\n          />\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4\">\r\n            {societyFilteredGroupedCharts.map(group => {\r\n              // Check if all chart records in this group are selected\r\n              const isGroupSelected = group.chartRecordIds.every(id => selectedCharts.has(id));\r\n              \r\n              return (\r\n                <RateChartMinimalCard\r\n                  key={group.chartId}\r\n                  chartId={group.chartId}\r\n                  fileName={group.fileName}\r\n                  channel={group.channel}\r\n                  uploadedBy={group.uploadedBy}\r\n                  createdAt={group.createdAt}\r\n                  societies={group.societies}\r\n                  status={group.status}\r\n                  isSelected={isGroupSelected}\r\n                  searchQuery={searchQuery}\r\n                  onToggleSelection={() => {\r\n                    // Toggle all chart records for this group\r\n                    if (isGroupSelected) {\r\n                      // Deselect all\r\n                      group.chartRecordIds.forEach(id => {\r\n                        setSelectedCharts(prev => {\r\n                          const newSet = new Set(prev);\r\n                          newSet.delete(id);\r\n                          return newSet;\r\n                        });\r\n                      });\r\n                    } else {\r\n                      // Select all\r\n                      group.chartRecordIds.forEach(id => {\r\n                        setSelectedCharts(prev => new Set(prev).add(id));\r\n                      });\r\n                    }\r\n                  }}\r\n                  onAssignSociety={() => handleOpenAssignModal(group.chartId, group.fileName, group.societies)}\r\n                  onDelete={() => handleDelete(group.chartRecordIds[0])}\r\n                  onToggleStatus={handleToggleStatus}\r\n                  onView={() => handleViewRateChart(group.fileName, group.channel, group.societies[0]?.societyId || 0)}\r\n                  onResetDownload={() => handleOpenResetDownloadModal(group.chartId, group.fileName, group.channel, group.societies, group.chartRecordIds)}\r\n                  onRemoveSociety={handleRemoveSociety}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n\r\n    {/* Upload Modal - Positioned outside main container */}\r\n    <RateChartUploadModal\r\n      isOpen={showUploadModal}\r\n      onClose={() => setShowUploadModal(false)}\r\n      societies={societies}\r\n      onUploadSuccess={handleUploadSuccess}\r\n      onUploadError={handleUploadError}\r\n      onUploadStart={() => setIsUploading(true)}\r\n      onUploadEnd={() => setIsUploading(false)}\r\n      onProgressUpdate={(progress) => setUploadProgress(progress)}\r\n    />\r\n\r\n    {/* Bulk Delete Confirmation Modal */}\r\n    <BulkDeleteConfirmModal\r\n      isOpen={showDeleteConfirm}\r\n      onClose={() => setShowDeleteConfirm(false)}\r\n      onConfirm={handleBulkDelete}\r\n      itemCount={(() => {\r\n        const selectedGroupCount = Object.values(groupedCharts).filter(group => \r\n          group.chartRecordIds.some(id => selectedCharts.has(id))\r\n        ).length;\r\n        return selectedGroupCount;\r\n      })()}\r\n      itemType=\"rate chart\"\r\n      hasFilters={societyFilter.length > 0 || channelFilter !== 'all' || searchQuery !== ''}\r\n      additionalInfo={(() => {\r\n        // Get all selected groups\r\n        const selectedGroups = Object.values(groupedCharts).filter(group => \r\n          group.chartRecordIds.some(id => selectedCharts.has(id))\r\n        );\r\n        \r\n        if (selectedGroups.length === 0) return undefined;\r\n        \r\n        // Build society info for each selected chart\r\n        const chartInfo = selectedGroups.map(group => {\r\n          const societyIds = group.societies\r\n            .map(s => s.societyIdentifier || s.societyId.toString())\r\n            .join(', ');\r\n          return `${group.fileName} (${group.channel}): ${societyIds}`;\r\n        });\r\n        \r\n        return chartInfo.join(' | ');\r\n      })()}\r\n    />\r\n\r\n    {/* Assign Society Modal */}\r\n    {selectedChartForAssign && (\r\n      <AssignSocietyModal\r\n        isOpen={showAssignModal}\r\n        onClose={() => {\r\n          setShowAssignModal(false);\r\n          setSelectedChartForAssign(null);\r\n        }}\r\n        onAssign={handleAssignSocieties}\r\n        chartId={selectedChartForAssign.chartId}\r\n        fileName={selectedChartForAssign.fileName}\r\n        currentSocieties={selectedChartForAssign.societies}\r\n        allSocieties={societies}\r\n      />\r\n    )}\r\n\r\n    {/* Total Assignments Modal */}\r\n    <TotalAssignmentsModal\r\n      isOpen={showAssignmentsModal}\r\n      onClose={() => setShowAssignmentsModal(false)}\r\n      rateCharts={rateCharts}\r\n    />\r\n\r\n    {/* Single Delete Confirmation Modal */}\r\n    <BulkDeleteConfirmModal\r\n      isOpen={showSingleDeleteConfirm}\r\n      onClose={() => {\r\n        setShowSingleDeleteConfirm(false);\r\n        setChartToDelete(null);\r\n        setChartToDeleteSocieties('');\r\n      }}\r\n      onConfirm={confirmSingleDelete}\r\n      itemCount={1}\r\n      itemType=\"rate chart\"\r\n      additionalInfo={chartToDeleteSocieties ? `Assigned to society IDs: ${chartToDeleteSocieties}` : undefined}\r\n    />\r\n\r\n    {/* Rate Chart View Modal */}\r\n    {showRateChartModal && selectedRateChart && (\r\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden\">\r\n          <div className=\"p-6\">\r\n            {/* Modal Header */}\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n                Rate Chart - {selectedRateChart.channel} Channel\r\n              </h2>\r\n              <button\r\n                onClick={closeRateChartModal}\r\n                className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\r\n              >\r\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n\r\n            {/* Chart Info */}\r\n            <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg mb-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">File Name</h3>\r\n                  <p className=\"text-base font-semibold text-gray-900 dark:text-white\">{selectedRateChart.fileName}</p>\r\n                </div>\r\n                <span className=\"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\">\r\n                  {selectedRateChart.channel}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Search Inputs */}\r\n            <div className=\"grid grid-cols-3 gap-3 mb-4\">\r\n              <div>\r\n                <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">Search FAT</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={searchFat}\r\n                  onChange={(e) => setSearchFat(e.target.value)}\r\n                  placeholder=\"e.g., 3.5\"\r\n                  className=\"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">Search SNF</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={searchSnf}\r\n                  onChange={(e) => setSearchSnf(e.target.value)}\r\n                  placeholder=\"e.g., 8.5\"\r\n                  className=\"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">Search CLR</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={searchClr}\r\n                  onChange={(e) => setSearchClr(e.target.value)}\r\n                  placeholder=\"e.g., 25.0\"\r\n                  className=\"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Chart Data Table */}\r\n            <div className=\"overflow-auto max-h-[60vh]\">\r\n              {loadingChartData ? (\r\n                <div className=\"flex justify-center items-center py-8\">\r\n                  <FlowerSpinner />\r\n                </div>\r\n              ) : (() => {\r\n                // Filter data based on search inputs\r\n                const filteredData = rateChartData.filter(row => {\r\n                  const matchFat = !searchFat || row.fat.toLowerCase().includes(searchFat.toLowerCase());\r\n                  const matchSnf = !searchSnf || row.snf.toLowerCase().includes(searchSnf.toLowerCase());\r\n                  const matchClr = !searchClr || row.clr.toLowerCase().includes(searchClr.toLowerCase());\r\n                  return matchFat && matchSnf && matchClr;\r\n                });\r\n                \r\n                return filteredData.length > 0 ? (\r\n                <div>\r\n                  <table className=\"w-full border-collapse\">\r\n                    <thead className=\"sticky top-0 bg-gray-100 dark:bg-gray-700\">\r\n                      <tr>\r\n                        <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider border border-gray-300 dark:border-gray-600\">\r\n                          FAT\r\n                        </th>\r\n                        <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider border border-gray-300 dark:border-gray-600\">\r\n                          SNF\r\n                        </th>\r\n                        <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider border border-gray-300 dark:border-gray-600\">\r\n                          CLR\r\n                        </th>\r\n                        <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider border border-gray-300 dark:border-gray-600\">\r\n                          Rate\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\r\n                      {filteredData.map((row, index) => (\r\n                        <tr key={index} className=\"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\">\r\n                          <td className=\"px-4 py-3 text-sm text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600\">\r\n                            {row.fat}\r\n                          </td>\r\n                          <td className=\"px-4 py-3 text-sm text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600\">\r\n                            {row.snf}\r\n                          </td>\r\n                          <td className=\"px-4 py-3 text-sm text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600\">\r\n                            {row.clr}\r\n                          </td>\r\n                          <td className=\"px-4 py-3 text-sm font-semibold text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600\">\r\n                            ₹{row.rate}\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"mt-2 text-xs text-gray-500 dark:text-gray-400 text-right\">\r\n                    Showing {filteredData.length} of {rateChartData.length} records\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-8\">\r\n                  <FileText className=\"w-12 h-12 text-gray-400 mx-auto mb-3\" />\r\n                  <p className=\"text-gray-500 dark:text-gray-400\">{searchFat || searchSnf || searchClr ? 'No matching records found' : 'No data available for this rate chart'}</p>\r\n                </div>\r\n              );\r\n              })()}\r\n            </div>\r\n\r\n            {/* Close Button */}\r\n            <div className=\"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-700 mt-4\">\r\n              <button\r\n                onClick={closeRateChartModal}\r\n                className=\"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors\"\r\n              >\r\n                Close\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )}\r\n\r\n    {/* Reset Download Modal */}\r\n    {selectedChartForReset && (\r\n      <ResetDownloadModal\r\n        show={showResetDownloadModal}\r\n        onClose={() => {\r\n          setShowResetDownloadModal(false);\r\n          setSelectedChartForReset(null);\r\n        }}\r\n        onConfirm={handleResetDownload}\r\n        chartId={selectedChartForReset.chartId}\r\n        fileName={selectedChartForReset.fileName}\r\n        channel={selectedChartForReset.channel}\r\n        societies={selectedChartForReset.societies}\r\n      />\r\n    )}\r\n\r\n    {/* Floating Action Button */}\r\n    <FloatingActionButton\r\n      actions={[\r\n        {\r\n          icon: <Upload className=\"w-6 h-6 text-white\" />,\r\n          label: t.ratechartManagement.uploadRateChart,\r\n          onClick: () => setShowUploadModal(true),\r\n          color: 'bg-gradient-to-br from-green-500 to-green-600'\r\n        }\r\n      ]}\r\n      directClick={true}\r\n    />\r\n  </>\r\n  );\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'm18 15-6-6-6 6', key: '153udz' }]];\n\n/**\n * @component @name ChevronUp\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTggMTUtNi02LTYgNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevron-up\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronUp = createLucideIcon('chevron-up', __iconNode);\n\nexport default ChevronUp;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 2v10', key: 'mnfbl' }],\n  ['path', { d: 'M18.4 6.6a9 9 0 1 1-12.77.04', key: 'obofu9' }],\n];\n\n/**\n * @component @name Power\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMnYxMCIgLz4KICA8cGF0aCBkPSJNMTguNCA2LjZhOSA5IDAgMSAxLTEyLjc3LjA0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/power\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Power = createLucideIcon('power', __iconNode);\n\nexport default Power;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M18.36 6.64A9 9 0 0 1 20.77 15', key: 'dxknvb' }],\n  ['path', { d: 'M6.16 6.16a9 9 0 1 0 12.68 12.68', key: '1x7qb5' }],\n  ['path', { d: 'M12 2v4', key: '3427ic' }],\n  ['path', { d: 'm2 2 20 20', key: '1ooewy' }],\n];\n\n/**\n * @component @name PowerOff\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTguMzYgNi42NEE5IDkgMCAwIDEgMjAuNzcgMTUiIC8+CiAgPHBhdGggZD0iTTYuMTYgNi4xNmE5IDkgMCAxIDAgMTIuNjggMTIuNjgiIC8+CiAgPHBhdGggZD0iTTEyIDJ2NCIgLz4KICA8cGF0aCBkPSJtMiAyIDIwIDIwIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/power-off\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst PowerOff = createLucideIcon('power-off', __iconNode);\n\nexport default PowerOff;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2', key: '1yyitq' }],\n  ['circle', { cx: '9', cy: '7', r: '4', key: 'nufk8' }],\n  ['line', { x1: '19', x2: '19', y1: '8', y2: '14', key: '1bvyxn' }],\n  ['line', { x1: '22', x2: '16', y1: '11', y2: '11', key: '1shjgl' }],\n];\n\n/**\n * @component @name UserPlus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMjF2LTJhNCA0IDAgMCAwLTQtNEg2YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iNyIgcj0iNCIgLz4KICA8bGluZSB4MT0iMTkiIHgyPSIxOSIgeTE9IjgiIHkyPSIxNCIgLz4KICA8bGluZSB4MT0iMjIiIHgyPSIxNiIgeTE9IjExIiB5Mj0iMTEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/user-plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst UserPlus = createLucideIcon('user-plus', __iconNode);\n\nexport default UserPlus;\n"],"names":[],"mappings":"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CAAA,wCQkBiB,EAAiB,CDAA,ACAA,CAAA,ADAA,CCAA,ADAA,CAAA,ACAA,CDAA,ACAA,CDAA,ACAA,CDAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,EAAa,CAAA,ADAA,CAAA,ACAA,CDAA,ACAA,CDAA,ACAA,CAAA,ADAA,CCAA,ADAA,CAAA,ACAA,CDAA,ACAA,CAAA,ADAA,CCAU,ADAA,CAAA,ACAA,4CAjBI,CDAN,ACAM,CAAA,EAAA,QAAK,CAAU,CAAA,CAC1E,WAAa,GAAA,8BAAwC,kBAChC,CAAA,ADAP,CAAA,ACAO,CAAA,ADAP,QCAqB,CDAL,ACAK,CDAL,ACAK,CAAA,CAAK,GAAI,CAAA,CAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,SACxD,CDAA,ACAA,AAAE,AFYP,GEZW,CFYH,ACZE,ACAC,CFYH,ACZE,ACAC,CAAA,ADAD,ADYF,CCZE,ADYF,AEZG,CDAD,ADYF,AEZG,AAAM,CAAA,ADAP,ADYF,CCZE,ADYF,AEZS,CAAA,AAAI,ADAX,ADYF,CCZE,ADYF,AEZa,CAAA,ADAX,ADYF,GEZmB,CFYF,ACZD,ACAG,EAAA,KAAU,GAAI,CFYP,CAAA,CAAU,CAAA,AEZH,CAAM,AAAN,CAAM,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,QFYtD,EAAA,OAAA,EAAA,uFAdkC,CAAA,ACAhC,ACA8B,CAAA,AFAE,ACAhC,CCA8B,AFAE,ACAhC,CCA8B,WFC9C,ECeM,EAAW,CCAA,CDAA,ACAA,CDAA,ACAA,CDAA,ACAA,CAAA,ADAA,ACAA,CDAX,ACAA,AAAW,ADAA,CCAA,ADAA,AAAX,ACAA,CDAA,AAAW,ACAA,AAAX,CDAW,ACAA,CDAA,ACAA,CDAA,ACAA,CDAA,ACAA,CDAA,ACAA,CAAA,ADAA,iFAhBJ,CCAA,CDAG,CAAA,ACAD,AFAC,CEAD,AFAC,ACAA,qCAAyC,CAAA,ADAJ,CCAI,ADAJ,CAAA,ACAI,CAAA,IAAA,CAAU,CAAA,YACnD,cAAgB,oDPHhC,IAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,YKaM,CGZH,AFAA,ACAA,CAAA,ACAA,AFAA,CEAA,ADAA,ADAA,CEAA,AFAA,ACAA,CFYe,CGZF,AFAA,ACAA,AFYE,CAAA,AEZF,ACAA,AFAA,ADYE,CCZF,AEAA,AHYE,AEZF,CDAA,ACAA,AFYE,AGZF,CFAA,AEAA,ADAA,AFYE,CGZF,AHYE,ACZF,ACAA,CFYE,ACZF,ACAA,ACAA,CFAA,ACAA,ACAA,AHYE,CAAA,AEZF,ACAA,AHYE,ACZF,ADYE,EAAiB,CEZnB,AFYmB,AGZnB,AFAiB,CEAjB,AHYmB,AEZnB,ADAiB,CDYE,AGZnB,AFAiB,ACAjB,CAAA,ADAiB,AEAjB,AHYmB,CGZnB,AHYmB,AEZnB,QFDH,CAAwB,AAaY,CAbX,MAAA,CAAQ,AAAR,CAAQ,AAAE,EAAG,iBAAkB,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAC,CAAA,ELArF,IAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAuCA,IAAM,EAAgB,CAAC,EAAc,KACnC,GAAI,CAAC,EAAa,OAAO,EAEzB,IAAM,EAAQ,AAAI,OAAO,CAAC,CAAC,EAAE,EAAY,OAAO,CAAC,sBAAuB,QAAQ,CAAC,CAAC,CAAE,MAGpF,OAFc,AAEP,EAFY,KAAK,CAAC,GAEZ,GAAG,CAAC,CAAC,EAAM,IACtB,EAAM,IAAI,CAAC,GACT,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAiB,UAAU,2DACzB,GADQ,GAIX,EAGN,EA4Ge,SAAS,EAAqB,SAC3C,CAAO,CACP,UAAQ,SACR,CAAO,YACP,CAAU,WACV,CAAS,WACT,CAAS,CACT,QAAM,CACN,YAAU,mBACV,CAAiB,UACjB,CAAQ,iBACR,CAAe,gBACf,CAAc,QACd,CAAM,iBACN,CAAe,iBACf,CAAe,aACf,EAAc,EAAE,CACU,EAC1B,GAAM,GAAE,CAAC,CAAE,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IACnB,CAAC,EAAiB,EAAmB,CAAG,EAAA,OAAK,CAAC,QAAQ,EAAC,GACvD,CAAC,EAAuB,EAAyB,CAAG,EAAA,OAAK,CAAC,QAAQ,EAAC,GACnE,CAAC,EAA2B,EAA6B,CAAG,EAAA,OAAK,CAAC,QAAQ,EAAC,GAC3E,CAAC,EAAiB,EAAmB,CAAG,EAAA,OAAK,CAAC,QAAQ,CAA2E,MACjI,CAAC,EAAgB,EAAkB,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAwB,MAC5E,CAAC,EAAe,EAAiB,CAAG,EAAA,OAAK,CAAC,QAAQ,EAAC,GACnD,EAAU,EAAA,OAAK,CAAC,MAAM,CAAiB,MAiD7C,OA9CA,EAAA,OAAK,CAAC,SAAS,CAAC,KA0Bd,CAzB4B,UAC1B,GAAe,GAAG,CAAd,GAEJ,GAAiB,CAFS,EAG1B,GAAI,CACF,IAAM,EAAQ,aAAa,OAAO,CAAC,EAJwB,WAK3D,GAAI,CAAC,EAAO,OAEZ,IAAM,EAAW,MAAM,MAAM,CAAC,4CAA4C,EAAE,EAAA,CAAS,CAAE,CACrF,QAAS,CACP,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAO,AACpC,CACF,GAEM,EAAO,MAAM,EAAS,IAAI,GAC5B,EAAK,OAAO,EAAE,AAChB,EAAkB,EAAK,IAAI,CAE/B,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,kCAAmC,EACnD,QAAU,CACR,GAAiB,EACnB,GACF,GAGF,EAAG,CAAC,EAAS,EAAO,EAGpB,EAAA,OAAK,CAAC,SAAS,CAAC,KACd,IAAM,EAAsB,AAAD,IACrB,EAAQ,OAAO,EAAI,CAAC,EAAQ,OAAO,CAAC,QAAQ,CAAC,EAAM,MAAM,GAAW,AACtE,GAAmB,EAEvB,EAMA,OAJI,GACF,SAAS,KADU,WACM,CAAC,YAAa,GAGlC,KACL,SAAS,mBAAmB,CAAC,YAAa,EAC5C,CACF,EAAG,CAAC,EAAgB,EAGlB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,UAAW,CAAC,2EAA2E,EACrF,EACI,yLACA,oHAAA,CACJ,WAGF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,WACL,QAAS,EACT,SAAU,EACV,UAAU,2OAIZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,2DACnB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,kEAAkE,MAAO,WACpF,EAAc,EAAU,QAG7B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,wEAAwE,EAC5E,QAAZ,EACI,mEACA,AAAY,UACZ,2EACA,2EAAA,CACJ,UACC,EAnQR,AAPuC,CAC5C,IAAO,MACP,CAwQ2B,GAxQpB,UACP,IAAO,QACP,QAAW,UACX,MAAS,OACX,CACiB,CAAC,AAmQ6B,EAnQrB,IAAI,AAmQ2B,KAI7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,kDAAkD,EACjE,AAAW,MACP,6EACA,GAAgB,cAChB,iFACA,GAAgB,gBAAkB,EAClC,iFACA,6EAAA,CACJ,UACC,AApOQ,EACzB,EACA,EACA,EACA,EACA,KAEA,GAAI,EACF,MACE,CAAA,EAFW,AAEX,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oEACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,gEAAuD,kBAM7E,GAAe,GAAG,CAAd,EACF,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sDACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,gEAAuD,gBAM7E,GAAI,EAAgB,CAClB,GAAM,eAAE,CAAa,iBAAE,CAAe,eAAE,CAAa,CAAE,CAAG,EAE1D,GAAI,AAAkB,GAAG,GAEvB,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sEACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kEAAyD,aAK/E,IAAM,EAAc,4BACd,EAAmB,EACrB,qDACA,UAEJ,AAAI,EAGA,CAAA,EAAA,EAAA,IAAA,EAAC,EAHc,IAGd,CAAI,UAAW,CAAA,EAAG,EAAY,CAAC,EAAE,EAAA,CAAkB,CAAE,QAAS,YAC7D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,mDACvB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,mEAAyD,eAC1D,EAAgB,IAAE,EAAc,OAE9C,GAAe,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,kDAMzC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAG,EAAY,CAAC,EAAE,EAAA,CAAkB,CAAE,QAAS,YAC7D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,iDACjB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,iEAAuD,YAC3D,EAAgB,IAAE,EAAc,OAE3C,GAAe,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,+CAI/C,CAGA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sEACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kEAAyD,aAG/E,EAwJoB,EACA,EACA,EACA,GAAkB,EAAe,aAAa,CAAG,EAC7C,IAAM,EAA6B,CAAC,QACpC,EACJ,CAAC,CAAC,CAAC,GAAkB,EAAe,aAAa,EAAG,CAAC,IAKxD,GAA6B,GAAkB,EAAe,aAAa,CAAG,GAC7E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wKAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+IACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,4EACX,EAAe,eAAe,CAAC,IAAE,EAAe,aAAa,CAAC,mBAGnE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,AAAC,IACR,EAAE,eAAe,GACjB,GAA6B,EAC/B,EACA,UAAU,6FAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,UAAU,qBAKjB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yDACZ,OAAO,OAAO,CAAC,EAAe,SAAS,EAAE,GAAG,CAAC,CAAC,CAAC,EAAa,EAAY,GACvE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAsB,UAAU,gBAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,yEACX,IAEH,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,0DACb,EAAY,kBAAkB,CAAC,IAAE,EAAY,aAAa,OAK9D,EAAY,QAAQ,CAAC,MAAM,CAAC,GAAK,EAAE,UAAU,EAAE,MAAM,CAAG,GACvD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gGACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACvB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,YAER,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBACZ,EAAY,QAAQ,CAClB,MAAM,CAAC,GAAK,EAAE,UAAU,EACxB,GAAG,CAAC,AAAC,GACJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAU,yEAEV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mEACZ,EAAQ,SAAS,GAEpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oEACZ,EAAQ,WAAW,CAAC,MAAI,EAAQ,QAAQ,MAPtC,EAAQ,EAAE,QAgB1B,EAAY,QAAQ,CAAC,MAAM,CAAC,GAAK,CAAC,EAAE,UAAU,EAAE,MAAM,CAAG,GACxD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gGACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,gBACjB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,eAER,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBACZ,EAAY,QAAQ,CAClB,MAAM,CAAC,GAAK,CAAC,EAAE,UAAU,EACzB,GAAG,CAAC,AAAC,GACJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAU,yEAEV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mEACZ,EAAQ,SAAS,GAEpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oEACZ,EAAQ,WAAW,CAAC,MAAI,EAAQ,QAAQ,MAPtC,EAAQ,EAAE,UAjDnB,qBA0E1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,WAAW,IAAK,YAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAmB,CAAC,GACnC,UAAU,4JACV,MAAM,mBAEN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,cAIzB,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4IACb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,KACP,IACA,EAAmB,GACrB,EACA,UAAU,0JAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CAAC,UAAU,6CACf,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAM,EAAE,MAAM,CAAC,IAAI,EAAI,OAAO,IAAE,EAAE,mBAAmB,CAAC,SAAS,OAElE,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,KACP,IACA,GAAmB,EACrB,EACA,UAAU,0JAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAS,UAAU,+CACpB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAM,EAAE,MAAM,CAAC,GAAG,CAAC,IAAE,EAAE,mBAAmB,CAAC,SAAS,OAEvD,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,KACP,IACA,GAAmB,EACrB,EACA,UAAU,0JAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,iDACrB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,EAAE,mBAAmB,CAAC,aAAa,MAE5C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,KACP,EAAe,EAAS,GACxB,GAAmB,EACrB,EACA,UAAU,yJAET,AAAW,MACV,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAS,UAAU,6CACpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,EAAE,mBAAmB,CAAC,QAAQ,MAGvC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAM,UAAU,+CACjB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,EAAE,mBAAmB,CAAC,MAAM,QAIzC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uDACf,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,KACP,IACA,GAAmB,EACrB,EACA,UAAU,yJAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,YAClB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,EAAE,MAAM,CAAC,MAAM,eAQhC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,gBACpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,OAET,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,MACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,IAAI,KAAK,GAAW,kBAAkB,CAAC,QAAS,CACrD,MAAO,QACP,IAAK,UACL,KAAM,SACR,WAKJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oHACb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAyB,CAAC,GACzC,UAAU,yKAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,+CACrB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAM,EAAE,mBAAmB,CAAC,SAAS,CAAC,KAAG,EAAU,MAAM,CAAC,UAE5D,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAU,UAAU,YAErB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,eAK1B,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0LACZ,EAAU,GAAG,CAAE,AAAD,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAU,mLAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iHACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,gEACb,EAAQ,WAAW,CAAC,MAAM,CAAC,GAAG,WAAW,OAI9C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gEAAgE,MAAO,EAAQ,WAAW,UACpG,EAAc,EAAQ,WAAW,CAAE,KAErC,EAAQ,iBAAiB,EACxB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6DACV,EAAc,EAAQ,iBAAiB,CAAE,WAMjD,GAAmB,EAAU,MAAM,CAAG,GACrC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,KACP,EAAmB,CACjB,cAAe,EAAQ,aAAa,CACpC,UAAW,EAAQ,SAAS,CAC5B,YAAa,EAAQ,WAAW,AAClC,EACF,EACA,UAAU,iJACV,MAAO,CAAC,OAAO,EAAE,EAAQ,WAAW,CAAA,CAAE,UAEtC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,UAAU,gBAlCZ,EAAQ,SAAS,QA4ChC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,kBAAkB,CAAA,CACjB,OAAQ,CAAC,CAAC,EACV,QAAS,IAAM,EAAmB,MAClC,UAAW,KACL,GAAmB,IACrB,EAAgB,EAAgB,SADM,IACO,CAAE,EAAgB,SAAS,CAAE,EAAgB,WAAW,EAC5E,GAAG,CAAxB,EAAU,MAAM,EAClB,GAAyB,IAG7B,EAAmB,KACrB,EACA,SAAU,GAAiB,aAAe,GAC1C,SAAU,EAAE,mBAAmB,CAAC,OAAO,CACvC,MAAO,CAAA,EAAG,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,mBAAmB,CAAC,OAAO,CAAA,CAAE,CAC5D,QAAS,EAAE,MAAM,CAAC,OAAO,CACzB,YAAa,CAAA,EAAG,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,mBAAmB,CAAC,OAAO,CAAA,CAAE,KAI1E,CC9jBA,IAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,QACA,IAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAmBe,SAAS,EAAmB,QACzC,CAAM,SACN,CAAO,UACP,CAAQ,UACR,CAAQ,kBACR,CAAgB,cAChB,CAAY,CACY,EACxB,GAAM,GAAE,CAAC,CAAE,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IACnB,CAAC,EAAmB,EAAqB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAsB,IAAI,KACtE,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACzC,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAI/B,MACL,CAAC,EAAqB,EAAuB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAU/D,GARA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,IACF,EAAqB,EADX,EACe,KACzB,EAAa,MACb,GAAuB,GAE3B,EAAG,CAAC,EAAO,EAEP,CAAC,EAAQ,OAAO,KAGpB,IAAM,EAAoB,IAAI,IAAI,EAAiB,GAAG,CAAC,GAAK,EAAE,SAAS,GACjE,EAAqB,EAAa,MAAM,CAAC,GAAK,CAAC,EAAkB,GAAG,CAAC,EAAE,EAAE,GAoBzE,EAAe,MAAO,GAAkB,CAAK,IACjD,GAA+B,GAAG,CAA9B,EAAkB,IAAI,EAE1B,GAAe,GACf,GAAI,CACF,IAAM,EAAS,MAAM,EAAS,MAAM,IAAI,CAAC,GAAoB,GAG7D,GAAI,GAAU,EAAO,oBAAoB,EAAI,EAAO,SAAS,CAAE,CAC7D,EAAa,EAAO,SAAS,EAC7B,GAAuB,GACvB,GAAe,GACf,MACF,CAEA,GACF,CAAE,MAAO,EAAgB,CACnB,GAA0B,UAAjB,OAAO,GAAsB,yBAA0B,GAAS,cAAe,GAE1F,EADY,AACC,EAFoF,AAEhF,SAAS,EAC1B,EAAuB,KAEvB,QAAQ,KAAK,CAAC,6BAA8B,EAEhD,QAAU,CACR,EAAe,GACjB,EACF,EAOM,EAAsB,KAC1B,GAAuB,GACvB,EAAa,KACf,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CACR,OAAQ,EACR,QAAS,EACT,MAAO,EAAE,mBAAmB,CAAC,yBAAyB,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAG,IAAM,EAAE,mBAAmB,CAAC,SAAS,CAC5G,SAAS,eAET,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mKACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,yBAEnB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yEAAgE,oBAC7E,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kEAAkE,MAAO,WACnF,YAOT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,gGACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0CAA0C,uBACpC,EAAiB,MAAM,CAAC,OAE/C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gCACZ,EAAiB,GAAG,CAAC,GACpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAEC,UAAU,yLAET,EAAQ,WAAW,EAHf,EAAQ,SAAS,QAU9B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDAGf,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,2FACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yCAAyC,wBAClC,EAAmB,MAAM,CAAC,OAEjD,EAAmB,MAAM,CAAG,GAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QArGQ,CAqGC,IApGnB,EAAkB,IAAI,GAAK,EAAmB,MAAM,CACtD,CADwD,CACnC,IAAI,KAEzB,EAAqB,IAAI,IAAI,EAAmB,GAAG,CAAC,GAAK,EAAE,EAAE,GAEjE,EAgGgB,UAAU,qIAET,EAAkB,IAAI,GAAK,EAAmB,MAAM,CAAG,eAAiB,kBAMhD,AAA9B,MAAmB,MAAM,CACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qGACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,4DACjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gEAAuD,2BACpE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yDAAgD,uDAG/D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0IACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yDACZ,EAAmB,GAAG,CAAC,GACtB,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAEC,UAAU,qHAEV,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,WACL,QAAS,EAAkB,GAAG,CAAC,EAAQ,EAAE,EACzC,SAAU,IAAM,oBAzIT,EAyI6B,EAAQ,EAAE,MAvI9D,CADE,EAAc,IAAI,IAAI,IACZ,GAAG,CAAC,GAClB,EAAY,MAAM,CADY,AACX,GAEnB,EAAY,GAAG,CAAC,GAElB,EAAqB,KAmID,UAAU,gNAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wNACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,gEACb,EAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,WAAW,OAGvC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,2EAAmE,EAAQ,IAAI,GAC5F,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6DAAqD,EAAQ,UAAU,QAhBjF,EAAQ,EAAE,OAyBxB,EAAkB,IAAI,CAAG,GACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mGACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,gEACb,EAAkB,IAAI,KAG3B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,yDACb,EAAkB,IAAI,CAAC,IAA6B,IAA3B,EAAkB,IAAI,CAAS,UAAY,YAAY,qBAOzF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CACV,SAAU,EACV,SAAU,IAAM,GAAa,GAC7B,WAAY,EAAkB,IAAI,CAAG,EAAI,CAAC,UAAU,EAAE,EAAkB,IAAI,CAAC,CAAC,EAA6B,IAA3B,EAAkB,IAAI,CAAS,UAAY,YAAA,CAAa,CAAG,mBAC3I,UAAW,EACX,iBAAkB,AAA2B,MAAT,IAAI,CACxC,YAAY,eACZ,WAAY,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,YAC5B,WAAW,gBAMjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UACb,GAAuB,GAAa,EAAU,MAAM,CAAG,GACtD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAC,GAAG,CAAA,CACT,QAAS,CAAE,QAAS,CAAE,EACtB,QAAS,CAAE,QAAS,CAAE,EACtB,KAAM,CAAE,QAAS,CAAE,EACnB,UAAU,4FACV,QAAS,WAET,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAC,GAAG,CAAA,CACT,QAAS,CAAE,MAAO,GAAK,QAAS,CAAE,EAClC,QAAS,CAAE,MAAO,EAAG,QAAS,CAAE,EAChC,KAAM,CAAE,MAAO,GAAK,QAAS,CAAE,EAC/B,WAAY,CAAE,KAAM,SAAU,QAAS,GAAI,UAAW,GAAI,EAC1D,UAAU,mEACV,QAAS,AAAC,GAAM,EAAE,eAAe,YAEjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qHACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,mDAE3B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mEAA0D,6BAGxE,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,qDAA2C,iBAClB,IAArB,EAAU,MAAM,CAAS,sBAAwB,yBAAyB,mCAM/F,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mDACZ,EAAU,GAAG,CAAC,AAAC,GACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAU,8GAEV,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kEAA0D,EAAS,WAAW,GAC3F,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,4DAAkD,YACpD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBAAe,EAAS,eAAe,QAL7D,EAAS,SAAS,KAW7B,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,sEAA4D,0BAC1B,IAArB,EAAU,MAAM,CAAS,aAAe,eAAe,wBAIjF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,SAAU,EACV,UAAU,4MACX,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAxMW,CAwMF,IAvMzB,EAAuB,IACvB,GAAa,EACf,EAsMkB,SAAU,EACV,UAAU,qOAET,EACC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iFAAiF,kBAIlG,+BAWtB,CC9Re,SAAS,EAAsB,QAC5C,CAAM,SACN,CAAO,YACP,CAAU,CACiB,EAC3B,GAAM,GAAE,CAAC,CAAE,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IACnB,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,OAE3D,GAAI,CAAC,EAAQ,OAAO,KAGpB,IAAM,EAAsB,EAAW,MAAM,CAAC,GACtB,QAAlB,GAA2B,EAAM,OAAO,GAAK,GAK7C,EAAiB,EAAoB,MAAM,CAAC,CALgB,EAKG,KALI,GAKlB,EAAE,OAAO,EAC1D,EAAiB,EAAoB,MAAM,CAAC,GAAK,AAAc,UAAZ,OAAO,EAC1D,EAAiB,EAAoB,MAAM,CAAC,GAAmB,QAAd,EAAE,OAAO,EAEhE,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CACR,OAAQ,EACR,QAAS,EACT,MAAO,CAAA,EAAG,EAAE,mBAAmB,CAAC,gBAAgB,CAAC,EAAE,EAAE,EAAW,MAAM,CAAC,CAAC,CAAC,CACzE,SAAS,eAET,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDACV,EAAE,mBAAmB,CAAC,uBAAuB,GAIhD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAiB,OAChC,UAAW,CAAC,2DAA2D,EACnD,QAAlB,EACI,0CACA,yGAAA,CACJ,WAED,EAAE,SAAS,CAAC,GAAG,CAAC,KAAG,EAAW,MAAM,CAAC,OAExC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAiB,OAChC,UAAW,CAAC,2DAA2D,EACrE,AAAkB,UACd,4CACA,yGAAA,CACJ,WAED,EAAE,mBAAmB,CAAC,GAAG,CAAC,KAAG,EAAW,MAAM,CAAC,GAAmB,QAAd,EAAE,OAAO,EAAY,MAAM,CAAC,OAEnF,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAiB,OAChC,UAAW,CAAC,2DAA2D,EACnD,QAAlB,EACI,0CACA,yGAAA,CACJ,WAED,EAAE,mBAAmB,CAAC,GAAG,CAAC,KAAG,EAAW,MAAM,CAAC,GAAK,AAAc,UAAZ,OAAO,EAAY,MAAM,CAAC,OAEnF,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAiB,OAChC,UAAW,CAAC,2DAA2D,EACnD,QAAlB,EACI,8CACA,yGAAA,CACJ,WAED,EAAE,mBAAmB,CAAC,GAAG,CAAC,KAAG,EAAW,MAAM,CAAC,GAAmB,QAAd,EAAE,OAAO,EAAY,MAAM,CAAC,UAKrF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wIACmB,IAA/B,EAAoB,MAAM,CACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,4DACnB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gEAAwD,EAAE,mBAAmB,CAAC,kBAAkB,GAC7G,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yDAAiD,EAAE,mBAAmB,CAAC,iBAAiB,MAGvG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEZ,CAAmB,QAAlB,GAA6C,QAAlB,CAAkB,CAAK,EAAK,EAAe,MAAM,CAAG,GAC/E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,gGACZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mDACf,EAAE,mBAAmB,CAAC,GAAG,CAAC,IAAE,EAAE,mBAAmB,CAAC,OAAO,CAAC,KAAG,EAAe,MAAM,CAAC,OAEtF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAe,GAAG,CAAC,AAAC,GACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAA6B,MAAO,GAAjB,EAAM,EAAE,QAOnC,CAAC,AAAkB,WAA2B,QAAlB,CAAkB,CAAK,EAAK,EAAe,MAAM,CAAG,GAC/E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,gGACZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kDACf,EAAE,mBAAmB,CAAC,OAAO,CAAC,IAAE,EAAE,mBAAmB,CAAC,OAAO,CAAC,KAAG,EAAe,MAAM,CAAC,OAE1F,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAe,GAAG,CAAE,AAAD,GAClB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAA6B,MAAO,GAAjB,EAAM,EAAE,QAOnC,CAAC,AAAkB,WAA2B,QAAlB,CAAkB,CAAK,EAAK,EAAe,MAAM,CAAG,GAC/E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,gGACZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oDACf,EAAE,mBAAmB,CAAC,KAAK,CAAC,IAAE,EAAE,mBAAmB,CAAC,OAAO,CAAC,KAAG,EAAe,MAAM,CAAC,OAExF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAe,GAAG,CAAC,AAAC,GACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAA6B,MAAO,GAAjB,EAAM,EAAE,aAU1C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iGACb,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,qDACV,EAAE,mBAAmB,CAAC,OAAO,CAAC,IAAE,EAAoB,MAAM,CAAC,IAAE,EAAE,mBAAmB,CAAC,EAAE,CAAC,IAAE,EAAW,MAAM,CAAC,IAAE,EAAE,mBAAmB,CAAC,WAAW,IAEhJ,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,uJAET,EAAE,MAAM,CAAC,KAAK,UAM3B,CAGA,SAAS,EAAc,OAAE,CAAK,CAAwB,MAxL3B,EAkMzB,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6LACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gEACV,EAAM,WAAW,GAEpB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,qDAA2C,IACvD,EAAM,iBAAiB,CAAC,OAE5B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,wEAAwE,EAAE,CAnB5E,AAAC,IACvB,OAAQ,GACN,IAAK,MAAO,MAAO,6GACnB,KAAK,MAAO,MAAO,uGACnB,KAAK,MAAO,MAAO,mHACnB,SAAS,MAAO,oGAClB,EACF,EAYoH,EAAM,OAAO,EAAA,CAAG,UApM7H,AAPuC,CAC5C,AA2MS,IA3MF,MACP,IAAO,UACP,IAAO,QACP,QAAW,UACX,MAAS,OACX,CACiB,CAAC,EAqMW,EAAM,OAAO,CArMhB,EAAI,IAuMrB,EAAM,eAAe,EACpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yLAAgL,cAKpM,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6DACV,EAAM,QAAQ,MAGnB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0CACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDACV,IAAI,KAAK,EAAM,UAAU,EAAE,kBAAkB,CAAC,QAAS,CACtD,MAAO,QACP,IAAK,UACL,KAAM,SACR,KAEF,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,qDAA4C,EAAM,WAAW,CAAC,mBAInF,CCjNe,SAAS,EAAmB,MACzC,CAAI,SACJ,CAAO,WACP,CAAS,SACT,CAAO,UACP,CAAQ,CACR,SAAO,CACP,WAAS,CACe,EACxB,GAAM,GAAE,CAAC,CAAE,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IACnB,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAoB,EAAE,EAChD,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,IAAI,KACpE,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GACvC,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAiB,OAEnE,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAM,EAAgB,UACpB,GAAK,CAAD,EAEJ,GAFW,AAEA,GACX,GAAI,CACF,IAAM,EAAQ,aAAa,OAAO,CAAC,aACnC,GAAI,CAAC,EAAO,OAEZ,IAAM,EAAW,MAAM,MAAM,CAAC,iCAAiC,EAAE,EAAA,CAAS,CAAE,CAC1E,QAAS,CAAE,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAO,AAAC,CAChD,GAEA,GAAI,EAAS,EAAE,CAAE,CACf,IAAM,EAAS,MAAM,EAAS,IAAI,GAClC,EAAY,EAAO,IAAI,EAAE,UAAY,EAAE,CACzC,CACF,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,2BAA4B,EAC5C,QAAU,CACR,GAAW,EACb,EACF,EAEI,IACF,EADQ,EAER,EAAoB,IAAI,KACxB,EAAiB,OAErB,EAAG,CAAC,EAAM,EAAQ,EAsBlB,IAAM,EAAe,UACnB,GAAI,AAA0B,GAAG,GAAZ,IAAI,EAEzB,GAAc,GACd,GAAI,CACF,MAAM,EAAU,MAAM,IAAI,CAAC,IAC3B,GACF,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,4BAA6B,EAC7C,QAAU,CACR,GAAc,EAChB,EACF,EAEM,EAAmB,EAAS,MAAM,CAAC,GACE,QAAlB,GACrB,EAAU,IAAI,CAAC,GAAK,EAAE,SAAS,GAAK,GAAiB,EAAE,WAAW,GAAK,EAAQ,WAAW,UAKzF,AAAL,EAGE,CAAA,CAHE,CAGF,CAHS,CAGT,GAAA,EAAC,EAAA,SAAS,CAAA,CACR,OAAQ,EACR,QAAS,EACT,MAAO,CAAA,EAAG,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,mBAAmB,CAAC,qBAAqB,CAAA,CAAE,CACzE,SAAS,eAET,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAW,CAAC,6CAA6C,EACjD,QAAZ,EAAoB,mEACR,QAAZ,EAAoB,uEACpB,2EAAA,CACA,WACC,EAAQ,IAAE,EAAE,mBAAmB,CAAC,OAAO,MAK5C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6JACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,yBAEvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uEAA+D,EAAE,mBAAmB,CAAC,aAAa,GAC/G,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kEAAkE,MAAO,WACnF,YAOT,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,qDACV,EAAE,mBAAmB,CAAC,qBAAqB,CAAC,IAAC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,2DAAkD,EAAQ,IAAE,EAAE,mBAAmB,CAAC,OAAO,IAAQ,IAAE,EAAE,mBAAmB,CAAC,6BAA6B,CAAC,IAAE,EAAQ,IAAE,EAAE,mBAAmB,CAAC,QAAQ,CAAC,OAIlQ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CACT,MAAO,EAAE,mBAAmB,CAAC,eAAe,CAC5C,MAAO,EAAc,QAAQ,GAC7B,SAAU,AAAC,GAAU,EAA2B,QAAV,EAAkB,MAAQ,SAAS,IACzE,QAAS,CACP,CAAE,MAAO,MAAO,MAAO,EAAE,mBAAmB,CAAC,YAAY,AAAC,KACvD,EAAU,GAAG,CAAC,IAAY,CAC3B,KAD0B,CACnB,EAAQ,SAAS,CAAC,QAAQ,GACjC,MAAO,EAAQ,WAAW,AAC5B,CAAC,GACF,GAIF,EAAiB,MAAM,CAAG,GACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iGACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,yDACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,WACL,QAAS,EAAiB,IAAI,GAAK,EAAiB,MAAM,EAAI,EAAiB,MAAM,CAAG,EACxF,SA3FU,CA2FA,IA1FlB,EAAiB,IAAI,GAAK,EAAiB,MAAM,CACnD,CADqD,CACjC,IAAI,KAExB,EAAoB,IAAI,IAAI,EAAiB,GAAG,CAAC,GAAK,EAAE,EAAE,GAE9D,EAsFc,UAAU,4MAEZ,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,8IACb,EAAE,MAAM,CAAC,SAAS,CAAC,KAAG,EAAiB,MAAM,CAAC,UAGlD,EAAiB,IAAI,CAAG,GACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iGACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8DACb,EAAiB,IAAI,KAG1B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,gEAAuD,mBAO/E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wIACZ,EACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4DACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,KAAM,KACrB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yDAAiD,EAAE,mBAAmB,CAAC,eAAe,MAEvE,IAA5B,EAAiB,MAAM,CACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,4DACrB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gEAAwD,EAAE,mBAAmB,CAAC,eAAe,GAC1G,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yDAAiD,EAAE,mBAAmB,CAAC,wBAAwB,MAG9G,EAAiB,GAAG,CAAC,GACnB,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAEC,UAAW,CAAC,kFAAkF,EAC5F,EAAiB,GAAG,CAAC,EAAQ,EAAE,EAC3B,sEACA,gKAAA,CACJ,WAEF,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,WACL,QAAS,EAAiB,GAAG,CAAC,EAAQ,EAAE,EACxC,SAAU,IAAM,cArJD,EAqJuB,EAAQ,EAAE,MApJ9D,EAAoB,IAClB,IAAM,EAAS,IAAI,IAAI,GAMvB,OALI,EAAO,GAAG,CAAC,GACb,EAAO,MAAM,CADY,AACX,GAEd,EAAO,GAAG,CAAC,GAEN,CACT,IA6Ic,UAAU,4MAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oNACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8DACb,EAAQ,SAAS,CAAC,MAAM,CAAC,GAAG,WAAW,OAG5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kEACV,EAAQ,SAAS,GAEpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iHACb,EAAQ,WAAW,MAGxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iDACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,wDAAgD,EAAQ,WAAW,GACnF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4CAAmC,MACnD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4CACb,EAAQ,iBAAiB,EAAI,CAAC,IAAI,EAAE,EAAQ,SAAS,CAAA,CAAE,GAEzD,EAAQ,QAAQ,EACf,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4CAAmC,MACnD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4CAAoC,EAAQ,QAAQ,cApCvE,EAAQ,EAAE,KA+CvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CACV,SAAU,EACV,SAAU,EACV,WAAY,EAAiB,IAAI,CAAG,EAAI,CAAA,EAAG,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,EAAQ,CAAC,EAAE,EAAE,mBAAmB,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAiB,IAAI,CAAC,CAAC,CAAC,CAAG,EAAE,mBAAmB,CAAC,cAAc,CAC1K,UAAW,EACX,iBAA4C,IAA1B,EAAiB,IAAI,CACvC,YAAa,CAAA,EAAG,EAAE,mBAAmB,CAAC,SAAS,CAAC,CAAC,EAAE,EAAQ,GAAG,CAAC,CAC/D,WAAY,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,YACjC,WAAW,gBAzJD,IA8JpB,CC7PA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAmCe,SAAS,IACtB,IAonCoB,EApnCd,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAO,AAAP,IACX,CAAE,CAAC,CAAE,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IAGnB,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,EAAE,EACtD,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAY,EAAE,EAClD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAA+D,EAAE,EACzF,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA2E,EAAE,EACvG,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAoF,EAAE,EACxH,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7B,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACzC,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GAG/C,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAW,EAAE,EACrD,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAmB,EAAE,EACjD,CAAC,EAAe,GAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAW,EAAE,EACzD,CAAC,GAAe,GAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAW,EAAE,EACzD,CAAC,GAAe,GAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,OACrD,CAAC,GAAa,GAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IAGjD,CAAC,GAAgB,GAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,IAAI,KAChE,CAAC,GAAW,GAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrC,CAAC,GAAmB,GAAqB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GACrD,CAAC,GAAgB,GAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAG/C,CAAC,GAAyB,GAA2B,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjE,CAAC,GAAe,GAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5D,CAAC,GAAwB,GAA0B,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IAGvE,CAAC,GAAiB,GAAmB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IACjD,CAAC,GAAwB,GAA0B,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAI1D,MAGJ,CAAC,GAAY,GAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,UAG/C,CAAC,GAAsB,GAAwB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAG3D,CAAC,GAAoB,GAAsB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACvD,CAAC,GAAmB,GAAqB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAkE,MACtH,CAAC,GAAe,GAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAiE,EAAE,EAC/G,CAAC,GAAkB,GAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACnD,CAAC,GAAW,GAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACrC,CAAC,GAAW,GAAa,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IACrC,CAAC,GAAW,GAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAGrC,CAAC,GAAwB,GAA0B,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC/D,CAAC,GAAuB,GAAyB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAMxD,MAGV,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,GAAsB,AAAd,YAAK,IAAI,EAA8B,eAAe,CAA7B,EAAK,IAAI,EAC5C,EAAO,IAAI,CAAC,aAEhB,EAAG,CAAC,EAAM,EAAO,EAGjB,IAAM,GAAkB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,UAClC,GAAI,CACF,EAAW,IACX,IAAM,EAAQ,aAAa,OAAO,CAAC,aACnC,GAAI,CAAC,EAAO,OAEZ,IAAM,EAAW,MAAM,MAAM,sBAAuB,CAClD,QAAS,CACP,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAO,AACpC,CACF,GAEM,EAAO,MAAM,EAAS,IAAI,EAC5B,GAAK,OAAO,EAAE,AAChB,EAAc,EAAK,IAAI,EAAI,EAAE,CAEjC,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,8BAA+B,GAC7C,EAAS,EAAE,mBAAmB,CAAC,kBAAkB,CACnD,QAAU,CACR,GAAW,EACb,CACF,EAAG,EAAE,EAGC,GAAiB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,UACjC,GAAI,CACF,IAAM,EAAQ,aAAa,OAAO,CAAC,aACnC,GAAI,CAAC,EAAO,OAEZ,IAAM,EAAW,MAAM,MAAM,oBAAqB,CAChD,QAAS,CACP,cAAiB,CAAC,OAAO,EAAE,EAAA,CAC7B,AADoC,CAEtC,GAEM,EAAO,MAAM,EAAS,IAAI,GAEhC,GADA,QAAQ,GAAG,CAAC,0BAA2B,GACnC,EAAK,OAAO,CAAE,CAChB,IAAM,EAAgB,EAAK,IAAI,EAAI,EAAE,CACrC,QAAQ,GAAG,CAAC,kBAAmB,GAC/B,EAAa,EACf,CACF,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,4BAA6B,EAC7C,CACF,EAAG,EAAE,EAGC,GAAe,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,UAC/B,GAAI,CACF,IAAM,EAAQ,aAAa,OAAO,CAAC,aACnC,GAAI,CAAC,EAAO,OAEZ,IAAM,EAAW,MAAM,MAAM,kBAAmB,CAC9C,QAAS,CAAE,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAO,AAAC,CAChD,GAEA,GAAI,EAAS,EAAE,CAAE,CACf,IAAM,EAAO,MAAM,EAAS,IAAI,GAChC,EAAW,EAAK,IAAI,EAAI,EAAE,CAC5B,CACF,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,0BAA2B,EAC3C,CACF,EAAG,EAAE,EAGC,GAAY,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,UAC5B,GAAI,CACF,IAAM,EAAQ,aAAa,OAAO,CAAC,aACnC,GAAI,CAAC,EAAO,OAEZ,IAAM,EAAW,MAAM,MAAM,gBAAiB,CAC5C,QAAS,CAAE,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAO,AAAC,CAChD,GAEA,GAAI,EAAS,EAAE,CAAE,CACf,IAAM,EAAO,MAAM,EAAS,IAAI,GAChC,EAAQ,EAAK,IAAI,EAAI,EAAE,CACzB,CACF,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,uBAAwB,EACxC,CACF,EAAG,EAAE,EAGC,GAAgB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,UAChC,GAAI,CACF,IAAM,EAAQ,aAAa,OAAO,CAAC,aACnC,GAAI,CAAC,EAAO,OAEZ,IAAM,EAAW,MAAM,MAAM,oBAAqB,CAChD,QAAS,CAAE,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAO,AAAC,CAChD,GAEA,GAAI,EAAS,EAAE,CAAE,CACf,IAAM,EAAO,MAAM,EAAS,IAAI,GAChC,EAAY,EAAK,IAAI,EAAI,EAAE,CAC7B,CACF,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,2BAA4B,EAC5C,CACF,EAAG,EAAE,EAEL,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KACJ,IACF,EADQ,GAER,KACA,KACA,KACA,KAEJ,EAAG,CAAC,EAAM,GAAiB,GAAgB,GAAc,GAAW,GAAc,EAGlF,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAM,EAAqB,AAAC,IAG1B,GAFoB,AACN,EAAY,MAAM,EAAE,EACnB,KAD4B,GAE7C,EAGA,OADA,OAAO,gBAAgB,CAAC,eAAgB,GACjC,KACL,OAAO,mBAAmB,CAAC,eAAgB,EAC7C,CACF,EAAG,EAAE,EAGL,IAAM,GAAqB,MAAO,EAAkB,EAAiB,KACnE,GAAI,CACF,IAAoB,GACpB,IAAM,EAAQ,aAAa,OAAO,CAAC,aACnC,GAAI,CAAC,EAAO,OAEZ,IAAM,EAAW,MAAM,MAAM,CAAC,kCAAkC,EAAE,mBAAmB,GAAU,SAAS,EAAE,EAAQ,WAAW,EAAE,EAAA,CAAW,CAAE,CAC1I,QAAS,CACP,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAO,AACpC,CACF,GAEM,EAAO,MAAM,EAAS,IAAI,GAC5B,EAAK,OAAO,CACd,CADgB,EACC,EAAK,IAAI,EAAI,EAAE,EAEhC,EAA+B,UAAtB,OAAO,EAAK,KAAK,CAAgB,EAAK,KAAK,CAAG,EAAK,KAAK,EAAE,SAAW,EAAE,mBAAmB,CAAC,iBAAiB,CAEzH,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,kCAAmC,GACjD,EAAS,EAAE,mBAAmB,CAAC,iBAAiB,CAClD,QAAU,CACR,IAAoB,EACtB,CACF,EAUM,GAAsB,KAC1B,IAAsB,GACtB,GAAqB,MACrB,GAAiB,EAAE,EACnB,GAAa,IACb,GAAa,IACb,GAAa,GACf,EAGM,GAAe,MAAO,IAC1B,GAAiB,GAGjB,IAAM,EAAQ,OAAO,MAAM,CAAC,IAAe,IAAI,CAAC,GAC9C,EAAE,cAAc,CAAC,QAAQ,CAAC,IAAO,EAAE,OAAO,GAAK,GAG7C,GAAS,EAAM,SAAS,CAAC,MAAM,CAAG,EAIpC,CAJuC,EACpB,EAAM,SAAS,CAC/B,GAAG,CAAC,GAAK,EAAE,EAEY,eAFK,EAAI,EAAE,SAAS,CAAC,QAAQ,IACpD,IAAI,CAAC,OAGR,GAA0B,IAG5B,GAA2B,GAC7B,EAGM,GAAsB,UAC1B,GAAK,CAAD,EAEJ,GAAI,CACF,IAAM,EAAQ,EAHI,WAGS,OAAO,CAAC,aAC7B,EAAW,MAAM,MAAM,CAAC,oBAAoB,EAAE,GAAA,CAAe,CAAE,CACnE,OAAQ,SACR,QAAS,CACP,cAAiB,CAAC,OAAO,EAAE,EAAA,CAC7B,AADoC,CAEtC,GAEM,EAAO,MAAM,EAAS,IAAI,GAE5B,EAAK,OAAO,EAAE,AAChB,EAAW,mCACX,KAEA,WAAW,KACT,EAAW,GACb,EAAG,OAEH,EAAS,EAAK,OAAO,EAAI,+BAEzB,WAAW,KACT,EAAS,GACX,EAAG,KAEP,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,6BAA8B,GAC5C,EAAS,6BAET,WAAW,KACT,EAAS,GACX,EAAG,IACL,QAAU,CACR,IAA2B,GAC3B,GAAiB,MACjB,GAA0B,GAC5B,CACF,EAqBM,GAAqB,MAAO,EAAiB,KACjD,GAAI,CACF,IAAM,EAAQ,aAAa,OAAO,CAAC,aACnC,GAAI,CAAC,EAAO,OAEZ,IAAM,QAAY,CAAkB,EAG9B,EAHkC,AAG1B,IAH8B,GAGvB,MAAM,CAAC,IAAe,IAAI,CAAC,GAAK,EAAE,OAAO,GAAK,GAC7D,EAAW,GAAO,gBAAkB,CAAC,EAAQ,CAE7C,EAAW,MAAM,MAAM,6BAA8B,CACzD,OAAQ,QACR,QAAS,CACP,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAO,CAClC,eAAgB,kBAClB,EACA,KAAM,KAAK,SAAS,CAAC,UAAE,EAAU,OAAQ,CAAU,EACrD,GAEM,EAAO,MAAM,EAAS,IAAI,EAE5B,GAAK,OAAO,EAAE,AAChB,EAAW,CAAA,EAAG,EAAE,mBAAmB,CAAC,yBAAyB,CAAC,CAAC,EAAgB,IAAd,EAAkB,EAAE,mBAAmB,CAAC,MAAM,CAAC,WAAW,GAAK,EAAE,mBAAmB,CAAC,QAAQ,CAAC,WAAW,GAAA,CAAI,EAC9K,KAEA,WAAW,KACT,EAAW,GACb,EAAG,OAEH,EAAS,EAAK,OAAO,EAAI,EAAE,mBAAmB,CAAC,oBAAoB,EAEnE,WAAW,KACT,EAAS,GACX,EAAG,KAEP,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,yBAA0B,GACxC,EAAS,EAAE,mBAAmB,CAAC,mBAAmB,EAElD,WAAW,KACT,EAAS,GACX,EAAG,IACL,CACF,EAGM,GAAyB,MAAO,IACpC,GAAI,CACF,IAAM,EAAQ,aAAa,OAAO,CAAC,aACnC,GAAI,CAAC,EAAO,OAKZ,IAAM,EAAiB,OAAO,MAAM,CAAC,IAAe,MAAM,CAAC,GACzD,EAAM,cAAc,CAAC,IAAI,CAAC,GAAM,GAAe,GAAG,CAAC,KAG/C,EAAc,EAAe,OAAO,CAAC,GAAS,EAAM,cAAc,EAElE,EAAW,MAAM,MAAM,6BAA8B,CACzD,OAAQ,QACR,QAAS,CACP,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAO,CAClC,eAAgB,kBAClB,EACA,KAAM,KAAK,SAAS,CAAC,CAAE,SAAU,EAAa,OAf9B,CAesC,CAf3B,YAAA,CAeqC,EAClE,CAhBwC,EAkBlC,EAAO,AAlB+B,MAkBzB,EAAS,IAAI,GAE5B,EAAK,OAAO,EAAE,AAChB,EAAW,CAAC,EAAE,EAAE,EAAe,MAAM,CAAC,CAAC,EAAE,EAAE,mBAAmB,CAAC,iBAAiB,CAAC,CAAC,EAAE,AAAW,aAAW,EAAE,mBAAmB,CAAC,MAAM,CAAC,WAAW,GAAK,EAAE,mBAAmB,CAAC,QAAQ,CAAC,WAAW,GAAA,CAAI,EACrM,WAAW,IAAM,EAAW,IAAK,KAEjC,GAAkB,IAAI,KACtB,IAAa,GACb,MAAM,OAEN,EAAS,EAAK,OAAO,EAAI,EAAE,mBAAmB,CAAC,oBAAoB,EACnE,WAAW,IAAM,EAAS,IAAK,KAEnC,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,8BAA+B,GAC7C,EAAS,EAAE,mBAAmB,CAAC,mBAAmB,EAClD,WAAW,IAAM,EAAS,IAAK,IACjC,CACF,EAGM,GAAqB,EAAW,MAAM,CAAC,IAE3C,GAAsB,OAAO,CAAzB,GACF,GAAI,AAAkB,cAAU,CAG9B,IAAM,EAAW,EAAW,IAAI,CAAC,GAAK,EAAE,eAAe,GAAK,EAAM,EAAE,EACpE,GAA8B,OAA1B,EAAM,eAAe,EAAa,EAAU,MAAO,EACzD,KAAO,OAIL,GAAI,CA7cH,CAPuC,CAC5C,IAAO,MACP,IAAO,UACP,IAAO,QACP,QAAW,UACX,MAAS,QACX,CACiB,CAAC,AARO,EAodsB,EAAM,OAAO,CA5clC,EAAI,CAAA,IA6cD,GAAe,OAAO,CAC/C,CAIF,GAAoB,KAAhB,GAAoB,CACtB,IAAM,EAAQ,GAAY,WAAW,GAQrC,GAAI,CANF,AAMG,GANG,WAAW,CAAC,WAAW,GAAG,QAAQ,CAAC,IACzC,EAAM,iBAAiB,CAAC,WAAW,GAAG,QAAQ,CAAC,IAC/C,EAAM,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,IACrC,EAAM,QAAQ,CAAC,WAAW,GAAG,QAAQ,CAAC,IACtC,EAAM,UAAU,CAAC,WAAW,GAAG,QAAQ,CAAC,EAAA,EAEtB,OAAO,CAC7B,CAEA,MAAO,EACT,GAMM,GAHe,AAGC,GAHkB,MAAM,CAAC,GAAmC,OAA1B,EAAM,eAAe,EAG1C,MAAM,CAAC,CAAC,EAAK,KAC9C,CAAG,CAAC,EAAY,EAAE,CAAC,CAAG,CACpB,QAAS,EAAY,EAAE,CACvB,SAAU,EAAY,QAAQ,CAC9B,QAAS,EAAY,OAAO,CAC5B,WAAY,EAAY,UAAU,CAClC,UAAW,EAAY,UAAU,CACjC,YAAa,EAAY,WAAW,CACpC,OAAQ,EAAY,MAAM,CAC1B,UAAW,EAAE,CACb,eAAgB,CAAC,EAAY,EAAE,CAAC,AAClC,CADmC,CAInC,CAAG,CAAC,EAAY,EAAE,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,CACjC,IAL8D,MAKnD,EAAY,SAAS,CAChC,YAAa,EAAY,WAAW,CACpC,kBAAmB,EAAY,iBAAiB,CAChD,cAAe,EAAY,EAAE,AAC/B,CADgC,EAIhC,GAAmB,OAAO,CAAC,IACrB,EAAM,eAAe,GAAK,EAAY,EAAE,EAAE,AAL2B,CAMvE,CAAG,CAAC,EAAY,EAAE,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,CACjC,UAAW,EAAM,SAAS,CAC1B,YAAa,EAAM,WAAW,CAC9B,kBAAmB,EAAM,iBAAiB,CAC1C,cAAe,EAAM,EAAE,AACzB,CAD0B,EAE1B,CAAG,CAAC,EAAY,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,EAAM,EAAE,EAEpD,GAEO,GACN,CAAC,AAPuE,GAoBrE,GAA+B,OAAO,MAAM,CAAC,IAAe,MAAM,CAAC,GAEhE,EAAM,SAAS,CAAC,IAAI,CAAC,IAE1B,IAAM,EAAU,EAAU,IAAI,CAAC,GAAK,EAAE,EAAE,GAAK,EAAa,SAAS,EACnE,GAAI,CAAC,EAAS,OAAO,EAGrB,IAAM,EAAa,EAAQ,MAAM,CAAG,EAAK,IAAI,CAAC,GAAK,EAAE,EAAE,GAAK,EAAQ,MAAM,EAAI,KACxE,EAAe,GAAY,YAAc,EAAQ,IAAI,CAAC,GAAK,EAAE,EAAE,GAAK,EAAW,WAAW,EAAI,WAIpG,CAAI,CAAC,CADgB,AAAuB,MAAX,MAAM,CACpB,CAD8B,EAAY,IACnC,IAD2C,CAAC,GAAc,GAAG,YAAc,GAAA,IAKjG,CAAC,CADmC,IAArB,EAAU,KACZ,CADkB,EAAU,EAAU,EAC/B,MADuC,CAAC,GAAY,GAAG,YAAc,GAAA,IAKzF,CAAC,CAD2C,IAAzB,EAAc,MAAM,EAAU,CAChC,CAD8C,MACvC,EAD+C,CAAC,EAAa,SAAS,CAAC,QAAQ,GAAA,MAIvG,GAAc,MAAM,MAGlB,CAFoB,AACL,AACd,EAF4B,MAAM,CAAC,GAAK,AAE5B,EAF8B,KAEvB,IAFgC,GAAK,EAAa,SAAS,EAChD,IAAI,CAAC,GAAK,GAAc,QAAQ,CAAC,EAAE,EAAE,CAAC,QAAQ,IAFxD,GAAG,CAMvB,CACT,IAeF,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,GAAe,IAAI,CAAG,EAAG,CAC3B,IAAM,EAAkB,IAAI,IAAI,GAAmB,GAAG,CAAC,GAAK,EAAE,EAAE,GAC1D,EAAmB,IAAI,IAC3B,MAAM,IAAI,CAAC,IAAgB,MAAM,CAAC,GAAM,EAAgB,GAAG,CAAC,KAG1D,EAAiB,IAAI,GAAK,GAAe,IAAI,EAAE,CACjD,GAAkB,GAClB,IAAa,GAEjB,CAEF,EAAG,CAAC,EAAe,GAAe,GAAa,EAAW,EAG1D,IAAM,GAAmB,UACvB,GAA4B,GAAG,CAA3B,GAAe,IAAI,EAEvB,IAAqB,GACrB,IAAkB,GAClB,EAAkB,GAElB,GAAI,CACF,IAAM,EAAQ,aAAa,OAAO,CAAC,aACnC,EAAkB,IAElB,IAAM,EAAM,MAAM,IAAI,CAAC,IACjB,EAAiB,EAAI,GAAG,CAAC,GAC7B,MAAM,CAAC,oBAAoB,EAAE,EAAA,CAAI,CAAE,CACjC,OAAQ,SACR,QAAS,CAAE,cAAe,CAAC,OAAO,EAAE,EAAA,CAAO,AAAC,CAC9C,IAGF,EAAkB,IAClB,MAAM,QAAQ,GAAG,CAAC,GAClB,EAAkB,IAElB,MAAM,KACN,EAAkB,IAElB,GAAkB,IAAI,KACtB,IAAa,GACb,EAAW,CAAC,qBAAqB,EAAE,EAAI,MAAM,CAAC,cAAc,CAAC,EAC7D,EAAS,IAET,EAAkB,KAClB,WAAW,KACT,EAAW,GACb,EAAG,IACL,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,8BAA+B,GAC7C,EAAS,uCACT,WAAW,KACT,EAAS,GACX,EAAG,IACL,QAAU,CACR,IAAkB,GAClB,EAAkB,EACpB,EACF,EASM,GAAwB,MAAO,EAAsB,KACzD,GAAK,CAAD,EAEJ,GAAI,CACF,IAAM,EAAQ,WAHa,EAGA,OAAO,CAAC,aACnC,GAAI,CAAC,EAAO,OAEZ,IAAM,EAAW,MAAM,MAAM,6BAA8B,CACzD,OAAQ,OACR,QAAS,CACP,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAO,CAClC,eAAgB,kBAClB,EACA,KAAM,KAAK,SAAS,CAAC,CACnB,cAAe,GAAuB,OAAO,YAC7C,kBACA,CACF,EACF,GAEM,EAAO,MAAM,EAAS,IAAI,GAGhC,GAAI,AAAoB,QAAX,MAAM,EAAY,EAAK,oBAAoB,CACtD,CADwD,KACjD,CACL,sBAAsB,EACtB,UAAW,EAAK,SAAS,AAC3B,EAGF,GAAI,EAAK,OAAO,CAAE,CAChB,EAAW,CAAC,+BAA+B,EAAE,EAAK,IAAI,CAAC,aAAa,CAAC,CAAC,EAA8B,IAA5B,EAAK,IAAI,CAAC,aAAa,CAAS,UAAY,YAAA,CAAa,EACjI,WAAW,IAAM,EAAW,IAAK,KAGjC,MAAM,KAEN,IAAmB,GACnB,GAA0B,MAC1B,MACF,CACE,EAAS,EAAK,EADT,KACgB,EAAI,uCACzB,WAAW,IAAM,EAAS,IAAK,IAEnC,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,sCAAuC,GACrD,EAAS,sCACT,WAAW,IAAM,EAAS,IAAK,IACjC,CACF,EAeM,GAAsB,MAAO,IACjC,GAAK,CAAD,EAEJ,GAAI,CACF,IAAM,EAAQ,UAHY,GAGC,OAAO,CAAC,aACnC,GAAI,CAAC,EAAO,OAEZ,IAAM,EAAW,MAAM,MAAM,qCAAsC,CACjE,OAAQ,OACR,QAAS,CACP,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAO,CAClC,eAAgB,kBAClB,EACA,KAAM,KAAK,SAAS,CAAC,CACnB,SAAU,GAAsB,cAAc,EAAI,CAAC,GAAsB,OAAO,CAAC,YACjF,EACA,QAAS,GAAsB,OAAO,AACxC,EACF,GAEM,EAAO,MAAM,EAAS,IAAI,GAEhC,GAAI,EAAK,OAAO,CAAE,CAChB,IAAM,EAAe,EAAW,MAAM,CAChC,EAAY,GAAsB,QAAQ,CAC1C,EAAU,GAAsB,OAAO,CAC7C,EAAW,CAAC,qBAAqB,EAAE,EAAQ,6BAA6B,EAAE,EAAa,QAAQ,EAAE,EAAe,EAAI,IAAM,GAAG,SAAS,EAAE,EAAU,gDAAgD,CAAC,EACnM,WAAW,IAAM,EAAW,IAAK,KACjC,GAA0B,IAC1B,GAAyB,KAC3B,MACE,CADK,CACI,EAAK,OAAO,EAAI,oCACzB,WAAW,IAAM,EAAS,IAAK,IAEnC,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,oCAAqC,GACnD,EAAS,yDACT,WAAW,IAAM,EAAS,IAAK,IACjC,CACF,EAGM,GAAsB,MAAO,EAAuB,EAAmB,KAC3E,GAAI,CACF,IAAM,EAAQ,aAAa,OAAO,CAAC,aACnC,GAAI,CAAC,EAAO,OAEZ,IAAM,EAAW,MAAM,MAAM,qCAAsC,CACjE,OAAQ,OACR,QAAS,CACP,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAO,CAClC,eAAgB,kBAClB,EACA,KAAM,KAAK,SAAS,CAAC,CAAE,QAAS,YAAe,CAAU,EAC3D,GAEM,EAAO,MAAM,EAAS,IAAI,GAE5B,EAAK,OAAO,EAAE,AAChB,EAAW,CAAC,uBAAuB,EAAE,EAAY,gBAAgB,CAAC,EAClE,WAAW,IAAM,EAAW,IAAK,KAEjC,EAAc,EAAE,EAChB,MAAM,OAEN,EAAS,EAAK,OAAO,EAAI,4BACzB,WAAW,IAAM,EAAS,IAAK,KAEnC,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,0BAA2B,GACzC,EAAS,+CACT,WAAW,IAAM,EAAS,IAAK,IACjC,CACF,EAGM,GAAkB,EAAW,MAAM,CAAC,GAAmC,OAA1B,EAAM,eAAe,EAElE,GAAe,GAAgB,MAAM,CAAC,GAEnC,CADU,AACT,EADoB,IAAI,CAAC,GAAK,EAAE,eAAe,GAAK,EAAM,EAAE,GAEnE,MAAM,CAEH,GAAmB,EAAW,MAAM,CACpC,GAAY,GAAgB,MAAM,CAAC,GAAmB,QAAd,EAAE,OAAO,EAAY,MAAM,CACnE,GAAY,GAAgB,MAAM,CAAC,GAAmB,QAAd,EAAE,OAAO,EAAY,MAAM,CACnE,GAAY,GAAgB,MAAM,CAAC,GAAmB,QAAd,EAAE,OAAO,EAAY,MAAM,QAEzE,AAAI,EAEA,CAAA,EAAA,EAAA,EAFS,CAET,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,KAAM,GAAI,WAAW,MAMxC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WAEA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CACd,UAAW,GAAe,GAC1B,QAAS,GAAiB,EAAE,mBAAmB,CAAC,kBAAkB,CAAG,EAAE,mBAAmB,CAAC,kBAAkB,CAC7G,WAAY,GAAiB,EAAE,mBAAmB,CAAC,kBAAkB,CAAG,EAAE,mBAAmB,CAAC,mBAAmB,CACjH,SAAU,EACV,cAAc,IAGhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6DAEb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAoB,CAAA,CACnB,MAAO,EAAE,mBAAmB,CAAC,KAAK,CAClC,SAAU,EAAE,mBAAmB,CAAC,QAAQ,CACxC,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,0BACzB,UAAW,KAIb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CACZ,QAAS,EACT,MAAO,EACP,QAAS,KACP,EAAW,IACX,EAAS,GACX,IAIF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0EACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CACR,MAAO,EAAE,mBAAmB,CAAC,YAAY,CACzC,MAAO,GACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,YACzB,MAAM,OACN,QAAS,IAAM,GAAiB,UAChC,WAAW,EACX,SAA4B,WAAlB,KAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CACR,MAAO,EAAE,mBAAmB,CAAC,gBAAgB,CAC7C,MAAO,GACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,YACzB,MAAM,OACN,QAAS,KACP,GAAiB,OACjB,IAAwB,EAC1B,EACA,WAAW,EACX,SAA4B,QAAlB,KAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CACR,MAAO,EAAE,mBAAmB,CAAC,SAAS,CACtC,MAAO,GACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,YACzB,MAAM,QACN,QAAS,IAAM,GAAiB,OAChC,WAAW,EACX,SAA4B,QAAlB,KAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CACR,MAAO,EAAE,mBAAmB,CAAC,aAAa,CAC1C,MAAO,GACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,YACzB,MAAM,OACN,QAAS,IAAM,GAAiB,WAChC,WAAW,EACX,SAA4B,YAAlB,KAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CACR,MAAO,EAAE,mBAAmB,CAAC,WAAW,CACxC,MAAO,GACP,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,YACzB,MAAM,SACN,QAAS,IAAM,GAAiB,SAChC,WAAW,EACX,SAAU,AAAkB,kBAKhC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAc,CAAA,CACb,aAAc,MACd,eAAgB,KAAO,EACvB,YAAa,EACb,cAAe,AAAC,GAAU,EAAe,MAAM,OAAO,CAAC,GAAS,EAAQ,CAAC,EAAM,EAC/E,UAAW,EACX,YAAa,AAAC,GAAU,EAAa,MAAM,OAAO,CAAC,GAAS,EAAQ,CAAC,EAAM,EAC3E,cAAe,EACf,gBAAiB,AAAC,GAAU,GAAiB,MAAM,OAAO,CAAC,GAAS,EAAQ,CAAC,EAAM,EACnF,cAAe,GACf,gBAAiB,AAAC,GAAU,GAAiB,MAAM,OAAO,CAAC,GAAS,EAAQ,CAAC,EAAM,EACnF,cAAe,GACf,gBAAiB,GACjB,QAAS,EACT,KAAM,EACN,UAAW,EACX,SAAU,EACV,cAAe,GAA6B,MAAM,CAClD,WAAY,EAAW,MAAM,CAC7B,YAAa,GACb,eAAgB,GAChB,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,YACzB,kBAAmB,GACnB,sBAAsB,IAIvB,GAAe,IAAI,CAAG,GACrB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,kBAAkB,CAAA,CACjB,cAC6B,CADd,CAAC,CAC0C,MAAM,CAAC,GAC7D,EAAM,cAAc,CAAC,IAAI,CAAC,GAAM,GAAe,GAAG,CAAC,KACnD,MAAM,CAGV,WAAY,GAA6B,MAAM,CAC/C,aAAc,IAAM,IAAqB,GACzC,iBAAkB,KAChB,GAAkB,IAAI,KACtB,IAAa,EACf,EACA,SAAS,aACT,kBAAkB,EAClB,kBAAmB,GACnB,mBAAoB,AAAC,IACnB,GAAc,GACd,GAAuB,EACzB,EACA,cAAe,CACb,CAAE,OAAQ,SAAU,MAAO,EAAE,mBAAmB,CAAC,MAAM,CAAE,MAAO,eAAgB,QAAS,8CAA+C,EACxI,CAAE,OAAQ,WAAY,MAAO,EAAE,mBAAmB,CAAC,QAAQ,CAAE,MAAO,aAAc,QAAS,0CAA2C,EACvI,GAKL,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBAC4B,IAAxC,GAA6B,MAAM,CAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CACT,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,cACzB,MAAO,EAAE,mBAAmB,CAAC,iBAAiB,CAC9C,QAAS,EAAE,mBAAmB,CAAC,gBAAgB,CAC/C,WAAY,EAAE,mBAAmB,CAAC,eAAe,CACjD,SAAU,IAAM,GAAmB,GACnC,YAAY,IAGd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gFACZ,GAA6B,GAAG,CAAC,IAEhC,IAAM,EAAkB,EAAM,cAAc,CAAC,KAAK,CAAC,GAAM,GAAe,GAAG,CAAC,IAE5E,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAEC,QAAS,EAAM,OAAO,CACtB,SAAU,EAAM,QAAQ,CACxB,QAAS,EAAM,OAAO,CACtB,WAAY,EAAM,UAAU,CAC5B,UAAW,EAAM,SAAS,CAC1B,UAAW,EAAM,SAAS,CAC1B,OAAQ,EAAM,MAAM,CACpB,WAAY,EACZ,YAAa,GACb,kBAAmB,KAEb,EAEF,EAAM,aAFa,CAEC,CAAC,OAAO,CAAC,IAC3B,GAAkB,IAChB,IAAM,EAAS,IAAI,IAAI,GAEvB,OADA,EAAO,MAAM,CAAC,GACP,CACT,EACF,GAGA,EAAM,cAAc,CAAC,OAAO,CAAC,IAC3B,GAAkB,GAAQ,IAAI,IAAI,GAAM,GAAG,CAAC,GAC9C,EAEJ,EACA,gBAAiB,IAAM,cA/VR,EA+V8B,EAAM,KA/VnB,EA+V0B,MA9VxE,EADgE,CACtC,SAAE,EAAS,SA8VqC,EAAM,QAAQ,CA9VzC,UA8V2C,EAAM,SA9VvC,AA8VgD,GA7VzG,IAAmB,KA8VL,SAAU,IAAM,GAAa,EAAM,cAAc,CAAC,EAAE,EACpD,eAAgB,GAChB,OAAQ,IAAM,kBAluBD,EAkuBqB,EAAM,QAAQ,MAjuB9D,GAAqB,UAAE,EAAU,OAAA,CADY,EAkuBmB,EAAM,OAAO,CAjuBnC,SAAA,CADoB,EAkuBiB,EAAM,SAAS,CAAC,EAAE,EAAE,WAAa,CAjuB5D,GACpD,IAAsB,GACtB,GAAmB,EAAU,EAAS,KAguBxB,gBAAiB,IAAM,aAzS4I,SAA7I,EAyS8B,EAAM,OAAO,CAzS1B,EAyS4B,EAAM,QAAQ,CAzSxB,EAyS0B,EAAM,OAAO,CAzStB,EAySwB,EAAM,SAAS,GAAE,EAAM,cAAc,MAxSrJ,GAAyB,SACvB,WACA,UACA,EACA,UAAW,EAAU,GAAG,CAAC,IAAK,AAAC,CAAE,UAAW,EAAE,SAAS,CAAE,YAAa,EAAE,WAAW,CAAC,CAAC,iBACrF,CACF,GACA,IAA0B,KAkSZ,gBAAiB,IAjCZ,EAAM,OAAO,CAoCxB,UAOR,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,OAAQ,EACR,QAAS,IAAM,EAAmB,IAClC,UAAW,EACX,gBAjqBwB,AAAC,CAiqBR,GAhqBnB,EAAW,GACX,KAEA,WAAW,KACT,EAAW,GACb,EAAG,IACL,EA2pBI,cAzpBsB,AAAC,CAypBR,GAxpBjB,EAAS,GAET,WAAW,KACT,EAAS,GACX,EAAG,IACL,EAopBI,cAAe,IAAM,GAAe,GACpC,YAAa,IAAM,GAAe,GAClC,iBAAkB,AAAC,GAAa,EAAkB,KAIpD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAsB,CAAA,CACrB,OAAQ,GACR,QAAS,IAAM,IAAqB,GACpC,UAAW,GACX,UAC6B,CADlB,CAAC,KACwB,MAAM,CAAC,IAAe,MAAM,CAAC,GAC7D,EAAM,cAAc,CAAC,IAAI,CAAC,GAAM,GAAe,GAAG,CAAC,KACnD,MAAM,CAGV,SAAS,aACT,WAAY,EAAc,MAAM,CAAG,GAAuB,QAAlB,IAA2C,KAAhB,GACnE,eAAgB,CAAC,KAEf,IAAM,EAAiB,OAAO,MAAM,CAAC,IAAe,MAAM,CAAC,GACzD,EAAM,cAAc,CAAC,IAAI,CAAC,GAAM,GAAe,GAAG,CAAC,KAGrD,GAAI,AAA0B,GAAG,GAAd,IAAqB,EAAf,CAUzB,OAPkB,AAOX,EAP0B,GAAG,CAAC,IACnC,IAAM,EAAa,EAAM,SAAS,CAC/B,GAAG,CAAC,GAAK,EAAE,iBAAiB,EAAI,EAAE,SAAS,CAAC,QAAQ,IACpD,IAAI,CAAC,MACR,MAAO,CAAA,EAAG,EAAM,QAAQ,CAAC,EAAE,EAAE,EAAM,OAAO,CAAC,GAAG,EAAE,EAAA,CAClD,AAD8D,GAG7C,IAAI,CAAC,OACxB,CAAC,KAIF,IACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,OAAQ,GACR,QAAS,KACP,IAAmB,GACnB,GAA0B,KAC5B,EACA,SAAU,GACV,QAAS,GAAuB,OAAO,CACvC,SAAU,GAAuB,QAAQ,CACzC,iBAAkB,GAAuB,SAAS,CAClD,aAAc,IAKlB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,OAAQ,GACR,QAAS,IAAM,IAAwB,GACvC,WAAY,IAId,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAsB,CAAA,CACrB,OAAQ,GACR,QAAS,KACP,IAA2B,GAC3B,GAAiB,MACjB,GAA0B,GAC5B,EACA,UAAW,GACX,UAAW,EACX,SAAS,aACT,eAAgB,GAAyB,CAAC,yBAAyB,EAAE,GAAA,CAAwB,MAAG,IAIjG,IAAsB,IACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0FACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wGACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,gEAAsD,gBACpD,GAAkB,OAAO,CAAC,cAE1C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,GACT,UAAU,sEAEV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,qBACjE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,gCAM3E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2DACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gEAAuD,cACrE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iEAAyD,GAAkB,QAAQ,MAElG,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oHACb,GAAkB,OAAO,QAMhC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,2EAAkE,eACnF,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAO,GACP,SAAU,AAAC,GAAM,GAAa,EAAE,MAAM,CAAC,KAAK,EAC5C,YAAY,YACZ,UAAU,0MAGd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,2EAAkE,eACnF,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAO,GACP,SAAU,AAAC,GAAM,GAAa,EAAE,MAAM,CAAC,KAAK,EAC5C,YAAY,YACZ,UAAU,0MAGd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,2EAAkE,eACnF,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAO,GACP,SAAU,AAAC,GAAM,GAAa,EAAE,MAAM,CAAC,KAAK,EAC5C,YAAY,aACZ,UAAU,6MAMhB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCACZ,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAA,KAWT,EATL,CAAC,AAEkB,GAAc,MAAM,CAAC,IACxC,IAAM,EAAW,CAAC,IAAa,EAAI,GAAG,CAAC,WAAW,GAAG,QAAQ,CAAC,GAAU,WAAW,IAC7E,EAAW,CAAC,IAAa,EAAI,GAAG,CAAC,WAAW,GAAG,QAAQ,CAAC,GAAU,WAAW,IAC7E,EAAW,CAAC,IAAa,EAAI,GAAG,CAAC,WAAW,GAAG,QAAQ,CAAC,GAAU,WAAW,IACnF,OAAO,GAAY,GAAY,CACjC,IAEoB,MAAM,CAAG,EAC7B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,mCACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,qDACf,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2JAAkJ,QAGhK,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2JAAkJ,QAGhK,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2JAAkJ,QAGhK,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2JAAkJ,cAKpK,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,mFACd,EAAa,GAAG,CAAC,CAAC,EAAK,IACtB,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAe,UAAU,sEACxB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0GACX,EAAI,GAAG,GAEV,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0GACX,EAAI,GAAG,GAEV,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0GACX,EAAI,GAAG,GAEV,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,yHAA+G,IACzH,EAAI,IAAI,MAXL,SAiBf,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qEAA2D,WAC/D,EAAa,MAAM,CAAC,OAAK,GAAc,MAAM,CAAC,iBAI3D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,yCACpB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,4CAAoC,IAAa,IAAa,GAAY,4BAA8B,+CAO3H,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oFACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,GACT,UAAU,yJACX,mBAUV,IACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,KAAM,GACN,QAAS,KACP,GAA0B,IAC1B,GAAyB,KAC3B,EACA,UAAW,GACX,QAAS,GAAsB,OAAO,CACtC,SAAU,GAAsB,QAAQ,CACxC,QAAS,GAAsB,OAAO,CACtC,UAAW,GAAsB,SAAS,GAK9C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,oBAAoB,CAAA,CACnB,QAAS,CACP,CACE,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,uBACxB,MAAO,EAAE,mBAAmB,CAAC,eAAe,CAC5C,QAAS,IAAM,GAAmB,GAClC,MAAO,+CACT,EACD,CACD,aAAa,MAInB","ignoreList":[6,7,8,9]}