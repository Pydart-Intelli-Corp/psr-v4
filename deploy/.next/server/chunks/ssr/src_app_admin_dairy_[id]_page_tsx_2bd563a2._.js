module.exports=[572692,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(346271),f=a.i(262036),g=a.i(835475),h=a.i(550194),i=a.i(400210),j=a.i(313949),k=a.i(124987),l=a.i(963519),m=a.i(992258),n=a.i(546842),o=a.i(941675),p=a.i(290669),q=a.i(781560),r=a.i(267900),s=a.i(724669),t=a.i(292e3),u=a.i(633508),v=a.i(669520),w=a.i(468976),x=a.i(177156),y=a.i(141379),z=a.i(93518),A=a.i(641710),B=a.i(660246);a.i(16707);var C=a.i(529784),D=a.i(883733),E=a.i(195279),F=a.i(960020),G=a.i(651963),H=a.i(851068),I=a.i(274643),J=a.i(551551),K=a.i(46532),L=a.i(346158),M=a.i(367044);function N(){let a=(0,d.useRouter)(),N=(0,d.useParams)().id,{user:O}=(0,g.useUser)(),{t:P}=(0,h.useLanguage)(),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)(!0),[U,V]=(0,c.useState)(""),[W,X]=(0,c.useState)(""),[Y,Z]=(0,c.useState)("overview"),[$,_]=(0,c.useState)(!1),[aa,ab]=(0,c.useState)(!1),[ac,ad]=(0,c.useState)({}),[ae,af]=(0,c.useState)({name:"",location:"",contactPerson:"",phone:"",email:"",password:"",status:"active"}),[ag,ah]=(0,c.useState)(!1),[ai,aj]=(0,c.useState)(!1),[ak,al]=(0,c.useState)(!1),[am,an]=(0,c.useState)([]),[ao,ap]=(0,c.useState)([]),[aq,ar]=(0,c.useState)(!1),[as,at]=(0,c.useState)(!1),[au,av]=(0,c.useState)(!1),[aw,ax]=(0,c.useState)(!1),[ay,az]=(0,c.useState)(!1),[aA,aB]=(0,c.useState)(!1),[aC,aD]=(0,c.useState)(""),[aE,aF]=(0,c.useState)({name:"",dairyId:"",password:"",location:"",contactPerson:"",phone:"",email:"",capacity:"",status:"active",monthlyTarget:""}),aG=(0,c.useCallback)(async()=>{try{let a=localStorage.getItem("authToken");if(!a)return;let b=await fetch("/api/user/dairy",{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(b.ok){let a=await b.json();ap(a.data||[])}}catch(a){console.error("Error fetching dairies:",a)}},[]),aH=async a=>{try{let b=localStorage.getItem("authToken"),c=await fetch("/api/user/bmc",{headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});if(c.ok)return((await c.json()).data||[]).filter(b=>b.dairyFarmId===a).map(a=>({id:a.id,name:a.name,bmcId:a.bmcId}));return[]}catch(a){return console.error("Error fetching BMCs:",a),[]}},aI=(0,c.useCallback)(async()=>{try{T(!0);let b=localStorage.getItem("authToken");if(!b)return void a.push("/login");let c=await fetch(`/api/user/dairy/${N}`,{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to fetch dairy details");let d=await c.json();if(!d.data){V("Dairy not found"),R(null);return}R(d.data)}catch(a){console.error("Error fetching dairy details:",a),V("Failed to load dairy details")}finally{T(!1)}},[N,a]),aJ=async()=>{if(!Q?.dairy)return;let a=await aH(Q.dairy.id);an(a),a.length>0?(await aG(),al(!0)):(window.selectedDairyIdForDelete=Q.dairy.id,aj(!0))},aK=async(b,c,d)=>{if(Q?.dairy)try{let e=localStorage.getItem("authToken"),f=await fetch("/api/user/dairy",{method:"DELETE",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({id:Q.dairy.id,newDairyId:b,deleteAll:c,otp:d})}),g=await f.json();f.ok?(c?X("Dairy and all related data deleted successfully!"):X(`${g.data.transferredBMCs} BMC(s) transferred and dairy deleted successfully!`),al(!1),setTimeout(()=>{a.push("/admin/dairy")},2e3)):V(g.message||"Failed to delete dairy")}catch(a){console.error("Error deleting dairy:",a),V("Failed to delete dairy")}},aL=async b=>{if(Q?.dairy)try{let c=localStorage.getItem("authToken"),d={id:Q.dairy.id};b&&(d.otp=b);let e=await fetch("/api/user/dairy",{method:"DELETE",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify(d)});if(e.ok)X("Dairy deleted successfully!"),aj(!1),setTimeout(()=>{a.push("/admin/dairy")},2e3);else{let a=await e.json();V(a.message||"Failed to delete dairy")}}catch(a){console.error("Error deleting dairy:",a),V("Failed to delete dairy")}},aM=async a=>{if(a.preventDefault(),Q?.dairy){ar(!0),V("");try{let a=localStorage.getItem("authToken"),b={id:Q.dairy.id,name:aE.name,location:aE.location,contactPerson:aE.contactPerson,phone:aE.phone,email:aE.email,capacity:aE.capacity?parseInt(aE.capacity):void 0,status:aE.status,monthlyTarget:aE.monthlyTarget?parseInt(aE.monthlyTarget):void 0};aE.password&&(b.password=aE.password);let c=await fetch("/api/user/dairy",{method:"PUT",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(b)});if(c.ok)X("Dairy updated successfully!"),ah(!1),await aI(),setTimeout(()=>X(""),3e3);else{let a=await c.json();V(a.error||"Failed to update dairy")}}catch(a){console.error("Error updating dairy:",a),V("Failed to update dairy")}finally{ar(!1)}}},aN=(a,b)=>{aF(c=>({...c,[a]:b}))},aO=a=>{switch(a){case"active":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 border-green-200 dark:border-green-800";case"inactive":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400 border-red-200 dark:border-red-800";case"maintenance":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400 border-yellow-200 dark:border-yellow-800";default:return"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 border-gray-200 dark:border-gray-600"}};if((0,c.useEffect)(()=>{aI()},[N,aI]),(0,c.useEffect)(()=>{(async()=>{if($&&Q?.dairy&&!aC)try{let a=localStorage.getItem("authToken"),b=await fetch(`/api/user/dairy/password?id=${Q.dairy.id}`,{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json(),c="";"object"==typeof a.data&&a.data.password?c=String(a.data.password):a.data?c=String(a.data):a.password&&(c=String(a.password)),aD(c),af(a=>({...a,password:c}))}}catch(a){console.error("Error fetching password:",a)}})()},[$,Q,aC]),(0,c.useEffect)(()=>{O||a.push("/login")},[O,a]),!O)return null;if(S)return(0,b.jsx)(D.LoadingSpinner,{});if(U||!Q)return(0,b.jsx)(F.EmptyState,{icon:(0,b.jsx)(t.AlertCircle,{className:"w-10 h-10"}),title:`${P.dairyManagement.dairyDetails} ${P.common.noDataAvailable}`,message:U||P.dairyManagement.noDairiesFound,actionText:`${P.common.back} to ${P.nav.dairyManagement}`,onAction:()=>a.push("/admin/dairy"),showAction:!0});let aP=Q.dairy,aQ=Q.analytics;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 lg:pb-8",children:[(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("div",{className:"px-4 sm:px-6 py-3 sm:py-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-3 sm:gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("button",{onClick:()=>a.push("/admin/dairy"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center",children:(0,b.jsx)(i.ArrowLeft,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[(0,b.jsx)("div",{className:"p-2 sm:p-3 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg sm:rounded-xl flex-shrink-0",children:(0,b.jsx)(j.Milk,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 dark:text-gray-100 truncate",children:aP.name}),(0,b.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 truncate",children:["Dairy ID: ",aP.dairyId]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsx)("span",{className:`px-3 py-1 text-xs sm:text-sm font-medium rounded-full border ${aO(aP.status)}`,children:aP.status}),(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,b.jsxs)("button",{onClick:aI,className:"flex items-center px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm text-blue-600 dark:text-blue-500 border border-blue-600 dark:border-blue-500 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors min-h-[44px]",children:[(0,b.jsx)(v.RefreshCw,{className:"w-4 h-4 sm:mr-2"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:P.common.refresh||"Refresh"})]}),(0,b.jsxs)("button",{onClick:aJ,className:"flex items-center px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm text-red-600 dark:text-red-500 border border-red-600 dark:border-red-500 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors min-h-[44px]",children:[(0,b.jsx)(q.Trash2,{className:"w-4 h-4 sm:mr-2"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:P.common.delete})]})]})]})]})}),(0,b.jsx)("div",{className:"px-4 sm:px-6 overflow-x-auto scrollbar-hide",children:(0,b.jsx)("div",{className:"flex gap-1 sm:gap-2 border-b border-gray-200 dark:border-gray-700 min-w-max sm:min-w-0",children:[{id:"overview",label:P.dashboard.overview,icon:r.Building2},{id:"details",label:"Details",icon:p.Activity}].map(a=>(0,b.jsxs)("button",{onClick:()=>Z(a.id),className:`flex items-center gap-2 px-3 sm:px-4 py-2.5 sm:py-3 font-medium transition-all relative whitespace-nowrap text-sm sm:text-base ${Y===a.id?"text-green-600 dark:text-green-500":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[(0,b.jsx)(a.icon,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,b.jsx)("span",{className:"text-xs sm:text-sm md:text-base",children:a.label}),Y===a.id&&(0,b.jsx)(e.motion.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-green-500 to-emerald-500",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]},a.id))})})]}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg sm:rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:(0,b.jsx)("div",{className:"p-4 sm:p-6",children:(0,b.jsxs)(f.AnimatePresence,{mode:"wait",children:["overview"===Y&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"space-y-4 sm:space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)(j.Milk,{className:"w-8 h-8 text-white/80"}),(0,b.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-2xl font-bold text-white",children:aQ.totalCollections||0})})]}),(0,b.jsx)("p",{className:"text-white/90 font-medium text-sm",children:"Collections"}),(0,b.jsx)("p",{className:"text-white/70 text-xs mt-1",children:"Last 30 days"})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)(s.TrendingUp,{className:"w-8 h-8 text-white/80"}),(0,b.jsx)("div",{className:"flex-1 text-right",children:(0,b.jsxs)("span",{className:"text-xl sm:text-2xl font-bold text-white block",children:[Number(aQ.totalQuantity||0).toFixed(0)," L"]})})]}),(0,b.jsx)("p",{className:"text-white/90 font-medium text-sm",children:"Volume"}),(0,b.jsx)("p",{className:"text-white/70 text-xs mt-1",children:"Last 30 days"})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)(s.TrendingUp,{className:"w-8 h-8 text-white/80"}),(0,b.jsx)("div",{className:"flex-1 text-right",children:(0,b.jsxs)("span",{className:"text-lg sm:text-xl font-bold text-white block",children:["₹",Number(aQ.totalRevenue||0).toLocaleString()]})})]}),(0,b.jsx)("p",{className:"text-white/90 font-medium text-sm",children:"Total Revenue"}),(0,b.jsx)("p",{className:"text-white/70 text-xs mt-1",children:"Last 30 days"})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)(z.Award,{className:"w-8 h-8 text-white/80"}),(0,b.jsx)("div",{className:"flex-1 text-right",children:(0,b.jsxs)("span",{className:"text-xl sm:text-2xl font-bold text-white block",children:["₹",Number(aQ.avgRate||0).toFixed(2),"/L"]})})]}),(0,b.jsx)("p",{className:"text-white/90 font-medium text-sm",children:"Avg Rate"}),(0,b.jsx)("p",{className:"text-white/70 text-xs mt-1",children:"Last 30 days"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{onClick:()=>(aQ.totalBmcs||0)>0&&at(!0),className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-4 transition-all ${(aQ.totalBmcs||0)>0?"cursor-pointer hover:shadow-md hover:border-purple-300 dark:hover:border-purple-600":"cursor-default"}`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:(0,b.jsx)(r.Building2,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),(0,b.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"BMCs"})]}),(0,b.jsx)("span",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:aQ.totalBmcs||0})]}),(aQ.totalBmcs||0)>0&&(0,b.jsx)("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Click to view all BMCs →"})]}),(0,b.jsxs)("div",{onClick:()=>(aQ.totalSocieties||0)>0&&av(!0),className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-4 transition-all ${(aQ.totalSocieties||0)>0?"cursor-pointer hover:shadow-md hover:border-pink-300 dark:hover:border-pink-600":"cursor-default"}`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-2 bg-pink-100 dark:bg-pink-900/30 rounded-lg",children:(0,b.jsx)(r.Building2,{className:"w-5 h-5 text-pink-600 dark:text-pink-400"})}),(0,b.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Societies"})]}),(0,b.jsx)("span",{className:"text-2xl font-bold text-pink-600 dark:text-pink-400",children:aQ.totalSocieties||0})]}),(aQ.totalSocieties||0)>0&&(0,b.jsx)("p",{className:"text-xs text-pink-600 dark:text-pink-400",children:"Click to view all societies →"})]}),(0,b.jsxs)("div",{onClick:()=>(aQ.totalMachines||0)>0&&ax(!0),className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-4 transition-all ${(aQ.totalMachines||0)>0?"cursor-pointer hover:shadow-md hover:border-cyan-300 dark:hover:border-cyan-600":"cursor-default"}`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-2 bg-cyan-100 dark:bg-cyan-900/30 rounded-lg",children:(0,b.jsx)(p.Activity,{className:"w-5 h-5 text-cyan-600 dark:text-cyan-400"})}),(0,b.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Machines"})]}),(0,b.jsx)("span",{className:"text-2xl font-bold text-cyan-600 dark:text-cyan-400",children:aQ.totalMachines||0})]}),(aQ.totalMachines||0)>0&&(0,b.jsx)("p",{className:"text-xs text-cyan-600 dark:text-cyan-400",children:"Click to view all machines →"})]}),(0,b.jsxs)("div",{onClick:()=>(aQ.totalFarmers||0)>0&&az(!0),className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-4 transition-all ${(aQ.totalFarmers||0)>0?"cursor-pointer hover:shadow-md hover:border-cyan-300 dark:hover:border-cyan-600":"cursor-default"}`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-2 bg-cyan-100 dark:bg-cyan-900/30 rounded-lg",children:(0,b.jsx)(B.Users,{className:"w-5 h-5 text-cyan-600 dark:text-cyan-400"})}),(0,b.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Farmers"})]}),(0,b.jsx)("span",{className:"text-2xl font-bold text-cyan-600 dark:text-cyan-400",children:aQ.totalFarmers||0})]}),(aQ.totalFarmers||0)>0&&(0,b.jsx)("p",{className:"text-xs text-cyan-600 dark:text-cyan-400",children:"Click to view all farmers →"})]})]}),Q?.topPerformers?.societies&&Q.topPerformers.societies.length>0&&(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-4 sm:p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[(0,b.jsx)(z.Award,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),"Society Performance (Last 30 Days)"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Q.topPerformers.societies[0]&&(0,b.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[(0,b.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-2 bg-green-500 rounded-lg",children:(0,b.jsx)(z.Award,{className:"w-4 h-4 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-green-700 dark:text-green-400",children:"Best Society"}),(0,b.jsx)("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:Q.topPerformers.societies[0].name})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Collections"}),(0,b.jsx)("p",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:Q.topPerformers.societies[0].collections})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Volume"}),(0,b.jsxs)("p",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:[Number(Q.topPerformers.societies[0].totalQuantity||0).toLocaleString(),"L"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Avg Fat"}),(0,b.jsxs)("p",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:[Number(Q.topPerformers.societies[0].avgFat||0).toFixed(2),"%"]})]})]})]}),Q.topPerformers.societies.length>1&&Q.topPerformers.societies[Q.topPerformers.societies.length-1]&&(0,b.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 rounded-lg p-4 border border-red-200 dark:border-red-800",children:[(0,b.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-2 bg-red-500 rounded-lg",children:(0,b.jsx)(s.TrendingUp,{className:"w-4 h-4 text-white rotate-180"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-red-700 dark:text-red-400",children:"Needs Attention"}),(0,b.jsx)("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:Q.topPerformers.societies[Q.topPerformers.societies.length-1].name})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Collections"}),(0,b.jsx)("p",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:Q.topPerformers.societies[Q.topPerformers.societies.length-1].collections})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Volume"}),(0,b.jsxs)("p",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:[Number(Q.topPerformers.societies[Q.topPerformers.societies.length-1].totalQuantity||0).toLocaleString(),"L"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Avg Fat"}),(0,b.jsxs)("p",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:[Number(Q.topPerformers.societies[Q.topPerformers.societies.length-1].avgFat||0).toFixed(2),"%"]})]})]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-4 sm:p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[(0,b.jsx)(j.Milk,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),"Dairy Information"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)(j.Milk,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Dairy ID"}),(0,b.jsx)("p",{className:"font-medium text-sm text-gray-900 dark:text-white font-mono break-words",children:aP.dairyId})]})]}),aP.capacity&&(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)(p.Activity,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Capacity"}),(0,b.jsxs)("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:[aP.capacity.toLocaleString()," L"]})]})]}),aP.monthlyTarget&&aP.monthlyTarget>0&&(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)(s.TrendingUp,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Monthly Target"}),(0,b.jsxs)("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:[aP.monthlyTarget.toLocaleString()," L"]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[aP.location&&(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)(k.MapPin,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Location"}),(0,b.jsx)("p",{className:"font-medium text-sm text-gray-900 dark:text-white break-words",children:aP.location})]})]}),aP.contactPerson&&(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)(n.User,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Contact Person"}),(0,b.jsx)("p",{className:"font-medium text-sm text-gray-900 dark:text-white break-words",children:aP.contactPerson})]})]}),aP.phone&&(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)(l.Phone,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Contact Phone"}),(0,b.jsx)("p",{className:"font-medium text-sm text-gray-900 dark:text-white break-words",children:aP.phone})]})]}),aP.email&&(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)(m.Mail,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Email"}),(0,b.jsx)("p",{className:"font-medium text-sm text-gray-900 dark:text-white break-words",children:aP.email})]})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-4 sm:p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[(0,b.jsx)(z.Award,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),"Quality Metrics (Last 30 Days)"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[(0,b.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg",children:(0,b.jsx)(x.Eye,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Avg Fat %"}),(0,b.jsxs)("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[Number(aQ.avgFat||0).toFixed(2),"%"]})]})]})}),(0,b.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:(0,b.jsx)(z.Award,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Avg SNF %"}),(0,b.jsxs)("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[Number(aQ.avgSnf||0).toFixed(2),"%"]})]})]})})]})]})]}),(0,b.jsx)("div",{className:"space-y-4 sm:space-y-6",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-4 sm:p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[(0,b.jsx)(A.Clock,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),"Timeline"]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)(o.Calendar,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Created At"}),(0,b.jsx)("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:new Date(aP.createdAt).toLocaleString()})]})]}),aP.lastActivity&&(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)(p.Activity,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Last Activity"}),(0,b.jsx)("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:new Date(aP.lastActivity).toLocaleString()})]})]})]})]})})]})]},"overview"),"details"===Y&&(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-6",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Dairy Details"}),(0,b.jsx)("div",{className:"flex gap-2",children:$?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{type:"button",onClick:()=>{_(!1),aB(!1),aD(""),af({name:Q.dairy.name,location:Q.dairy.location||"",contactPerson:Q.dairy.contactPerson||"",phone:Q.dairy.phone||"",email:Q.dairy.email||"",password:"",status:Q.dairy.status})},className:"flex items-center gap-2 px-4 py-2 bg-gray-600 dark:bg-gray-700 text-white rounded-lg hover:bg-gray-700 dark:hover:bg-gray-600 transition-colors",children:[(0,b.jsx)(u.X,{className:"w-4 h-4"}),"Cancel"]}),(0,b.jsxs)("button",{type:"button",onClick:async()=>{try{ab(!0),V("");let b=localStorage.getItem("authToken");if(!b)return void a.push("/login");let c={id:Q.dairy.id,name:ae.name,location:ae.location,contactPerson:ae.contactPerson,phone:ae.phone,email:ae.email,status:ae.status};ae.password&&ae.password!==aC&&(c.password=ae.password);let d=await fetch("/api/user/dairy",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify(c)}),e=await d.json();d.ok?(X("Dairy details updated successfully!"),_(!1),aI(),setTimeout(()=>X(""),3e3)):(V(e.message||"Failed to update dairy details"),setTimeout(()=>V(""),5e3))}catch(a){console.error("Error updating dairy:",a),V("Failed to update dairy details. Please try again."),setTimeout(()=>V(""),5e3)}finally{ab(!1)}},disabled:aa,className:"flex items-center gap-2 px-4 py-2 bg-green-600 dark:bg-green-700 text-white rounded-lg hover:bg-green-700 dark:hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)(w.Edit3,{className:"w-4 h-4"}),aa?"Saving...":"Save Changes"]})]}):(0,b.jsxs)("button",{type:"button",onClick:()=>{af({name:Q.dairy.name,location:Q.dairy.location||"",contactPerson:Q.dairy.contactPerson||"",phone:Q.dairy.phone||"",email:Q.dairy.email||"",password:"",status:Q.dairy.status}),aB(!1),aD(""),_(!0)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 dark:bg-green-700 text-white rounded-lg hover:bg-green-700 dark:hover:bg-green-600 transition-colors",children:[(0,b.jsx)(w.Edit3,{className:"w-4 h-4"}),"Edit Details"]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[$?(0,b.jsx)(G.FormInput,{label:"Dairy Name",type:"text",value:ae.name,onChange:a=>af({...ae,name:a}),placeholder:"Enter dairy name",required:!0}):(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Dairy Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,b.jsx)("p",{className:"text-gray-900 dark:text-white",children:Q.dairy.name})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dairy ID"}),(0,b.jsx)("div",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400 font-mono",children:Q.dairy.dairyId})})]}),$?(0,b.jsx)(G.FormInput,{label:"Contact Person",type:"text",value:ae.contactPerson,onChange:a=>af({...ae,contactPerson:a}),placeholder:"Enter contact person"}):(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Contact Person"}),(0,b.jsx)("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,b.jsx)("p",{className:"text-gray-900 dark:text-white",children:Q.dairy.contactPerson||"N/A"})})]}),$?(0,b.jsx)(G.FormInput,{label:"Location",type:"text",value:ae.location,onChange:a=>af({...ae,location:a}),placeholder:"Enter location"}):(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location"}),(0,b.jsx)("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,b.jsx)("p",{className:"text-gray-900 dark:text-white",children:Q.dairy.location||"N/A"})})]}),$?(0,b.jsx)(G.FormInput,{label:"Phone Number",type:"tel",value:ae.phone,onChange:a=>{let b=(0,L.formatPhoneInput)(a);af({...ae,phone:b}),ac.phone&&ad({...ac,phone:void 0})},onBlur:()=>{if(ae.phone){let a=(0,L.validatePhoneOnBlur)(ae.phone);ad({...ac,phone:a||void 0})}},maxLength:10,placeholder:"Enter 10-digit phone number",error:ac.phone}):(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),(0,b.jsx)("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,b.jsx)("p",{className:"text-gray-900 dark:text-white",children:Q.dairy.phone||"N/A"})})]}),$?(0,b.jsx)(G.FormInput,{label:"Email",type:"email",value:ae.email,onChange:a=>{af({...ae,email:a}),ac.email&&ad({...ac,email:void 0})},onBlur:()=>{if(ae.email){let a=(0,M.validateEmailQuick)(ae.email);ad({...ac,email:a||void 0})}},placeholder:"Enter email",error:ac.email}):(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),(0,b.jsx)("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,b.jsx)("p",{className:"text-gray-900 dark:text-white",children:Q.dairy.email||"N/A"})})]}),$?(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:aA?"text":"password",value:ae.password||"",onChange:a=>af({...ae,password:a.target.value}),placeholder:"Enter new password (leave blank to keep current)",className:"form-input-custom w-full px-3 sm:px-4 py-2 sm:py-2.5 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-200 focus:outline-none"}),(0,b.jsx)("button",{type:"button",onClick:()=>aB(!aA),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",title:aA?"Hide password":"Show password",children:aA?(0,b.jsx)(y.EyeOff,{className:"w-5 h-5"}):(0,b.jsx)(x.Eye,{className:"w-5 h-5"})})]}),(0,b.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Leave blank to keep current password"})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),(0,b.jsxs)("div",{className:"relative px-4 py-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600 flex items-center justify-between",children:[(0,b.jsx)("p",{className:"text-gray-900 dark:text-white font-mono",children:aA&&aC?aC:"••••••••"}),(0,b.jsx)("button",{type:"button",onClick:async()=>{if(aA||aC)aB(!aA);else try{let a=localStorage.getItem("authToken"),b=await fetch(`/api/user/dairy/password?id=${Q.dairy.id}`,{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json(),c="";"object"==typeof a.data&&a.data.password?c=String(a.data.password):a.data?c=String(a.data):a.password&&(c=String(a.password)),aD(c),aB(!0)}}catch(a){console.error("Error fetching password:",a)}},className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 flex-shrink-0 ml-2",children:aA?(0,b.jsx)(y.EyeOff,{className:"w-5 h-5"}):(0,b.jsx)(x.Eye,{className:"w-5 h-5"})})]})]}),$?(0,b.jsx)(H.FormSelect,{label:"Status",value:ae.status,onChange:a=>af({...ae,status:a}),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"maintenance",label:"Maintenance"}],placeholder:"Select status"}):(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),(0,b.jsx)("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,b.jsx)("span",{className:`inline-flex px-3 py-1 text-xs font-medium rounded-full ${aO(Q.dairy.status)}`,children:Q.dairy.status})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Capacity (Liters)"}),(0,b.jsx)("div",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,b.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[Q.dairy.capacity?.toLocaleString()||"N/A"," L"]})})]})]}),(0,b.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("h4",{className:"text-base font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Additional Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Created"}),(0,b.jsx)("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:new Date(Q.dairy.createdAt).toLocaleDateString()})]}),Q.dairy.monthlyTarget&&(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monthly Target"}),(0,b.jsxs)("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:[Q.dairy.monthlyTarget.toLocaleString()," L"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total BMCs"}),(0,b.jsx)("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:Q.bmcs.length})]})]})]})]})})},"details")]})})})]}),(0,b.jsx)(E.StatusMessage,{success:W,error:U}),(0,b.jsx)(f.AnimatePresence,{children:ag&&Q&&(0,b.jsx)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-end sm:items-center justify-center z-[9999] p-0 sm:p-4",style:{position:"fixed",top:0,left:0,right:0,bottom:0},onClick:a=>{a.target===a.currentTarget&&(ah(!1),aF({name:"",dairyId:"",password:"",location:"",contactPerson:"",phone:"",email:"",capacity:"",status:"active",monthlyTarget:""}))},children:(0,b.jsxs)(e.motion.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-gray-800 rounded-t-2xl sm:rounded-xl shadow-2xl w-full sm:max-w-lg md:max-w-2xl max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("div",{className:"sm:hidden flex justify-center pt-3 pb-1",children:(0,b.jsx)("div",{className:"w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full"})}),(0,b.jsx)("div",{className:"p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100",children:["Edit ",Q.dairy.name]}),(0,b.jsx)("button",{onClick:()=>{ah(!1),aF({name:"",dairyId:"",password:"",location:"",contactPerson:"",phone:"",email:"",capacity:"",status:"active",monthlyTarget:""})},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors text-gray-600 dark:text-gray-400 touch-target sm:min-h-0 sm:min-w-0",children:(0,b.jsx)(u.X,{className:"w-5 h-5"})})]})}),(0,b.jsxs)("form",{onSubmit:aM,className:"p-4 sm:p-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dairy Name *"}),(0,b.jsx)("input",{type:"text",value:aE.name,onChange:a=>aN("name",a.target.value),className:"psr-input placeholder:text-gray-300 dark:placeholder:text-gray-600 placeholder:opacity-100 !text-gray-900 dark:!text-gray-100",placeholder:"Enter dairy name",autoComplete:"off",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dairy ID"}),(0,b.jsx)("input",{type:"text",value:aE.dairyId,className:"psr-input !bg-gray-100 dark:!bg-gray-700 !text-gray-500 dark:!text-gray-400 cursor-not-allowed",disabled:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password (leave blank to keep current)"}),(0,b.jsx)("input",{type:"password",value:aE.password,onChange:a=>aN("password",a.target.value),className:"psr-input placeholder:text-gray-300 dark:placeholder:text-gray-600 placeholder:opacity-100 !text-gray-900 dark:!text-gray-100",placeholder:"Enter new password",autoComplete:"new-password"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Contact Person"}),(0,b.jsx)("input",{type:"text",value:aE.contactPerson,onChange:a=>aN("contactPerson",a.target.value),className:"psr-input placeholder:text-gray-300 dark:placeholder:text-gray-600 placeholder:opacity-100 !text-gray-900 dark:!text-gray-100",placeholder:"Enter contact person name",autoComplete:"off"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),(0,b.jsx)("input",{type:"tel",value:aE.phone,onChange:a=>aN("phone",a.target.value),className:"psr-input placeholder:text-gray-300 dark:placeholder:text-gray-600 placeholder:opacity-100 !text-gray-900 dark:!text-gray-100",placeholder:"Enter phone number",autoComplete:"off"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),(0,b.jsx)("input",{type:"email",value:aE.email,onChange:a=>aN("email",a.target.value),className:"psr-input placeholder:text-gray-300 dark:placeholder:text-gray-600 placeholder:opacity-100 !text-gray-900 dark:!text-gray-100",placeholder:"Enter email",autoComplete:"off"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location"}),(0,b.jsx)("input",{type:"text",value:aE.location,onChange:a=>aN("location",a.target.value),className:"psr-input placeholder:text-gray-300 dark:placeholder:text-gray-600 placeholder:opacity-100 !text-gray-900 dark:!text-gray-100",placeholder:"Enter location",autoComplete:"off"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Capacity (Liters)"}),(0,b.jsx)("input",{type:"number",value:aE.capacity,onChange:a=>aN("capacity",a.target.value),className:"psr-input placeholder:text-gray-300 dark:placeholder:text-gray-600 placeholder:opacity-100 !text-gray-900 dark:!text-gray-100",placeholder:"Enter capacity",autoComplete:"off"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),(0,b.jsxs)("select",{value:aE.status,onChange:a=>aN("status",a.target.value),className:"psr-input !text-gray-900 dark:!text-gray-100",children:[(0,b.jsx)("option",{value:"active",children:"Active"}),(0,b.jsx)("option",{value:"inactive",children:"Inactive"}),(0,b.jsx)("option",{value:"maintenance",children:"Maintenance"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Monthly Target (Liters)"}),(0,b.jsx)("input",{type:"number",value:aE.monthlyTarget,onChange:a=>aN("monthlyTarget",a.target.value),className:"psr-input placeholder:text-gray-300 dark:placeholder:text-gray-600 placeholder:opacity-100 !text-gray-900 dark:!text-gray-100",placeholder:"Enter monthly target",autoComplete:"off"})]})]}),(0,b.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row gap-3 sm:gap-4 mt-6 sm:mt-8 sm:justify-end",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{ah(!1),aF({name:"",dairyId:"",password:"",location:"",contactPerson:"",phone:"",email:"",capacity:"",status:"active",monthlyTarget:""})},className:"w-full sm:w-auto px-6 py-3 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:aq,className:"w-full sm:w-auto flex items-center justify-center px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 dark:from-green-700 dark:to-emerald-700 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 dark:hover:from-green-600 dark:hover:to-emerald-600 disabled:opacity-50 transition-all duration-200 shadow-lg shadow-green-500/25",children:aq?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(C.FlowerSpinner,{size:16,className:"mr-2"}),"Updating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w.Edit3,{className:"w-4 h-4 mr-2"}),"Update Dairy"]})})]})]})]})})}),(0,b.jsx)(I.default,{isOpen:ai,onClose:()=>aj(!1),onConfirm:aL,dairyName:Q?.dairy.name||"this dairy",bmcCount:Q?.analytics?.totalBmcs||0,societyCount:Q?.analytics?.totalSocieties||0,farmerCount:Q?.analytics?.totalFarmers||0,collectionCount:Q?.analytics?.totalCollections||0,machineCount:Q?.analytics?.totalMachines||0}),(0,b.jsx)(K.default,{isOpen:ak,onClose:()=>{al(!1),an([])},onConfirm:aK,bmcs:am,dairies:ao,dairyName:Q?.dairy.name||"",currentDairyId:Q?.dairy.id||0,adminEmail:O?.email||""}),(0,b.jsx)(J.default,{isOpen:as,onClose:()=>at(!1),onConfirm:()=>{at(!1),Q?.dairy.id&&a.push(`/admin/bmc?dairyFilter=${Q.dairy.id}`)},title:"Navigate to BMCs",message:`You will be redirected to view all BMCs under ${Q?.dairy.name||"this dairy"}. Any unsaved changes will be lost. Continue?`}),(0,b.jsx)(J.default,{isOpen:au,onClose:()=>av(!1),onConfirm:()=>{av(!1),Q?.dairy.id&&a.push(`/admin/society?dairyFilter=${Q.dairy.id}`)},title:"Navigate to Societies",message:`You will be redirected to view all societies under ${Q?.dairy.name||"this dairy"}. Any unsaved changes will be lost. Continue?`}),(0,b.jsx)(J.default,{isOpen:aw,onClose:()=>ax(!1),onConfirm:()=>{ax(!1),Q?.dairy.id&&a.push(`/admin/machine?dairyFilter=${Q.dairy.id}`)},title:"Navigate to Machines",message:`You will be redirected to view all machines under ${Q?.dairy.name||"this dairy"}. Any unsaved changes will be lost. Continue?`}),(0,b.jsx)(J.default,{isOpen:ay,onClose:()=>az(!1),onConfirm:()=>{az(!1),Q?.dairy.id&&a.push(`/admin/farmer?dairyFilter=${Q.dairy.id}`)},title:"Navigate to Farmers",message:`You will be redirected to view all farmers under ${Q?.dairy.name||"this dairy"}. Any unsaved changes will be lost. Continue?`})]})}a.s(["default",()=>N])}];

//# sourceMappingURL=src_app_admin_dairy_%5Bid%5D_page_tsx_2bd563a2._.js.map