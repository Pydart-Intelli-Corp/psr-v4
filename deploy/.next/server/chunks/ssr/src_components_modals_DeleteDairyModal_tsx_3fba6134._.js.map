{"version":3,"sources":["turbopack:///[project]/src/components/modals/DeleteDairyModal.tsx","turbopack:///[project]/src/components/modals/TransferBMCsModal.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useRef, KeyboardEvent, ClipboardEvent } from 'react';\r\nimport { X, AlertTriangle, Trash2, Send, ShieldCheck } from 'lucide-react';\r\n\r\ninterface DeleteDairyModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: (otp: string) => Promise<void>;\r\n  dairyName: string;\r\n  loading?: boolean;\r\n  bmcCount?: number;\r\n  societyCount?: number;\r\n  farmerCount?: number;\r\n  collectionCount?: number;\r\n  machineCount?: number;\r\n}\r\n\r\nexport default function DeleteDairyModal({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  dairyName,\r\n  loading = false,\r\n  bmcCount = 0,\r\n  societyCount = 0,\r\n  farmerCount = 0,\r\n  collectionCount = 0,\r\n  machineCount = 0\r\n}: DeleteDairyModalProps) {\r\n  const [step, setStep] = useState<'confirm' | 'otp'>('confirm');\r\n  const [otp, setOtp] = useState(['', '', '', '', '', '']);\r\n  const [otpLoading, setOtpLoading] = useState(false);\r\n  const [otpError, setOtpError] = useState('');\r\n  const inputRefs = useRef<(HTMLInputElement | null)[]>([]);\r\n\r\n  const handleSendOTP = async () => {\r\n    try {\r\n      setOtpLoading(true);\r\n      setOtpError('');\r\n\r\n      // Get dairy ID from window (stored by parent component)\r\n      const dairyId = (window as Window & { selectedDairyIdForDelete?: number }).selectedDairyIdForDelete;\r\n      if (!dairyId) {\r\n        setOtpError('Dairy ID not found. Please try again.');\r\n        return;\r\n      }\r\n\r\n      const response = await fetch('/api/user/dairy/send-delete-otp', {\r\n        method: 'POST',\r\n        headers: { \r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\r\n        },\r\n        body: JSON.stringify({ dairyId }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to send OTP');\r\n      }\r\n\r\n      setStep('otp');\r\n      // Auto-focus first input\r\n      setTimeout(() => inputRefs.current[0]?.focus(), 100);\r\n    } catch (error: unknown) {\r\n      setOtpError(error instanceof Error ? error.message : 'Failed to send OTP');\r\n    } finally {\r\n      setOtpLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleOtpChange = (index: number, value: string) => {\r\n    if (value.length > 1) {\r\n      value = value[0];\r\n    }\r\n\r\n    if (!/^\\d*$/.test(value)) return;\r\n\r\n    const newOtp = [...otp];\r\n    newOtp[index] = value;\r\n    setOtp(newOtp);\r\n\r\n    // Auto-focus next input\r\n    if (value && index < 5) {\r\n      inputRefs.current[index + 1]?.focus();\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (index: number, e: KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === 'Backspace' && !otp[index] && index > 0) {\r\n      inputRefs.current[index - 1]?.focus();\r\n    }\r\n  };\r\n\r\n  const handlePaste = (e: ClipboardEvent<HTMLInputElement>) => {\r\n    e.preventDefault();\r\n    const pastedData = e.clipboardData.getData('text').slice(0, 6);\r\n    if (!/^\\d+$/.test(pastedData)) return;\r\n\r\n    const newOtp = [...otp];\r\n    pastedData.split('').forEach((char, index) => {\r\n      if (index < 6) newOtp[index] = char;\r\n    });\r\n    setOtp(newOtp);\r\n\r\n    const nextEmptyIndex = newOtp.findIndex(val => !val);\r\n    if (nextEmptyIndex !== -1) {\r\n      inputRefs.current[nextEmptyIndex]?.focus();\r\n    } else {\r\n      inputRefs.current[5]?.focus();\r\n    }\r\n  };\r\n\r\n  const handleVerifyOtp = async () => {\r\n    const otpString = otp.join('');\r\n    if (otpString.length !== 6) {\r\n      setOtpError('Please enter the complete 6-digit OTP');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await onConfirm(otpString);\r\n      handleClose();\r\n    } catch (error: unknown) {\r\n      setOtpError(error instanceof Error ? error.message : 'Invalid or expired OTP');\r\n      setOtp(['', '', '', '', '', '']);\r\n      inputRefs.current[0]?.focus();\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setStep('confirm');\r\n    setOtp(['', '', '', '', '', '']);\r\n    setOtpError('');\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"bg-gradient-to-r from-red-500 to-red-600 px-6 py-4 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2 bg-white/20 rounded-lg\">\r\n              <Trash2 className=\"w-5 h-5 text-white\" />\r\n            </div>\r\n            <h3 className=\"text-lg font-semibold text-white\">\r\n              {step === 'confirm' ? 'Delete Dairy' : 'Verify OTP'}\r\n            </h3>\r\n          </div>\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={loading || otpLoading}\r\n            className=\"text-white/80 hover:text-white transition-colors disabled:opacity-50\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6\">\r\n          {step === 'confirm' ? (\r\n            <>\r\n              {/* Warning Message */}\r\n              <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-4\">\r\n                <div className=\"flex gap-3\">\r\n                  <AlertTriangle className=\"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-red-900 dark:text-red-100 mb-1\">\r\n                      Warning: This action cannot be undone\r\n                    </p>\r\n                    <p className=\"text-sm text-red-700 dark:text-red-300\">\r\n                      Deleting this dairy will permanently remove:\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Deletion Details */}\r\n              <div className=\"space-y-3 mb-6\">\r\n                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4\">\r\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">Dairy Name</p>\r\n                  <p className=\"font-semibold text-gray-900 dark:text-gray-100\">{dairyName}</p>\r\n                </div>\r\n\r\n                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4\">\r\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">The following data will be deleted:</p>\r\n                  <ul className=\"space-y-1 text-sm text-gray-700 dark:text-gray-300\">\r\n                    {bmcCount > 0 && (\r\n                      <li className=\"flex items-center gap-2\">\r\n                        <div className=\"w-1.5 h-1.5 bg-red-500 rounded-full\"></div>\r\n                        {bmcCount} BMC{bmcCount > 1 ? 's' : ''}\r\n                      </li>\r\n                    )}\r\n                    {societyCount > 0 && (\r\n                      <li className=\"flex items-center gap-2\">\r\n                        <div className=\"w-1.5 h-1.5 bg-red-500 rounded-full\"></div>\r\n                        {societyCount} societ{societyCount > 1 ? 'ies' : 'y'}\r\n                      </li>\r\n                    )}\r\n                    {farmerCount > 0 && (\r\n                      <li className=\"flex items-center gap-2\">\r\n                        <div className=\"w-1.5 h-1.5 bg-red-500 rounded-full\"></div>\r\n                        {farmerCount} farmer{farmerCount > 1 ? 's' : ''} and their data\r\n                      </li>\r\n                    )}\r\n                    {collectionCount > 0 && (\r\n                      <li className=\"flex items-center gap-2\">\r\n                        <div className=\"w-1.5 h-1.5 bg-red-500 rounded-full\"></div>\r\n                        {collectionCount} collection record{collectionCount > 1 ? 's' : ''}\r\n                      </li>\r\n                    )}\r\n                    {machineCount > 0 && (\r\n                      <li className=\"flex items-center gap-2\">\r\n                        <div className=\"w-1.5 h-1.5 bg-red-500 rounded-full\"></div>\r\n                        {machineCount} machine{machineCount > 1 ? 's' : ''} and settings\r\n                      </li>\r\n                    )}\r\n                    {bmcCount === 0 && societyCount === 0 && farmerCount === 0 && collectionCount === 0 && machineCount === 0 && (\r\n                      <li className=\"flex items-center gap-2\">\r\n                        <div className=\"w-1.5 h-1.5 bg-red-500 rounded-full\"></div>\r\n                        The dairy details only\r\n                      </li>\r\n                    )}\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Actions */}\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  onClick={handleClose}\r\n                  disabled={loading || otpLoading}\r\n                  className=\"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={handleSendOTP}\r\n                  disabled={loading || otpLoading}\r\n                  className=\"flex-1 px-4 py-2.5 bg-gradient-to-r from-red-500 to-red-600 rounded-lg font-medium text-white hover:from-red-600 hover:to-red-700 transition-all disabled:opacity-50 flex items-center justify-center gap-2\"\r\n                >\r\n                  {otpLoading ? (\r\n                    <>\r\n                      <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\"></div>\r\n                      Sending OTP...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Send className=\"w-4 h-4\" />\r\n                      Send OTP\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              {/* OTP Instructions */}\r\n              <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6\">\r\n                <div className=\"flex gap-3\">\r\n                  <ShieldCheck className=\"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-blue-900 dark:text-blue-100 mb-1\">\r\n                      OTP Sent to Your Email\r\n                    </p>\r\n                    <p className=\"text-sm text-blue-700 dark:text-blue-300\">\r\n                      Please enter the 6-digit OTP to confirm deletion. The code will expire in 10 minutes.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* OTP Input */}\r\n              <div className=\"mb-6\">\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\r\n                  Enter OTP Code\r\n                </label>\r\n                <div className=\"flex gap-2 justify-center\">\r\n                  {otp.map((digit, index) => (\r\n                    <input\r\n                      key={index}\r\n                      ref={el => { inputRefs.current[index] = el; }}\r\n                      type=\"text\"\r\n                      inputMode=\"numeric\"\r\n                      maxLength={1}\r\n                      value={digit}\r\n                      onChange={(e) => handleOtpChange(index, e.target.value)}\r\n                      onKeyDown={(e) => handleKeyDown(index, e)}\r\n                      onPaste={index === 0 ? handlePaste : undefined}\r\n                      className=\"w-12 h-14 text-center text-xl font-bold border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-red-500 focus:ring-2 focus:ring-red-500/20 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                      disabled={loading}\r\n                    />\r\n                  ))}\r\n                </div>\r\n                {otpError && (\r\n                  <p className=\"text-sm text-red-600 dark:text-red-400 mt-2 text-center\">{otpError}</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Actions */}\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  onClick={() => {\r\n                    setStep('confirm');\r\n                    setOtp(['', '', '', '', '', '']);\r\n                    setOtpError('');\r\n                  }}\r\n                  disabled={loading}\r\n                  className=\"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50\"\r\n                >\r\n                  Back\r\n                </button>\r\n                <button\r\n                  onClick={handleVerifyOtp}\r\n                  disabled={loading || otp.some(d => !d)}\r\n                  className=\"flex-1 px-4 py-2.5 bg-gradient-to-r from-red-500 to-red-600 rounded-lg font-medium text-white hover:from-red-600 hover:to-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                >\r\n                  {loading ? (\r\n                    <>\r\n                      <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\"></div>\r\n                      Deleting...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Trash2 className=\"w-4 h-4\" />\r\n                      Delete Dairy\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { AlertTriangle, Building2, X, Mail } from 'lucide-react';\r\n\r\ninterface BMC {\r\n  id: number;\r\n  name: string;\r\n  bmcId: string;\r\n}\r\n\r\ninterface TransferBMCsModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: (newDairyId: number | null, deleteAll: boolean, otp?: string) => void;\r\n  bmcs: BMC[];\r\n  dairies: Array<{ id: number; name: string; }>;\r\n  dairyName: string;\r\n  currentDairyId: number;\r\n  adminEmail?: string;\r\n}\r\n\r\nexport default function TransferBMCsModal({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  bmcs,\r\n  dairies,\r\n  dairyName,\r\n  currentDairyId,\r\n  adminEmail = ''\r\n}: TransferBMCsModalProps) {\r\n  const [selectedDairyId, setSelectedDairyId] = useState<number | null>(null);\r\n  const [deleteAll, setDeleteAll] = useState(false);\r\n  const [otp, setOtp] = useState(['', '', '', '', '', '']);\r\n  const [otpSent, setOtpSent] = useState(false);\r\n  const [otpError, setOtpError] = useState('');\r\n  const [showOtpInput, setShowOtpInput] = useState(false);\r\n  const [isSendingOtp, setIsSendingOtp] = useState(false);\r\n  const otpInputRefs = useRef<(HTMLInputElement | null)[]>([]);\r\n\r\n  // Filter out current dairy from options\r\n  const availableDairies = dairies.filter(d => d.id !== currentDairyId);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      setSelectedDairyId(null);\r\n      setDeleteAll(false);\r\n      setOtp(['', '', '', '', '', '']);\r\n      setOtpSent(false);\r\n      setOtpError('');\r\n      setShowOtpInput(false);\r\n      setIsSendingOtp(false);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // Auto-focus first OTP input when shown\r\n  useEffect(() => {\r\n    if (showOtpInput && otpInputRefs.current[0]) {\r\n      otpInputRefs.current[0]?.focus();\r\n    }\r\n  }, [showOtpInput]);\r\n\r\n  const handleCheckboxChange = (checked: boolean) => {\r\n    setDeleteAll(checked);\r\n    if (checked) {\r\n      setSelectedDairyId(null);\r\n    }\r\n    setOtp(['', '', '', '', '', '']);\r\n    setOtpSent(false);\r\n    setOtpError('');\r\n    setShowOtpInput(false);\r\n    setIsSendingOtp(false);\r\n  };\r\n\r\n  const sendOTP = async () => {\r\n    setIsSendingOtp(true);\r\n    setOtpError('');\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/dairy/send-delete-otp', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ dairyId: currentDairyId })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        setOtpSent(true);\r\n        setShowOtpInput(true);\r\n        setOtpError('');\r\n      } else {\r\n        setOtpError(data.message || 'Failed to send OTP');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error sending OTP:', error);\r\n      setOtpError('Failed to send OTP. Please try again.');\r\n    } finally {\r\n      setIsSendingOtp(false);\r\n    }\r\n  };\r\n\r\n  const handleOtpChange = (index: number, value: string) => {\r\n    // Only allow numbers\r\n    if (value && !/^\\d$/.test(value)) return;\r\n\r\n    const newOtp = [...otp];\r\n    newOtp[index] = value;\r\n    setOtp(newOtp);\r\n    setOtpError('');\r\n\r\n    // Auto-focus next input\r\n    if (value && index < 5) {\r\n      otpInputRefs.current[index + 1]?.focus();\r\n    }\r\n  };\r\n\r\n  const handleOtpKeyDown = (index: number, e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === 'Backspace' && !otp[index] && index > 0) {\r\n      otpInputRefs.current[index - 1]?.focus();\r\n    }\r\n  };\r\n\r\n  const handleOtpPaste = (e: React.ClipboardEvent) => {\r\n    e.preventDefault();\r\n    const pastedData = e.clipboardData.getData('text').slice(0, 6);\r\n    \r\n    if (!/^\\d+$/.test(pastedData)) return;\r\n\r\n    const newOtp = [...otp];\r\n    pastedData.split('').forEach((char, idx) => {\r\n      if (idx < 6) newOtp[idx] = char;\r\n    });\r\n    setOtp(newOtp);\r\n\r\n    // Focus the last filled input or first empty\r\n    const nextIndex = Math.min(pastedData.length, 5);\r\n    otpInputRefs.current[nextIndex]?.focus();\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (deleteAll) {\r\n      if (!otpSent) {\r\n        sendOTP();\r\n      } else {\r\n        const otpCode = otp.join('');\r\n        if (otpCode.length !== 6) {\r\n          setOtpError('Please enter complete 6-digit OTP');\r\n          return;\r\n        }\r\n        onConfirm(null, true, otpCode);\r\n      }\r\n    } else {\r\n      if (!selectedDairyId) return;\r\n      // For transfer, also require OTP\r\n      if (!otpSent) {\r\n        sendOTP();\r\n      } else {\r\n        const otpCode = otp.join('');\r\n        if (otpCode.length !== 6) {\r\n          setOtpError('Please enter complete 6-digit OTP');\r\n          return;\r\n        }\r\n        onConfirm(selectedDairyId, false, otpCode);\r\n      }\r\n    }\r\n  };\r\n\r\n  const isOtpComplete = otp.every(digit => digit !== '');\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999] flex items-center justify-center p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center\">\r\n              <AlertTriangle className=\"w-5 h-5 text-red-600 dark:text-red-400\" />\r\n            </div>\r\n            <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n              Delete Dairy - Action Required\r\n            </h2>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\r\n          >\r\n            <X className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6 space-y-6\">\r\n          {/* Warning Message */}\r\n          <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4\">\r\n            <p className=\"text-sm text-yellow-800 dark:text-yellow-200\">\r\n              <strong>Warning:</strong> This dairy has <strong>{bmcs.length}</strong> BMC{bmcs.length !== 1 ? 's' : ''} under it.\r\n            </p>\r\n            <p className=\"text-sm text-yellow-700 dark:text-yellow-300 mt-2\">\r\n              You must either transfer these BMCs to another dairy or delete everything.\r\n            </p>\r\n          </div>\r\n\r\n          {/* BMCs List */}\r\n          <div className=\"space-y-2\">\r\n            <h3 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300\">\r\n              BMCs under <strong>{dairyName}</strong>:\r\n            </h3>\r\n            <div className=\"max-h-32 overflow-y-auto bg-gray-50 dark:bg-gray-900/50 rounded-lg p-3 space-y-1\">\r\n              {bmcs.map((bmc) => (\r\n                <div key={bmc.id} className=\"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300\">\r\n                  <Building2 className=\"w-4 h-4 text-blue-500\" />\r\n                  <span>{bmc.name} ({bmc.bmcId})</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Delete All Checkbox */}\r\n          <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4\">\r\n            <label className=\"flex items-start gap-3 cursor-pointer group\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={deleteAll}\r\n                onChange={(e) => handleCheckboxChange(e.target.checked)}\r\n                className=\"mt-0.5 w-4 h-4 text-red-600 border-red-300 rounded focus:ring-red-500 focus:ring-2 cursor-pointer\"\r\n              />\r\n              <div className=\"flex-1\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-sm font-semibold text-red-700 dark:text-red-300\">\r\n                    Delete All Data (Permanent)\r\n                  </span>\r\n                  <span className=\"px-2 py-0.5 bg-red-600 text-white text-xs font-bold rounded-full\">\r\n                    DANGER\r\n                  </span>\r\n                </div>\r\n                <p className=\"text-sm text-red-800 dark:text-red-200 mt-1\">\r\n                  Delete all BMCs, societies, farmers, machines, machine statistics, machine corrections, rate charts, collections, sales, dispatches, and section pulse data under this dairy. \r\n                  <strong className=\"block mt-1\">This action cannot be undone!</strong>\r\n                </p>\r\n\r\n                {deleteAll && (\r\n                  <div className=\"mt-3 p-3 bg-red-100 dark:bg-red-900/40 rounded-lg\">\r\n                    <p className=\"text-xs font-bold text-red-900 dark:text-red-100 mb-2\">\r\n                      ⚠️ The following will be permanently deleted:\r\n                    </p>\r\n                    <ul className=\"text-sm text-red-800 dark:text-red-200 mt-2 space-y-1 list-disc list-inside\">\r\n                      <li>{bmcs.length} BMC{bmcs.length !== 1 ? 's' : ''}</li>\r\n                      <li>All societies under these BMCs</li>\r\n                      <li>All farmers under these societies</li>\r\n                      <li>All machines linked to these societies</li>\r\n                      <li>All machine statistics</li>\r\n                      <li>All machine corrections (admin & device saved)</li>\r\n                      <li>All rate charts and rate chart data</li>\r\n                      <li>All milk collection records</li>\r\n                      <li>All milk sales records</li>\r\n                      <li>All milk dispatch records</li>\r\n                      <li>All section pulse tracking data</li>\r\n                      <li>Dairy: <strong>{dairyName}</strong></li>\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </label>\r\n          </div>\r\n\r\n          {/* Transfer Option */}\r\n          {!deleteAll && (\r\n            <div className=\"space-y-3\">\r\n              <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300\">\r\n                Select New Dairy for BMC Transfer:\r\n              </label>\r\n              <select\r\n                value={selectedDairyId || ''}\r\n                onChange={(e) => setSelectedDairyId(Number(e.target.value))}\r\n                className=\"w-full px-4 py-2.5 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"\">-- Select a dairy --</option>\r\n                {availableDairies.map((dairy) => (\r\n                  <option key={dairy.id} value={dairy.id}>\r\n                    {dairy.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n              {availableDairies.length === 0 && (\r\n                <p className=\"text-sm text-orange-600 dark:text-orange-400\">\r\n                  No other dairies available. You must delete all data instead.\r\n                </p>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* OTP Section */}\r\n          {otpSent && (\r\n            <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 space-y-3\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Mail className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\r\n                <p className=\"text-sm font-semibold text-blue-900 dark:text-blue-100\">\r\n                  OTP sent to: {adminEmail}\r\n                </p>\r\n              </div>\r\n              <p className=\"text-sm text-blue-800 dark:text-blue-200\">\r\n                Please enter the 6-digit verification code to confirm {deleteAll ? 'deletion' : 'transfer and deletion'}:\r\n              </p>\r\n              \r\n              {/* OTP Input Boxes */}\r\n              <div className=\"flex gap-2 justify-center\" onPaste={handleOtpPaste}>\r\n                {otp.map((digit, index) => (\r\n                  <input\r\n                    key={index}\r\n                    ref={(el) => { otpInputRefs.current[index] = el; }}\r\n                    type=\"text\"\r\n                    maxLength={1}\r\n                    value={digit}\r\n                    onChange={(e) => handleOtpChange(index, e.target.value)}\r\n                    onKeyDown={(e) => handleOtpKeyDown(index, e)}\r\n                    className=\"w-12 h-12 text-center text-xl font-bold bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 dark:text-gray-100\"\r\n                  />\r\n                ))}\r\n              </div>\r\n\r\n              {otpError && (\r\n                <div className=\"flex items-center gap-2 text-red-600 dark:text-red-400 text-sm\">\r\n                  <AlertTriangle className=\"w-4 h-4\" />\r\n                  <span>{otpError}</span>\r\n                </div>\r\n              )}\r\n\r\n              <p className=\"text-xs text-blue-700 dark:text-blue-300\">\r\n                OTP is valid for 10 minutes. Didn&apos;t receive it? Close and try again.\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer Actions */}\r\n        <div className=\"border-t border-gray-200 dark:border-gray-700 p-6 bg-gray-50 dark:bg-gray-900/50 flex flex-col sm:flex-row gap-3 justify-end\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-6 py-2.5 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg font-medium transition-colors\"\r\n          >\r\n            Cancel\r\n          </button>\r\n\r\n          {deleteAll ? (\r\n            <button\r\n              onClick={handleSubmit}\r\n              disabled={isSendingOtp || (otpSent && !isOtpComplete)}\r\n              className=\"px-6 py-2.5 bg-red-600 hover:bg-red-700 disabled:bg-red-400 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors flex items-center gap-2\"\r\n            >\r\n              {isSendingOtp ? (\r\n                <>\r\n                  <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                  Sending OTP...\r\n                </>\r\n              ) : otpSent ? (\r\n                <>\r\n                  <AlertTriangle className=\"w-4 h-4\" />\r\n                  Verify OTP & Delete All\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Mail className=\"w-4 h-4\" />\r\n                  Send OTP & Confirm Delete\r\n                </>\r\n              )}\r\n            </button>\r\n          ) : (\r\n            <button\r\n              onClick={handleSubmit}\r\n              disabled={!selectedDairyId || isSendingOtp || (otpSent && !isOtpComplete)}\r\n              className=\"px-6 py-2.5 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors flex items-center gap-2\"\r\n            >\r\n              {isSendingOtp ? (\r\n                <>\r\n                  <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                  Sending OTP...\r\n                </>\r\n              ) : otpSent ? (\r\n                <>\r\n                  <AlertTriangle className=\"w-4 h-4\" />\r\n                  Verify OTP & Transfer\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Mail className=\"w-4 h-4\" />\r\n                  Send OTP & Confirm Transfer\r\n                </>\r\n              )}\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"gEAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAee,SAAS,EAAiB,QACvC,CAAM,SACN,CAAO,WACP,CAAS,CACT,WAAS,SACT,GAAU,CAAK,UACf,EAAW,CAAC,cACZ,EAAe,CAAC,aAChB,EAAc,CAAC,iBACf,EAAkB,CAAC,cACnB,EAAe,CAAC,CACM,EACtB,GAAM,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAoB,WAC9C,CAAC,EAAK,EAAO,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAG,EACjD,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACvC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,EAAY,CAAA,EAAA,EAAA,MAAM,AAAN,EAAoC,EAAE,EAElD,EAAgB,UACpB,GAAI,CACF,GAAc,GACd,EAAY,IAGZ,IAAM,EAAW,OAA0D,wBAAwB,CACnG,GAAI,CAAC,EAAS,YACZ,EAAY,yCAId,IAAM,EAAW,MAAM,MAAM,kCAAmC,CAC9D,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,cAAiB,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,aAAA,CAAc,AAChE,EACA,KAAM,KAAK,SAAS,CAAC,SAAE,CAAQ,EACjC,GAEM,EAAO,MAAM,EAAS,IAAI,GAEhC,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACV,AAAI,MAAM,EAAK,KAAK,EAAI,sBAGhC,EAAQ,OAER,WAAW,IAAM,EAAU,OAAO,CAAC,EAAE,EAAE,QAAS,IAClD,CAAE,MAAO,EAAgB,CACvB,EAAY,aAAiB,MAAQ,EAAM,OAAO,CAAG,qBACvD,QAAU,CACR,GAAc,EAChB,CACF,EAyBM,EAAc,AAAC,IACnB,EAAE,cAAc,GAChB,IAAM,EAAa,EAAE,aAAa,CAAC,OAAO,CAAC,QAAQ,KAAK,CAAC,EAAG,GAC5D,GAAI,CAAC,QAAQ,IAAI,CAAC,GAAa,OAE/B,IAAM,EAAS,IAAI,EAAI,CACvB,EAAW,KAAK,CAAC,IAAI,OAAO,CAAC,CAAC,EAAM,KAC9B,EAAQ,IAAG,CAAM,CAAC,EAAM,CAAG,CAAA,CACjC,GACA,EAAO,GAEP,IAAM,EAAiB,EAAO,SAAS,CAAC,GAAO,CAAC,GACzB,CAAC,GAAG,CAAvB,EACF,EAAU,OAAO,CAAC,EAAe,EAAE,QAEnC,EAAU,OAAO,CAAC,EAAE,EAAE,OAE1B,EAEM,EAAkB,UACtB,IAAM,EAAY,EAAI,IAAI,CAAC,IAC3B,GAAI,AAAqB,MAAX,MAAM,CAAQ,YAC1B,EAAY,yCAId,GAAI,CACF,MAAM,EAAU,GAChB,GACF,CAAE,MAAO,EAAgB,CACvB,EAAY,aAAiB,MAAQ,EAAM,OAAO,CAAG,0BACrD,EAAO,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAG,EAC/B,EAAU,OAAO,CAAC,EAAE,EAAE,OACxB,CACF,EAEM,EAAc,KAClB,EAAQ,WACR,EAAO,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAG,EAC/B,EAAY,IACZ,GACF,SAEA,AAAK,EAGH,CAAA,CAHE,CAGF,EAAA,CAHW,EAGX,EAAC,MAAA,CAAI,UAAU,gGACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6FAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iGACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,yBAEpB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4CACF,YAAT,EAAqB,eAAiB,kBAG3C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,SAAU,GAAW,EACrB,UAAU,gFAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,UAAU,iBAKjB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,eACH,YAAT,EACC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WAEE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sGACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,gEACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,2DAAkD,0CAG/D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kDAAyC,yDAQ5D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0DACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yDAAgD,eAC7D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,0DAAkD,OAGjE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0DACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yDAAgD,wCAC7D,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,+DACX,EAAW,GACV,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,oCACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wCACd,EAAS,OAAK,EAAW,EAAI,IAAM,MAGvC,EAAe,GACd,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,oCACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wCACd,EAAa,UAAQ,EAAe,EAAI,MAAQ,OAGpD,EAAc,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,oCACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wCACd,EAAY,UAAQ,EAAc,EAAI,IAAM,GAAG,qBAGnD,EAAkB,GACjB,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,oCACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wCACd,EAAgB,qBAAmB,EAAkB,EAAI,IAAM,MAGnE,EAAe,GACd,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,oCACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wCACd,EAAa,WAAS,EAAe,EAAI,IAAM,GAAG,mBAGtD,AAAa,OAAsB,IAAjB,GAAsC,IAAhB,GAAyC,IAApB,GAAyB,AAAiB,OACtG,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,oCACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wCAA4C,qCASrE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,SAAU,GAAW,EACrB,UAAU,gNACX,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,SAAU,GAAW,EACrB,UAAU,uNAET,EACC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8EAAkF,oBAInG,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,YAAY,sBAQtC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WAEE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0GACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,kEACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6DAAoD,2BAGjE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,kGAQ9D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,2EAAkE,mBAGnF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACZ,EAAI,GAAG,CAAC,CAAC,EAAO,IACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAEC,IAAK,IAAQ,EAAU,OAAO,CAAC,EAAM,CAAG,CAAI,EAC5C,KAAK,OACL,UAAU,UACV,UAAW,EACX,MAAO,EACP,SAAW,AAAD,GA1NN,AA0Na,EA1NZ,EAAe,KAKtC,GAJI,EAAM,MAAM,CAAG,GAAG,CACpB,EAAQ,CAAK,CAAC,EAAA,AAAE,EAGd,CAAC,QAAQ,IAAI,CAAC,GAAQ,OAE1B,IAAM,EAAS,IAAI,EAAI,CACvB,CAAM,CAAC,EAAM,CAAG,EAChB,EAAO,GAGH,GAAS,EAAQ,GAAG,AACtB,EAAU,OAAO,CAAC,EAAQ,EAAE,EAAE,QAElC,EA2MqD,EAAO,EAAE,MAAM,CAAC,KAAK,EACtD,UAAW,AAAC,IAzMhB,AAyMsB,cAzMhC,AAyMqD,EAzMnD,GAAG,EAAoB,CAAC,CAAG,CAAC,EAAM,EAAI,EAAQ,GAAG,AACrD,EAAU,OAAO,CAwM+B,AAxM9B,EAAQ,EAAE,EAAE,SAyMd,QAAmB,IAAV,EAAc,OAAc,EACrC,UAAU,mNACV,SAAU,GAVL,MAcV,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mEAA2D,OAK5E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,KACP,EAAQ,WACR,EAAO,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAG,EAC/B,EAAY,GACd,EACA,SAAU,EACV,UAAU,gNACX,SAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,SAAU,GAAW,EAAI,IAAI,CAAC,GAAK,CAAC,GACpC,UAAU,mPAET,EACC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8EAAkF,iBAInG,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,YAAY,iCA9L9B,IA0MtB,+BClVA,IAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAmBe,SAAS,EAAkB,QACxC,CAAM,CACN,SAAO,WACP,CAAS,CACT,MAAI,CACJ,SAAO,WACP,CAAS,CACT,gBAAc,YACd,EAAa,EAAE,CACQ,EACvB,GAAM,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAChE,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrC,CAAC,EAAK,EAAO,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAG,EACjD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC3C,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC3C,EAAe,CAAA,EAAA,EAAA,MAAA,AAAM,EAA8B,EAAE,EAGrD,EAAmB,EAAQ,MAAM,CAAC,GAAK,EAAE,EAAE,GAAK,GAEtD,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACH,IACH,EAAmB,EADR,IAEX,GAAa,GACb,EAAO,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAG,EAC/B,GAAW,GACX,EAAY,IACZ,GAAgB,GAChB,GAAgB,GAEpB,EAAG,CAAC,EAAO,EAGX,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,GAAgB,EAAa,OAAO,CAAC,EAAE,EAAE,AAC3C,EAAa,OAAO,CAAC,EAAE,EAAE,OAE7B,EAAG,CAAC,EAAa,EAcjB,IAAM,EAAU,UACd,GAAgB,GAChB,EAAY,IAEZ,GAAI,CACF,IAAM,EAAQ,aAAa,OAAO,CAAC,aAC7B,EAAW,MAAM,MAAM,kCAAmC,CAC9D,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,cAAiB,CAAC,OAAO,EAAE,EAAA,CAC7B,AADoC,EAEpC,KAAM,KAAK,SAAS,CAAC,CAAE,QAAS,CAAe,EACjD,GAEM,EAAO,MAAM,EAAS,IAAI,GAE5B,EAAK,OAAO,EAAE,AAChB,GAAW,GACX,GAAgB,GAChB,EAAY,KAEZ,EAAY,EAAK,OAAO,EAAI,qBAEhC,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,qBAAsB,GACpC,EAAY,wCACd,QAAU,CACR,EAAgB,GAClB,CACF,EAwCM,EAAe,KACnB,GAAI,EACF,GAAK,CAAD,CAEG,CACL,GAJW,CAIL,EAHM,AAGI,EAAI,IAAI,CAAC,IACzB,GAAI,AAAmB,MAAX,MAAM,CAAQ,YACxB,EAAY,qCAGd,EAAU,MAAM,EAAM,EACxB,MARE,QASG,CACL,GAAI,CAAC,EAAiB,OAEtB,GAAK,CAAD,CAEG,CACL,IAAM,EAHM,AAGI,EAAI,IAAI,CAAC,IACzB,GAAuB,IAAnB,EAAQ,MAAM,CAAQ,YACxB,EAAY,qCAGd,EAAU,GAAiB,EAAO,EACpC,MARE,GASJ,CACF,EAEM,EAAgB,EAAI,KAAK,CAAC,GAAS,AAAU,eAEnD,AAAK,EAGH,CAAA,CAHE,CAGF,EAAA,CAHW,EAGX,EAAC,MAAA,CAAI,UAAU,oGACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0GAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gGACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iGACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,6CAE3B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2DAAkD,sCAIlE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,qFAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,UAAU,kDAKjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8GACb,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,yDACX,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,aAAiB,mBAAgB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAQ,EAAK,MAAM,GAAU,OAAqB,IAAhB,EAAK,MAAM,CAAS,IAAM,GAAG,gBAE3G,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6DAAoD,kFAMnE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,mEAAyD,cAC1D,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAQ,IAAmB,OAEzC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4FACZ,EAAK,GAAG,CAAE,AAAD,GACR,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAiB,UAAU,6EAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,0BACrB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAM,EAAI,IAAI,CAAC,KAAG,EAAI,KAAK,CAAC,SAFrB,EAAI,EAAE,QAStB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iGACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,wDACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,WACL,QAAS,EACT,SAAU,AAAC,IAAM,MAvK7B,EAD4B,EAwKsB,EAAE,MAAM,CAvK7C,AAuK8C,OAAO,EAtK9D,GACF,EAAmB,IADR,EAGb,EAAO,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAG,EAC/B,GAAW,GACX,EAAY,IACZ,GAAgB,GAChB,GAAgB,IAgKJ,UAAU,sGAEZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,gEAAuD,gCAGvE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4EAAmE,cAIrF,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,wDAA8C,gLAEzD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,sBAAa,qCAGhC,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8DACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iEAAwD,kDAGrE,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,wFACZ,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WAAI,EAAK,MAAM,CAAC,OAAqB,IAAhB,EAAK,MAAM,CAAS,IAAM,MAChD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,mCACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,sCACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,2CACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,2BACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,mDACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,wCACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,gCACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,2BACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,8BACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,oCACJ,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WAAG,UAAO,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAQ,qBAS/B,CAAC,GACA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,wEAA+D,uCAGhF,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,MAAO,GAAmB,GAC1B,SAAU,AAAC,GAAM,EAAmB,OAAO,EAAE,MAAM,CAAC,KAAK,GACzD,UAAU,2MAEV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,yBAChB,EAAiB,GAAG,CAAC,AAAC,GACrB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAsB,MAAO,EAAM,EAAE,UACnC,EAAM,IAAI,EADA,EAAM,EAAE,MAKI,IAA5B,EAAiB,MAAM,EACtB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wDAA+C,qEAQjE,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gHACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,6CAChB,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,mEAAyD,gBACtD,QAGlB,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,qDAA2C,yDACC,EAAY,WAAa,wBAAwB,OAI1G,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4BAA4B,QAzL/B,AAAD,CAyLyC,GAxL9D,EAAE,cAAc,GAChB,IAAM,EAAa,EAAE,aAAa,CAAC,OAAO,CAAC,QAAQ,KAAK,CAAC,EAAG,GAE5D,GAAI,CAAC,QAAQ,IAAI,CAAC,GAAa,OAE/B,IAAM,EAAS,IAAI,EAAI,CACvB,EAAW,KAAK,CAAC,IAAI,OAAO,CAAC,CAAC,EAAM,KAC9B,EAAM,IAAG,CAAM,CAAC,EAAI,CAAG,CAAA,CAC7B,GACA,EAAO,GAGP,IAAM,EAAY,KAAK,GAAG,CAAC,EAAW,MAAM,CAAE,GAC9C,EAAa,OAAO,CAAC,EAAU,EAAE,OACnC,WA2Ke,EAAI,GAAG,CAAC,CAAC,EAAO,IACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAEC,IAAK,AAAC,IAAS,EAAa,OAAO,CAAC,EAAM,CAAG,CAAI,EACjD,KAAK,OACL,UAAW,EACX,MAAO,EACP,SAAU,AAAC,GAAM,CAtNX,CAAC,EAAe,KAEtC,GAAI,GAAS,CAAC,OAAO,IAAI,CAAC,GAAQ,OAElC,IAAM,EAAS,IAAI,EAAI,CACvB,CAAM,CAAC,EAAM,CAAG,EAChB,EAAO,GACP,EAAY,IAGR,GAAS,EAAQ,GAAG,AACtB,EAAa,OAAO,CAAC,EAAQ,EAAE,EAAE,QAErC,EAyMmD,EAAO,EAAE,MAAM,CAAC,KAAK,EACtD,UAAW,AAAC,IAvMd,AAuMoB,cAvM9B,AAuMsD,EAvMpD,GAAG,EAAoB,CAAC,CAAG,CAAC,AAuMiB,EAvMX,EAAI,EAAQ,GAClD,AADqD,EACxC,OAAO,CAAC,EAAQ,EAAE,EAAE,SAuMnB,UAAU,sNAPL,MAYV,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2EACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,YACzB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,OAIX,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,+EAQ9D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yIACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,+MACX,WAIA,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,SAAU,GAAiB,GAAW,CAAC,EACvC,UAAU,+KAET,EACC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8EAA8E,oBAG7F,EACF,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,YAAY,6BAIvC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,YAAY,iCAMlC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,SAAU,CAAC,GAAmB,GAAiB,GAAW,CAAC,EAC3D,UAAU,oLAET,EACC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8EAA8E,oBAG7F,EACF,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,YAAY,2BAIvC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,YAAY,2CAzNxB,IAmOtB"}