module.exports=[779601,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(550194),f=a.i(660246),g=a.i(46864),h=a.i(963519),i=a.i(992258),j=a.i(267900),k=a.i(321161),l=a.i(492596),m=a.i(296101),n=a.i(405784),o=a.i(50522),p=a.i(915618),q=a.i(773320),r=a.i(923821),s=a.i(724669),t=a.i(93518),u=a.i(839761),v=a.i(633508),w=a.i(457431),x=a.i(677924),y=a.i(758042),z=a.i(994222),A=a.i(54419),B=a.i(659854),C=a.i(48662),D=a.i(346158),E=a.i(835466);a.i(16707);var F=a.i(529784),G=a.i(981189),H=a.i(651963),I=a.i(851068),J=a.i(796182),K=a.i(110724),L=a.i(195279),M=a.i(291691),N=a.i(960020),O=a.i(264180),O=O;a.i(152824);var P=a.i(771829),Q=a.i(604126),R=a.i(436355),S=a.i(603430),T=a.i(297030),U=a.i(668610),V=a.i(690163),W=a.i(840602),X=a.i(715867),Y=a.i(657992),Z=a.i(932596);let $=async(b,c,d,e,f)=>{if(0===b.length)return void alert("No data to download");let{default:g}=await a.A(386089),h=new Z.default("landscape","pt","a4"),i=[41,128,185],j=[236,240,241],k=[44,62,80],l=[189,195,199];h.setFillColor(...j),h.rect(0,0,842,130,"F"),h.setFillColor(...i),h.rect(0,0,842,8,"F");try{let a=await fetch("/fulllogo.png"),b=await a.blob(),c=await new Promise(a=>{let c=new FileReader;c.onloadend=()=>a(c.result),c.readAsDataURL(b)});h.addImage(c,"PNG",50,25,120,40)}catch(a){console.warn("Could not load logo:",a)}if(e){h.setTextColor(52,73,94),h.setFontSize(24),h.setFont("helvetica","bold");let a=h.getTextWidth(e);h.text(e,(842-a)/2,80),h.setTextColor(...k),h.setFontSize(11),h.setFont("helvetica","normal");let b="Comprehensive Farmer Management Report",c=h.getTextWidth(b);h.text(b,(842-c)/2,100)}let m=160;if(f&&f.length>0){let a=18*f.length+25;h.setFillColor(...j),h.setDrawColor(...l),h.setLineWidth(.5),h.roundedRect(50,m-15,742,a,5,5,"FD"),h.setTextColor(...i),h.setFontSize(12),h.setFont("helvetica","bold");let b="Report Information",c=h.getTextWidth(b);h.text(b,(842-c)/2,m+5),h.setTextColor(...k),h.setFontSize(10),h.setFont("helvetica","normal"),f.forEach((a,b)=>{let c=m+25+18*b,d=(842-h.getTextWidth(a))/2;h.setFillColor(...i),h.circle(d-15,c-3,2,"F"),h.text(a,d,c)}),m+=a+20}let n=c.map(a=>a.header),o=b.map(a=>c.map(b=>{let c=a[b.key];return String((b.formatter?b.formatter(c):c)||"")})),p=c.map(a=>a.width?a.width:Math.max(60,Math.min(150,6*Math.max(a.header.length,Math.max(...o.map(b=>String(b[c.indexOf(a)]||"").length)))))),q=p.reduce((a,b)=>a+b,0);if(q>742){let a=742/q;p.forEach((b,c)=>{p[c]=b*a})}g(h,{head:[n],body:o,startY:m,margin:{left:50,right:50},columnStyles:c.reduce((a,b,c)=>(a[c]={cellWidth:p[c]},a),{}),styles:{fontSize:9,cellPadding:{top:8,right:6,bottom:8,left:6},lineColor:l,lineWidth:.5,textColor:k,font:"helvetica",overflow:"linebreak",valign:"middle",halign:"center"},headStyles:{fillColor:i,textColor:[255,255,255],fontStyle:"bold",fontSize:10,cellPadding:{top:12,right:8,bottom:12,left:8},halign:"center",valign:"middle"},alternateRowStyles:{fillColor:[249,250,251]},tableLineColor:l,tableLineWidth:.5});h.setFillColor(...j),h.rect(0,545,842,50,"F"),h.setDrawColor(...i),h.setLineWidth(2),h.line(50,550,792,550),h.setTextColor(...k),h.setFontSize(8),h.setFont("helvetica","normal");let r=new Date().toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),s=`Generated on: ${r}`,t=h.getTextWidth(s);h.text(s,(842-t)/2,565),h.setFont("helvetica","bold");let u="Poornasree Equipments Cloud â€¢ Page 1",v=h.getTextWidth(u);h.text(u,(842-v)/2,577),h.setFont("helvetica","italic"),h.setFontSize(7);let w="This document contains confidential information",x=h.getTextWidth(w);h.text(w,(842-x)/2,587),h.save(`${d}.pdf`)},_=a=>null==a?"0":a.toLocaleString("en-IN"),aa=a=>a.charAt(0).toUpperCase()+a.slice(1),ab=()=>[{key:"farmerId",header:"Farmer ID"},{key:"rfId",header:"RF-ID"},{key:"farmerName",header:"Farmer Name"},{key:"contactNumber",header:"Contact Number"},{key:"email",header:"Email"},{key:"societyInfo",header:"Society",formatter:a=>a?`${a.name} (${a.id})`:""},{key:"status",header:"Status",formatter:a=>aa(a)},{key:"smsEnabled",header:"SMS Enabled",formatter:a=>a?"ON":"OFF"},{key:"bonus",header:"Bonus",formatter:a=>_(a)},{key:"address",header:"Address"},{key:"bankName",header:"Bank Name"},{key:"bankAccountNumber",header:"Account Number"},{key:"ifscCode",header:"IFSC Code"},{key:"notes",header:"Notes"}],ac=async(a,b,c={},d)=>{let e=[{key:"farmerId",header:"ID",width:60},{key:"rfId",header:"RF-ID",width:60},{key:"farmerName",header:"Name",width:120},{key:"contactNumber",header:"Contact",width:80},{key:"email",header:"Email",width:80},{key:"societyInfo",header:"Society",width:120,formatter:a=>a?`${a.name}`:""},{key:"status",header:"Status",width:60,formatter:a=>aa(a)},{key:"smsEnabled",header:"SMS",width:40,formatter:a=>a?"ON":"OFF"},{key:"bonus",header:"Bonus",width:60,formatter:a=>_(a)},{key:"address",header:"Address",width:100},{key:"bankName",header:"Bank",width:80},{key:"bankAccountNumber",header:"Account",width:80},{key:"ifscCode",header:"IFSC",width:60},{key:"notes",header:"Notes",width:80}],f=["farmerId","rfId","farmerName","contactNumber","societyInfo","status","smsEnabled","bonus"],g=d&&d.length>0?e.filter(a=>d.includes(a.key)):e.filter(a=>f.includes(a.key)),h=a.map(a=>({farmerId:a.farmerId||"",rfId:a.rfId||"",farmerName:a.farmerName||"",contactNumber:a.contactNumber||"",email:a.email||"",societyInfo:(a=>{if(!a)return{name:"",id:""};let c=b.find(b=>b.id.toString()===a.toString());return c?{name:c.name,id:c.society_id}:{name:"",id:""}})(a.societyId),status:a.status||"active",smsEnabled:a.smsEnabled,bonus:a.bonus||0,address:a.address||"",bankName:a.bankName||"",bankAccountNumber:a.bankAccountNumber||"",ifscCode:a.ifscCode||"",notes:a.notes||""})),i=ad(c),j=ae(c,b),k=[`Generated on: ${new Date().toLocaleString()}`,`Total Records: ${a.length}`,...j?[j]:[]],l=`farmers_report${i}_${new Date().toISOString().split("T")[0]}`;await $(h,g,l,"Farmers Report",k)},ad=a=>{let b=[];return a.status&&"all"!==a.status&&b.push(a.status),a.society&&"all"!==a.society&&b.push("society_filtered"),a.selection&&b.push(a.selection),b.length>0?`_${b.join("_")}`:""},ae=(a,b)=>{let c=[];if(a.status&&"all"!==a.status&&c.push(`Status: ${aa(a.status)}`),a.society&&"all"!==a.society){let d=b.find(b=>b.id.toString()===a.society);d&&c.push(`Society: ${d.name} (${d.society_id})`)}return a.selection&&c.push(`Selection: ${a.selection.replace("-"," ")}`),c.length>0?`Filters Applied: ${c.join(", ")}`:""},af=()=>{let a,Z,{t:$}=(0,e.useLanguage)(),_=(0,d.useRouter)(),aa=(0,d.useSearchParams)(),[ae,af]=(0,c.useState)([]),[ag,ah]=(0,c.useState)([]),[ai,aj]=(0,c.useState)([]),[ak,al]=(0,c.useState)([]),[am,an]=(0,c.useState)([]),[ao,ap]=(0,c.useState)(!0),[aq,ar]=(0,c.useState)(!1),[as,at]=(0,c.useState)("all"),[au,av]=(0,c.useState)([]),[aw,ax]=(0,c.useState)([]),[ay,az]=(0,c.useState)([]),[aA,aB]=(0,c.useState)([]),[aC,aD]=(0,c.useState)(""),[aE,aF]=(0,c.useState)(""),[aG,aH]=(0,c.useState)(""),[aI,aJ]=(0,c.useState)(!1),[aK,aL]=(0,c.useState)(!1),[aM,aN]=(0,c.useState)(!1),[aO,aP]=(0,c.useState)(!1),[aQ,aR]=(0,c.useState)(null),[aS,aT]=(0,c.useState)(null),[aU,aV]=(0,c.useState)(""),[aW,aX]=(0,c.useState)(!1),[aY,aZ]=(0,c.useState)({}),[a$,a_]=(0,c.useState)(new Set),[a0,a1]=(0,c.useState)(!1),[a2,a3]=(0,c.useState)(!1),[a4,a5]=(0,c.useState)(null),[a6,a7]=(0,c.useState)(!1),[a8,a9]=(0,c.useState)(!1),[ba,bb]=(0,c.useState)(!1),[bc,bd]=(0,c.useState)(!1),[be,bf]=(0,c.useState)(!1),[bg,bh]=(0,c.useState)(!1),[bi,bj]=(0,c.useState)(0),[bk,bl]=(0,c.useState)(new Set),[bm,bn]=(0,c.useState)("folder"),[bo,bp]=(0,c.useState)(new Set),[bq,br]=(0,c.useState)(!1),[bs,bt]=(0,c.useState)("quantity"),[bu,bv]=(0,c.useState)([]),[bw,bx]=(0,c.useState)("active"),[by,bz]=(0,c.useState)({topCollector:null,bestFat:null,bestSnf:null,topRevenue:null,mostActive:null,bestQuality:null}),[bA,bB]=(0,c.useState)({farmerId:"",rfId:"",farmerName:"",contactNumber:"",email:"",smsEnabled:"OFF",emailNotificationsEnabled:"ON",bonus:0,address:"",bankName:"",bankAccountNumber:"",ifscCode:"",societyId:"",machineId:"",status:"active",notes:""});(0,c.useEffect)(()=>{if(aG||aE){let a=setTimeout(()=>{aH(""),aF("")},5e3);return()=>clearTimeout(a)}},[aG,aE]),(0,c.useEffect)(()=>{let a=a=>{aD(a.detail?.query||"")};return window.addEventListener("globalSearch",a),()=>{window.removeEventListener("globalSearch",a)}},[]),(0,c.useEffect)(()=>{if(ay.length>0&&aA.length>0){let a=aA.filter(a=>{let b=ai.find(b=>b.id.toString()===a);return b&&ay.includes(b.societyId?.toString()||"")});a.length!==aA.length&&aB(a)}},[ay,aA,ai]),(0,c.useEffect)(()=>{let a=aa.get("societyId"),b=aa.get("societyName"),c=aa.get("dairyFilter"),d=aa.get("bmcFilter");a&&!ay.includes(a)&&(az([a]),b&&aH(`Filter Applied: ${decodeURIComponent(b)}`)),c&&!au.includes(c)&&(av([c]),aH("Filter Applied: Dairy")),d&&!aw.includes(d)&&(ax([d]),aH("Filter Applied: BMC"))},[]);let bC=(0,c.useCallback)(async()=>{try{ap(!0);let a=localStorage.getItem("authToken");if(!a)return void _.push("/login");let b=await fetch("/api/user/farmer",{headers:{Authorization:`Bearer ${a}`}});if(401===b.status){localStorage.removeItem("authToken"),_.push("/login");return}if(b.ok){let a=await b.json();af(a.data||[])}}catch(a){console.error("Error fetching farmers:",a)}finally{ap(!1)}},[_]),bD=(0,c.useCallback)(async()=>{try{let a=localStorage.getItem("authToken"),b=await fetch("/api/analytics/farmer-performance",{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();bz(a.stats||{topCollector:null,bestFat:null,bestSnf:null,topRevenue:null,mostActive:null,bestQuality:null})}}catch(a){console.error("Error fetching performance stats:",a)}},[]),bE=(0,c.useCallback)(async a=>{try{let b=localStorage.getItem("authToken"),c=await fetch("/api/analytics/farmer-performance?graphData=true",{headers:{Authorization:`Bearer ${b}`}});if(c.ok){let b=((await c.json()).farmers||[]).map(b=>({name:b.farmer_name,farmerId:b.farmer_id,societyName:b.society_name,value:"quantity"===a?parseFloat(b.total_quantity)||0:"revenue"===a?parseFloat(b.total_amount)||0:"fat"===a?parseFloat(b.avg_fat)||0:"snf"===a?parseFloat(b.avg_snf)||0:"collections"===a?parseInt(b.total_collections)||0:parseFloat(b.avg_rate)||0})).sort((a,b)=>b.value-a.value).slice(0,20);bv(b)}}catch(a){console.error("Error fetching graph data:",a),bv([])}},[]),bF=a=>{bt(a),bE(a),br(!0)},bG=async()=>{try{let a=localStorage.getItem("authToken"),b=await fetch("/api/user/society",{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();ah(a.data||[])}}catch(a){console.error("Error fetching societies:",a)}},bH=async()=>{try{let a=localStorage.getItem("authToken"),b=await fetch("/api/user/dairy",{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();al(a.data||[])}}catch(a){console.error("Error fetching dairies:",a)}},bI=async()=>{try{let a=localStorage.getItem("authToken"),b=await fetch("/api/user/bmc",{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();an(a.data||[])}}catch(a){console.error("Error fetching BMCs:",a)}},bJ=async()=>{try{let a=localStorage.getItem("authToken"),b=await fetch("/api/user/machine",{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();aj(a.data||[])}}catch(a){console.error("Error fetching machines:",a),aj([])}},bK=async a=>{if(!a)return void aj([]);try{ar(!0);let b=localStorage.getItem("authToken"),c=await fetch(`/api/user/machine/by-society?societyId=${a}`,{headers:{Authorization:`Bearer ${b}`}});if(c.ok){let a=await c.json();aj(a.data||[])}else aj([])}catch(a){console.error("Error fetching machines:",a),aj([])}finally{ar(!1)}},bL=async(a,b)=>{bf(!0),bj(0);try{let c=ae.find(b=>b.id===a);if(!c)return;bj(30);let d=localStorage.getItem("authToken"),e=await fetch("/api/user/farmer",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({id:c.id,farmerId:c.farmerId,rfId:c.rfId,farmerName:c.farmerName,contactNumber:c.contactNumber,smsEnabled:c.smsEnabled,emailNotificationsEnabled:c.emailNotificationsEnabled||"ON",bonus:c.bonus,address:c.address,bankName:c.bankName,bankAccountNumber:c.bankAccountNumber,ifscCode:c.ifscCode,societyId:c.societyId,machineId:c.machineId,status:b,notes:c.notes})});bj(70),e.ok?(af(c=>c.map(c=>c.id===a?{...c,status:b}:c)),bj(100),aH("Farmer status updated successfully"),aF("")):(aF("Failed to update farmer status"),aH(""))}catch(a){console.error("Error updating status:",a),aF("Error updating farmer status"),aH("")}finally{bf(!1)}},bM=a=>{let b=ae.find(b=>b.id===a);b&&(a5({id:b.id,name:b.farmerName,farmerId:b.farmerId}),a7(!0))},bN=async()=>{if(a4)try{let a=localStorage.getItem("authToken");(await fetch(`/api/user/farmer?id=${a4.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})).ok?(af(a=>a.filter(a=>a.id!==a4.id)),aH($.farmerManagement.deletedSuccessfully||"Farmer deleted successfully"),aF("")):(aF($.farmerManagement.deleteError||"Failed to delete farmer. Please try again."),aH(""))}catch(a){console.error("Error deleting farmer:",a),aF($.farmerManagement.deleteError||"Error deleting farmer. Please try again."),aH("")}finally{a7(!1),a5(null)}},bO=a=>{a_(b=>{let c=new Set(b);if(c.has(a)){c.delete(a),a1(!1);let b=bZ.find(b=>b.id===a);if(b&&b.societyId){let d=b.societyId;bZ.filter(a=>a.societyId===d).every(b=>b.id!==a&&c.has(b.id))||bp(a=>{let b=new Set(a);return b.delete(d),b})}}else{c.add(a);let b=bZ.find(b=>b.id===a);if(b&&b.societyId){let d=b.societyId;bZ.filter(a=>a.societyId===d).every(b=>b.id===a||c.has(b.id))&&bp(a=>{let b=new Set(a);return b.add(d),b})}Array.from(new Set(bZ.map(a=>a.id))).every(b=>b===a||c.has(b))&&a1(!0)}return c})};(0,c.useEffect)(()=>{if(a$.size>0){let a=ae.filter(a=>{let b="all"===as||a.status===as,c=0===ay.length||ay.includes(a.societyId?.toString()||""),d=0===aA.length||aA.includes(a.machineId?.toString()||""),e=""===aC||a.farmerName.toLowerCase().includes(aC.toLowerCase())||a.farmerId.toLowerCase().includes(aC.toLowerCase())||a.contactNumber?.toLowerCase().includes(aC.toLowerCase())||a.rfId?.toLowerCase().includes(aC.toLowerCase())||a.societyName?.toLowerCase().includes(aC.toLowerCase())||a.societyIdentifier?.toLowerCase().includes(aC.toLowerCase())||a.address?.toLowerCase().includes(aC.toLowerCase())||a.bankName?.toLowerCase().includes(aC.toLowerCase())||a.bankAccountNumber?.toLowerCase().includes(aC.toLowerCase())||a.ifscCode?.toLowerCase().includes(aC.toLowerCase())||a.notes?.toLowerCase().includes(aC.toLowerCase());return b&&c&&d&&e}),b=new Set(a.map(a=>a.id)),c=new Set(Array.from(a$).filter(a=>b.has(a)));if(c.size!==a$.size){a_(c),a1(!1);let b=new Set(a.map(a=>a.societyId).filter(Boolean)),d=new Set;b.forEach(b=>{let e=a.filter(a=>a.societyId===b);e.every(a=>c.has(a.id))&&e.length>0&&d.add(b)}),bp(d)}}else a1(!1),bp(new Set)},[as,ay,aA,aC,ae,a$]);let bP=async()=>{if(0!==a$.size){a3(!1),bb(!0),bj(0);try{let a=localStorage.getItem("authToken");bj(10);let b=Array.from(a$);bj(20);let c=await fetch(`/api/user/farmer?ids=${encodeURIComponent(JSON.stringify(b))}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}});if(bj(60),c.ok)bj(80),await bC(),bj(95),a_(new Set),a1(!1),aH(`Successfully deleted ${b.length} farmer(s)${"all"!==as||au.length>0||aw.length>0||ay.length>0||aA.length>0?" from filtered results":""}`),az([]),aF(""),bj(100);else{let a=await c.json();aF(a.message||"Failed to delete selected farmers"),aH("")}}catch(a){console.error("Error deleting farmers:",a),aF("Error deleting selected farmers"),aH("")}finally{bb(!1),bj(0)}}},bQ=async a=>{if(0===a$.size)return;let b=a||bw;bh(!0),bj(0);try{let a=localStorage.getItem("authToken");bj(5);let c=Array.from(a$),d=c.length;bj(10),console.log(`ðŸ”„ Bulk updating ${d} farmers to status: ${b}`),bj(30);let e=await fetch("/api/user/farmer",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({bulkStatusUpdate:!0,farmerIds:c,status:b})});if(bj(70),!e.ok){let a=await e.json();throw Error(a.error||"Failed to update farmer status")}let f=await e.json(),g=f.data?.updated||d;bj(90),await bC(),bj(100),a_(new Set),bp(new Set),a1(!1),console.log(`âœ… Successfully updated ${g} farmers`),aH(`Successfully updated status to "${b}" for ${g} farmer(s)${"all"!==as||au.length>0||aw.length>0||ay.length>0?" from filtered results":""}`),aF("")}catch(a){console.error("Error updating farmer status:",a),bj(100),aF(a instanceof Error?a.message:"Error updating farmer status. Please try again."),aH("")}finally{bh(!1)}},bR=async(a,b)=>{a9(!0);try{let c=(a$.size>0?bZ.filter(a=>a$.has(a.id)):bZ).map(a=>({farmerId:a.farmerId,rfId:a.rfId,farmerName:a.farmerName,contactNumber:a.contactNumber,email:a.contactNumber,societyId:a.societyId,address:a.address,notes:a.notes,status:a.status,smsEnabled:"ON"===a.smsEnabled,bonus:a.bonus,bankName:a.bankName,bankAccountNumber:a.bankAccountNumber,ifscCode:a.ifscCode})),d=ag.map(a=>({id:a.id,name:a.name,society_id:a.society_id})),e={status:"all"!==as?as:void 0,society:ay.length>0?ay[0]:void 0,selection:a$.size>0?`${a$.size}-selected`:void 0},f=a$.size>0?`${a$.size} selected farmer(s) downloaded successfully`:`${c.length} farmer(s) downloaded successfully`;"csv"===b?(((a,b,c={},d)=>{let e=ab(),f=d&&d.length>0?e.filter(a=>d.includes(a.key)):e,g=a.map(a=>({farmerId:a.farmerId||"",rfId:a.rfId||"",farmerName:a.farmerName||"",contactNumber:a.contactNumber||"",email:a.email||"",societyInfo:(a=>{if(!a)return{name:"",id:""};let c=b.find(b=>b.id.toString()===a.toString());return c?{name:c.name,id:c.society_id}:{name:"",id:""}})(a.societyId),status:a.status||"active",smsEnabled:a.smsEnabled,bonus:a.bonus||0,address:a.address||"",bankName:a.bankName||"",bankAccountNumber:a.bankAccountNumber||"",ifscCode:a.ifscCode||"",notes:a.notes||""})),h=ad(c);((a,b,c)=>{if(0===a.length)return alert("No data to download");let d=b.map(a=>a.header),e=new Blob([[d,...a.map(a=>b.map(b=>{let c=a[b.key],d=String((b.formatter?b.formatter(c):c)||"");return d.includes(",")||d.includes('"')?`"${d.replace(/"/g,'""')}"`:d}))].map(a=>a.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),f=window.URL.createObjectURL(e),g=document.createElement("a");g.href=f,g.download=`${c}.csv`,document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(f)})(g,f,`farmers_export${h}_${new Date().toISOString().split("T")[0]}`)})(c,d,e,a),aH(`${f} as CSV`)):(await ac(c,d,e,a),aH(`${f} as PDF`))}catch(a){console.error(`Error downloading ${b.toUpperCase()}:`,a),aF(`Failed to download ${b.toUpperCase()} file`)}finally{a9(!1)}},bS=async a=>{if(a.preventDefault(),!bA.farmerId||!bA.farmerId.trim()){aF("Please enter a farmer ID."),aH("");return}if(!bA.farmerName||!bA.farmerName.trim()){aF("Please enter the farmer name."),aH("");return}if(!bA.societyId){aF("Please select a society for the farmer."),aH("");return}if(!bA.machineId){aF("Please select a machine for the farmer."),aH("");return}aX(!0);try{let a=localStorage.getItem("authToken"),b=await fetch("/api/user/farmer",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({...bA,societyId:bA.societyId?parseInt(bA.societyId):null,bonus:Number(bA.bonus)})});if(b.ok)aJ(!1),bB({farmerId:"",rfId:"",farmerName:"",contactNumber:"",email:"",smsEnabled:"OFF",emailNotificationsEnabled:"ON",bonus:0,address:"",bankName:"",bankAccountNumber:"",ifscCode:"",societyId:"",machineId:"",status:"active",notes:""}),aH("Farmer created successfully"),aF(""),bC();else{let a=await b.json(),c=a.error||a.message||"Failed to create farmer";aZ({}),c.toLowerCase().includes("farmer id")&&c.toLowerCase().includes("already exists")?aZ({farmerId:"This Farmer ID already exists"}):c.toLowerCase().includes("farmer name")&&c.toLowerCase().includes("already exists")?aZ({farmerName:"This Farmer name already exists"}):c.toLowerCase().includes("email")&&c.toLowerCase().includes("already exists")?aZ({email:"This email address already exists"}):aF(c),aH("")}}catch(a){console.error("Error creating farmer:",a),aF("Error creating farmer. Please try again."),aH("")}finally{aX(!1)}},bT=async a=>{if(a.preventDefault(),aQ){if(!bA.farmerId||!bA.farmerId.trim()){aF("Please enter a farmer ID."),aH("");return}if(!bA.farmerName||!bA.farmerName.trim()){aF("Please enter the farmer name."),aH("");return}if(!bA.societyId){aF("Please select a society for the farmer."),aH("");return}if(!bA.machineId){aF("Please select a machine for the farmer."),aH("");return}aX(!0);try{let a=localStorage.getItem("authToken"),b=await fetch("/api/user/farmer",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({id:aQ.id,...bA,societyId:bA.societyId?parseInt(bA.societyId):null,bonus:Number(bA.bonus)})});if(b.ok)aL(!1),aR(null),bB({farmerId:"",rfId:"",farmerName:"",contactNumber:"",email:"",smsEnabled:"OFF",emailNotificationsEnabled:"ON",bonus:0,address:"",bankName:"",bankAccountNumber:"",ifscCode:"",societyId:"",machineId:"",status:"active",notes:""}),aH("Farmer updated successfully"),aF(""),bC();else{let a=await b.json(),c=a.error||a.message||"Failed to update farmer";aZ({}),c.toLowerCase().includes("farmer id")&&c.toLowerCase().includes("already exists")?aZ({farmerId:"This Farmer ID already exists"}):c.toLowerCase().includes("farmer name")&&c.toLowerCase().includes("already exists")?aZ({farmerName:"This Farmer name already exists"}):c.toLowerCase().includes("email")&&c.toLowerCase().includes("already exists")?aZ({email:"This email address already exists"}):aF(c),aH("")}}catch(a){console.error("Error updating farmer:",a),aF("Error updating farmer. Please try again."),aH("")}finally{aX(!1)}}},bU=async a=>{if(a.preventDefault(),aS){if(!aU){aF("Please select a default society for bulk upload."),aH("");return}aX(!0);try{let a=(await aS.text()).split("\n").filter(a=>a.trim()),b=a[0].split(",").map(a=>a.trim().replace(/"/g,"")),c=a.slice(1).map(a=>{let c=a.split(",").map(a=>a.trim().replace(/"/g,"")),d={};return b.forEach((a,b)=>{let e=c[b]||"";switch(a.toLowerCase()){case"id":case"farmer_id":case"farmerid":d.farmerId=e;break;case"rf-id":case"rfid":case"rf_id":d.rfId=e;break;case"name":case"farmer_name":case"farmername":d.farmerName=e;break;case"mobile":case"phone":case"contact":case"contact_number":d.contactNumber=e;break;case"sms":case"sms_enabled":d.smsEnabled="ON"===e.toUpperCase()?"ON":"OFF";break;case"bonus":d.bonus=parseFloat(e)||0;break;case"address":d.address=e;break;case"bank_name":case"bankname":d.bankName=e;break;case"bank_account_number":case"account_number":case"accountnumber":d.bankAccountNumber=e;break;case"ifsc_code":case"ifsc":d.ifscCode=e;break;case"society_id":case"societyid":case"society":let f=parseInt(e);f&&!isNaN(f)&&(d.societyId=f);break;case"machine-id":case"machine_id":case"machineid":let g=parseInt(e);g&&!isNaN(g)&&(d.machineId=g)}}),d.societyId||(d.societyId=parseInt(aU)),d}).filter(a=>a.farmerId&&a.farmerName),d=localStorage.getItem("authToken"),e=await fetch("/api/user/farmer",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({farmers:c})});if(e.ok)aN(!1),aT(null),aV(""),aH("Farmers uploaded successfully"),aF(""),bC();else{let a=await e.json();aF(a.error||"Failed to upload farmers"),aH("")}}catch(a){console.error("Error uploading farmers:",a),aF("Error uploading farmers. Please try again."),aH("")}finally{aX(!1)}}},bV=()=>{bB({farmerId:"",rfId:"",farmerName:"",contactNumber:"",email:"",smsEnabled:"OFF",emailNotificationsEnabled:"ON",bonus:0,address:"",bankName:"",bankAccountNumber:"",ifscCode:"",societyId:"",machineId:"",status:"active",notes:""}),aJ(!0),aF(""),aH(""),aZ({})},bW=a=>{aR(a);let b=a.societyId?.toString()||"";bB({farmerId:a.farmerId,rfId:a.rfId||"",farmerName:a.farmerName,contactNumber:a.contactNumber||"",email:a.email||"",smsEnabled:a.smsEnabled,emailNotificationsEnabled:a.emailNotificationsEnabled||"ON",bonus:a.bonus,address:a.address||"",bankName:a.bankName||"",bankAccountNumber:a.bankAccountNumber||"",ifscCode:a.ifscCode||"",societyId:b,machineId:a.machineId?.toString()||"",status:a.status,notes:a.notes||""}),b&&bK(b),aL(!0),aF(""),aH(""),aZ({})},bX=()=>{aJ(!1),bB({farmerId:"",rfId:"",farmerName:"",contactNumber:"",email:"",smsEnabled:"OFF",emailNotificationsEnabled:"ON",bonus:0,address:"",bankName:"",bankAccountNumber:"",ifscCode:"",societyId:"",machineId:"",status:"active",notes:""}),aF(""),aH("")},bY=()=>{aL(!1),aR(null),bB({farmerId:"",rfId:"",farmerName:"",contactNumber:"",email:"",smsEnabled:"OFF",emailNotificationsEnabled:"ON",bonus:0,address:"",bankName:"",bankAccountNumber:"",ifscCode:"",societyId:"",machineId:"",status:"active",notes:""}),aF(""),aH("")};(0,c.useEffect)(()=>{bC(),bH(),bI(),bG(),bJ(),bD()},[bC,bD]);let bZ=ae.filter(a=>{if(!(""===aC||a.farmerName.toLowerCase().includes(aC.toLowerCase())||a.farmerId.toLowerCase().includes(aC.toLowerCase())||a.contactNumber?.toLowerCase().includes(aC.toLowerCase())||a.rfId?.toLowerCase().includes(aC.toLowerCase())||a.societyName?.toLowerCase().includes(aC.toLowerCase())||a.societyIdentifier?.toLowerCase().includes(aC.toLowerCase())||a.address?.toLowerCase().includes(aC.toLowerCase())||a.bankName?.toLowerCase().includes(aC.toLowerCase())||a.bankAccountNumber?.toLowerCase().includes(aC.toLowerCase())||a.ifscCode?.toLowerCase().includes(aC.toLowerCase())||a.notes?.toLowerCase().includes(aC.toLowerCase()))||"all"!==as&&a.status!==as)return!1;let b=ag.find(b=>b.id===a.societyId),c=b?.bmc_id?am.find(a=>a.id===b.bmc_id):null,d=c?.dairyFarmId?ak.find(a=>a.id===c.dairyFarmId):null;if(au.length>0&&(!d||!au.includes(d.id.toString()))||aw.length>0&&(!c||!aw.includes(c.id.toString()))||ay.length>0&&(!a.societyId||!ay.includes(a.societyId.toString())))return!1;if(aA.length>0){let b=a.machineId?.toString();if(!b||!aA.includes(b))return!1}return!0}),b$=(0,c.useMemo)(()=>{let a=new Set(ae.filter(a=>{if(!(""===aC||a.farmerName?.toLowerCase().includes(aC.toLowerCase())||a.farmerId?.toLowerCase().includes(aC.toLowerCase())||a.contactNumber?.toLowerCase().includes(aC.toLowerCase())||a.rfId?.toLowerCase().includes(aC.toLowerCase())||a.societyName?.toLowerCase().includes(aC.toLowerCase())||a.societyIdentifier?.toLowerCase().includes(aC.toLowerCase())||a.address?.toLowerCase().includes(aC.toLowerCase())||a.bankName?.toLowerCase().includes(aC.toLowerCase())||a.bankAccountNumber?.toLowerCase().includes(aC.toLowerCase())||a.ifscCode?.toLowerCase().includes(aC.toLowerCase())||a.notes?.toLowerCase().includes(aC.toLowerCase()))||"all"!==as&&a.status!==as)return!1;if(aA.length>0){let b=a.machineId?.toString();if(!b||!aA.includes(b))return!1}return!0}).map(a=>a.societyId).filter(Boolean));return ag.filter(b=>a.has(b.id))},[ae,ag,aC,as,aA]),b_=(0,c.useMemo)(()=>{let a=new Set(ae.filter(a=>!!(""===aC||a.farmerName?.toLowerCase().includes(aC.toLowerCase())||a.farmerId?.toLowerCase().includes(aC.toLowerCase())||a.contactNumber?.toLowerCase().includes(aC.toLowerCase())||a.rfId?.toLowerCase().includes(aC.toLowerCase())||a.societyName?.toLowerCase().includes(aC.toLowerCase())||a.societyIdentifier?.toLowerCase().includes(aC.toLowerCase())||a.address?.toLowerCase().includes(aC.toLowerCase())||a.bankName?.toLowerCase().includes(aC.toLowerCase())||a.bankAccountNumber?.toLowerCase().includes(aC.toLowerCase())||a.ifscCode?.toLowerCase().includes(aC.toLowerCase())||a.notes?.toLowerCase().includes(aC.toLowerCase()))&&("all"===as||a.status===as)&&(!(ay.length>0)||!!ay.includes(a.societyId?.toString()||""))).map(a=>a.machineId).filter(Boolean));return ai.filter(b=>a.has(b.id))},[ae,ai,aC,as,ay]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S.LoadingSnackbar,{isVisible:aW||be||bg||ba,message:aW?aQ?$.farmerManagement.updatingFarmer:$.farmerManagement.addingFarmer:ba?$.farmerManagement.deletingFarmers:bg?$.farmerManagement.updatingFarmers:$.farmerManagement.updatingStatus,submessage:$.farmerManagement.pleaseWait,progress:bg||ba?bi:void 0,showProgress:bg||ba}),(0,b.jsxs)("div",{className:"p-3 xs:p-4 sm:p-6 lg:p-8 space-y-3 xs:space-y-4 sm:space-y-6 lg:pb-8",children:[(0,b.jsx)(W.ManagementPageHeader,{title:$.farmerManagement.title,subtitle:$.farmerManagement.subtitle,icon:(0,b.jsx)(f.Users,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"}),onRefresh:bC,hasData:bZ.length>0}),(0,b.jsx)(L.StatusMessage,{success:aG,error:aE}),(by.topCollector||by.bestFat||by.topRevenue)&&(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3 sm:gap-4",children:[by.topCollector&&(0,b.jsxs)("div",{onClick:()=>bF("quantity"),className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-4 rounded-lg border border-green-200 dark:border-green-700 hover:shadow-lg transition-shadow cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-green-900 dark:text-green-100",children:"Top Collector (30d)"}),(0,b.jsx)(r.Droplets,{className:"w-5 h-5 text-green-600 dark:text-green-400"})]}),(0,b.jsx)("p",{className:"text-lg font-bold text-green-800 dark:text-green-200 truncate",children:by.topCollector.farmer.farmerName}),(0,b.jsxs)("p",{className:"text-xs text-green-700 dark:text-green-300 truncate",children:["ID: ",by.topCollector.farmer.farmerId]}),by.topCollector.farmer.societyName&&(0,b.jsx)("p",{className:"text-xs text-green-600 dark:text-green-400 truncate",children:by.topCollector.farmer.societyName}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-green-600 dark:text-green-400 mt-1",children:[by.topCollector.totalQuantity.toFixed(2)," L"]})]}),by.topRevenue&&(0,b.jsxs)("div",{onClick:()=>bF("revenue"),className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700 hover:shadow-lg transition-shadow cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Top Earner (30d)"}),(0,b.jsx)(s.TrendingUp,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})]}),(0,b.jsx)("p",{className:"text-lg font-bold text-blue-800 dark:text-blue-200 truncate",children:by.topRevenue.farmer.farmerName}),(0,b.jsxs)("p",{className:"text-xs text-blue-700 dark:text-blue-300 truncate",children:["ID: ",by.topRevenue.farmer.farmerId]}),by.topRevenue.farmer.societyName&&(0,b.jsx)("p",{className:"text-xs text-blue-600 dark:text-blue-400 truncate",children:by.topRevenue.farmer.societyName}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400 mt-1",children:["â‚¹",by.topRevenue.totalAmount.toFixed(2)]})]}),by.bestFat&&(0,b.jsxs)("div",{onClick:()=>bF("fat"),className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-4 rounded-lg border border-purple-200 dark:border-purple-700 hover:shadow-lg transition-shadow cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-purple-900 dark:text-purple-100",children:"Best Fat (30d)"}),(0,b.jsx)(t.Award,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})]}),(0,b.jsx)("p",{className:"text-lg font-bold text-purple-800 dark:text-purple-200 truncate",children:by.bestFat.farmer.farmerName}),(0,b.jsxs)("p",{className:"text-xs text-purple-700 dark:text-purple-300 truncate",children:["ID: ",by.bestFat.farmer.farmerId]}),by.bestFat.farmer.societyName&&(0,b.jsx)("p",{className:"text-xs text-purple-600 dark:text-purple-400 truncate",children:by.bestFat.farmer.societyName}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-purple-600 dark:text-purple-400 mt-1",children:[by.bestFat.avgFat.toFixed(2),"% Fat"]})]}),by.bestSnf&&(0,b.jsxs)("div",{onClick:()=>bF("snf"),className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 p-4 rounded-lg border border-orange-200 dark:border-orange-700 hover:shadow-lg transition-shadow cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-orange-900 dark:text-orange-100",children:"Best SNF (30d)"}),(0,b.jsx)(u.BarChart3,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})]}),(0,b.jsx)("p",{className:"text-lg font-bold text-orange-800 dark:text-orange-200 truncate",children:by.bestSnf.farmer.farmerName}),(0,b.jsxs)("p",{className:"text-xs text-orange-700 dark:text-orange-300 truncate",children:["ID: ",by.bestSnf.farmer.farmerId]}),by.bestSnf.farmer.societyName&&(0,b.jsx)("p",{className:"text-xs text-orange-600 dark:text-orange-400 truncate",children:by.bestSnf.farmer.societyName}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-orange-600 dark:text-orange-400 mt-1",children:[by.bestSnf.avgSnf.toFixed(2),"% SNF"]})]}),by.mostActive&&(0,b.jsxs)("div",{onClick:()=>bF("collections"),className:"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 p-4 rounded-lg border border-pink-200 dark:border-pink-700 hover:shadow-lg transition-shadow cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-pink-900 dark:text-pink-100",children:"Most Active (30d)"}),(0,b.jsx)(f.Users,{className:"w-5 h-5 text-pink-600 dark:text-pink-400"})]}),(0,b.jsx)("p",{className:"text-lg font-bold text-pink-800 dark:text-pink-200 truncate",children:by.mostActive.farmer.farmerName}),(0,b.jsxs)("p",{className:"text-xs text-pink-700 dark:text-pink-300 truncate",children:["ID: ",by.mostActive.farmer.farmerId]}),by.mostActive.farmer.societyName&&(0,b.jsx)("p",{className:"text-xs text-pink-600 dark:text-pink-400 truncate",children:by.mostActive.farmer.societyName}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-pink-600 dark:text-pink-400 mt-1",children:[by.mostActive.totalCollections," Collections"]})]}),by.bestQuality&&(0,b.jsxs)("div",{onClick:()=>bF("rate"),className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-4 rounded-lg border border-indigo-200 dark:border-indigo-700 hover:shadow-lg transition-shadow cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-indigo-900 dark:text-indigo-100",children:"Best Rate (30d)"}),(0,b.jsx)(t.Award,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})]}),(0,b.jsx)("p",{className:"text-lg font-bold text-indigo-800 dark:text-indigo-200 truncate",children:by.bestQuality.farmer.farmerName}),(0,b.jsxs)("p",{className:"text-xs text-indigo-700 dark:text-indigo-300 truncate",children:["ID: ",by.bestQuality.farmer.farmerId]}),by.bestQuality.farmer.societyName&&(0,b.jsx)("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 truncate",children:by.bestQuality.farmer.societyName}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-indigo-600 dark:text-indigo-400 mt-1",children:["â‚¹",by.bestQuality.avgRate.toFixed(2),"/L"]})]})]}),(0,b.jsx)(V.StatsGrid,{allItems:ae,filteredItems:bZ,hasFilters:"all"!==as||au.length>0||aw.length>0||ay.length>0||aA.length>0,onStatusFilterChange:a=>at(a),currentStatusFilter:as}),(0,b.jsx)(U.FilterDropdown,{statusFilter:as,onStatusChange:a=>at(a),dairyFilter:au,onDairyChange:a=>av(Array.isArray(a)?a:[a]),bmcFilter:aw,onBmcChange:a=>ax(Array.isArray(a)?a:[a]),societyFilter:ay,onSocietyChange:a=>az(Array.isArray(a)?a:[a]),machineFilter:aA,onMachineChange:a=>aB(Array.isArray(a)?a:[a]),dairies:ak,bmcs:am,societies:b$,machines:b_,filteredCount:bZ.length,totalCount:ae.length,searchQuery:aC,onSearchChange:aD,icon:(0,b.jsx)(f.Users,{className:"w-5 h-5"}),hideMainFilterButton:!0}),bZ.length>0&&(0,b.jsxs)("div",{className:"flex flex-col xs:flex-row items-start xs:items-center justify-between gap-3 bg-white dark:bg-gray-800 p-3 sm:p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:a0,onChange:()=>{a0?(a_(new Set),bp(new Set),a1(!1)):(a_(new Set(bZ.map(a=>a.id))),bp(new Set(bZ.reduce((a,b)=>{let c=b.societyId||0;return a.includes(c)||a.push(c),a},[]))),a1(!0))},className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,b.jsxs)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[$.farmerManagement.selectAll," ",bZ.length," ",1===bZ.length?$.roles.farmer:$.farmerManagement.farmers,("all"!==as||au.length>0||aw.length>0||ay.length>0||aA.length>0)&&` (${$.common.filter.toLowerCase()})`]})]}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsx)(T.ViewModeToggle,{viewMode:bm,onViewModeChange:bn,folderLabel:"Folder View",listLabel:"Grid View"})})]}),ao?(0,b.jsx)("div",{className:"flex items-center justify-center py-12 sm:py-20",children:(0,b.jsx)(F.FlowerSpinner,{size:40})}):bZ.length>0?"folder"===bm?(0,b.jsx)("div",{className:"space-y-4",children:Object.values(bZ.reduce((a,b)=>{let c=b.societyId||0,d=b.societyName||"Unassigned",e=b.societyIdentifier||"N/A";return a[c]||(a[c]={id:c,name:d,identifier:e,farmers:[]}),a[c].farmers.push(b),a},{})).sort((a,b)=>a.name.localeCompare(b.name)).map(a=>{let c=bk.has(a.id),d=bo.has(a.id),e=a.farmers.length,j=a.farmers.filter(a=>"active"===a.status).length,p=a.farmers.filter(a=>"inactive"===a.status).length,q=a.farmers.map(a=>a.id);return(0,b.jsxs)("div",{className:`relative bg-white dark:bg-gray-800 rounded-lg border-2 transition-colors hover:z-10 ${d?"border-blue-500 dark:border-blue-400":"border-gray-200 dark:border-gray-700"}`,children:[(0,b.jsxs)("div",{className:"flex items-center p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[(0,b.jsx)("div",{onClick:b=>{var c;b.stopPropagation(),c=a.id,bp(a=>{let b=new Set(a);return b.has(c)?(b.delete(c),a_(a=>{let b=new Set(a);return q.forEach(a=>b.delete(a)),a1(!1),b})):(b.add(c),a_(a=>{let b=new Set(a);return q.forEach(a=>b.add(a)),Array.from(new Set(bZ.map(a=>a.id))).every(a=>b.has(a))&&a1(!0),b})),b})},className:"flex items-center mr-3 cursor-pointer",children:(0,b.jsx)("input",{type:"checkbox",checked:d,onChange:()=>{},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 cursor-pointer"})}),(0,b.jsxs)("button",{onClick:()=>{var b;return b=a.id,void bl(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c})},className:"flex-1 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[c?(0,b.jsx)(n.ChevronDown,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}):(0,b.jsx)(o.ChevronRight,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),c?(0,b.jsx)(m.FolderOpen,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}):(0,b.jsx)(l.Folder,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:a.name}),(0,b.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:["ID: ",a.identifier]})]})]}),(0,b.jsx)("div",{className:"flex items-center space-x-4",children:(0,b.jsx)("div",{className:"flex items-center space-x-2",children:(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[(0,b.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"}),(0,b.jsx)("span",{children:j})]}),(0,b.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500"}),(0,b.jsx)("span",{children:p})]})]}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e," ",1===e?"farmer":"farmers"]})]})})})]})]}),c&&(0,b.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-900/30",children:(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.farmers.map(a=>(0,b.jsx)("div",{className:"relative hover:z-20",children:(0,b.jsx)(M.ItemCard,{id:a.id,name:a.farmerName,identifier:`ID: ${a.farmerId}`,status:a.status,icon:(0,b.jsx)(f.Users,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 dark:text-blue-400"}),details:[...a.contactNumber?[{icon:(0,b.jsx)(h.Phone,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),text:a.contactNumber}]:[],...a.email?[{icon:(0,b.jsx)(i.Mail,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),text:a.email}]:[],...a.machineName||a.machineType?[{icon:(0,b.jsx)(k.Settings,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),text:a.machineType&&a.machineName?`${a.machineType} (${a.machineName})`:a.machineName||a.machineType||"Machine Not Assigned",highlight:!a.machineName&&void 0}]:[{icon:(0,b.jsx)(k.Settings,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400"}),text:"No Machine Assigned",className:"text-gray-500 dark:text-gray-400"}],{icon:(0,b.jsx)(g.UserCheck,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),text:`Bonus: ${a.bonus}`}],onStatusChange:b=>bL(a.id,b),onView:()=>_.push(`/admin/farmer/${a.id}`),onEdit:()=>bW(a),onDelete:()=>bM(a.id),viewText:"View Details",selectable:!0,selected:a$.has(a.id),onSelect:()=>bO(a.id),searchQuery:aC})},a.id))})})]},a.id)})}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:bZ.map(a=>(0,b.jsx)(M.ItemCard,{id:a.id,name:a.farmerName,identifier:`ID: ${a.farmerId}`,status:a.status,icon:(0,b.jsx)(f.Users,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 dark:text-blue-400"}),details:[...a.contactNumber?[{icon:(0,b.jsx)(h.Phone,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),text:a.contactNumber}]:[],...a.email?[{icon:(0,b.jsx)(i.Mail,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),text:a.email}]:[],...a.societyName?[{icon:(0,b.jsx)(j.Building2,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),text:a.societyIdentifier?`${a.societyName} (${a.societyIdentifier})`:a.societyName,highlight:!0}]:[],...a.machineName||a.machineType?[{icon:(0,b.jsx)(k.Settings,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),text:a.machineType&&a.machineName?`${a.machineType} (${a.machineName})`:a.machineName||a.machineType||"Machine Not Assigned",highlight:!a.machineName&&void 0}]:[{icon:(0,b.jsx)(k.Settings,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400"}),text:"No Machine Assigned",className:"text-gray-500 dark:text-gray-400"}],{icon:(0,b.jsx)(g.UserCheck,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),text:`Bonus: ${a.bonus}`}],onStatusChange:b=>bL(a.id,b),onView:()=>_.push(`/admin/farmer/${a.id}`),onEdit:()=>bW(a),onDelete:()=>bM(a.id),viewText:"View Details",selectable:!0,selected:a$.has(a.id),onSelect:()=>bO(a.id),searchQuery:aC},a.id))}):(0,b.jsx)(N.EmptyState,{icon:(0,b.jsx)(f.Users,{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-400"}),title:0===ae.length?$.farmerManagement.noFarmersFound:$.farmerManagement.noMatchingFarmers,message:0===ae.length?$.farmerManagement.getStartedMessage:aC?`${$.farmerManagement.noMatchingFarmers}. ${$.farmerManagement.tryChangingFilters}`:$.farmerManagement.tryChangingFilters,actionText:0===ae.length?$.farmerManagement.addFarmer:void 0,onAction:0===ae.length?bV:void 0,showAction:0===ae.length})]}),(0,b.jsx)(G.FormModal,{isOpen:aI,onClose:bX,title:$.farmerManagement.addFarmer,children:(0,b.jsxs)("form",{onSubmit:bS,className:"space-y-4 sm:space-y-6",children:[(0,b.jsxs)(K.FormGrid,{children:[(0,b.jsx)(H.FormInput,{label:$.farmerManagement.farmerId,type:"text",value:bA.farmerId,onChange:a=>{let b=a.replace(/[^0-9]/g,"");bB({...bA,farmerId:b})},placeholder:$.farmerManagement.enterFarmerId,required:!0,error:aY.farmerId}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.farmerName,type:"text",value:bA.farmerName,onChange:a=>bB({...bA,farmerName:a}),placeholder:$.farmerManagement.enterFarmerName,required:!0,error:aY.farmerName}),(0,b.jsx)(I.FormSelect,{label:$.farmerManagement.society,value:bA.societyId,onChange:a=>{bB({...bA,societyId:a,machineId:""}),bK(a)},options:ag.map(a=>({value:a.id.toString(),label:`${a.name} (${a.society_id})`})),placeholder:$.farmerManagement.selectSociety,required:!0,colSpan:1}),(0,b.jsx)(I.FormSelect,{label:$.farmerManagement.machine,value:bA.machineId,onChange:a=>bB({...bA,machineId:a}),options:ai.map(a=>({value:a.id.toString(),label:`${a.machineId} - ${a.machineType}`})),placeholder:aq?$.common.loading:ai.length>0?$.farmerManagement.selectMachine:$.farmerManagement.unassigned,disabled:aq,required:!0,colSpan:1,className:"sm:max-w-[320px]"}),bA.societyId&&!aq&&0===ai.length&&(0,b.jsx)("div",{className:"col-span-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:["No machines found for this society. You can ",(0,b.jsx)("strong",{children:"add machines first"})," from the Machine Management section, or proceed without assigning a machine."]})}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.contactNumber,type:"tel",value:bA.contactNumber,onChange:a=>{let b=(0,D.formatPhoneInput)(a);bB({...bA,contactNumber:b})},onBlur:()=>{let a=(0,D.validatePhoneOnBlur)(bA.contactNumber);if(a)aZ(b=>({...b,contactNumber:a}));else{let{contactNumber:a,...b}=aY;aZ(b)}},placeholder:$.farmerManagement.enterContactNumber,error:aY.contactNumber}),(0,b.jsx)(H.FormInput,{label:"Email",type:"email",value:bA.email,onChange:a=>bB({...bA,email:a}),onBlur:()=>{let a=(0,E.validateEmailOnBlur)(bA.email);if(a)aZ(b=>({...b,email:a}));else{let{email:a,...b}=aY;aZ(b)}},placeholder:"Enter Email Address",error:aY.email}),(0,b.jsx)(I.FormSelect,{label:$.farmerManagement.smsEnabled,value:bA.smsEnabled,onChange:a=>bB({...bA,smsEnabled:a}),options:[{value:"OFF",label:"OFF"},{value:"ON",label:"ON"}],placeholder:$.farmerManagement.selectStatus}),(0,b.jsx)(I.FormSelect,{label:"Email Notifications",value:bA.emailNotificationsEnabled,onChange:a=>bB({...bA,emailNotificationsEnabled:a}),options:[{value:"OFF",label:"OFF"},{value:"ON",label:"ON"}],placeholder:"Select Option"}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.rfId,type:"text",value:bA.rfId,onChange:a=>bB({...bA,rfId:a}),placeholder:$.farmerManagement.enterRfId}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.bonus,type:"number",value:bA.bonus,onChange:a=>bB({...bA,bonus:Number(a)}),placeholder:$.farmerManagement.enterBonus}),(0,b.jsx)(I.FormSelect,{label:$.farmerManagement.status,value:bA.status,onChange:a=>bB({...bA,status:a}),options:[{value:"active",label:$.farmerManagement.active},{value:"inactive",label:$.farmerManagement.inactive},{value:"suspended",label:$.farmerManagement.suspended},{value:"maintenance",label:$.farmerManagement.maintenance}],placeholder:$.farmerManagement.selectStatus}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.bankName,type:"text",value:bA.bankName,onChange:a=>bB({...bA,bankName:a}),placeholder:$.farmerManagement.enterBankName}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.bankAccountNumber,type:"number",value:bA.bankAccountNumber,onChange:a=>{let b=a.replace(/\D/g,"");bB({...bA,bankAccountNumber:b})},placeholder:$.farmerManagement.enterAccountNumber,pattern:"[0-9]*",inputMode:"numeric"}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.ifscCode,type:"text",value:bA.ifscCode,onChange:a=>bB({...bA,ifscCode:a}),placeholder:$.farmerManagement.enterIfscCode}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.address,type:"text",value:bA.address,onChange:a=>bB({...bA,address:a}),placeholder:$.farmerManagement.enterAddress}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.notes,type:"text",value:bA.notes,onChange:a=>bB({...bA,notes:a}),placeholder:$.farmerManagement.enterNotes})]}),(0,b.jsx)(J.FormActions,{onCancel:bX,submitText:$.farmerManagement.createFarmer,isLoading:aW,isSubmitDisabled:!bA.societyId||!bA.machineId||!bA.farmerId||!bA.farmerName||Object.values(aY).some(a=>""!==a),submitType:"submit"})]})}),(0,b.jsx)(G.FormModal,{isOpen:aK&&!!aQ,onClose:bY,title:$.farmerManagement.editFarmer,children:(0,b.jsxs)("form",{onSubmit:bT,className:"space-y-4 sm:space-y-6",children:[(0,b.jsxs)(K.FormGrid,{children:[(0,b.jsx)(H.FormInput,{label:$.farmerManagement.farmerId,type:"text",value:bA.farmerId,onChange:a=>bB({...bA,farmerId:a}),placeholder:$.farmerManagement.enterUniqueFarmerId,required:!0,readOnly:!0,colSpan:1,error:aY.farmerId}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.farmerName,type:"text",value:bA.farmerName,onChange:a=>bB({...bA,farmerName:a}),placeholder:$.farmerManagement.enterFarmerFullName,required:!0,colSpan:1,error:aY.farmerName}),(0,b.jsx)(I.FormSelect,{label:$.farmerManagement.society,value:bA.societyId,onChange:a=>{bB({...bA,societyId:a,machineId:""}),bK(a.toString())},options:ag.map(a=>({value:a.id,label:`${a.name} (${a.society_id})`})),placeholder:$.farmerManagement.selectSociety,required:!0,colSpan:1}),(0,b.jsx)(I.FormSelect,{label:$.farmerManagement.machine,value:bA.machineId,onChange:a=>bB({...bA,machineId:a}),options:ai.map(a=>({value:a.id.toString(),label:`${a.machineId} - ${a.machineType}`})),placeholder:aq?$.common.loading:ai.length>0?$.farmerManagement.selectMachine:$.farmerManagement.noMachinesAvailable,disabled:aq,required:!0,colSpan:1,className:"sm:max-w-[320px]"}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.rfId,type:"text",value:bA.rfId,onChange:a=>bB({...bA,rfId:a}),placeholder:$.farmerManagement.enterRfIdOptional,colSpan:1}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.contactNumber,type:"tel",value:bA.contactNumber,onChange:a=>{let b=(0,D.formatPhoneInput)(a);bB({...bA,contactNumber:b}),aY.contactNumber&&aZ({...aY,contactNumber:""})},onBlur:()=>{let a=(0,D.validatePhoneOnBlur)(bA.contactNumber);a&&aZ({...aY,contactNumber:a})},error:aY.contactNumber,placeholder:$.farmerManagement.enterMobileNumber,colSpan:1}),(0,b.jsx)(H.FormInput,{label:"Email",type:"email",value:bA.email,onChange:a=>{bB({...bA,email:a}),aY.email&&aZ({...aY,email:""})},onBlur:()=>{let a=(0,E.validateEmailOnBlur)(bA.email);a&&aZ({...aY,email:a})},error:aY.email,placeholder:"Enter email address",colSpan:1}),(0,b.jsx)(I.FormSelect,{label:$.farmerManagement.smsEnabled,value:bA.smsEnabled,onChange:a=>bB({...bA,smsEnabled:a}),options:[{value:"OFF",label:"OFF"},{value:"ON",label:"ON"}],colSpan:1}),(0,b.jsx)(I.FormSelect,{label:"Email Notifications",value:bA.emailNotificationsEnabled,onChange:a=>bB({...bA,emailNotificationsEnabled:a}),options:[{value:"OFF",label:"OFF"},{value:"ON",label:"ON"}],colSpan:1}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.bonus,type:"number",value:bA.bonus,onChange:a=>bB({...bA,bonus:parseFloat(a)||0}),placeholder:$.farmerManagement.enterBonus,colSpan:1}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.address,type:"text",value:bA.address,onChange:a=>bB({...bA,address:a}),placeholder:$.farmerManagement.enterFarmerAddress,colSpan:2}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.bankName,type:"text",value:bA.bankName,onChange:a=>bB({...bA,bankName:a}),placeholder:$.farmerManagement.enterBankName,colSpan:1}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.bankAccountNumber,type:"number",value:bA.bankAccountNumber,onChange:a=>{let b=a.replace(/\D/g,"");bB({...bA,bankAccountNumber:b})},placeholder:$.farmerManagement.enterAccountNumber,pattern:"[0-9]*",inputMode:"numeric",colSpan:1}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.ifscCode,type:"text",value:bA.ifscCode,onChange:a=>bB({...bA,ifscCode:a.toUpperCase()}),placeholder:$.farmerManagement.enterIfscCode,colSpan:1}),(0,b.jsx)(I.FormSelect,{label:$.farmerManagement.status,value:bA.status,onChange:a=>bB({...bA,status:a}),options:[{value:"active",label:$.farmerManagement.active},{value:"inactive",label:$.farmerManagement.inactive},{value:"suspended",label:$.farmerManagement.suspended},{value:"maintenance",label:$.farmerManagement.maintenance}],colSpan:1}),(0,b.jsx)(H.FormInput,{label:$.farmerManagement.notes,type:"text",value:bA.notes,onChange:a=>bB({...bA,notes:a}),placeholder:$.farmerManagement.enterNotes,colSpan:2})]}),(0,b.jsx)(J.FormActions,{onCancel:bY,submitText:$.farmerManagement.updateFarmer,isLoading:aW,isSubmitDisabled:!bA.societyId||!bA.machineId||!bA.farmerId||!bA.farmerName||Object.values(aY).some(a=>""!==a),submitType:"submit"})]})}),(0,b.jsx)(G.FormModal,{isOpen:aM,onClose:()=>{aN(!1),aV(""),aT(null)},title:"Bulk Upload Farmers",children:(0,b.jsxs)("form",{onSubmit:bU,className:"space-y-4",children:[(0,b.jsx)(I.FormSelect,{label:"Default Society",value:aU,onChange:a=>aV(a),options:[...ag.map(a=>({value:a.id.toString(),label:`${a.name} (${a.society_id})`}))],placeholder:"Select Society",required:!0}),(0,b.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:(0,b.jsx)("p",{children:"This society will be assigned to all farmers that don't have a society_id in the CSV"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CSV File"}),(0,b.jsx)("input",{type:"file",accept:".csv",onChange:a=>aT(a.target.files?.[0]||null),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,b.jsx)("p",{className:"font-medium mb-2",children:"CSV Format Requirements:"}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,b.jsx)("li",{children:"Headers: ID, RF-ID, NAME, MOBILE, SMS, BONUS (minimum)"}),(0,b.jsx)("li",{children:"Optional: ADDRESS, BANK_NAME, ACCOUNT_NUMBER, IFSC_CODE, SOCIETY_ID, MACHINE-ID"}),(0,b.jsx)("li",{children:"SMS values: ON or OFF"}),(0,b.jsx)("li",{children:"MACHINE-ID should be a valid machine ID (optional)"}),(0,b.jsx)("li",{children:"All farmers must have a society - either from CSV SOCIETY_ID or the default above"}),(0,b.jsx)("li",{children:"File should be UTF-8 encoded"})]})]}),(0,b.jsx)(J.FormActions,{onCancel:()=>aN(!1),submitText:"Upload Farmers",isLoading:aW,isSubmitDisabled:!aS||!aU,submitType:"submit"})]})}),(0,b.jsx)(P.BulkDeleteConfirmModal,{isOpen:a2,onClose:()=>a3(!1),onConfirm:bP,itemCount:a$.size,itemType:"farmer",hasFilters:"all"!==as||au.length>0||aw.length>0||ay.length>0}),(0,b.jsx)(Y.default,{isOpen:aO,onClose:()=>aP(!1),societies:ag,onUploadComplete:()=>{bC(),aH("CSV upload completed successfully!")}}),(0,b.jsx)(O.default,{isOpen:bc,onClose:()=>bd(!1),onDownload:bR,availableColumns:ab().map(a=>({key:a.key,label:a.header,required:["farmerId"].includes(a.key)})),defaultColumns:["farmerId","rfId","farmerName","contactNumber","smsEnabled","bonus"],title:"Select Columns for Farmer Download",isDownloading:a8}),(0,b.jsx)(R.BulkActionsToolbar,{selectedCount:a$.size,totalCount:ae.length,onBulkDelete:()=>a3(!0),onBulkDownload:()=>{0===a$.size?aF("No farmers selected"):bd(!0)},onBulkStatusUpdate:bQ,onClearSelection:()=>{a_(new Set),bp(new Set),a1(!1)},itemType:"farmer",showStatusUpdate:!0,currentBulkStatus:bw,onBulkStatusChange:a=>bx(a)}),(0,b.jsx)(Q.ConfirmDeleteModal,{isOpen:a6,onClose:()=>{a7(!1),a5(null)},onConfirm:bN,itemName:a4?.farmerId||"",title:"Delete Farmer",message:"Are you sure you want to permanently delete farmer",confirmText:$.common.delete,cancelText:$.common.cancel}),(0,b.jsx)(X.FloatingActionButton,{actions:[{icon:(0,b.jsx)(p.Plus,{className:"w-6 h-6 text-white"}),label:$.farmerManagement.addFarmer,onClick:bV,color:"bg-gradient-to-br from-emerald-500 to-emerald-600"},{icon:(0,b.jsx)(q.Upload,{className:"w-6 h-6 text-white"}),label:$.farmerManagement.uploadCSV,onClick:()=>aP(!0),color:"bg-gradient-to-br from-blue-500 to-blue-600"}]}),bq&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(u.BarChart3,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),(0,b.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["quantity"===bs&&"Top Collectors - Last 30 Days","revenue"===bs&&"Top Earners - Last 30 Days","fat"===bs&&"Best Fat Percentage - Last 30 Days","snf"===bs&&"Best SNF Percentage - Last 30 Days","collections"===bs&&"Most Active Farmers - Last 30 Days","rate"===bs&&"Best Rates - Last 30 Days"]})]}),(0,b.jsx)("button",{onClick:()=>br(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,b.jsx)(v.X,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(a=()=>{switch(bs){case"quantity":return"#10b981";case"revenue":return"#3b82f6";case"fat":return"#8b5cf6";case"snf":return"#f59e0b";case"collections":return"#ec4899";case"rate":return"#6366f1";default:return"#6b7280"}},Z=()=>{switch(bs){case"quantity":return"Quantity (L)";case"revenue":return"Revenue (â‚¹)";case"fat":return"Fat %";case"snf":return"SNF %";case"collections":return"Collections";case"rate":return"Rate (â‚¹/L)";default:return"Value"}},bu.length>0?(0,b.jsx)("div",{className:"w-full h-[500px]",children:(0,b.jsx)(C.ResponsiveContainer,{width:"100%",height:"100%",children:(0,b.jsxs)(w.LineChart,{data:bu,margin:{top:5,right:30,left:20,bottom:80},children:[(0,b.jsx)(A.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb",className:"dark:stroke-gray-700"}),(0,b.jsx)(y.XAxis,{dataKey:"name",angle:-45,textAnchor:"end",height:100,interval:0,tick:{fontSize:11},stroke:"#6b7280",label:{value:"Farmer Name",position:"insideBottom",offset:-5,style:{fontSize:13,fontWeight:500,fill:"#9ca3af"}}}),(0,b.jsx)(z.YAxis,{label:{value:Z(),angle:-90,position:"insideLeft",style:{fontSize:14,fontWeight:600}},tick:{fontSize:12},stroke:"#6b7280"}),(0,b.jsx)(B.Tooltip,{content:(0,b.jsx)(({active:c,payload:d})=>{if(c&&d&&d.length){let c=d[0].payload;return(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("p",{className:"font-bold text-gray-900 dark:text-white mb-1",children:c.name}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:["ID: ",c.farmerId]}),c.societyName&&(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:c.societyName}),(0,b.jsxs)("p",{className:"font-semibold",style:{color:a()},children:["revenue"===bs&&"â‚¹",c.value.toFixed(2),"fat"===bs||"snf"===bs?"%":"","quantity"===bs?" L":"","rate"===bs?"/L":""]})]})}return null},{})}),(0,b.jsx)(x.Line,{type:"monotone",dataKey:"value",stroke:a(),strokeWidth:3,dot:{fill:a(),r:5},activeDot:{r:7},name:Z()})]})})}):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(u.BarChart3,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No data available for the last 30 days"})]}))})]})})]})};a.s(["default",0,()=>(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})}),children:(0,b.jsx)(af,{})})],779601)}];

//# sourceMappingURL=src_app_admin_farmer_page_tsx_230e1440._.js.map