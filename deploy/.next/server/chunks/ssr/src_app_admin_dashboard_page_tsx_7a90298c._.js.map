{"version":3,"sources":["turbopack:///[project]/src/app/admin/dashboard/page.tsx","turbopack:///[project]/src/components/forms/AddEntityModal.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { motion } from 'framer-motion';\r\nimport { useUser } from '@/contexts/UserContext';\r\nimport AddEntityModal from '@/components/forms/AddEntityModal';\r\nimport { \r\n  Building2, \r\n  Milk, \r\n  Users, \r\n  Plus,\r\n  Eye,\r\n  Trash2,\r\n  Shield,\r\n  BarChart3\r\n} from 'lucide-react';\r\nimport { FlowerSpinner } from '@/components';\r\n\r\ninterface DashboardStats {\r\n  totalDairies: number;\r\n  totalBMCs: number;\r\n  totalSocieties: number;\r\n  totalFarmers: number;\r\n}\r\n\r\ninterface Entity {\r\n  id: number;\r\n  name: string;\r\n  location?: string;\r\n  created_at: string;\r\n  // Type-specific fields\r\n  dairy_id?: string;\r\n  bmc_id?: string;\r\n  society_id?: string;\r\n  contact_person?: string;\r\n  phone?: string;\r\n  email?: string;\r\n  capacity?: number;\r\n  dairy_farm_name?: string;\r\n  president_name?: string;\r\n  contact_phone?: string;\r\n  bmc_name?: string;\r\n}\r\n\r\nexport default function AdminDashboard() {\r\n  const router = useRouter();\r\n  const { user } = useUser(); // Use centralized user context\r\n  \r\n  const [stats, setStats] = useState<DashboardStats>({\r\n    totalDairies: 0,\r\n    totalBMCs: 0,\r\n    totalSocieties: 0,\r\n    totalFarmers: 0\r\n  });\r\n  \r\n  const [dairies, setDairies] = useState<Entity[]>([]);\r\n  const [bmcs, setBMCs] = useState<Entity[]>([]);\r\n  const [societies, setSocieties] = useState<Entity[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeModal, setActiveModal] = useState<'dairy' | 'bmc' | 'society' | null>(null);\r\n  const [activeTab, setActiveTab] = useState<'overview' | 'dairies' | 'bmcs' | 'societies'>('overview');\r\n\r\n  // Load dashboard data - defined before useEffect to avoid dependency issues\r\n  const loadData = useCallback(async () => {\r\n    const token = localStorage.getItem('authToken');\r\n    if (!token) {\r\n      console.error('No auth token found');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      console.log('üîÑ Loading dashboard data...');\r\n      console.log('üîë Token preview:', token.substring(0, 50) + '...');\r\n      \r\n      const headers = { \r\n        'Authorization': `Bearer ${token}`,\r\n        'Content-Type': 'application/json'\r\n      };\r\n      \r\n      // Load dairy data first to check authentication\r\n      console.log('üì° Fetching dairy data...');\r\n      const dairyRes = await fetch('/api/user/dairy', { headers });\r\n      console.log('üè™ Dairy response:', dairyRes.status, dairyRes.statusText);\r\n      \r\n      if (!dairyRes.ok) {\r\n        const errorData = await dairyRes.text();\r\n        console.error('‚ùå Dairy API error:', errorData);\r\n        \r\n        if (dairyRes.status === 401 || dairyRes.status === 403) {\r\n          console.log('Authentication failed, redirecting to login');\r\n          localStorage.removeItem('authToken');\r\n          localStorage.removeItem('userData');\r\n          router.push('/login');\r\n          return;\r\n        }\r\n        \r\n        if (dairyRes.status === 404) {\r\n          console.error('‚ùå Admin schema not found - admin may not be approved yet');\r\n          alert('Your admin account is not fully activated yet. Please contact super admin.');\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        \r\n        throw new Error(`Dairy API failed: ${dairyRes.status} - ${errorData}`);\r\n      }\r\n\r\n      // Load all entities in parallel if dairy request succeeded\r\n      console.log('üì° Fetching all entity data...');\r\n      const [bmcRes, societyRes] = await Promise.all([\r\n        fetch('/api/user/bmc', { headers }),\r\n        fetch('/api/user/society', { headers })\r\n      ]);\r\n\r\n      console.log('üìà All API responses:', {\r\n        dairy: dairyRes.status,\r\n        bmc: bmcRes.status,\r\n        society: societyRes.status\r\n      });\r\n\r\n      const [dairyData, bmcData, societyData] = await Promise.all([\r\n        dairyRes.json(),\r\n        bmcRes.json(),\r\n        societyRes.json()\r\n      ]);\r\n\r\n      console.log('‚úÖ API data received:', { dairyData, bmcData, societyData });\r\n\r\n      if (dairyData.success) setDairies(dairyData.data || []);\r\n      if (bmcData.success) setBMCs(bmcData.data || []);\r\n      if (societyData.success) setSocieties(societyData.data || []);\r\n\r\n      // Update stats\r\n      setStats({\r\n        totalDairies: dairyData.data?.length || 0,\r\n        totalBMCs: bmcData.data?.length || 0,\r\n        totalSocieties: societyData.data?.length || 0,\r\n        totalFarmers: 0 // TODO: Add farmers API\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error loading dashboard data:', error);\r\n      // Still set loading to false even if there's an error\r\n      setStats({\r\n        totalDairies: 0,\r\n        totalBMCs: 0,\r\n        totalSocieties: 0,\r\n        totalFarmers: 0\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [router]);\r\n\r\n  // Load data when user is available\r\n  useEffect(() => {\r\n    if (user) {\r\n      console.log('‚úÖ User loaded from context, loading dashboard data');\r\n      loadData();\r\n    }\r\n  }, [user, loadData]);\r\n\r\n  const handleEntityAdded = () => {\r\n    loadData(); // Reload data after adding new entity\r\n  };\r\n\r\n  const statCards = [\r\n    {\r\n      title: 'Dairy Farms',\r\n      value: stats.totalDairies.toString(),\r\n      icon: Building2,\r\n      color: 'bg-gradient-to-r from-green-500 to-emerald-500',\r\n      actionLabel: 'Add Dairy',\r\n      onClick: () => setActiveModal('dairy')\r\n    },\r\n    {\r\n      title: 'BMCs',\r\n      value: stats.totalBMCs.toString(),\r\n      icon: Milk,\r\n      color: 'bg-gradient-to-r from-emerald-500 to-teal-500',\r\n      actionLabel: 'Add BMC',\r\n      onClick: () => setActiveModal('bmc')\r\n    },\r\n    {\r\n      title: 'Societies',\r\n      value: stats.totalSocieties.toString(),\r\n      icon: Users,\r\n      color: 'bg-gradient-to-r from-teal-500 to-green-500',\r\n      actionLabel: 'Add Society',\r\n      onClick: () => setActiveModal('society')\r\n    },\r\n    {\r\n      title: 'Total Farmers',\r\n      value: stats.totalFarmers.toString(),\r\n      icon: Shield,\r\n      color: 'bg-gradient-to-r from-green-600 to-emerald-600',\r\n      actionLabel: 'View Farmers',\r\n      onClick: () => {} // TODO: Navigate to farmers\r\n    }\r\n  ];\r\n\r\n  const tabs = [\r\n    { id: 'overview', label: 'Overview', icon: BarChart3 },\r\n    { id: 'dairies', label: 'Dairy Farms', icon: Building2 },\r\n    { id: 'bmcs', label: 'BMCs', icon: Milk },\r\n    { id: 'societies', label: 'Societies', icon: Users }\r\n  ];\r\n\r\n  const renderEntityCard = (entity: Entity, type: 'dairy' | 'bmc' | 'society') => {\r\n    const getEntityId = () => {\r\n      switch (type) {\r\n        case 'dairy': return entity.dairy_id;\r\n        case 'bmc': return entity.bmc_id;\r\n        case 'society': return entity.society_id;\r\n      }\r\n    };\r\n\r\n    const getSubtitle = () => {\r\n      switch (type) {\r\n        case 'dairy': return entity.contact_person || entity.location;\r\n        case 'bmc': return entity.dairy_farm_name || entity.location;\r\n        case 'society': return entity.bmc_name || entity.president_name;\r\n      }\r\n    };\r\n\r\n    return (\r\n      <motion.div\r\n        key={entity.id}\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow\"\r\n      >\r\n        <div className=\"flex items-start justify-between\">\r\n          <div className=\"flex-1\">\r\n            <div className=\"flex items-center space-x-3 mb-3\">\r\n              <div className={`p-2 rounded-lg ${\r\n                type === 'dairy' ? 'bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400' :\r\n                type === 'bmc' ? 'bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400' :\r\n                'bg-teal-100 dark:bg-teal-900/30 text-teal-600 dark:text-teal-400'\r\n              }`}>\r\n                {type === 'dairy' && <Building2 className=\"w-5 h-5\" />}\r\n                {type === 'bmc' && <Milk className=\"w-5 h-5\" />}\r\n                {type === 'society' && <Users className=\"w-5 h-5\" />}\r\n              </div>\r\n              <div>\r\n                <h3 className=\"font-semibold text-gray-900 dark:text-gray-100\">{entity.name}</h3>\r\n                <p className=\"text-sm text-gray-500 dark:text-gray-400\">ID: {getEntityId()}</p>\r\n              </div>\r\n            </div>\r\n            \r\n            {getSubtitle() && (\r\n              <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">{getSubtitle()}</p>\r\n            )}\r\n            \r\n            {entity.location && (\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-3\">üìç {entity.location}</p>\r\n            )}\r\n\r\n            {/* Additional info based on type */}\r\n            {type === 'dairy' && entity.phone && (\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">üìû {entity.phone}</p>\r\n            )}\r\n            {type === 'bmc' && entity.capacity && (\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">ü•õ Capacity: {entity.capacity.toLocaleString()} L</p>\r\n            )}\r\n            {type === 'society' && entity.contact_phone && (\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">üìû {entity.contact_phone}</p>\r\n            )}\r\n          </div>\r\n          \r\n          <div className=\"flex space-x-2\">\r\n            <button className=\"p-2 text-gray-400 dark:text-gray-500 hover:text-emerald-600 dark:hover:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 rounded-lg transition-colors\">\r\n              <Eye className=\"w-4 h-4\" />\r\n            </button>\r\n            <button className=\"p-2 text-gray-400 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors\">\r\n              <Trash2 className=\"w-4 h-4\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"mt-4 pt-4 border-t border-gray-100 dark:border-gray-700\">\r\n          <p className=\"text-xs text-gray-400 dark:text-gray-500\">\r\n            Added {new Date(entity.created_at).toLocaleDateString()}\r\n          </p>\r\n        </div>\r\n      </motion.div>\r\n    );\r\n  };\r\n\r\n  const renderTabContent = () => {\r\n    switch (activeTab) {\r\n      case 'overview':\r\n        return (\r\n          <div className=\"space-y-8\">\r\n            {/* Stats Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n              {statCards.map((card, index) => {\r\n                const Icon = card.icon;\r\n                return (\r\n                  <motion.div\r\n                    key={card.title}\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ delay: index * 0.1 }}\r\n                    className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow\"\r\n                  >\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div>\r\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{card.title}</p>\r\n                        <p className=\"text-3xl font-bold text-gray-900 dark:text-gray-100 mt-2\">{card.value}</p>\r\n                      </div>\r\n                      <div className={`p-3 rounded-xl ${card.color}`}>\r\n                        <Icon className=\"w-6 h-6 text-white\" />\r\n                      </div>\r\n                    </div>\r\n                    <button\r\n                      onClick={card.onClick}\r\n                      className=\"mt-4 w-full bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 px-4 rounded-lg transition-colors flex items-center justify-center space-x-2\"\r\n                    >\r\n                      <Plus className=\"w-4 h-4\" />\r\n                      <span>{card.actionLabel}</span>\r\n                    </button>\r\n                  </motion.div>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            {/* Quick Actions */}\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\">Quick Actions</h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <button\r\n                  onClick={() => setActiveModal('dairy')}\r\n                  className=\"flex items-center space-x-3 p-4 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg transition-colors\"\r\n                >\r\n                  <Building2 className=\"w-8 h-8 text-green-600 dark:text-green-400\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium text-green-900 dark:text-green-300\">Add Dairy Farm</p>\r\n                    <p className=\"text-sm text-green-600 dark:text-green-400\">Register new dairy</p>\r\n                  </div>\r\n                </button>\r\n                <button\r\n                  onClick={() => setActiveModal('bmc')}\r\n                  className=\"flex items-center space-x-3 p-4 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 rounded-lg transition-colors\"\r\n                >\r\n                  <Milk className=\"w-8 h-8 text-emerald-600 dark:text-emerald-400\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium text-emerald-900 dark:text-emerald-300\">Add BMC</p>\r\n                    <p className=\"text-sm text-emerald-600 dark:text-emerald-400\">Add collection center</p>\r\n                  </div>\r\n                </button>\r\n                <button\r\n                  onClick={() => setActiveModal('society')}\r\n                  className=\"flex items-center space-x-3 p-4 bg-teal-50 dark:bg-teal-900/20 hover:bg-teal-100 dark:hover:bg-teal-900/30 rounded-lg transition-colors\"\r\n                >\r\n                  <Users className=\"w-8 h-8 text-teal-600 dark:text-teal-400\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium text-teal-900 dark:text-teal-300\">Add Society</p>\r\n                    <p className=\"text-sm text-teal-600 dark:text-teal-400\">Register new society</p>\r\n                  </div>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'dairies':\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">Dairy Farms ({dairies.length})</h3>\r\n              <button\r\n                onClick={() => setActiveModal('dairy')}\r\n                className=\"bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-700 dark:hover:bg-emerald-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors\"\r\n              >\r\n                <Plus className=\"w-4 h-4\" />\r\n                <span>Add Dairy</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {dairies.map(dairy => renderEntityCard(dairy, 'dairy'))}\r\n            </div>\r\n            {dairies.length === 0 && (\r\n              <div className=\"text-center py-12\">\r\n                <Building2 className=\"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2\">No dairy farms yet</h3>\r\n                <p className=\"text-gray-500 dark:text-gray-400 mb-4\">Start by adding your first dairy farm</p>\r\n                <button\r\n                  onClick={() => setActiveModal('dairy')}\r\n                  className=\"bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-700 dark:hover:bg-emerald-600 text-white px-6 py-3 rounded-lg\"\r\n                >\r\n                  Add First Dairy\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case 'bmcs':\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">BMCs ({bmcs.length})</h3>\r\n              <button\r\n                onClick={() => setActiveModal('bmc')}\r\n                className=\"bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-700 dark:hover:bg-emerald-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors\"\r\n              >\r\n                <Plus className=\"w-4 h-4\" />\r\n                <span>Add BMC</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {bmcs.map(bmc => renderEntityCard(bmc, 'bmc'))}\r\n            </div>\r\n            {bmcs.length === 0 && (\r\n              <div className=\"text-center py-12\">\r\n                <Milk className=\"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2\">No BMCs yet</h3>\r\n                <p className=\"text-gray-500 dark:text-gray-400 mb-4\">Add bulk milk cooling centers</p>\r\n                <button\r\n                  onClick={() => setActiveModal('bmc')}\r\n                  className=\"bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-700 dark:hover:bg-emerald-600 text-white px-6 py-3 rounded-lg\"\r\n                >\r\n                  Add First BMC\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case 'societies':\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">Societies ({societies.length})</h3>\r\n              <button\r\n                onClick={() => setActiveModal('society')}\r\n                className=\"bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-700 dark:hover:bg-emerald-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors\"\r\n              >\r\n                <Plus className=\"w-4 h-4\" />\r\n                <span>Add Society</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {societies.map(society => renderEntityCard(society, 'society'))}\r\n            </div>\r\n            {societies.length === 0 && (\r\n              <div className=\"text-center py-12\">\r\n                <Users className=\"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2\">No societies yet</h3>\r\n                <p className=\"text-gray-500 dark:text-gray-400 mb-4\">Register farmer societies</p>\r\n                <button\r\n                  onClick={() => setActiveModal('society')}\r\n                  className=\"bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-700 dark:hover:bg-emerald-600 text-white px-6 py-3 rounded-lg\"\r\n                >\r\n                  Add First Society\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  // Don't render until user is loaded\r\n  if (!user || loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\r\n        <div className=\"flex flex-col items-center\">\r\n          <FlowerSpinner />\r\n          <span className=\"mt-4 text-gray-600 dark:text-gray-400\">\r\n            {loading ? 'Loading dashboard data...' : 'Loading user profile...'}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n        {/* Header */}\r\n        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-gray-100\">\r\n              {user?.companyName || user?.fullName || 'Admin'} Dashboard\r\n            </h1>\r\n            <p className=\"text-gray-600 dark:text-gray-400 mt-2\">\r\n              Welcome back, {user.fullName.split(' ')[0] || 'Admin'}! Manage your dairy operations\r\n            </p>\r\n          </div>\r\n          <div className=\"flex items-center space-x-4\">\r\n            <button\r\n              onClick={loadData}\r\n              className=\"bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors\"\r\n            >\r\n              <span>Load Data</span>\r\n            </button>\r\n            <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n              DB: {user?.dbKey || 'N/A'}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Information Banner */}\r\n        {stats.totalDairies === 0 && stats.totalBMCs === 0 && stats.totalSocieties === 0 && (\r\n          <div className=\"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-400 dark:border-green-600 p-4 rounded-lg\">\r\n            <div className=\"flex\">\r\n              <div className=\"flex-shrink-0\">\r\n                <Shield className=\"h-5 w-5 text-green-400 dark:text-green-500\" />\r\n              </div>\r\n              <div className=\"ml-3\">\r\n                <p className=\"text-sm text-green-700 dark:text-green-300\">\r\n                  <strong>Welcome to your admin dashboard!</strong> \r\n                  Your account is active and ready to use. Click the &quot;Load Data&quot; button above to fetch your entity data, \r\n                  or use the &quot;Add&quot; buttons to create new dairy farms, BMCs, and societies.\r\n                </p>\r\n                <p className=\"text-xs text-green-600 dark:text-green-400 mt-1\">\r\n                  User: {user?.fullName} | DB Key: {user?.dbKey} | Status: Active\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Tabs */}\r\n        <div className=\"border-b border-gray-200 dark:border-gray-700\">\r\n          <nav className=\"-mb-px flex space-x-8 overflow-x-auto\">\r\n            {tabs.map((tab) => {\r\n              const Icon = tab.icon;\r\n              return (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => setActiveTab(tab.id as 'overview' | 'dairies' | 'bmcs' | 'societies')}\r\n                  className={`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${\r\n                    activeTab === tab.id\r\n                      ? 'border-emerald-500 text-emerald-600 dark:text-emerald-400'\r\n                      : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\r\n                  }`}\r\n                >\r\n                  <Icon className=\"w-5 h-5\" />\r\n                  <span>{tab.label}</span>\r\n                </button>\r\n              );\r\n            })}\r\n          </nav>\r\n        </div>\r\n\r\n        {/* Tab Content */}\r\n        {renderTabContent()}\r\n\r\n        {/* Add Entity Modal */}\r\n        {activeModal && (\r\n          <AddEntityModal\r\n            isOpen={true}\r\n            onClose={() => setActiveModal(null)}\r\n            type={activeModal}\r\n            onSuccess={handleEntityAdded}\r\n          />\r\n        )}\r\n      </div>\r\n  );\r\n}","'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { \r\n  Building2, \r\n  Milk, \r\n  Users, \r\n  X, \r\n  Eye, \r\n  EyeOff,\r\n  Plus\r\n} from 'lucide-react';\r\nimport { FlowerSpinner } from '@/components';\r\n\r\ninterface AddEntityModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  type: 'dairy' | 'bmc' | 'society';\r\n  onSuccess: () => void;\r\n}\r\n\r\ninterface EntityFormData {\r\n  name: string;\r\n  password: string;\r\n  entityId: string;\r\n  location?: string;\r\n  contactPerson?: string;\r\n  phone?: string;\r\n  email?: string;\r\n  capacity?: number;\r\n  presidentName?: string;\r\n  contactPhone?: string;\r\n  dairyFarmId?: number;\r\n  bmcId?: number;\r\n}\r\n\r\ninterface DairyFarm {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\ninterface BMC {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\nexport default function AddEntityModal({ isOpen, onClose, type, onSuccess }: AddEntityModalProps) {\r\n  const [formData, setFormData] = useState<EntityFormData>({\r\n    name: '',\r\n    password: '',\r\n    entityId: '',\r\n    location: '',\r\n    contactPerson: '',\r\n    phone: '',\r\n    email: '',\r\n    capacity: undefined,\r\n    presidentName: '',\r\n    contactPhone: '',\r\n    dairyFarmId: undefined,\r\n    bmcId: undefined\r\n  });\r\n  \r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [dairyFarms, setDairyFarms] = useState<DairyFarm[]>([]);\r\n  const [bmcs, setBMCs] = useState<BMC[]>([]);\r\n\r\n  // Load dependent data when modal opens\r\n  const loadDependentData = async () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) return;\r\n\r\n    try {\r\n      if (type === 'bmc') {\r\n        // Load dairy farms for BMC\r\n        const response = await fetch('/api/user/dairy', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (response.ok) {\r\n          const result = await response.json();\r\n          setDairyFarms(result.data || []);\r\n        }\r\n      } else if (type === 'society') {\r\n        // Load BMCs for society\r\n        const response = await fetch('/api/user/bmc', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (response.ok) {\r\n          const result = await response.json();\r\n          setBMCs(result.data || []);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading dependent data:', error);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      setError('Authentication required');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let endpoint = '';\r\n      let payload: any = {\r\n        name: formData.name,\r\n        password: formData.password\r\n      };\r\n\r\n      switch (type) {\r\n        case 'dairy':\r\n          endpoint = '/api/user/dairy';\r\n          payload = {\r\n            ...payload,\r\n            dairyId: formData.entityId,\r\n            location: formData.location,\r\n            contactPerson: formData.contactPerson,\r\n            phone: formData.phone,\r\n            email: formData.email\r\n          };\r\n          break;\r\n        case 'bmc':\r\n          endpoint = '/api/user/bmc';\r\n          payload = {\r\n            ...payload,\r\n            bmcId: formData.entityId,\r\n            location: formData.location,\r\n            capacity: formData.capacity,\r\n            dairyFarmId: formData.dairyFarmId\r\n          };\r\n          break;\r\n        case 'society':\r\n          endpoint = '/api/user/society';\r\n          payload = {\r\n            ...payload,\r\n            societyId: formData.entityId,\r\n            location: formData.location,\r\n            presidentName: formData.presidentName,\r\n            contactPhone: formData.contactPhone,\r\n            bmcId: formData.bmcId\r\n          };\r\n          break;\r\n      }\r\n\r\n      const response = await fetch(endpoint, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(payload)\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (response.ok) {\r\n        onSuccess();\r\n        onClose();\r\n        // Reset form\r\n        setFormData({\r\n          name: '',\r\n          password: '',\r\n          entityId: '',\r\n          location: '',\r\n          contactPerson: '',\r\n          phone: '',\r\n          email: '',\r\n          capacity: undefined,\r\n          presidentName: '',\r\n          contactPhone: '',\r\n          dairyFarmId: undefined,\r\n          bmcId: undefined\r\n        });\r\n      } else {\r\n        setError(result.message || `Failed to add ${type}`);\r\n      }\r\n    } catch (error) {\r\n      setError(`Error adding ${type}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getTitle = () => {\r\n    switch (type) {\r\n      case 'dairy': return 'Add Dairy Farm';\r\n      case 'bmc': return 'Add BMC';\r\n      case 'society': return 'Add Society';\r\n    }\r\n  };\r\n\r\n  const getIcon = () => {\r\n    switch (type) {\r\n      case 'dairy': return Building2;\r\n      case 'bmc': return Milk;\r\n      case 'society': return Users;\r\n    }\r\n  };\r\n\r\n  const getIdLabel = () => {\r\n    switch (type) {\r\n      case 'dairy': return 'Dairy ID';\r\n      case 'bmc': return 'BMC ID';\r\n      case 'society': return 'Society ID';\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  // Load dependent data when modal opens\r\n  if (isOpen && (type === 'bmc' || type === 'society')) {\r\n    loadDependentData();\r\n  }\r\n\r\n  const Icon = getIcon();\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <motion.div\r\n        initial={{ opacity: 0, scale: 0.9 }}\r\n        animate={{ opacity: 1, scale: 1 }}\r\n        exit={{ opacity: 0, scale: 0.9 }}\r\n        className=\"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\"\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"p-3 bg-emerald-100 rounded-xl\">\r\n              <Icon className=\"w-6 h-6 text-emerald-600\" />\r\n            </div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">{getTitle()}</h2>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n          {error && (\r\n            <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n              <p className=\"text-red-600 text-sm\">{error}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Basic Information */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Name */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Name *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.name}\r\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                placeholder={`Enter ${type} name`}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Entity ID */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                {getIdLabel()} <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.entityId}\r\n                onChange={(e) => setFormData({ ...formData, entityId: e.target.value })}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                placeholder={`Enter unique ${getIdLabel().toLowerCase()}`}\r\n                required\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Password */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Password *\r\n            </label>\r\n            <div className=\"relative\">\r\n              <input\r\n                type={showPassword ? 'text' : 'password'}\r\n                value={formData.password}\r\n                onChange={(e) => setFormData({ ...formData, password: e.target.value })}\r\n                className=\"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                placeholder=\"Enter secure password\"\r\n                required\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowPassword(!showPassword)}\r\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\r\n              >\r\n                {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Location */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Location\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.location}\r\n              onChange={(e) => setFormData({ ...formData, location: e.target.value })}\r\n              className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n              placeholder=\"Enter location\"\r\n            />\r\n          </div>\r\n\r\n          {/* Type-specific fields */}\r\n          {type === 'dairy' && (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Contact Person\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.contactPerson}\r\n                  onChange={(e) => setFormData({ ...formData, contactPerson: e.target.value })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                  placeholder=\"Contact person name\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Phone\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  value={formData.phone}\r\n                  onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                  placeholder=\"Phone number\"\r\n                />\r\n              </div>\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Email\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  value={formData.email}\r\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                  placeholder=\"Email address\"\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {type === 'bmc' && (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Capacity (Liters)\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={formData.capacity || ''}\r\n                  onChange={(e) => setFormData({ ...formData, capacity: parseInt(e.target.value) || undefined })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                  placeholder=\"Storage capacity\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Dairy Farm\r\n                </label>\r\n                <select\r\n                  value={formData.dairyFarmId || ''}\r\n                  onChange={(e) => setFormData({ ...formData, dairyFarmId: parseInt(e.target.value) || undefined })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                >\r\n                  <option value=\"\">Select dairy farm</option>\r\n                  {dairyFarms.map((dairy) => (\r\n                    <option key={dairy.id} value={dairy.id}>\r\n                      {dairy.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {type === 'society' && (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  President Name\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.presidentName}\r\n                  onChange={(e) => setFormData({ ...formData, presidentName: e.target.value })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                  placeholder=\"Society president name\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Contact Phone\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  value={formData.contactPhone}\r\n                  onChange={(e) => setFormData({ ...formData, contactPhone: e.target.value })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                  placeholder=\"Contact phone number\"\r\n                />\r\n              </div>\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  BMC\r\n                </label>\r\n                <select\r\n                  value={formData.bmcId || ''}\r\n                  onChange={(e) => setFormData({ ...formData, bmcId: parseInt(e.target.value) || undefined })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                >\r\n                  <option value=\"\">Select BMC</option>\r\n                  {bmcs.map((bmc) => (\r\n                    <option key={bmc.id} value={bmc.id}>\r\n                      {bmc.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Submit Button */}\r\n          <div className=\"flex justify-end space-x-4 pt-6 border-t border-gray-200\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-6 py-3 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center space-x-2 disabled:opacity-50\"\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <FlowerSpinner size={16} />\r\n                  <span>Adding...</span>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Plus className=\"w-4 h-4\" />\r\n                  <span>Add {type.charAt(0).toUpperCase() + type.slice(1)}</span>\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}