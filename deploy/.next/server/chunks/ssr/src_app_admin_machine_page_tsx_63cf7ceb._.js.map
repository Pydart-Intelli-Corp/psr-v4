{"version":3,"sources":["turbopack:///[project]/src/app/admin/machine/page.tsx","turbopack:///[project]/node_modules/lucide-react/src/icons/key-round.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useCallback, useMemo, Suspense } from 'react';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { useUser } from '@/contexts/UserContext';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\nimport { formatPhoneInput, validatePhoneOnBlur, validateIndianPhone } from '@/lib/validation/phoneValidation';\r\nimport { \r\n  Settings, \r\n  MapPin,\r\n  Phone,\r\n  User,\r\n  Calendar,\r\n  Building2,\r\n  RefreshCw,\r\n  Wrench,\r\n  AlertTriangle,\r\n  Lock,\r\n  Key,\r\n  KeyRound,\r\n  Folder,\r\n  FolderOpen,\r\n  ChevronRight,\r\n  ChevronDown,\r\n  FileText,\r\n  Download,\r\n  Clock,\r\n  Plus,\r\n  Upload,\r\n  Eye,\r\n  CheckCircle,\r\n  Droplets,\r\n  TrendingUp,\r\n  Award,\r\n  BarChart3,\r\n  Users,\r\n  X\r\n} from 'lucide-react';\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer\r\n} from 'recharts';\r\nimport { \r\n  FlowerSpinner,\r\n  FormModal, \r\n  FormInput, \r\n  FormSelect, \r\n  FormActions, \r\n  FormGrid, \r\n  FormError,\r\n  PageHeader,\r\n  StatusMessage,\r\n  StatsCard,\r\n  ItemCard,\r\n  EmptyState,\r\n  ConfirmDeleteModal\r\n} from '@/components';\r\nimport {\r\n  BulkActionsToolbar,\r\n  BulkDeleteConfirmModal,\r\n  LoadingSnackbar,\r\n  FloatingActionButton,\r\n  ViewModeToggle,\r\n  ManagementPageHeader,\r\n  FilterDropdown,\r\n  StatsGrid\r\n} from '@/components/management';\r\n\r\ninterface Machine {\r\n  id: number;\r\n  machineId: string;\r\n  machineType: string;\r\n  societyId: number;\r\n  societyName?: string;\r\n  societyIdentifier?: string;\r\n  location?: string;\r\n  installationDate?: string;\r\n  lastMaintenanceDate?: string;\r\n  maintenanceSchedule?: string;\r\n  operatorName?: string;\r\n  contactPhone?: string;\r\n  status: 'active' | 'inactive' | 'maintenance' | 'suspended';\r\n  notes?: string;\r\n  isMasterMachine?: boolean;\r\n  userPassword?: string;\r\n  supervisorPassword?: string;\r\n  statusU: 0 | 1;\r\n  statusS: 0 | 1;\r\n  createdAt: string;\r\n  activeChartsCount?: number;\r\n  chartDetails?: string; // Format: \"channel:filename:status|||channel:filename:status\"\r\n  totalCollections30d?: number;\r\n  totalQuantity30d?: number;\r\n}\r\n\r\ninterface MachineFormData {\r\n  machineId: string;\r\n  machineType: string;\r\n  societyId: string;\r\n  location: string;\r\n  installationDate: string;\r\n  operatorName: string;\r\n  contactPhone: string;\r\n  status: 'active' | 'inactive' | 'maintenance' | 'suspended';\r\n  notes: string;\r\n  setAsMaster: boolean;\r\n  disablePasswordInheritance: boolean;\r\n}\r\n\r\ninterface PasswordFormData {\r\n  userPassword: string;\r\n  supervisorPassword: string;\r\n  confirmUserPassword: string;\r\n  confirmSupervisorPassword: string;\r\n}\r\n\r\ninterface Society {\r\n  id: number;\r\n  name: string;\r\n  society_id: string;\r\n  bmc_id?: number;\r\n}\r\n\r\ninterface MachineType {\r\n  id: number;\r\n  machineType: string;\r\n}\r\n\r\nconst initialFormData: MachineFormData = {\r\n  machineId: '',\r\n  machineType: '',\r\n  societyId: '',\r\n  location: '',\r\n  installationDate: '',\r\n  operatorName: '',\r\n  contactPhone: '',\r\n  status: 'active',\r\n  notes: '',\r\n  setAsMaster: false,\r\n  disablePasswordInheritance: false\r\n};\r\n\r\nfunction MachineManagement() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const { user } = useUser();\r\n  const { } = useLanguage();\r\n  \r\n  // State management\r\n  const [machines, setMachines] = useState<Machine[]>([]);\r\n  const [societies, setSocieties] = useState<Society[]>([]);\r\n  const [dairies, setDairies] = useState<Array<{ id: number; name: string; dairyId: string }>>([]);\r\n  const [bmcs, setBmcs] = useState<Array<{ id: number; name: string; bmcId: string; dairyFarmId?: number }>>([]);\r\n  const [machineTypes, setMachineTypes] = useState<MachineType[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [societiesLoading, setSocietiesLoading] = useState(false);\r\n  const [machineTypesLoading, setMachineTypesLoading] = useState(false);\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [showEditForm, setShowEditForm] = useState(false);\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [showPasswordModal, setShowPasswordModal] = useState(false);\r\n  const [showRateChartModal, setShowRateChartModal] = useState(false);\r\n  const [selectedRateChart, setSelectedRateChart] = useState<{ fileName: string; channel: string; societyId: number } | null>(null);\r\n  const [rateChartData, setRateChartData] = useState<Array<{ fat: string; snf: string; clr: string; rate: string }>>([]);\r\n  const [loadingChartData, setLoadingChartData] = useState(false);\r\n  const [searchFat, setSearchFat] = useState('');\r\n  const [searchSnf, setSearchSnf] = useState('');\r\n  const [searchClr, setSearchClr] = useState('');\r\n  const [selectedMachine, setSelectedMachine] = useState<Machine | null>(null);\r\n  const [formData, setFormData] = useState<MachineFormData>(initialFormData);\r\n  const [passwordData, setPasswordData] = useState<PasswordFormData>({\r\n    userPassword: '',\r\n    supervisorPassword: '',\r\n    confirmUserPassword: '',\r\n    confirmSupervisorPassword: ''\r\n  });\r\n  const [passwordErrors, setPasswordErrors] = useState({\r\n    userPassword: '',\r\n    confirmUserPassword: '',\r\n    supervisorPassword: '',\r\n    confirmSupervisorPassword: ''\r\n  });\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'inactive' | 'maintenance' | 'suspended'>('all');\r\n  const [dairyFilter, setDairyFilter] = useState<string[]>([]);\r\n  const [bmcFilter, setBmcFilter] = useState<string[]>([]);\r\n  const [societyFilter, setSocietyFilter] = useState<string[]>([]);\r\n  const [machineFilter, setMachineFilter] = useState<string[]>([]);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  \r\n  // Performance stats state\r\n  const [performanceStats, setPerformanceStats] = useState<{\r\n    topCollector: { machine: any; totalQuantity: number } | null;\r\n    mostTests: { machine: any; totalTests: number } | null;\r\n    bestCleaning: { machine: any; totalCleanings: number } | null;\r\n    mostCleaningSkip: { machine: any; totalSkips: number } | null;\r\n    activeToday: { machine: any; collectionsToday: number } | null;\r\n    highestUptime: { machine: any; activeDays: number } | null;\r\n  }>({\r\n    topCollector: null,\r\n    mostTests: null,\r\n    bestCleaning: null,\r\n    mostCleaningSkip: null,\r\n    activeToday: null,\r\n    highestUptime: null\r\n  });\r\n  \r\n  // Graph modal state\r\n  const [showGraphModal, setShowGraphModal] = useState(false);\r\n  const [graphMetric, setGraphMetric] = useState<'quantity' | 'tests' | 'cleaning' | 'skip' | 'today' | 'uptime'>('quantity');\r\n  const [graphData, setGraphData] = useState<any[]>([]);\r\n  const [fieldErrors, setFieldErrors] = useState<{\r\n    machineId?: string;\r\n    machineType?: string;\r\n    societyId?: string;\r\n    contactPhone?: string;\r\n  }>({});\r\n\r\n  // Folder view state\r\n  const [expandedSocieties, setExpandedSocieties] = useState<Set<number>>(new Set());\r\n  const [viewMode, setViewMode] = useState<'folder' | 'list'>('folder');\r\n  const [selectedSocieties, setSelectedSocieties] = useState<Set<number>>(new Set());\r\n  \r\n  // Selection state\r\n  const [selectedMachines, setSelectedMachines] = useState<Set<number>>(new Set());\r\n  const [selectAll, setSelectAll] = useState(false);\r\n  const [isUpdatingStatus, setIsUpdatingStatus] = useState(false);\r\n  const [updateProgress, setUpdateProgress] = useState(0);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n  const [isDeletingBulk, setIsDeletingBulk] = useState(false);\r\n  const [bulkStatus, setBulkStatus] = useState<'active' | 'inactive' | 'maintenance' | 'suspended'>('active');\r\n\r\n  // Master machine state\r\n  const [societyHasMaster, setSocietyHasMaster] = useState(false);\r\n  const [existingMasterMachine, setExistingMasterMachine] = useState<string | null>(null);\r\n  const [isFirstMachine, setIsFirstMachine] = useState(false);\r\n  \r\n  // Change master modal state\r\n  const [showChangeMasterModal, setShowChangeMasterModal] = useState(false);\r\n  const [selectedSocietyForMaster, setSelectedSocietyForMaster] = useState<number | null>(null);\r\n  const [newMasterMachineId, setNewMasterMachineId] = useState<number | null>(null);\r\n  const [setForAll, setSetForAll] = useState(false);\r\n  const [isChangingMaster, setIsChangingMaster] = useState(false);\r\n  \r\n  // Password update for multiple machines\r\n  const [applyPasswordsToOthers, setApplyPasswordsToOthers] = useState(false);\r\n  const [selectedMachinesForPassword, setSelectedMachinesForPassword] = useState<Set<number>>(new Set());\r\n  const [selectAllMachinesForPassword, setSelectAllMachinesForPassword] = useState(false);\r\n  \r\n  // Show password modal state\r\n  const [showPasswordViewModal, setShowPasswordViewModal] = useState(false);\r\n  const [adminPasswordForView, setAdminPasswordForView] = useState('');\r\n  const [viewPasswordError, setViewPasswordError] = useState('');\r\n  const [viewingPasswords, setViewingPasswords] = useState(false);\r\n  const [revealedPasswords, setRevealedPasswords] = useState<{ userPassword: string | null; supervisorPassword: string | null } | null>(null);\r\n  const [machineToShowPassword, setMachineToShowPassword] = useState<Machine | null>(null);\r\n\r\n  // Password validation functions\r\n  const validatePasswordFormat = (password: string) => {\r\n    if (!password) return '';\r\n    if (!/^\\d{6}$/.test(password)) {\r\n      return 'Password must be exactly 6 numbers';\r\n    }\r\n    return '';\r\n  };\r\n\r\n  // Parse rate chart details from concatenated string\r\n  const parseChartDetails = (chartDetails?: string) => {\r\n    if (!chartDetails) return { pending: [], downloaded: [] };\r\n    \r\n    const charts = chartDetails.split('|||');\r\n    const pending: Array<{ channel: string; fileName: string }> = [];\r\n    const downloaded: Array<{ channel: string; fileName: string }> = [];\r\n    \r\n    charts.forEach(chart => {\r\n      const [channel, fileName, status] = chart.split(':');\r\n      if (channel && fileName && status) {\r\n        if (status === 'pending') {\r\n          pending.push({ channel, fileName });\r\n        } else if (status === 'downloaded') {\r\n          downloaded.push({ channel, fileName });\r\n        }\r\n      }\r\n    });\r\n    \r\n    return { pending, downloaded };\r\n  };\r\n\r\n  // Check master machine status for selected society\r\n  const checkMasterMachineStatus = (societyId: string) => {\r\n    console.log('checkMasterMachineStatus called with:', societyId);\r\n    \r\n    if (!societyId) {\r\n      setSocietyHasMaster(false);\r\n      setExistingMasterMachine(null);\r\n      setIsFirstMachine(false);\r\n      return;\r\n    }\r\n\r\n    const societyMachines = machines.filter(m => m.societyId === parseInt(societyId));\r\n    const masterMachine = societyMachines.find(m => m.isMasterMachine);\r\n    \r\n    console.log('Society machines:', societyMachines.length, 'Master:', masterMachine?.machineId);\r\n    \r\n    setIsFirstMachine(societyMachines.length === 0);\r\n    setSocietyHasMaster(!!masterMachine);\r\n    setExistingMasterMachine(masterMachine ? masterMachine.machineId : null);\r\n\r\n    // Auto-check setAsMaster if it's the first machine\r\n    if (societyMachines.length === 0) {\r\n      setFormData(prev => ({ ...prev, setAsMaster: true }));\r\n    } else {\r\n      setFormData(prev => ({ ...prev, setAsMaster: false }));\r\n    }\r\n  };\r\n\r\n  // Handle click on master badge to change master\r\n  const handleMasterBadgeClick = (societyId: number) => {\r\n    setSelectedSocietyForMaster(societyId);\r\n    setNewMasterMachineId(null);\r\n    setSetForAll(false);\r\n    setShowChangeMasterModal(true);\r\n  };\r\n\r\n  // Handle change master confirmation\r\n  const handleChangeMasterConfirm = async () => {\r\n    if (!newMasterMachineId) {\r\n      setError('Please select a machine to set as master');\r\n      return;\r\n    }\r\n\r\n    setIsChangingMaster(true);\r\n    setError('');\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      console.log('Token from localStorage:', token);\r\n      console.log('Token type:', typeof token);\r\n      console.log('Token length:', token?.length);\r\n      \r\n      if (!token) {\r\n        setError('Authentication token not found. Please login again.');\r\n        return;\r\n      }\r\n      \r\n      const response = await fetch(`/api/user/machine/${newMasterMachineId}/set-master`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ setForAll })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        setSuccess('Master machine updated successfully');\r\n        setShowChangeMasterModal(false);\r\n        await fetchMachines(); // Refresh machines list\r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        setError(data.error || data.message || 'Failed to update master machine');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating master machine:', error);\r\n      setError('Failed to update master machine');\r\n    } finally {\r\n      setIsChangingMaster(false);\r\n    }\r\n  };\r\n\r\n  // Get channel badge color\r\n  const getChannelColor = (channel: string) => {\r\n    switch (channel.toUpperCase()) {\r\n      case 'COW': return 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200';\r\n      case 'BUF': return 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200';\r\n      case 'MIX': return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200';\r\n      default: return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200';\r\n    }\r\n  };\r\n\r\n  // Fetch rate chart data\r\n  const fetchRateChartData = async (fileName: string, channel: string, societyId: number) => {\r\n    try {\r\n      setLoadingChartData(true);\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch(`/api/user/ratechart/data?fileName=${encodeURIComponent(fileName)}&channel=${channel}&societyId=${societyId}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setRateChartData(data.data || []);\r\n      } else {\r\n        setError(typeof data.error === 'string' ? data.error : data.error?.message || 'Failed to fetch rate chart data');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching rate chart data:', error);\r\n      setError('Failed to fetch rate chart data');\r\n    } finally {\r\n      setLoadingChartData(false);\r\n    }\r\n  };\r\n\r\n  // Handle view rate chart\r\n  const handleViewRateChart = (fileName: string, channel: string, societyId: number) => {\r\n    setSelectedRateChart({ fileName, channel, societyId });\r\n    setShowRateChartModal(true);\r\n    fetchRateChartData(fileName, channel, societyId);\r\n  };\r\n\r\n  // Close rate chart modal\r\n  const closeRateChartModal = () => {\r\n    setShowRateChartModal(false);\r\n    setSelectedRateChart(null);\r\n    setRateChartData([]);\r\n    setSearchFat('');\r\n    setSearchSnf('');\r\n    setSearchClr('');\r\n  };\r\n\r\n  // Update password validation when data changes\r\n  const updatePasswordData = (newData: Partial<PasswordFormData>) => {\r\n    // Filter and limit input to 4 digits only\r\n    const filteredData: Partial<PasswordFormData> = {};\r\n    \r\n    Object.entries(newData).forEach(([key, value]) => {\r\n      if (typeof value === 'string') {\r\n        // Only allow digits and limit to 6 characters\r\n        const numericValue = value.replace(/\\D/g, '').slice(0, 6);\r\n        filteredData[key as keyof PasswordFormData] = numericValue;\r\n      }\r\n    });\r\n    \r\n    const updatedData = { ...passwordData, ...filteredData };\r\n    setPasswordData(updatedData);\r\n\r\n    // Validate only the field being changed\r\n    const fieldName = Object.keys(newData)[0] as keyof PasswordFormData;\r\n    const newErrors = { ...passwordErrors };\r\n\r\n    if (fieldName === 'userPassword') {\r\n      const formatError = validatePasswordFormat(updatedData.userPassword);\r\n      newErrors.userPassword = formatError;\r\n      newErrors.confirmUserPassword = ''; // Clear confirm field error\r\n    } else if (fieldName === 'confirmUserPassword') {\r\n      const formatError = validatePasswordFormat(updatedData.confirmUserPassword);\r\n      if (formatError) {\r\n        newErrors.confirmUserPassword = formatError;\r\n      } else if (updatedData.userPassword && updatedData.confirmUserPassword && \r\n                 updatedData.userPassword !== updatedData.confirmUserPassword) {\r\n        newErrors.confirmUserPassword = 'Passwords do not match';\r\n      } else {\r\n        newErrors.confirmUserPassword = '';\r\n      }\r\n      newErrors.userPassword = ''; // Clear main field error\r\n    } else if (fieldName === 'supervisorPassword') {\r\n      const formatError = validatePasswordFormat(updatedData.supervisorPassword);\r\n      newErrors.supervisorPassword = formatError;\r\n      newErrors.confirmSupervisorPassword = ''; // Clear confirm field error\r\n    } else if (fieldName === 'confirmSupervisorPassword') {\r\n      const formatError = validatePasswordFormat(updatedData.confirmSupervisorPassword);\r\n      if (formatError) {\r\n        newErrors.confirmSupervisorPassword = formatError;\r\n      } else if (updatedData.supervisorPassword && updatedData.confirmSupervisorPassword && \r\n                 updatedData.supervisorPassword !== updatedData.confirmSupervisorPassword) {\r\n        newErrors.confirmSupervisorPassword = 'Passwords do not match';\r\n      } else {\r\n        newErrors.confirmSupervisorPassword = '';\r\n      }\r\n      newErrors.supervisorPassword = ''; // Clear main field error\r\n    }\r\n\r\n    setPasswordErrors(newErrors);\r\n  };\r\n\r\n  // Fetch machines\r\n  const fetchPerformanceStats = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/analytics/machine-performance', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      console.log('ðŸ“Š Performance Stats Response Status:', response.status);\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        console.log('ðŸ“Š Performance Stats Data:', data);\r\n        setPerformanceStats(data);\r\n      } else {\r\n        const errorData = await response.json();\r\n        console.error('âŒ Performance Stats Error:', errorData);\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Error fetching performance stats:', error);\r\n    }\r\n  }, []);\r\n\r\n  const fetchGraphData = useCallback(async (metric: string) => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch(`/api/analytics/machine-performance?graphData=true&metric=${metric}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setGraphData(data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching graph data:', error);\r\n      setGraphData([]);\r\n    }\r\n  }, []);\r\n\r\n  const handleCardClick = (metric: 'quantity' | 'tests' | 'cleaning' | 'skip' | 'today' | 'uptime') => {\r\n    setGraphMetric(metric);\r\n    fetchGraphData(metric);\r\n    setShowGraphModal(true);\r\n  };\r\n\r\n  const fetchMachines = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) {\r\n        router.push('/login');\r\n        return;\r\n      }\r\n\r\n      const response = await fetch('/api/user/machine', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      if (response.status === 401) {\r\n        localStorage.removeItem('authToken');\r\n        router.push('/login');\r\n        return;\r\n      }\r\n\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        // Sort machines: master machines first, then by ID\r\n        const sortedMachines = (data.data || []).sort((a: Machine, b: Machine) => {\r\n          // Master machines come first\r\n          if (a.isMasterMachine && !b.isMasterMachine) return -1;\r\n          if (!a.isMasterMachine && b.isMasterMachine) return 1;\r\n          // If both are master or both are not, sort by ID\r\n          return a.id - b.id;\r\n        });\r\n        setMachines(sortedMachines);\r\n      } else {\r\n        setError(typeof data.error === 'string' ? data.error : data.error?.message || 'Failed to fetch machines');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching machines:', error);\r\n      setError('Failed to fetch machines');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [router]);\r\n\r\n  // Fetch societies for dropdown\r\n  const fetchSocieties = useCallback(async () => {\r\n    try {\r\n      setSocietiesLoading(true);\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch('/api/user/society', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setSocieties(data.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching societies:', error);\r\n    } finally {\r\n      setSocietiesLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch machine types from superadmin\r\n  const fetchMachineTypes = useCallback(async () => {\r\n    try {\r\n      setMachineTypesLoading(true);\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch('/api/superadmin/machines', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setMachineTypes(data.data.machines || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching machine types:', error);\r\n    } finally {\r\n      setMachineTypesLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch dairies\r\n  const fetchDairies = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch('/api/user/dairy', {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setDairies(data.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching dairies:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch BMCs\r\n  const fetchBmcs = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch('/api/user/bmc', {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setBmcs(data.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching BMCs:', error);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchMachines();\r\n      fetchSocieties();\r\n      fetchMachineTypes();\r\n      fetchDairies();\r\n      fetchBmcs();\r\n      fetchPerformanceStats();\r\n    }\r\n  }, [user, fetchMachines, fetchSocieties, fetchMachineTypes, fetchDairies, fetchBmcs, fetchPerformanceStats]);\r\n\r\n  // Listen for global search events from header\r\n  useEffect(() => {\r\n    const handleGlobalSearch = (e: Event) => {\r\n      const customEvent = e as CustomEvent<{ query: string }>;\r\n      setSearchQuery(customEvent.detail.query);\r\n    };\r\n\r\n    window.addEventListener('globalSearch', handleGlobalSearch as EventListener);\r\n    return () => window.removeEventListener('globalSearch', handleGlobalSearch as EventListener);\r\n  }, []);\r\n\r\n  // Clear messages after 5 seconds\r\n  useEffect(() => {\r\n    if (success || error) {\r\n      const timer = setTimeout(() => {\r\n        setSuccess('');\r\n        setError('');\r\n      }, 5000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [success, error]);\r\n\r\n  // Reset machine filter when society filter changes (similar to farmer management)\r\n  useEffect(() => {\r\n    if (societyFilter.length > 0 && machineFilter.length > 0) {\r\n      // Check if current machine selections are still valid for the selected societies\r\n      const validMachineIds = machines\r\n        .filter(m => societyFilter.includes(m.societyId?.toString() || ''))\r\n        .map(m => m.id?.toString() || '');\r\n      \r\n      const filteredMachineFilter = machineFilter.filter(id => validMachineIds.includes(id));\r\n      if (filteredMachineFilter.length !== machineFilter.length) {\r\n        setMachineFilter(filteredMachineFilter);\r\n      }\r\n    }\r\n  }, [societyFilter, machineFilter, machines]);\r\n\r\n  // Read URL parameters and initialize filters on mount\r\n  useEffect(() => {\r\n    const societyId = searchParams.get('societyId');\r\n    const societyName = searchParams.get('societyName');\r\n    const dairyFilterParam = searchParams.get('dairyFilter');\r\n    \r\n    if (societyId && !societyFilter.includes(societyId)) {\r\n      setSocietyFilter([societyId]);\r\n      \r\n      // Show success message with society name\r\n      if (societyName) {\r\n        setSuccess(`Filter Applied: ${decodeURIComponent(societyName)}`);\r\n      }\r\n    }\r\n    \r\n    if (dairyFilterParam && !dairyFilter.includes(dairyFilterParam)) {\r\n      setDairyFilter([dairyFilterParam]);\r\n      setSuccess('Filter Applied: Dairy');\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // Run once on mount\r\n\r\n\r\n  // Handle add form submission\r\n  const handleAddSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    // Validate required fields\r\n    if (!formData.machineId || !formData.machineId.trim()) {\r\n      setError('Please enter a machine ID.');\r\n      setSuccess('');\r\n      return;\r\n    }\r\n\r\n    if (!formData.machineType || !formData.machineType.trim()) {\r\n      setError('Please select a machine type.');\r\n      setSuccess('');\r\n      return;\r\n    }\r\n\r\n    if (!formData.societyId) {\r\n      setError('Please select a society for the machine.');\r\n      setSuccess('');\r\n      return;\r\n    }\r\n\r\n    // Validate phone number if provided\r\n    if (formData.contactPhone && formData.contactPhone.trim()) {\r\n      const phoneValidation = validateIndianPhone(formData.contactPhone);\r\n      if (!phoneValidation.isValid) {\r\n        setFieldErrors({ ...fieldErrors, contactPhone: phoneValidation.error || 'Invalid phone number' });\r\n        setError('Please fix the phone number error before saving.');\r\n        setSuccess('');\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Clear field errors if validation passes\r\n    setFieldErrors({});\r\n    \r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/machine', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(formData)\r\n      });\r\n\r\n      if (response.ok) {\r\n        setShowAddForm(false);\r\n        setFormData(initialFormData);\r\n        setSuccess('Machine created successfully');\r\n        setError('');\r\n        fetchMachines();\r\n      } else {\r\n        const errorResponse = await response.json();\r\n        const errorMessage = errorResponse.error || 'Failed to create machine';\r\n        \r\n        // Clear previous field errors\r\n        setFieldErrors({});\r\n        \r\n        // Check for specific field errors\r\n        if (errorMessage.toLowerCase().includes('machine id') && errorMessage.toLowerCase().includes('already exists')) {\r\n          if (errorMessage.toLowerCase().includes('in this society')) {\r\n            setFieldErrors({ machineId: 'This Machine ID already exists in the selected society' });\r\n          } else {\r\n            setFieldErrors({ machineId: 'This Machine ID already exists' });\r\n          }\r\n        } else if (errorMessage.toLowerCase().includes('machine type') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ machineType: 'This Machine type already exists for this society' });\r\n        } else {\r\n          setError(errorMessage);\r\n        }\r\n        setSuccess('');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating machine:', error);\r\n      setError('Error creating machine. Please try again.');\r\n      setSuccess('');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Handle edit form submission\r\n  const handleEditSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!selectedMachine) return;\r\n\r\n    // Validate required fields\r\n    if (!formData.machineId || !formData.machineId.trim()) {\r\n      setError('Please enter a machine ID.');\r\n      setSuccess('');\r\n      return;\r\n    }\r\n\r\n    if (!formData.machineType || !formData.machineType.trim()) {\r\n      setError('Please select a machine type.');\r\n      setSuccess('');\r\n      return;\r\n    }\r\n\r\n    if (!formData.societyId) {\r\n      setError('Please select a society for the machine.');\r\n      setSuccess('');\r\n      return;\r\n    }\r\n\r\n    // Validate phone number if provided\r\n    if (formData.contactPhone && formData.contactPhone.trim()) {\r\n      const phoneValidation = validateIndianPhone(formData.contactPhone);\r\n      if (!phoneValidation.isValid) {\r\n        setFieldErrors({ ...fieldErrors, contactPhone: phoneValidation.error || 'Invalid phone number' });\r\n        setError('Please fix the phone number error before saving.');\r\n        setSuccess('');\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Clear field errors if validation passes\r\n    setFieldErrors({});\r\n    \r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/machine', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ id: selectedMachine.id, ...formData })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setShowEditForm(false);\r\n        setSelectedMachine(null);\r\n        setFormData(initialFormData);\r\n        setSuccess('Machine updated successfully');\r\n        setError('');\r\n        fetchMachines();\r\n      } else {\r\n        const errorResponse = await response.json();\r\n        const errorMessage = errorResponse.error || 'Failed to update machine';\r\n        \r\n        // Clear previous field errors\r\n        setFieldErrors({});\r\n        \r\n        // Check for specific field errors\r\n        if (errorMessage.toLowerCase().includes('machine id') && errorMessage.toLowerCase().includes('already exists')) {\r\n          if (errorMessage.toLowerCase().includes('in this society')) {\r\n            setFieldErrors({ machineId: 'This Machine ID already exists in the selected society' });\r\n          } else {\r\n            setFieldErrors({ machineId: 'This Machine ID already exists' });\r\n          }\r\n        } else if (errorMessage.toLowerCase().includes('machine type') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ machineType: 'This Machine type already exists for this society' });\r\n        } else {\r\n          setError(errorMessage);\r\n        }\r\n        setSuccess('');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating machine:', error);\r\n      setError('Error updating machine. Please try again.');\r\n      setSuccess('');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Handle delete\r\n  const handleDelete = async () => {\r\n    if (!selectedMachine) return;\r\n\r\n    try {\r\n      setIsSubmitting(true);\r\n      const token = localStorage.getItem('authToken');\r\n\r\n      const response = await fetch(`/api/user/machine?id=${selectedMachine.id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (result.success) {\r\n        setSuccess('Machine deleted successfully!');\r\n        await fetchMachines();\r\n        setShowDeleteModal(false);\r\n        setSelectedMachine(null);\r\n      } else {\r\n        setError(typeof result.error === 'string' ? result.error : result.error?.message || 'Failed to delete machine');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting machine:', error);\r\n      setError('Failed to delete machine');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Toggle society folder expansion\r\n  const toggleSocietyExpansion = (societyId: number) => {\r\n    setExpandedSocieties(prev => {\r\n      const newExpanded = new Set(prev);\r\n      if (newExpanded.has(societyId)) {\r\n        newExpanded.delete(societyId);\r\n      } else {\r\n        newExpanded.add(societyId);\r\n      }\r\n      return newExpanded;\r\n    });\r\n  };\r\n\r\n  // Expand all societies\r\n  const expandAllSocieties = () => {\r\n    const allSocietyIds = new Set(\r\n      machines\r\n        .filter(m => m.societyId)\r\n        .map(m => m.societyId as number)\r\n    );\r\n    setExpandedSocieties(allSocietyIds);\r\n  };\r\n\r\n  // Collapse all societies\r\n  const collapseAllSocieties = () => {\r\n    setExpandedSocieties(new Set());\r\n  };\r\n\r\n  // Handle individual machine selection\r\n  const handleSelectMachine = (machineId: number) => {\r\n    setSelectedMachines(prev => {\r\n      const newSelected = new Set(prev);\r\n      const isDeselecting = newSelected.has(machineId);\r\n      \r\n      if (isDeselecting) {\r\n        newSelected.delete(machineId);\r\n        \r\n        // When deselecting a machine, uncheck selectAll\r\n        setSelectAll(false);\r\n        \r\n        // Check if we should deselect the society folder\r\n        const machine = filteredMachines.find(m => m.id === machineId);\r\n        if (machine && machine.societyId) {\r\n          const societyId = machine.societyId;\r\n          const societyMachines = filteredMachines.filter(m => m.societyId === societyId);\r\n          const allSocietyMachinesSelected = societyMachines.every(m => \r\n            m.id === machineId ? false : newSelected.has(m.id)\r\n          );\r\n          \r\n          // If not all machines in the society are selected, deselect the society folder\r\n          if (!allSocietyMachinesSelected) {\r\n            setSelectedSocieties(prevSocieties => {\r\n              const updatedSocieties = new Set(prevSocieties);\r\n              updatedSocieties.delete(societyId);\r\n              return updatedSocieties;\r\n            });\r\n          }\r\n        }\r\n      } else {\r\n        newSelected.add(machineId);\r\n        \r\n        // Check if the society folder should be selected\r\n        const machine = filteredMachines.find(m => m.id === machineId);\r\n        if (machine && machine.societyId) {\r\n          const societyId = machine.societyId;\r\n          const societyMachines = filteredMachines.filter(m => m.societyId === societyId);\r\n          const allSocietyMachinesSelected = societyMachines.every(m => \r\n            m.id === machineId ? true : newSelected.has(m.id)\r\n          );\r\n          \r\n          // If all machines in the society are now selected, select the society folder\r\n          if (allSocietyMachinesSelected) {\r\n            setSelectedSocieties(prevSocieties => {\r\n              const updatedSocieties = new Set(prevSocieties);\r\n              updatedSocieties.add(societyId);\r\n              return updatedSocieties;\r\n            });\r\n          }\r\n        }\r\n        \r\n        // Check if all filtered machines are now selected\r\n        const allFilteredIds = new Set(filteredMachines.map(m => m.id));\r\n        const allSelected = Array.from(allFilteredIds).every(id => \r\n          id === machineId ? true : newSelected.has(id)\r\n        );\r\n        \r\n        if (allSelected) {\r\n          setSelectAll(true);\r\n        }\r\n      }\r\n      \r\n      return newSelected;\r\n    });\r\n  };\r\n\r\n  // Toggle society selection with machine auto-selection\r\n  const toggleSocietySelection = (societyId: number, machineIds: number[]) => {\r\n    setSelectedSocieties(prev => {\r\n      const newSelected = new Set(prev);\r\n      if (newSelected.has(societyId)) {\r\n        // Deselect society and all its machines\r\n        newSelected.delete(societyId);\r\n        setSelectedMachines(prevMachines => {\r\n          const updatedMachines = new Set(prevMachines);\r\n          machineIds.forEach(id => updatedMachines.delete(id));\r\n          \r\n          // Check if we should unset selectAll\r\n          setSelectAll(false);\r\n          \r\n          return updatedMachines;\r\n        });\r\n      } else {\r\n        // Select society and all its machines\r\n        newSelected.add(societyId);\r\n        setSelectedMachines(prevMachines => {\r\n          const updatedMachines = new Set(prevMachines);\r\n          machineIds.forEach(id => updatedMachines.add(id));\r\n          \r\n          // Check if all filtered machines are now selected\r\n          const allFilteredIds = new Set(filteredMachines.map(m => m.id));\r\n          const allSelected = Array.from(allFilteredIds).every(id => updatedMachines.has(id));\r\n          if (allSelected) {\r\n            setSelectAll(true);\r\n          }\r\n          \r\n          return updatedMachines;\r\n        });\r\n      }\r\n      return newSelected;\r\n    });\r\n  };\r\n\r\n  // Handle Select All\r\n  const handleSelectAll = () => {\r\n    if (selectAll) {\r\n      setSelectedMachines(new Set());\r\n      setSelectedSocieties(new Set());\r\n      setSelectAll(false);\r\n    } else {\r\n      // Select only the currently filtered machines\r\n      setSelectedMachines(new Set(filteredMachines.map(m => m.id)));\r\n      \r\n      // Also select all societies that have machines in the filtered list\r\n      const machinesBySociety = filteredMachines.reduce((acc, machine) => {\r\n        const societyId = machine.societyId || 0;\r\n        if (!acc.includes(societyId)) {\r\n          acc.push(societyId);\r\n        }\r\n        return acc;\r\n      }, [] as number[]);\r\n      setSelectedSocieties(new Set(machinesBySociety));\r\n      \r\n      setSelectAll(true);\r\n    }\r\n  };\r\n\r\n  // Handle bulk delete\r\n  const handleBulkDelete = async () => {\r\n    if (selectedMachines.size === 0) return;\r\n\r\n    // Close the confirmation modal immediately and show LoadingSnackbar\r\n    setShowDeleteConfirm(false);\r\n    setIsDeletingBulk(true);\r\n    setUpdateProgress(0);\r\n    \r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      setUpdateProgress(10);\r\n      \r\n      const ids = Array.from(selectedMachines);\r\n      setUpdateProgress(20);\r\n      \r\n      const response = await fetch(`/api/user/machine?ids=${encodeURIComponent(JSON.stringify(ids))}`, {\r\n        method: 'DELETE',\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      \r\n      setUpdateProgress(60);\r\n\r\n      if (response.ok) {\r\n        setUpdateProgress(80);\r\n        await fetchMachines(); // Refresh the list\r\n        setUpdateProgress(95);\r\n        setSelectedMachines(new Set());\r\n        setSelectedSocieties(new Set());\r\n        setSelectAll(false);\r\n        setSuccess(`Successfully deleted ${ids.length} machine(s)${(statusFilter !== 'all' || dairyFilter.length > 0 || bmcFilter.length > 0 || societyFilter.length > 0) ? ' from filtered results' : ''}`);\r\n        setError('');\r\n        setUpdateProgress(100);\r\n      } else {\r\n        const data = await response.json();\r\n        setError(data.message || 'Failed to delete selected machines');\r\n        setSuccess('');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting machines:', error);\r\n      setError('Error deleting selected machines');\r\n      setSuccess('');\r\n    } finally {\r\n      setIsDeletingBulk(false);\r\n      setUpdateProgress(0);\r\n    }\r\n  };\r\n\r\n\r\n\r\n  // Handle bulk status update\r\n  const handleBulkStatusUpdate = async (newStatus?: string) => {\r\n    if (selectedMachines.size === 0) return;\r\n\r\n    const statusToUpdate = newStatus || bulkStatus;\r\n    setIsUpdatingStatus(true);\r\n    setUpdateProgress(0);\r\n\r\n    try {\r\n      // Step 1: Get token (5%)\r\n      const token = localStorage.getItem('authToken');\r\n      setUpdateProgress(5);\r\n      \r\n      // Step 2: Prepare machine IDs (10%)\r\n      const machineIds = Array.from(selectedMachines);\r\n      const totalMachines = machineIds.length;\r\n      setUpdateProgress(10);\r\n      \r\n      console.log(`ðŸ”„ Bulk updating ${totalMachines} machines to status: ${statusToUpdate}`);\r\n      \r\n      // Step 3: Single bulk update API call (10% to 90%)\r\n      setUpdateProgress(30);\r\n      const response = await fetch('/api/user/machine', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          bulkStatusUpdate: true,\r\n          machineIds: machineIds,\r\n          status: statusToUpdate\r\n        })\r\n      });\r\n\r\n      setUpdateProgress(70);\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Failed to update machine status');\r\n      }\r\n\r\n      const result = await response.json();\r\n      const updatedCount = result.data?.updated || totalMachines;\r\n      \r\n      // Step 4: Refresh data (90%)\r\n      setUpdateProgress(90);\r\n      await fetchMachines();\r\n      \r\n      // Step 5: Finalize (100%)\r\n      setUpdateProgress(100);\r\n      setSelectedMachines(new Set());\r\n      setSelectedSocieties(new Set());\r\n      setSelectAll(false);\r\n      \r\n      console.log(`âœ… Successfully updated ${updatedCount} machines`);\r\n      \r\n      setSuccess(\r\n        `Successfully updated status to \"${statusToUpdate}\" for ${updatedCount} machine(s)${\r\n          (statusFilter !== 'all' || dairyFilter.length > 0 || bmcFilter.length > 0 || societyFilter.length > 0) ? ' from filtered results' : ''\r\n        }`\r\n      );\r\n      setError('');\r\n\r\n    } catch (error) {\r\n      console.error('Error updating machine status:', error);\r\n      setUpdateProgress(100);\r\n      setError(error instanceof Error ? error.message : 'Error updating machine status. Please try again.');\r\n      setSuccess('');\r\n    } finally {\r\n      setIsUpdatingStatus(false);\r\n    }\r\n  };\r\n\r\n  // Clear selections when filters or search change or keep only visible machines\r\n  useEffect(() => {\r\n    // Recalculate filtered machines\r\n    const currentFilteredMachines = machines.filter(machine => {\r\n      const statusMatch = statusFilter === 'all' || machine.status === statusFilter;\r\n      const societyMatch = societyFilter.length === 0 || societyFilter.includes(machine.societyId?.toString() || '');\r\n      const searchMatch = searchQuery === '' || \r\n        machine.machineId.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        machine.machineType.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        machine.societyName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        machine.societyIdentifier?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        machine.location?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        machine.operatorName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        machine.contactPhone?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        machine.notes?.toLowerCase().includes(searchQuery.toLowerCase());\r\n      return statusMatch && societyMatch && searchMatch;\r\n    });\r\n\r\n    if (selectedMachines.size > 0) {\r\n      // Keep only machines that are still visible after filtering/searching\r\n      const visibleMachineIds = new Set(currentFilteredMachines.map(m => m.id));\r\n      const updatedSelection = new Set(\r\n        Array.from(selectedMachines).filter(id => visibleMachineIds.has(id))\r\n      );\r\n      \r\n      if (updatedSelection.size !== selectedMachines.size) {\r\n        setSelectedMachines(updatedSelection);\r\n        setSelectAll(false);\r\n        \r\n        // Update society selections based on remaining selected machines\r\n        const visibleSocietyIds = new Set(currentFilteredMachines.map(m => m.societyId).filter(Boolean));\r\n        const updatedSocietySelection = new Set<number>();\r\n        \r\n        visibleSocietyIds.forEach(societyId => {\r\n          const societyMachines = currentFilteredMachines.filter(m => m.societyId === societyId);\r\n          const allSocietyMachinesSelected = societyMachines.every(m => updatedSelection.has(m.id));\r\n          if (allSocietyMachinesSelected && societyMachines.length > 0) {\r\n            updatedSocietySelection.add(societyId as number);\r\n          }\r\n        });\r\n        \r\n        setSelectedSocieties(updatedSocietySelection);\r\n      }\r\n    } else {\r\n      setSelectAll(false);\r\n      setSelectedSocieties(new Set());\r\n    }\r\n  }, [statusFilter, societyFilter, searchQuery, machines, selectedMachines]);\r\n\r\n  // Handle status change\r\n  const handleStatusChange = async (machine: Machine, newStatus: 'active' | 'inactive' | 'maintenance' | 'suspended') => {\r\n    setIsUpdatingStatus(true);\r\n    setUpdateProgress(0);\r\n    try {\r\n      // Step 1: Get token (10%)\r\n      setUpdateProgress(10);\r\n      const token = localStorage.getItem('authToken');\r\n      \r\n      // Step 2: Prepare request (20%)\r\n      setUpdateProgress(20);\r\n      \r\n      // Step 3: Build request body (30%)\r\n      const requestBody = {\r\n        id: machine.id,\r\n        machineId: machine.machineId,\r\n        machineType: machine.machineType,\r\n        societyId: machine.societyId,\r\n        location: machine.location,\r\n        installationDate: machine.installationDate,\r\n        operatorName: machine.operatorName,\r\n        contactPhone: machine.contactPhone,\r\n        status: newStatus,\r\n        notes: machine.notes\r\n      };\r\n      setUpdateProgress(30);\r\n      \r\n      // Step 4: Send API request (60%)\r\n      const response = await fetch('/api/user/machine', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(requestBody)\r\n      });\r\n      setUpdateProgress(60);\r\n\r\n      // Step 5: Process response (80%)\r\n      setUpdateProgress(80);\r\n      if (response.ok) {\r\n        setSuccess(`Status updated to ${newStatus}!`);\r\n        // Step 6: Refresh data (100%)\r\n        await fetchMachines();\r\n        setUpdateProgress(100);\r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        const errorResponse = await response.json();\r\n        const errorMessage = errorResponse.error || 'Failed to update status';\r\n        setUpdateProgress(100);\r\n        setError(errorMessage);\r\n        setTimeout(() => setError(''), 5000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating status:', error);\r\n      setUpdateProgress(100);\r\n      setError('Failed to update status');\r\n      setTimeout(() => setError(''), 5000);\r\n    } finally {\r\n      setIsUpdatingStatus(false);\r\n    }\r\n  };\r\n\r\n  // Utility functions\r\n  const getPasswordStatusDisplay = (statusU: 0 | 1, statusS: 0 | 1, userPassword?: string, supervisorPassword?: string) => {\r\n    // Check if both passwords are set (not null/empty)\r\n    const hasUserPassword = userPassword && userPassword.trim() !== '';\r\n    const hasSupervisorPassword = supervisorPassword && supervisorPassword.trim() !== '';\r\n    \r\n    // Build status messages based on what's set\r\n    const statuses: string[] = [];\r\n    let icon = <Lock className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />;\r\n    let className = 'text-red-600 dark:text-red-400';\r\n    \r\n    // Check user password\r\n    if (hasUserPassword) {\r\n      if (statusU === 1) {\r\n        statuses.push('User');\r\n        className = 'text-amber-600 dark:text-amber-400';\r\n        icon = <Key className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />;\r\n      } else {\r\n        statuses.push('User âœ“');\r\n        className = 'text-green-600 dark:text-green-400';\r\n        icon = <Key className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />;\r\n      }\r\n    }\r\n    \r\n    // Check supervisor password\r\n    if (hasSupervisorPassword) {\r\n      if (statusS === 1) {\r\n        statuses.push('Supervisor');\r\n        className = 'text-amber-600 dark:text-amber-400';\r\n        icon = hasUserPassword ? <KeyRound className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" /> : <Lock className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />;\r\n      } else {\r\n        statuses.push('Supervisor âœ“');\r\n        className = 'text-green-600 dark:text-green-400';\r\n        icon = hasUserPassword ? <KeyRound className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" /> : <Lock className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />;\r\n      }\r\n    }\r\n    \r\n    // If both are set to inject, use amber color\r\n    if (hasUserPassword && hasSupervisorPassword && statusU === 1 && statusS === 1) {\r\n      className = 'text-amber-600 dark:text-amber-400';\r\n      icon = <KeyRound className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />;\r\n    }\r\n    // If both are injected, use green color\r\n    else if (hasUserPassword && hasSupervisorPassword && statusU === 0 && statusS === 0) {\r\n      className = 'text-green-600 dark:text-green-400';\r\n      icon = <KeyRound className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />;\r\n    }\r\n    // If mixed statuses, use amber (waiting for injection)\r\n    else if (hasUserPassword && hasSupervisorPassword && (statusU === 1 || statusS === 1)) {\r\n      className = 'text-amber-600 dark:text-amber-400';\r\n      icon = <KeyRound className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />;\r\n    }\r\n    \r\n    const text = statuses.length > 0 ? statuses.join(' | ') : 'No passwords';\r\n    \r\n    return { icon, text, className };\r\n  };\r\n\r\n  // Modal management\r\n  const openAddModal = () => {\r\n    const currentDate = new Date().toISOString().split('T')[0]; // Get current date in YYYY-MM-DD format\r\n    setFormData({\r\n      ...initialFormData,\r\n      installationDate: currentDate\r\n    });\r\n    setShowAddForm(true);\r\n    setError('');\r\n    setSuccess('');\r\n    setFieldErrors({});\r\n  };\r\n\r\n  const handleEditClick = (machine: Machine) => {\r\n    setSelectedMachine(machine);\r\n    setFormData({\r\n      machineId: machine.machineId,\r\n      machineType: machine.machineType,\r\n      societyId: machine.societyId.toString(),\r\n      location: machine.location || '',\r\n      installationDate: machine.installationDate || '',\r\n      operatorName: machine.operatorName || '',\r\n      contactPhone: machine.contactPhone || '',\r\n      status: machine.status,\r\n      notes: machine.notes || '',\r\n      setAsMaster: false,\r\n      disablePasswordInheritance: false\r\n    });\r\n    setFieldErrors({}); // Clear field errors\r\n    setError(''); // Clear general errors\r\n    setShowEditForm(true);\r\n  };\r\n\r\n  const handleDeleteClick = (machine: Machine) => {\r\n    setSelectedMachine(machine);\r\n    setShowDeleteModal(true);\r\n  };\r\n\r\n  const handlePasswordSettingsClick = (machine: Machine) => {\r\n    setSelectedMachine(machine);\r\n    setPasswordData({\r\n      userPassword: '',\r\n      supervisorPassword: '',\r\n      confirmUserPassword: '',\r\n      confirmSupervisorPassword: ''\r\n    });\r\n    setShowPasswordModal(true);\r\n  };\r\n\r\n  const closeAddModal = () => {\r\n    setShowAddForm(false);\r\n    setFormData(initialFormData);\r\n    setError('');\r\n    setSuccess('');\r\n    setFieldErrors({});\r\n  };\r\n\r\n  const closeEditModal = () => {\r\n    setShowEditForm(false);\r\n    setSelectedMachine(null);\r\n    setFormData(initialFormData);\r\n    setError('');\r\n    setSuccess('');\r\n    setFieldErrors({});\r\n  };\r\n\r\n  const closeDeleteModal = () => {\r\n    setShowDeleteModal(false);\r\n    setSelectedMachine(null);\r\n  };\r\n\r\n  const closePasswordModal = () => {\r\n    setShowPasswordModal(false);\r\n    setPasswordData({\r\n      userPassword: '',\r\n      supervisorPassword: '',\r\n      confirmUserPassword: '',\r\n      confirmSupervisorPassword: ''\r\n    });\r\n    setPasswordErrors({\r\n      userPassword: '',\r\n      confirmUserPassword: '',\r\n      supervisorPassword: '',\r\n      confirmSupervisorPassword: ''\r\n    });\r\n    setError('');\r\n    setSuccess('');\r\n    setSelectedMachine(null);\r\n    setApplyPasswordsToOthers(false);\r\n    setSelectedMachinesForPassword(new Set());\r\n    setSelectAllMachinesForPassword(false);\r\n  };\r\n\r\n  // Handle show password request\r\n  const handleShowPasswordClick = (machine: Machine) => {\r\n    setMachineToShowPassword(machine);\r\n    setShowPasswordViewModal(true);\r\n    setAdminPasswordForView('');\r\n    setViewPasswordError('');\r\n    setRevealedPasswords(null);\r\n  };\r\n\r\n  // Handle admin password verification and show passwords\r\n  const handleVerifyAndShowPasswords = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!machineToShowPassword || !adminPasswordForView) {\r\n      setViewPasswordError('Please enter your admin password');\r\n      return;\r\n    }\r\n\r\n    setViewingPasswords(true);\r\n    setViewPasswordError('');\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) {\r\n        router.push('/login');\r\n        return;\r\n      }\r\n\r\n      const response = await fetch(`/api/user/machine/${machineToShowPassword.id}/show-password`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          adminPassword: adminPasswordForView\r\n        })\r\n      });\r\n\r\n      if (response.status === 401) {\r\n        const errorData = await response.json();\r\n        if (errorData.error === 'Invalid admin password') {\r\n          setViewPasswordError('Invalid admin password. Please try again.');\r\n        } else {\r\n          localStorage.removeItem('authToken');\r\n          router.push('/login');\r\n        }\r\n        return;\r\n      }\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        setViewPasswordError(errorData.error || 'Failed to retrieve passwords');\r\n        return;\r\n      }\r\n\r\n      const result = await response.json();\r\n      setRevealedPasswords({\r\n        userPassword: result.data.userPassword,\r\n        supervisorPassword: result.data.supervisorPassword\r\n      });\r\n      setAdminPasswordForView(''); // Clear admin password after successful verification\r\n\r\n    } catch (error) {\r\n      console.error('Error retrieving passwords:', error);\r\n      setViewPasswordError('Failed to retrieve passwords. Please try again.');\r\n    } finally {\r\n      setViewingPasswords(false);\r\n    }\r\n  };\r\n\r\n  // Close show password modal\r\n  const closePasswordViewModal = () => {\r\n    setShowPasswordViewModal(false);\r\n    setAdminPasswordForView('');\r\n    setViewPasswordError('');\r\n    setRevealedPasswords(null);\r\n    setMachineToShowPassword(null);\r\n  };\r\n\r\n\r\n  const handlePasswordSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!selectedMachine) return;\r\n\r\n    // Clear previous errors\r\n    setError('');\r\n\r\n    // Check for live validation errors\r\n    const hasErrors = Object.values(passwordErrors).some(error => error !== '');\r\n    if (hasErrors) {\r\n      setError('Please fix password validation errors before submitting');\r\n      return;\r\n    }\r\n\r\n    if (!passwordData.userPassword && !passwordData.supervisorPassword) {\r\n      setError('At least one password must be provided');\r\n      return;\r\n    }\r\n\r\n    // Ensure passwords are confirmed when provided\r\n    if (passwordData.userPassword && !passwordData.confirmUserPassword) {\r\n      setError('Please confirm the user password');\r\n      return;\r\n    }\r\n\r\n    if (passwordData.userPassword && passwordData.confirmUserPassword && \r\n        passwordData.userPassword !== passwordData.confirmUserPassword) {\r\n      setError('User passwords do not match');\r\n      return;\r\n    }\r\n\r\n    if (passwordData.supervisorPassword && !passwordData.confirmSupervisorPassword) {\r\n      setError('Please confirm the supervisor password');\r\n      return;\r\n    }\r\n\r\n    if (passwordData.supervisorPassword && passwordData.confirmSupervisorPassword && \r\n        passwordData.supervisorPassword !== passwordData.confirmSupervisorPassword) {\r\n      setError('Supervisor passwords do not match');\r\n      return;\r\n    }\r\n\r\n    // Validate password format (must be 6 digits)\r\n    if (passwordData.userPassword) {\r\n      const userPwdError = validatePasswordFormat(passwordData.userPassword);\r\n      if (userPwdError) {\r\n        setError(`User password: ${userPwdError}`);\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (passwordData.supervisorPassword) {\r\n      const supervisorPwdError = validatePasswordFormat(passwordData.supervisorPassword);\r\n      if (supervisorPwdError) {\r\n        setError(`Supervisor password: ${supervisorPwdError}`);\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Check if applying to others and validate selection\r\n    if (applyPasswordsToOthers && selectedMachinesForPassword.size === 0) {\r\n      setError('Please select at least one machine to apply passwords to');\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setError('');\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) {\r\n        router.push('/login');\r\n        return;\r\n      }\r\n\r\n      // Update the master machine first\r\n      const response = await fetch(`/api/user/machine/${selectedMachine.id}/password`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          userPassword: passwordData.userPassword || null,\r\n          supervisorPassword: passwordData.supervisorPassword || null,\r\n        }),\r\n      });\r\n\r\n      if (response.status === 401) {\r\n        localStorage.removeItem('authToken');\r\n        router.push('/login');\r\n        return;\r\n      }\r\n\r\n      if (!response.ok) {\r\n        const errorResponse = await response.json();\r\n        const errorMessage = errorResponse.error || errorResponse.message || 'Failed to update passwords';\r\n        setError(errorMessage);\r\n        setIsSubmitting(false);\r\n        return;\r\n      }\r\n\r\n      // If applying to other machines, update them as well\r\n      if (applyPasswordsToOthers && selectedMachinesForPassword.size > 0) {\r\n        const updatePromises = Array.from(selectedMachinesForPassword).map(async (machineId) => {\r\n          const updateResponse = await fetch(`/api/user/machine/${machineId}/password`, {\r\n            method: 'PUT',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': `Bearer ${token}`\r\n            },\r\n            body: JSON.stringify({\r\n              userPassword: passwordData.userPassword || null,\r\n              supervisorPassword: passwordData.supervisorPassword || null,\r\n            }),\r\n          });\r\n          return updateResponse.ok;\r\n        });\r\n\r\n        await Promise.all(updatePromises);\r\n        setSuccess(`Passwords updated for master machine and ${selectedMachinesForPassword.size} other machine(s)!`);\r\n      } else {\r\n        setSuccess('Machine passwords updated successfully!');\r\n      }\r\n\r\n      await fetchMachines();\r\n      closePasswordModal();\r\n      setTimeout(() => setSuccess(''), 3000);\r\n    } catch (error) {\r\n      console.error('Error updating passwords:', error);\r\n      setError('Failed to update passwords. Please try again.');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Filter machines with multi-field search\r\n  const filteredMachines = machines.filter(machine => {\r\n    const matchesStatus = statusFilter === 'all' || machine.status === statusFilter;\r\n    \r\n    // Get society's BMC and dairy\r\n    const machineSociety = societies.find(s => s.id === machine.societyId);\r\n    const machineBmc = machineSociety?.bmc_id ? bmcs.find(b => b.id === machineSociety.bmc_id) : null;\r\n    const machineDairy = machineBmc?.dairyFarmId ? dairies.find(d => d.id === machineBmc.dairyFarmId) : null;\r\n    \r\n    const matchesDairy = dairyFilter.length === 0 || dairyFilter.includes(machineDairy?.id.toString() || '');\r\n    const matchesBmc = bmcFilter.length === 0 || bmcFilter.includes(machineBmc?.id.toString() || '');\r\n    const matchesSociety = societyFilter.length === 0 || societyFilter.includes(machine.societyId?.toString() || '');\r\n    const matchesMachine = machineFilter.length === 0 || machineFilter.includes(machine.id?.toString() || '');\r\n    \r\n    // Multi-field search across machine details (case-insensitive)\r\n    const searchLower = searchQuery.toLowerCase().trim();\r\n    const matchesSearch = searchLower === '' || [\r\n      machine.machineId,\r\n      machine.machineType,\r\n      machine.societyName,\r\n      machine.societyIdentifier,\r\n      machine.location,\r\n      machine.operatorName,\r\n      machine.contactPhone,\r\n      machine.notes\r\n    ].some(field => \r\n      field?.toString().toLowerCase().includes(searchLower)\r\n    );\r\n    \r\n    return matchesStatus && matchesDairy && matchesBmc && matchesSociety && matchesMachine && matchesSearch;\r\n  });\r\n\r\n  // Filter societies to only show those with machines in the current filtered list\r\n  const availableSocieties = useMemo(() => {\r\n    // Get unique society IDs from machines based on current status, search, and machine type filters\r\n    const machinesForSocietyFilter = machines.filter(machine => {\r\n      const matchesStatus = statusFilter === 'all' || machine.status === statusFilter;\r\n      const matchesMachine = machineFilter.length === 0 || machineFilter.includes(machine.id?.toString() || '');\r\n      \r\n      const searchLower = searchQuery.toLowerCase().trim();\r\n      const matchesSearch = searchLower === '' || [\r\n        machine.machineId,\r\n        machine.machineType,\r\n        machine.societyName,\r\n        machine.societyIdentifier,\r\n        machine.location,\r\n        machine.operatorName,\r\n        machine.contactPhone,\r\n        machine.notes\r\n      ].some(field => \r\n        field?.toString().toLowerCase().includes(searchLower)\r\n      );\r\n      \r\n      return matchesStatus && matchesMachine && matchesSearch;\r\n    });\r\n\r\n    const societyIdsWithMachines = new Set(\r\n      machinesForSocietyFilter\r\n        .map(m => m.societyId)\r\n        .filter(Boolean)\r\n    );\r\n\r\n    return societies.filter(society => societyIdsWithMachines.has(society.id));\r\n  }, [machines, societies, searchQuery, statusFilter, machineFilter]);\r\n\r\n  return (\r\n    <>\r\n    {/* Loading Snackbar for Status Updates - Bottom Right Corner */}\r\n    {isUpdatingStatus && (\r\n      <div className=\"fixed bottom-6 right-6 z-50 bg-white dark:bg-gray-800 rounded-lg shadow-2xl border border-gray-200 dark:border-gray-700 p-4 min-w-[320px] max-w-sm\">\r\n        <div className=\"flex items-start space-x-3\">\r\n          <div className=\"flex-shrink-0\">\r\n            <FlowerSpinner size={24} />\r\n          </div>\r\n          <div className=\"flex-1 min-w-0\">\r\n            <p className=\"text-sm font-medium text-gray-900 dark:text-white mb-1\">\r\n              Updating status...\r\n            </p>\r\n            <p className=\"text-xs text-gray-600 dark:text-gray-400 mb-2\">\r\n              Please wait\r\n            </p>\r\n            {/* Progress Bar */}\r\n            <div className=\"relative w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden\">\r\n              <div \r\n                className=\"absolute top-0 left-0 h-full bg-gradient-to-r from-blue-500 to-cyan-500 transition-all duration-300 ease-out\"\r\n                style={{ width: `${updateProgress}%` }}\r\n              />\r\n            </div>\r\n            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1 text-right\">\r\n              {updateProgress}%\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )}\r\n    \r\n    <div className=\"p-3 xs:p-4 sm:p-6 lg:p-8 space-y-3 xs:space-y-4 sm:space-y-6 lg:pb-8\">\r\n      {/* Page Header */}\r\n      <ManagementPageHeader\r\n        title=\"Machine Management\"\r\n        subtitle=\"Manage dairy equipment and machinery across societies\"\r\n        icon={<Settings className=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" />}\r\n        onRefresh={fetchMachines}\r\n        onStatistics={() => router.push('/admin/machine/statistics')}\r\n        hasData={filteredMachines.length > 0}\r\n      />\r\n\r\n        {/* Success/Error Messages */}\r\n        <StatusMessage \r\n          success={success} \r\n          error={error}\r\n        />\r\n\r\n        {/* Performance Stats Cards */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3 sm:gap-4\">\r\n            <div \r\n              onClick={() => performanceStats.topCollector && handleCardClick('quantity')}\r\n              className={`bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-4 rounded-lg border border-green-200 dark:border-green-700 ${performanceStats.topCollector ? 'hover:shadow-lg cursor-pointer' : 'opacity-60'} transition-shadow`}>\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <h3 className=\"text-sm font-semibold text-green-900 dark:text-green-100\">Top Collector (30d)</h3>\r\n                <Droplets className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\r\n              </div>\r\n              {performanceStats.topCollector ? (\r\n                <>\r\n                  <p className=\"text-lg font-bold text-green-800 dark:text-green-200 truncate\">{performanceStats.topCollector.machine.machineId}</p>\r\n                  <p className=\"text-xs text-green-700 dark:text-green-300 truncate\">{performanceStats.topCollector.machine.machineType}</p>\r\n                  {performanceStats.topCollector.machine.societyName && (\r\n                    <p className=\"text-xs text-green-600 dark:text-green-400 truncate\">{performanceStats.topCollector.machine.societyName}</p>\r\n                  )}\r\n                  <p className=\"text-sm font-semibold text-green-600 dark:text-green-400 mt-1\">{performanceStats.topCollector.totalQuantity.toFixed(2)} L</p>\r\n                </>\r\n              ) : (\r\n                <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-2\">No data available</p>\r\n              )}\r\n            </div>\r\n            \r\n            <div \r\n              onClick={() => performanceStats.mostTests && handleCardClick('tests')}\r\n              className={`bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-4 rounded-lg border border-purple-200 dark:border-purple-700 ${performanceStats.mostTests ? 'hover:shadow-lg cursor-pointer' : 'opacity-60'} transition-shadow`}>\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <h3 className=\"text-sm font-semibold text-purple-900 dark:text-purple-100\">Most Tests (30d)</h3>\r\n                <BarChart3 className=\"w-5 h-5 text-purple-600 dark:text-purple-400\" />\r\n              </div>\r\n              {performanceStats.mostTests ? (\r\n                <>\r\n                  <p className=\"text-lg font-bold text-purple-800 dark:text-purple-200 truncate\">{performanceStats.mostTests.machine.machineId}</p>\r\n                  <p className=\"text-xs text-purple-700 dark:text-purple-300 truncate\">{performanceStats.mostTests.machine.machineType}</p>\r\n                  {performanceStats.mostTests.machine.societyName && (\r\n                    <p className=\"text-xs text-purple-600 dark:text-purple-400 truncate\">{performanceStats.mostTests.machine.societyName}</p>\r\n                  )}\r\n                  <p className=\"text-sm font-semibold text-purple-600 dark:text-purple-400 mt-1\">{performanceStats.mostTests.totalTests} Tests</p>\r\n                </>\r\n              ) : (\r\n                <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-2\">No data available</p>\r\n              )}\r\n            </div>\r\n            \r\n            <div \r\n              onClick={() => performanceStats.bestCleaning && handleCardClick('cleaning')}\r\n              className={`bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 p-4 rounded-lg border border-orange-200 dark:border-orange-700 ${performanceStats.bestCleaning ? 'hover:shadow-lg cursor-pointer' : 'opacity-60'} transition-shadow`}>\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <h3 className=\"text-sm font-semibold text-orange-900 dark:text-orange-100\">Best Cleaning (30d)</h3>\r\n                <Award className=\"w-5 h-5 text-orange-600 dark:text-orange-400\" />\r\n              </div>\r\n              {performanceStats.bestCleaning ? (\r\n                <>\r\n                  <p className=\"text-lg font-bold text-orange-800 dark:text-orange-200 truncate\">{performanceStats.bestCleaning.machine.machineId}</p>\r\n                  <p className=\"text-xs text-orange-700 dark:text-orange-300 truncate\">{performanceStats.bestCleaning.machine.machineType}</p>\r\n                  {performanceStats.bestCleaning.machine.societyName && (\r\n                    <p className=\"text-xs text-orange-600 dark:text-orange-400 truncate\">{performanceStats.bestCleaning.machine.societyName}</p>\r\n                  )}\r\n                  <p className=\"text-sm font-semibold text-orange-600 dark:text-orange-400 mt-1\">{performanceStats.bestCleaning.totalCleanings} Cleanings</p>\r\n                </>\r\n              ) : (\r\n                <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-2\">No data available</p>\r\n              )}\r\n            </div>\r\n            \r\n            <div \r\n              onClick={() => performanceStats.mostCleaningSkip && handleCardClick('skip')}\r\n              className={`bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 p-4 rounded-lg border border-red-200 dark:border-red-700 ${performanceStats.mostCleaningSkip ? 'hover:shadow-lg cursor-pointer' : 'opacity-60'} transition-shadow`}>\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <h3 className=\"text-sm font-semibold text-red-900 dark:text-red-100\">Most Cleaning Skip (30d)</h3>\r\n                <AlertTriangle className=\"w-5 h-5 text-red-600 dark:text-red-400\" />\r\n              </div>\r\n              {performanceStats.mostCleaningSkip ? (\r\n                <>\r\n                  <p className=\"text-lg font-bold text-red-800 dark:text-red-200 truncate\">{performanceStats.mostCleaningSkip.machine.machineId}</p>\r\n                  <p className=\"text-xs text-red-700 dark:text-red-300 truncate\">{performanceStats.mostCleaningSkip.machine.machineType}</p>\r\n                  {performanceStats.mostCleaningSkip.machine.societyName && (\r\n                    <p className=\"text-xs text-red-600 dark:text-red-400 truncate\">{performanceStats.mostCleaningSkip.machine.societyName}</p>\r\n                  )}\r\n                  <p className=\"text-sm font-semibold text-red-600 dark:text-red-400 mt-1\">{performanceStats.mostCleaningSkip.totalSkips} Skips</p>\r\n                </>\r\n              ) : (\r\n                <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-2\">No data available</p>\r\n              )}\r\n            </div>\r\n            \r\n            <div \r\n              onClick={() => performanceStats.activeToday && handleCardClick('today')}\r\n              className={`bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 p-4 rounded-lg border border-pink-200 dark:border-pink-700 ${performanceStats.activeToday ? 'hover:shadow-lg cursor-pointer' : 'opacity-60'} transition-shadow`}>\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <h3 className=\"text-sm font-semibold text-pink-900 dark:text-pink-100\">Active Today</h3>\r\n                <Clock className=\"w-5 h-5 text-pink-600 dark:text-pink-400\" />\r\n              </div>\r\n              {performanceStats.activeToday ? (\r\n                <>\r\n                  <p className=\"text-lg font-bold text-pink-800 dark:text-pink-200 truncate\">{performanceStats.activeToday.machine.machineId}</p>\r\n                  <p className=\"text-xs text-pink-700 dark:text-pink-300 truncate\">{performanceStats.activeToday.machine.machineType}</p>\r\n                  {performanceStats.activeToday.machine.societyName && (\r\n                    <p className=\"text-xs text-pink-600 dark:text-pink-400 truncate\">{performanceStats.activeToday.machine.societyName}</p>\r\n                  )}\r\n                  <p className=\"text-sm font-semibold text-pink-600 dark:text-pink-400 mt-1\">{performanceStats.activeToday.collectionsToday} Today</p>\r\n                </>\r\n              ) : (\r\n                <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-2\">No data available</p>\r\n              )}\r\n            </div>\r\n            \r\n            <div \r\n              onClick={() => performanceStats.highestUptime && handleCardClick('uptime')}\r\n              className={`bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-4 rounded-lg border border-indigo-200 dark:border-indigo-700 ${performanceStats.highestUptime ? 'hover:shadow-lg cursor-pointer' : 'opacity-60'} transition-shadow`}>\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <h3 className=\"text-sm font-semibold text-indigo-900 dark:text-indigo-100\">Highest Uptime (30d)</h3>\r\n                <TrendingUp className=\"w-5 h-5 text-indigo-600 dark:text-indigo-400\" />\r\n              </div>\r\n              {performanceStats.highestUptime ? (\r\n                <>\r\n                  <p className=\"text-lg font-bold text-indigo-800 dark:text-indigo-200 truncate\">{performanceStats.highestUptime.machine.machineId}</p>\r\n                  <p className=\"text-xs text-indigo-700 dark:text-indigo-300 truncate\">{performanceStats.highestUptime.machine.machineType}</p>\r\n                  {performanceStats.highestUptime.machine.societyName && (\r\n                    <p className=\"text-xs text-indigo-600 dark:text-indigo-400 truncate\">{performanceStats.highestUptime.machine.societyName}</p>\r\n                  )}\r\n                  <p className=\"text-sm font-semibold text-indigo-600 dark:text-indigo-400 mt-1\">{performanceStats.highestUptime.activeDays} Days</p>\r\n                </>\r\n              ) : (\r\n                <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-2\">No data available</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n        {/* Status Stats Cards */}\r\n        <StatsGrid\r\n          allItems={machines}\r\n          filteredItems={filteredMachines}\r\n          hasFilters={statusFilter !== 'all' || dairyFilter.length > 0 || bmcFilter.length > 0 || societyFilter.length > 0 || machineFilter.length > 0}\r\n          onStatusFilterChange={(status) => setStatusFilter(status)}\r\n          currentStatusFilter={statusFilter}\r\n        />\r\n\r\n        {/* Filter Controls */}\r\n        <FilterDropdown\r\n          statusFilter={statusFilter}\r\n          onStatusChange={(value) => setStatusFilter(value as typeof statusFilter)}\r\n          dairyFilter={dairyFilter}\r\n          onDairyChange={(value) => setDairyFilter(Array.isArray(value) ? value : [value])}\r\n          bmcFilter={bmcFilter}\r\n          onBmcChange={(value) => setBmcFilter(Array.isArray(value) ? value : [value])}\r\n          societyFilter={societyFilter}\r\n          onSocietyChange={(value) => setSocietyFilter(Array.isArray(value) ? value : [value])}\r\n          machineFilter={machineFilter}\r\n          onMachineChange={(value) => setMachineFilter(Array.isArray(value) ? value : [value])}\r\n          dairies={dairies}\r\n          bmcs={bmcs}\r\n          societies={availableSocieties}\r\n          machines={machines}\r\n          filteredCount={filteredMachines.length}\r\n          totalCount={machines.length}\r\n          searchQuery={searchQuery}\r\n          onSearchChange={setSearchQuery}\r\n          icon={<Settings className=\"w-5 h-5\" />}\r\n          hideMainFilterButton={true}\r\n        />\r\n\r\n      {/* Select All and View Mode Controls */}\r\n      {filteredMachines.length > 0 && (\r\n        <div className=\"flex flex-col xs:flex-row items-start xs:items-center justify-between gap-3 bg-white dark:bg-gray-800 p-3 sm:p-4 rounded-lg border border-gray-200 dark:border-gray-700\">\r\n          {/* Select All Control - Left Side */}\r\n          <label className=\"flex items-center space-x-3 cursor-pointer\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={selectAll}\r\n              onChange={handleSelectAll}\r\n              className=\"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600\"\r\n            />\r\n            <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n              Select All {filteredMachines.length} {filteredMachines.length === 1 ? 'machine' : 'machines'}\r\n              {(statusFilter !== 'all' || dairyFilter.length > 0 || bmcFilter.length > 0 || societyFilter.length > 0 || machineFilter.length > 0) && ` (filtered)`}\r\n            </span>\r\n          </label>\r\n\r\n          {/* View Mode Toggle - Right Side */}\r\n          <div className=\"flex items-center gap-3\">\r\n            {/* View Mode Toggle */}\r\n            <ViewModeToggle\r\n              viewMode={viewMode}\r\n              onViewModeChange={setViewMode}\r\n              folderLabel=\"Folder View\"\r\n              listLabel=\"Grid View\"\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n        {loading ? (\r\n          <div className=\"flex items-center justify-center py-12 sm:py-20\">\r\n            <FlowerSpinner size={40} />\r\n          </div>\r\n        ) : filteredMachines.length > 0 ? (\r\n          viewMode === 'folder' ? (\r\n            // Folder View - Grouped by Society\r\n            <div className=\"space-y-4\">\r\n              {(() => {\r\n                // Group machines by society\r\n                const machinesBySociety = filteredMachines.reduce((acc, machine) => {\r\n                  const societyId = machine.societyId || 0;\r\n                  const societyName = machine.societyName || 'Unassigned';\r\n                  const societyIdentifier = machine.societyIdentifier || 'N/A';\r\n                  \r\n                  if (!acc[societyId]) {\r\n                    acc[societyId] = {\r\n                      id: societyId,\r\n                      name: societyName,\r\n                      identifier: societyIdentifier,\r\n                      machines: []\r\n                    };\r\n                  }\r\n                  acc[societyId].machines.push(machine);\r\n                  return acc;\r\n                }, {} as Record<number, {id: number; name: string; identifier: string; machines: Machine[]}>);\r\n\r\n                const societyGroups = Object.values(machinesBySociety).sort((a, b) => \r\n                  a.name.localeCompare(b.name)\r\n                );\r\n\r\n                return societyGroups.map(society => {\r\n                  const isExpanded = expandedSocieties.has(society.id);\r\n                  const machineCount = society.machines.length;\r\n                  const activeCount = society.machines.filter(m => m.status === 'active').length;\r\n                  const inactiveCount = society.machines.filter(m => m.status === 'inactive').length;\r\n                  const maintenanceCount = society.machines.filter(m => m.status === 'maintenance').length;\r\n                  const isSocietySelected = selectedSocieties.has(society.id);\r\n                  const machineIds = society.machines.map(m => m.id);\r\n\r\n                  return (\r\n                    <div \r\n                      key={society.id} \r\n                      className={`relative bg-white dark:bg-gray-800 rounded-lg border-2 transition-colors hover:z-10 ${\r\n                        isSocietySelected \r\n                          ? 'border-blue-500 dark:border-blue-400' \r\n                          : 'border-gray-200 dark:border-gray-700'\r\n                      }`}\r\n                    >\r\n                      {/* Society Folder Header */}\r\n                      <div className=\"flex items-center\">\r\n                        {/* Checkbox for selecting the entire society */}\r\n                        <div \r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            toggleSocietySelection(society.id, machineIds);\r\n                          }}\r\n                          className=\"flex items-center justify-center p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer\"\r\n                        >\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            checked={isSocietySelected}\r\n                            onChange={() => {}}\r\n                            className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 cursor-pointer\"\r\n                          />\r\n                        </div>\r\n\r\n                        {/* Expandable folder button */}\r\n                        <button\r\n                          onClick={() => toggleSocietyExpansion(society.id)}\r\n                          className=\"flex-1 flex items-center justify-between p-4 pl-0 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors\"\r\n                        >\r\n                          <div className=\"flex items-center space-x-3\">\r\n                            {isExpanded ? (\r\n                              <ChevronDown className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\r\n                            ) : (\r\n                              <ChevronRight className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\r\n                            )}\r\n                            {isExpanded ? (\r\n                              <FolderOpen className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\r\n                            ) : (\r\n                              <Folder className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\r\n                            )}\r\n                            <div className=\"text-left\">\r\n                              <h3 className=\"text-base sm:text-lg font-semibold text-gray-900 dark:text-white\">\r\n                                {society.name}\r\n                              </h3>\r\n                              <p className=\"text-xs sm:text-sm text-gray-500 dark:text-gray-400\">\r\n                                ID: {society.identifier}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex items-center space-x-4\">\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              <div className=\"text-right\">\r\n                                <div className=\"flex items-center space-x-2 text-xs sm:text-sm text-gray-600 dark:text-gray-400\">\r\n                                  <span className=\"flex items-center space-x-1\">\r\n                                    <div className=\"w-2 h-2 rounded-full bg-green-500\"></div>\r\n                                    <span>{activeCount}</span>\r\n                                  </span>\r\n                                  <span className=\"flex items-center space-x-1\">\r\n                                    <div className=\"w-2 h-2 rounded-full bg-red-500\"></div>\r\n                                    <span>{inactiveCount}</span>\r\n                                  </span>\r\n                                  {maintenanceCount > 0 && (\r\n                                    <span className=\"flex items-center space-x-1\">\r\n                                      <div className=\"w-2 h-2 rounded-full bg-blue-500\"></div>\r\n                                      <span>{maintenanceCount}</span>\r\n                                    </span>\r\n                                  )}\r\n                                </div>\r\n                                <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                                  {machineCount} {machineCount === 1 ? 'machine' : 'machines'}\r\n                                </p>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </button>\r\n                      </div>\r\n\r\n                      {/* Machines Grid - Shown when expanded */}\r\n                      {isExpanded && (\r\n                        <div className=\"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-900/30\">\r\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4\">\r\n                            {society.machines.map((machine) => (\r\n                              <div key={machine.id} className=\"relative hover:z-20\">\r\n                              <ItemCard\r\n                                id={machine.id}\r\n                                name={machine.machineId}\r\n                                identifier={machine.machineType}\r\n                                status={machine.status}\r\n                                icon={<Wrench className=\"w-4 h-4 sm:w-5 sm:h-5 text-green-600 dark:text-green-400\" />}\r\n                                showStatus={true}\r\n                                badge={machine.isMasterMachine ? {\r\n                                  text: 'Master',\r\n                                  color: 'bg-gradient-to-r from-yellow-400 to-amber-500 text-gray-900 border-yellow-600',\r\n                                  onClick: () => handleMasterBadgeClick(society.id)\r\n                                } : undefined}\r\n                                selectable={true}\r\n                                selected={selectedMachines.has(machine.id)}\r\n                                onSelect={() => handleSelectMachine(machine.id)}\r\n                                onPasswordSettings={() => handlePasswordSettingsClick(machine)}\r\n                                searchQuery={searchQuery}\r\n                                details={[\r\n                                  ...(machine.location ? [{ icon: <MapPin className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, text: machine.location }] : []),\r\n                                  ...(machine.operatorName ? [{ icon: <User className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, text: machine.operatorName }] : []),\r\n                                  ...(machine.contactPhone ? [{ icon: <Phone className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, text: machine.contactPhone }] : []),\r\n                                  ...(machine.installationDate ? [{ icon: <Calendar className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, text: `Installed: ${new Date(machine.installationDate).toLocaleDateString()}` }] : []),\r\n                                  // Collection Statistics (Last 30 Days)\r\n                                  {\r\n                                    icon: (\r\n                                      <div className=\"flex items-center gap-1\">\r\n                                        <div className=\"w-2 h-2 rounded-full bg-blue-500\"></div>\r\n                                      </div>\r\n                                    ),\r\n                                    text: (\r\n                                      <div className=\"flex items-center gap-2\">\r\n                                        <span className=\"text-xs font-medium text-blue-600 dark:text-blue-400\">\r\n                                          {machine.totalCollections30d || 0} Collections\r\n                                        </span>\r\n                                        <span className=\"text-xs text-gray-500 dark:text-gray-400\">|\r\n                                        </span>\r\n                                        <span className=\"text-xs text-gray-600 dark:text-gray-400\">\r\n                                          {(machine.totalQuantity30d || 0).toFixed(2)} L\r\n                                        </span>\r\n                                      </div>\r\n                                    ),\r\n                                    className: 'text-blue-600 dark:text-blue-400'\r\n                                  },\r\n                                  // Rate Chart Information\r\n                                  ...(() => {\r\n                                    const { pending, downloaded } = parseChartDetails(machine.chartDetails);\r\n                                    const details: Array<{ icon: React.ReactElement; text: string | React.ReactElement; className?: string }> = [];\r\n                                    \r\n                                    if (pending.length > 0) {\r\n                                      details.push({\r\n                                        icon: (\r\n                                          <div className=\"flex items-center gap-1\">\r\n                                            <div className=\"w-2 h-2 rounded-full bg-amber-500 dark:bg-amber-400 animate-pulse\" />\r\n                                          </div>\r\n                                        ),\r\n                                        text: (\r\n                                          <div className=\"flex flex-wrap items-center gap-1.5\">\r\n                                            <span className=\"text-xs font-medium text-amber-600 dark:text-amber-400\">Ready:</span>\r\n                                            {pending.map((chart, idx) => (\r\n                                              <button\r\n                                                key={idx}\r\n                                                onClick={() => handleViewRateChart(chart.fileName, chart.channel, machine.societyId)}\r\n                                                className={`px-1.5 py-0.5 rounded text-xs font-medium ${getChannelColor(chart.channel)} hover:opacity-80 transition-opacity cursor-pointer`}\r\n                                              >\r\n                                                {chart.channel}\r\n                                              </button>\r\n                                            ))}\r\n                                          </div>\r\n                                        ),\r\n                                        className: 'text-amber-600 dark:text-amber-400'\r\n                                      });\r\n                                    }\r\n                                    \r\n                                    if (downloaded.length > 0) {\r\n                                      details.push({\r\n                                        icon: <CheckCircle className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />,\r\n                                        text: (\r\n                                          <div className=\"flex flex-wrap items-center gap-1.5\">\r\n                                            <span className=\"text-xs font-medium\">Downloaded:</span>\r\n                                            {downloaded.map((chart, idx) => (\r\n                                              <button\r\n                                                key={idx}\r\n                                                onClick={() => handleViewRateChart(chart.fileName, chart.channel, machine.societyId)}\r\n                                                className={`px-1.5 py-0.5 rounded text-xs font-medium ${getChannelColor(chart.channel)} hover:opacity-80 transition-opacity cursor-pointer`}\r\n                                              >\r\n                                                {chart.channel}\r\n                                              </button>\r\n                                            ))}\r\n                                          </div>\r\n                                        ),\r\n                                        className: 'text-green-600 dark:text-green-400'\r\n                                      });\r\n                                    }\r\n                                    \r\n                                    return details;\r\n                                  })(),\r\n                                  // Password Status Display\r\n                                  (() => {\r\n                                    const passwordDisplay = getPasswordStatusDisplay(machine.statusU, machine.statusS, machine.userPassword, machine.supervisorPassword);\r\n                                    const hasAnyPassword = (machine.userPassword && machine.userPassword.trim() !== '') || (machine.supervisorPassword && machine.supervisorPassword.trim() !== '');\r\n                                    return { \r\n                                      icon: passwordDisplay.icon, \r\n                                      text: hasAnyPassword ? (\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                          <span>{passwordDisplay.text}</span>\r\n                                          <button\r\n                                            onClick={(e) => {\r\n                                              e.stopPropagation();\r\n                                              handleShowPasswordClick(machine);\r\n                                            }}\r\n                                            className=\"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors\"\r\n                                          >\r\n                                            <Eye className=\"w-3 h-3\" />\r\n                                            Show\r\n                                          </button>\r\n                                        </div>\r\n                                      ) : passwordDisplay.text,\r\n                                      className: passwordDisplay.className\r\n                                    };\r\n                                  })()\r\n                                ]}\r\n                                onEdit={() => handleEditClick(machine)}\r\n                                onDelete={() => handleDeleteClick(machine)}\r\n                                onView={() => router.push(`/admin/machine/${machine.id}`)}\r\n                                onStatusChange={(status) => handleStatusChange(machine, status as 'active' | 'inactive' | 'maintenance' | 'suspended')}\r\n                                viewText=\"View\"\r\n                              />\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                });\r\n              })()}\r\n            </div>\r\n          ) : (\r\n            // List View - Traditional flat grid\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6\">\r\n              {filteredMachines.map((machine) => (\r\n                <ItemCard\r\n                  key={machine.id}\r\n                  id={machine.id}\r\n                  name={machine.machineId}\r\n                  identifier={machine.machineType}\r\n                  status={machine.status}\r\n                  icon={<Wrench className=\"w-4 h-4 sm:w-5 sm:h-5 text-green-600 dark:text-green-400\" />}\r\n                  showStatus={true}\r\n                  badge={machine.isMasterMachine ? {\r\n                    text: 'Master',\r\n                    color: 'bg-gradient-to-r from-yellow-400 to-amber-500 text-gray-900 border-yellow-600',\r\n                    onClick: () => handleMasterBadgeClick(machine.societyId)\r\n                  } : undefined}\r\n                  selectable={true}\r\n                  selected={selectedMachines.has(machine.id)}\r\n                  onSelect={() => handleSelectMachine(machine.id)}\r\n                  onPasswordSettings={() => handlePasswordSettingsClick(machine)}\r\n                  searchQuery={searchQuery}\r\n                  details={[\r\n                    ...(machine.societyName ? [{ \r\n                      icon: <Building2 className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, \r\n                      text: machine.societyIdentifier \r\n                        ? `${machine.societyName} (${machine.societyIdentifier})` \r\n                        : machine.societyName,\r\n                      highlight: true\r\n                    }] : []),\r\n                    ...(machine.location ? [{ icon: <MapPin className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, text: machine.location }] : []),\r\n                    ...(machine.operatorName ? [{ icon: <User className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, text: machine.operatorName }] : []),\r\n                    ...(machine.contactPhone ? [{ icon: <Phone className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, text: machine.contactPhone }] : []),\r\n                    ...(machine.installationDate ? [{ icon: <Calendar className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, text: `Installed: ${new Date(machine.installationDate).toLocaleDateString()}` }] : []),\r\n                    // Collection Statistics (Last 30 Days)\r\n                    {\r\n                      icon: (\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <div className=\"w-2 h-2 rounded-full bg-blue-500\"></div>\r\n                        </div>\r\n                      ),\r\n                      text: (\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <span className=\"text-xs font-medium text-blue-600 dark:text-blue-400\">\r\n                            {machine.totalCollections30d || 0} Collections\r\n                          </span>\r\n                          <span className=\"text-xs text-gray-500 dark:text-gray-400\">|\r\n                          </span>\r\n                          <span className=\"text-xs text-gray-600 dark:text-gray-400\">\r\n                            {(machine.totalQuantity30d || 0).toFixed(2)} L\r\n                          </span>\r\n                        </div>\r\n                      ),\r\n                      className: 'text-blue-600 dark:text-blue-400'\r\n                    },\r\n                    // Rate Chart Information\r\n                    ...(() => {\r\n                      const { pending, downloaded } = parseChartDetails(machine.chartDetails);\r\n                      const details: Array<{ icon: React.ReactElement; text: string | React.ReactElement; className?: string }> = [];\r\n                      \r\n                      if (pending.length > 0) {\r\n                        details.push({\r\n                          icon: (\r\n                            <div className=\"flex items-center gap-1\">\r\n                              <div className=\"w-2 h-2 rounded-full bg-amber-500 dark:bg-amber-400 animate-pulse\" />\r\n                            </div>\r\n                          ),\r\n                          text: (\r\n                            <div className=\"flex flex-wrap items-center gap-1.5\">\r\n                              <span className=\"text-xs font-medium text-amber-600 dark:text-amber-400\">Ready:</span>\r\n                              {pending.map((chart, idx) => (\r\n                                <button\r\n                                  key={idx}\r\n                                  onClick={() => handleViewRateChart(chart.fileName, chart.channel, machine.societyId)}\r\n                                  className={`px-1.5 py-0.5 rounded text-xs font-medium ${getChannelColor(chart.channel)} hover:opacity-80 transition-opacity cursor-pointer`}\r\n                                >\r\n                                  {chart.channel}\r\n                                </button>\r\n                              ))}\r\n                            </div>\r\n                          ),\r\n                          className: 'text-amber-600 dark:text-amber-400'\r\n                        });\r\n                      }\r\n                      \r\n                      if (downloaded.length > 0) {\r\n                        details.push({\r\n                          icon: <CheckCircle className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />,\r\n                          text: (\r\n                            <div className=\"flex flex-wrap items-center gap-1.5\">\r\n                              <span className=\"text-xs font-medium\">Downloaded:</span>\r\n                              {downloaded.map((chart, idx) => (\r\n                                <button\r\n                                  key={idx}\r\n                                  onClick={() => handleViewRateChart(chart.fileName, chart.channel, machine.societyId)}\r\n                                  className={`px-1.5 py-0.5 rounded text-xs font-medium ${getChannelColor(chart.channel)} hover:opacity-80 transition-opacity cursor-pointer`}\r\n                                >\r\n                                  {chart.channel}\r\n                                </button>\r\n                              ))}\r\n                            </div>\r\n                          ),\r\n                          className: 'text-green-600 dark:text-green-400'\r\n                        });\r\n                      }\r\n                      \r\n                      return details;\r\n                    })(),\r\n                    // Password Status Display\r\n                    (() => {\r\n                      const passwordDisplay = getPasswordStatusDisplay(machine.statusU, machine.statusS, machine.userPassword, machine.supervisorPassword);\r\n                      const hasAnyPassword = (machine.userPassword && machine.userPassword.trim() !== '') || (machine.supervisorPassword && machine.supervisorPassword.trim() !== '');\r\n                      return { \r\n                        icon: passwordDisplay.icon, \r\n                        text: hasAnyPassword ? (\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span>{passwordDisplay.text}</span>\r\n                            <button\r\n                              onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                handleShowPasswordClick(machine);\r\n                              }}\r\n                              className=\"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors\"\r\n                            >\r\n                              <Eye className=\"w-3 h-3\" />\r\n                              Show\r\n                            </button>\r\n                          </div>\r\n                        ) : passwordDisplay.text,\r\n                        className: passwordDisplay.className\r\n                      };\r\n                    })()\r\n                  ]}\r\n                  onEdit={() => handleEditClick(machine)}\r\n                  onDelete={() => handleDeleteClick(machine)}\r\n                  onView={() => router.push(`/admin/machine/${machine.id}`)}\r\n                  onStatusChange={(status) => handleStatusChange(machine, status as 'active' | 'inactive' | 'maintenance' | 'suspended')}\r\n                  viewText=\"View\"\r\n                />\r\n              ))}\r\n            </div>\r\n          )\r\n        ) : (\r\n          <EmptyState\r\n            icon={<Settings className=\"w-12 h-12 sm:w-16 sm:h-16 text-gray-400\" />}\r\n            title=\"No machines found\"\r\n            message={statusFilter === 'all' \r\n              ? \"You haven't added any machines yet. Click 'Add Machine' to get started.\"\r\n              : `No machines found with status: ${statusFilter}`\r\n            }\r\n            actionText={statusFilter === 'all' ? 'Add Your First Machine' : undefined}\r\n            onAction={statusFilter === 'all' ? openAddModal : undefined}\r\n            showAction={statusFilter === 'all'}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {/* Add Machine Modal - Positioned outside main container */}\r\n      <FormModal\r\n        isOpen={showAddForm}\r\n        onClose={closeAddModal}\r\n        title=\"Add New Machine\"\r\n        maxWidth=\"lg\"\r\n      >\r\n        <form onSubmit={handleAddSubmit} className=\"space-y-4 sm:space-y-6\">\r\n          <FormGrid>\r\n            <FormInput\r\n              label=\"Machine ID\"\r\n              value={formData.machineId}\r\n              onChange={(value) => {\r\n                // Allow only one letter followed by numbers\r\n                const formatted = value\r\n                  .replace(/[^a-zA-Z0-9]/g, '') // Remove special chars\r\n                  .replace(/^([a-zA-Z])[a-zA-Z]+/, '$1') // Keep only first letter\r\n                  .replace(/^([a-zA-Z])(\\d*).*/, '$1$2') // One letter + numbers only\r\n                  .toUpperCase()\r\n                  .slice(0, 10); // Max length 10 (1 letter + 9 digits)\r\n                setFormData({ ...formData, machineId: formatted });\r\n              }}\r\n              placeholder=\"e.g., M2232, S3232\"\r\n              required\r\n              error={fieldErrors.machineId}\r\n              colSpan={2}\r\n            />\r\n\r\n            <FormSelect\r\n              label=\"Machine Type\"\r\n              value={formData.machineType}\r\n              onChange={(value) => setFormData({ ...formData, machineType: value })}\r\n              options={machineTypes.map(type => ({ \r\n                value: type.machineType, \r\n                label: type.machineType \r\n              }))}\r\n              placeholder=\"Select Machine Type\"\r\n              required\r\n              disabled={machineTypesLoading}\r\n              error={fieldErrors.machineType}\r\n            />\r\n\r\n            <FormSelect\r\n              label=\"Society\"\r\n              value={formData.societyId}\r\n              onChange={(value) => {\r\n                console.log('Society selected:', value, 'Type:', typeof value);\r\n                setFormData({ ...formData, societyId: value });\r\n                checkMasterMachineStatus(value);\r\n              }}\r\n              options={societies.map(society => ({ \r\n                value: society.id, \r\n                label: `${society.name} (${society.society_id})` \r\n              }))}\r\n              placeholder=\"Select Society\"\r\n              required\r\n              disabled={societiesLoading}\r\n              error={fieldErrors.societyId}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Location\"\r\n              value={formData.location}\r\n              onChange={(value) => setFormData({ ...formData, location: value })}\r\n              placeholder=\"Installation location\"\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Installation Date\"\r\n              type=\"date\"\r\n              value={formData.installationDate}\r\n              onChange={(value) => setFormData({ ...formData, installationDate: value })}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Operator Name\"\r\n              value={formData.operatorName}\r\n              onChange={(value) => setFormData({ ...formData, operatorName: value })}\r\n              placeholder=\"Machine operator name\"\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Contact Phone\"\r\n              type=\"tel\"\r\n              value={formData.contactPhone}\r\n              onChange={(value) => {\r\n                const formatted = formatPhoneInput(value);\r\n                setFormData({ ...formData, contactPhone: formatted });\r\n              }}\r\n              onBlur={() => {\r\n                const error = validatePhoneOnBlur(formData.contactPhone);\r\n                if (error) {\r\n                  setFieldErrors(prev => ({ ...prev, contactPhone: error }));\r\n                } else {\r\n                  const { contactPhone: _removed, ...rest } = fieldErrors;\r\n                  setFieldErrors(rest);\r\n                }\r\n              }}\r\n              placeholder=\"Operator contact number\"\r\n              error={fieldErrors.contactPhone}\r\n            />\r\n\r\n            <FormSelect\r\n              label=\"Status\"\r\n              value={formData.status}\r\n              onChange={(value) => setFormData({ ...formData, status: value as 'active' | 'inactive' | 'maintenance' | 'suspended' })}\r\n              options={[\r\n                { value: 'active', label: 'Active' },\r\n                { value: 'inactive', label: 'Inactive' },\r\n                { value: 'maintenance', label: 'Under Maintenance' },\r\n                { value: 'suspended', label: 'Suspended' }\r\n              ]}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Notes\"\r\n              type=\"text\"\r\n              value={formData.notes}\r\n              onChange={(value) => setFormData({ ...formData, notes: value })}\r\n              placeholder=\"Additional notes or comments...\"\r\n              colSpan={2}\r\n            />\r\n\r\n            {/* Master Machine Checkbox */}\r\n            {formData.societyId !== '' && (\r\n              <div className=\"sm:col-span-2\">\r\n                <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4\">\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      id=\"setAsMaster\"\r\n                      checked={formData.setAsMaster}\r\n                      onChange={(e) => setFormData({ ...formData, setAsMaster: e.target.checked })}\r\n                      disabled={isFirstMachine}\r\n                      className=\"mt-1 w-4 h-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500 disabled:opacity-50\"\r\n                    />\r\n                    <div className=\"flex-1\">\r\n                      <label htmlFor=\"setAsMaster\" className=\"text-sm font-medium text-gray-900 dark:text-gray-100 cursor-pointer\">\r\n                        Set as Master Machine\r\n                      </label>\r\n                      {isFirstMachine ? (\r\n                        <p className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\r\n                          This is the first machine for this society and will automatically be set as master\r\n                        </p>\r\n                      ) : societyHasMaster && formData.setAsMaster ? (\r\n                        <p className=\"text-xs text-yellow-700 dark:text-yellow-400 mt-1 font-medium\">\r\n                          âš ï¸ Warning: This will replace the current master machine ({existingMasterMachine}) with this one\r\n                        </p>\r\n                      ) : (\r\n                        <p className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\r\n                          Master machine passwords will be inherited by all machines in this society\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Password Inheritance Info */}\r\n            {formData.societyId !== '' && !formData.setAsMaster && societyHasMaster && !isFirstMachine && (\r\n              <div className=\"sm:col-span-2\">\r\n                <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <div className=\"flex-shrink-0\">\r\n                      <svg className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                      </svg>\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                      <h4 className=\"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-1\">\r\n                        Password Inheritance Enabled\r\n                      </h4>\r\n                      <p className=\"text-xs text-blue-700 dark:text-blue-300\">\r\n                        This machine will automatically inherit user and supervisor passwords from the master machine (<strong>{existingMasterMachine}</strong>). \r\n                        The passwords will be set when the machine is created, and you can update them later if needed.\r\n                      </p>\r\n                      <div className=\"mt-2 text-xs text-blue-600 dark:text-blue-400\">\r\n                        <strong>Note:</strong> Password status (enabled/disabled) will also be inherited from the master machine.\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Disable Password Inheritance Checkbox */}\r\n            {formData.societyId !== '' && !formData.setAsMaster && societyHasMaster && !isFirstMachine && (\r\n              <div className=\"sm:col-span-2\">\r\n                <div className=\"flex items-start gap-3 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id=\"disablePasswordInheritance\"\r\n                    checked={formData.disablePasswordInheritance}\r\n                    onChange={(e) => setFormData({ ...formData, disablePasswordInheritance: e.target.checked })}\r\n                    className=\"mt-1 w-4 h-4 text-primary-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-primary-500 focus:ring-2\"\r\n                  />\r\n                  <label htmlFor=\"disablePasswordInheritance\" className=\"flex-1 cursor-pointer\">\r\n                    <div className=\"text-sm font-medium text-gray-900 dark:text-gray-100 mb-1\">\r\n                      Do not inherit passwords from master machine\r\n                    </div>\r\n                    <p className=\"text-xs text-gray-600 dark:text-gray-400\">\r\n                      Check this if you want to set passwords manually later instead of using the master machine's passwords\r\n                    </p>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* No Master Machine Warning */}\r\n            {formData.societyId !== '' && !formData.setAsMaster && !societyHasMaster && !isFirstMachine && (\r\n              <div className=\"sm:col-span-2\">\r\n                <div className=\"bg-amber-50 dark:bg-amber-900/20 border border-amber-300 dark:border-amber-700 rounded-lg p-4\">\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <div className=\"flex-shrink-0\">\r\n                      <svg className=\"w-5 h-5 text-amber-600 dark:text-amber-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\r\n                      </svg>\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                      <h4 className=\"text-sm font-semibold text-amber-900 dark:text-amber-100 mb-1\">\r\n                        No Master Machine Found\r\n                      </h4>\r\n                      <p className=\"text-xs text-amber-700 dark:text-amber-300\">\r\n                        This society has machines but no master machine is designated. Passwords will not be inherited automatically. \r\n                        Consider setting this machine as master or designate an existing machine as master first.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </FormGrid>\r\n\r\n          <FormError error={error} />\r\n\r\n          <FormActions\r\n            onCancel={closeAddModal}\r\n            submitText=\"Add Machine\"\r\n            isLoading={isSubmitting}\r\n            isSubmitDisabled={!formData.machineId || !formData.machineType || !formData.societyId}\r\n          />\r\n        </form>\r\n      </FormModal>\r\n\r\n      {/* Edit Machine Modal */}\r\n      <FormModal\r\n        isOpen={showEditForm && !!selectedMachine}\r\n        onClose={closeEditModal}\r\n        title=\"Edit Machine\"\r\n        maxWidth=\"lg\"\r\n      >\r\n        <form onSubmit={handleEditSubmit} className=\"space-y-4 sm:space-y-6\">\r\n          <FormGrid>\r\n            <FormInput\r\n              label=\"Machine ID\"\r\n              value={formData.machineId}\r\n              onChange={(value) => setFormData({ ...formData, machineId: value })}\r\n              placeholder=\"e.g., M2232, S3232\"\r\n              required\r\n              error={fieldErrors.machineId}\r\n              colSpan={2}\r\n            />\r\n\r\n            <FormSelect\r\n              label=\"Machine Type\"\r\n              value={formData.machineType}\r\n              onChange={(value) => setFormData({ ...formData, machineType: value })}\r\n              options={machineTypes.map(type => ({ \r\n                value: type.machineType, \r\n                label: type.machineType \r\n              }))}\r\n              placeholder=\"Select Machine Type\"\r\n              required\r\n              disabled={machineTypesLoading}\r\n              error={fieldErrors.machineType}\r\n            />\r\n\r\n            <FormSelect\r\n              label=\"Society\"\r\n              value={formData.societyId}\r\n              onChange={(value) => setFormData({ ...formData, societyId: value })}\r\n              options={societies.map(society => ({ \r\n                value: society.id, \r\n                label: `${society.name} (${society.society_id})` \r\n              }))}\r\n              placeholder=\"Select Society\"\r\n              required\r\n              disabled={societiesLoading}\r\n              error={fieldErrors.societyId}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Location\"\r\n              value={formData.location}\r\n              onChange={(value) => setFormData({ ...formData, location: value })}\r\n              placeholder=\"Installation location\"\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Installation Date\"\r\n              type=\"date\"\r\n              value={formData.installationDate}\r\n              onChange={(value) => setFormData({ ...formData, installationDate: value })}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Operator Name\"\r\n              value={formData.operatorName}\r\n              onChange={(value) => setFormData({ ...formData, operatorName: value })}\r\n              placeholder=\"Machine operator name\"\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Contact Phone\"\r\n              type=\"tel\"\r\n              value={formData.contactPhone}\r\n              onChange={(value) => {\r\n                const formatted = formatPhoneInput(value);\r\n                setFormData({ ...formData, contactPhone: formatted });\r\n              }}\r\n              onBlur={() => {\r\n                const error = validatePhoneOnBlur(formData.contactPhone);\r\n                if (error) {\r\n                  setFieldErrors(prev => ({ ...prev, contactPhone: error }));\r\n                } else {\r\n                  const { contactPhone: _removed, ...rest } = fieldErrors;\r\n                  setFieldErrors(rest);\r\n                }\r\n              }}\r\n              placeholder=\"Operator contact number\"\r\n              error={fieldErrors.contactPhone}\r\n            />\r\n\r\n            <FormSelect\r\n              label=\"Status\"\r\n              value={formData.status}\r\n              onChange={(value) => setFormData({ ...formData, status: value as 'active' | 'inactive' | 'maintenance' | 'suspended' })}\r\n              options={[\r\n                { value: 'active', label: 'Active' },\r\n                { value: 'inactive', label: 'Inactive' },\r\n                { value: 'maintenance', label: 'Under Maintenance' },\r\n                { value: 'suspended', label: 'Suspended' }\r\n              ]}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Notes\"\r\n              type=\"text\"\r\n              value={formData.notes}\r\n              onChange={(value) => setFormData({ ...formData, notes: value })}\r\n              placeholder=\"Additional notes or comments...\"\r\n              colSpan={2}\r\n            />\r\n          </FormGrid>\r\n\r\n          <FormError error={error} />\r\n\r\n          <FormActions\r\n            onCancel={closeEditModal}\r\n            submitText=\"Update Machine\"\r\n            isLoading={isSubmitting}\r\n            isSubmitDisabled={!formData.machineId || !formData.machineType || !formData.societyId}\r\n          />\r\n        </form>\r\n      </FormModal>\r\n\r\n      {/* Password Settings Modal */}\r\n      <FormModal\r\n        isOpen={showPasswordModal && !!selectedMachine}\r\n        onClose={closePasswordModal}\r\n        title={`Password Settings - ${selectedMachine?.machineId || ''}`}\r\n      >\r\n        <form onSubmit={handlePasswordSubmit} className=\"space-y-4 sm:space-y-6\">\r\n          <FormGrid>\r\n            <FormInput\r\n              label=\"User Password (6 digits)\"\r\n              type=\"password\"\r\n              value={passwordData.userPassword}\r\n              onChange={(value) => updatePasswordData({ userPassword: value })}\r\n              placeholder=\"Enter 6-digit code\"\r\n              maxLength={6}\r\n              pattern=\"[0-9]*\"\r\n              inputMode=\"numeric\"\r\n              error={passwordErrors.userPassword}\r\n              colSpan={2}\r\n            />\r\n            \r\n            <FormInput\r\n              label=\"Confirm User Password\"\r\n              type=\"password\"\r\n              value={passwordData.confirmUserPassword}\r\n              onChange={(value) => updatePasswordData({ confirmUserPassword: value })}\r\n              placeholder=\"Re-enter 6-digit code\"\r\n              maxLength={6}\r\n              pattern=\"[0-9]*\"\r\n              inputMode=\"numeric\"\r\n              error={passwordErrors.confirmUserPassword}\r\n              colSpan={2}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Supervisor Password (6 digits)\"\r\n              type=\"password\"\r\n              value={passwordData.supervisorPassword}\r\n              onChange={(value) => updatePasswordData({ supervisorPassword: value })}\r\n              placeholder=\"Enter 6-digit code\"\r\n              maxLength={6}\r\n              pattern=\"[0-9]*\"\r\n              inputMode=\"numeric\"\r\n              error={passwordErrors.supervisorPassword}\r\n              colSpan={2}\r\n            />\r\n            \r\n            <FormInput\r\n              label=\"Confirm Supervisor Password\"\r\n              type=\"password\"\r\n              value={passwordData.confirmSupervisorPassword}\r\n              onChange={(value) => updatePasswordData({ confirmSupervisorPassword: value })}\r\n              placeholder=\"Re-enter 6-digit code\"\r\n              maxLength={6}\r\n              pattern=\"[0-9]*\"\r\n              inputMode=\"numeric\"\r\n              error={passwordErrors.confirmSupervisorPassword}\r\n              colSpan={2}\r\n            />\r\n          </FormGrid>\r\n\r\n          {/* Apply to Other Machines Section - Only show for master machines */}\r\n          {selectedMachine?.isMasterMachine && (\r\n            <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4\">\r\n              <div className=\"flex items-start gap-3 mb-4\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"applyPasswordsToOthers\"\r\n                  checked={applyPasswordsToOthers}\r\n                  onChange={(e) => {\r\n                    setApplyPasswordsToOthers(e.target.checked);\r\n                    if (!e.target.checked) {\r\n                      setSelectedMachinesForPassword(new Set());\r\n                      setSelectAllMachinesForPassword(false);\r\n                    }\r\n                  }}\r\n                  className=\"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n                />\r\n                <div className=\"flex-1\">\r\n                  <label htmlFor=\"applyPasswordsToOthers\" className=\"text-sm font-medium text-gray-900 dark:text-gray-100 cursor-pointer\">\r\n                    Apply these passwords to other machines in this society\r\n                  </label>\r\n                  <p className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\r\n                    Select machines below to update their passwords with the same values\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Machine Selection - Show when checkbox is checked */}\r\n              {applyPasswordsToOthers && selectedMachine && (\r\n                <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 max-h-64 overflow-y-auto\">\r\n                  <div className=\"flex items-center justify-between mb-3\">\r\n                    <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                      Select Machines ({selectedMachinesForPassword.size} selected)\r\n                    </span>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        const societyMachines = machines.filter(\r\n                          m => m.societyId === selectedMachine.societyId && m.id !== selectedMachine.id\r\n                        );\r\n                        if (selectAllMachinesForPassword) {\r\n                          setSelectedMachinesForPassword(new Set());\r\n                          setSelectAllMachinesForPassword(false);\r\n                        } else {\r\n                          setSelectedMachinesForPassword(new Set(societyMachines.map(m => m.id)));\r\n                          setSelectAllMachinesForPassword(true);\r\n                        }\r\n                      }}\r\n                      className=\"text-xs text-blue-600 dark:text-blue-400 hover:underline\"\r\n                    >\r\n                      {selectAllMachinesForPassword ? 'Deselect All' : 'Select All'}\r\n                    </button>\r\n                  </div>\r\n                  \r\n                  <div className=\"space-y-2\">\r\n                    {machines\r\n                      .filter(m => m.societyId === selectedMachine.societyId && m.id !== selectedMachine.id)\r\n                      .map(machine => (\r\n                        <label\r\n                          key={machine.id}\r\n                          className=\"flex items-center gap-3 p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer\"\r\n                        >\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            checked={selectedMachinesForPassword.has(machine.id)}\r\n                            onChange={(e) => {\r\n                              const newSelected = new Set(selectedMachinesForPassword);\r\n                              if (e.target.checked) {\r\n                                newSelected.add(machine.id);\r\n                              } else {\r\n                                newSelected.delete(machine.id);\r\n                                setSelectAllMachinesForPassword(false);\r\n                              }\r\n                              setSelectedMachinesForPassword(newSelected);\r\n                            }}\r\n                            className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n                          />\r\n                          <div className=\"flex-1\">\r\n                            <div className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">\r\n                              {machine.machineId}\r\n                            </div>\r\n                            <div className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                              {machine.machineType}\r\n                            </div>\r\n                          </div>\r\n                        </label>\r\n                      ))}\r\n                  </div>\r\n                  \r\n                  {machines.filter(m => m.societyId === selectedMachine.societyId && m.id !== selectedMachine.id).length === 0 && (\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400 text-center py-4\">\r\n                      No other machines in this society\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <FormError error={error} />\r\n\r\n          <FormActions\r\n            onCancel={closePasswordModal}\r\n            submitText=\"Update Passwords\"\r\n            isLoading={isSubmitting}\r\n            isSubmitDisabled={\r\n              isSubmitting || \r\n              Object.values(passwordErrors).some(error => error !== '') ||\r\n              (!passwordData.userPassword && !passwordData.supervisorPassword) ||\r\n              // Disable if password is entered but not confirmed\r\n              !!(passwordData.userPassword && !passwordData.confirmUserPassword) ||\r\n              !!(passwordData.supervisorPassword && !passwordData.confirmSupervisorPassword) ||\r\n              // Disable if confirmation is entered but password is not\r\n              !!(!passwordData.userPassword && passwordData.confirmUserPassword) ||\r\n              !!(!passwordData.supervisorPassword && passwordData.confirmSupervisorPassword)\r\n            }\r\n          />\r\n        </form>\r\n      </FormModal>\r\n\r\n      {/* Delete Confirmation Modal */}\r\n      <ConfirmDeleteModal\r\n        isOpen={showDeleteModal && !!selectedMachine}\r\n        onClose={closeDeleteModal}\r\n        onConfirm={handleDelete}\r\n        title=\"Delete Machine\"\r\n        itemName={selectedMachine?.machineId || ''}\r\n        message=\"Are you sure you want to permanently delete machine\"\r\n      />\r\n\r\n      {/* Rate Chart View Modal */}\r\n      <FormModal\r\n        isOpen={showRateChartModal && !!selectedRateChart}\r\n        onClose={closeRateChartModal}\r\n        title={`Rate Chart - ${selectedRateChart?.channel || ''} Channel`}\r\n        maxWidth=\"2xl\"\r\n      >\r\n        <div className=\"space-y-4\">\r\n          {/* Chart Info */}\r\n          <div className=\"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">File Name</h3>\r\n                <p className=\"text-base font-semibold text-gray-900 dark:text-white\">{selectedRateChart?.fileName}</p>\r\n              </div>\r\n              <span className={`px-3 py-1 rounded-full text-sm font-medium ${getChannelColor(selectedRateChart?.channel || '')}`}>\r\n                {selectedRateChart?.channel}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Search Inputs */}\r\n          <div className=\"grid grid-cols-3 gap-3 mb-4\">\r\n            <div>\r\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">Search FAT</label>\r\n              <input\r\n                type=\"text\"\r\n                value={searchFat}\r\n                onChange={(e) => setSearchFat(e.target.value)}\r\n                placeholder=\"e.g., 3.5\"\r\n                className=\"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">Search SNF</label>\r\n              <input\r\n                type=\"text\"\r\n                value={searchSnf}\r\n                onChange={(e) => setSearchSnf(e.target.value)}\r\n                placeholder=\"e.g., 8.5\"\r\n                className=\"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">Search CLR</label>\r\n              <input\r\n                type=\"text\"\r\n                value={searchClr}\r\n                onChange={(e) => setSearchClr(e.target.value)}\r\n                placeholder=\"e.g., 25.0\"\r\n                className=\"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Chart Data Table */}\r\n          {loadingChartData ? (\r\n            <div className=\"flex justify-center items-center py-8\">\r\n              <FlowerSpinner />\r\n            </div>\r\n          ) : (() => {\r\n            // Filter data based on search inputs\r\n            const filteredData = rateChartData.filter(row => {\r\n              const matchFat = !searchFat || row.fat.toLowerCase().includes(searchFat.toLowerCase());\r\n              const matchSnf = !searchSnf || row.snf.toLowerCase().includes(searchSnf.toLowerCase());\r\n              const matchClr = !searchClr || row.clr.toLowerCase().includes(searchClr.toLowerCase());\r\n              return matchFat && matchSnf && matchClr;\r\n            });\r\n            \r\n            return filteredData.length > 0 ? (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full border-collapse\">\r\n                <thead>\r\n                  <tr className=\"bg-gray-100 dark:bg-gray-700\">\r\n                    <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider border border-gray-300 dark:border-gray-600\">\r\n                      FAT\r\n                    </th>\r\n                    <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider border border-gray-300 dark:border-gray-600\">\r\n                      SNF\r\n                    </th>\r\n                    <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider border border-gray-300 dark:border-gray-600\">\r\n                      CLR\r\n                    </th>\r\n                    <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider border border-gray-300 dark:border-gray-600\">\r\n                      Rate\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\r\n                  {filteredData.map((row, index) => (\r\n                    <tr key={index} className=\"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\">\r\n                      <td className=\"px-4 py-3 text-sm text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600\">\r\n                        {row.fat}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600\">\r\n                        {row.snf}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600\">\r\n                        {row.clr}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm font-semibold text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600\">\r\n                        â‚¹{row.rate}\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n              <div className=\"mt-2 text-xs text-gray-500 dark:text-gray-400 text-right\">\r\n                Showing {filteredData.length} of {rateChartData.length} records\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8\">\r\n              <FileText className=\"w-12 h-12 text-gray-400 mx-auto mb-3\" />\r\n              <p className=\"text-gray-500 dark:text-gray-400\">{searchFat || searchSnf || searchClr ? 'No matching records found' : 'No data available for this rate chart'}</p>\r\n            </div>\r\n          );\r\n          })()}\r\n\r\n          {/* Close Button */}\r\n          <div className=\"flex justify-end pt-4\">\r\n            <button\r\n              onClick={closeRateChartModal}\r\n              className=\"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors\"\r\n            >\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </FormModal>\r\n\r\n      {/* Change Master Machine Modal */}\r\n      <FormModal\r\n        isOpen={showChangeMasterModal}\r\n        onClose={() => setShowChangeMasterModal(false)}\r\n        title=\"Change Master Machine\"\r\n        maxWidth=\"md\"\r\n      >\r\n        <div className=\"space-y-4\">\r\n          <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <div className=\"flex-shrink-0\">\r\n                <svg className=\"w-5 h-5 text-yellow-600 dark:text-yellow-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                </svg>\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <h4 className=\"text-sm font-semibold text-yellow-900 dark:text-yellow-100 mb-1\">\r\n                  About Master Machine\r\n                </h4>\r\n                <p className=\"text-xs text-yellow-700 dark:text-yellow-300\">\r\n                  The master machine's passwords are inherited by all other machines in the society. \r\n                  Changing the master will update which machine's passwords are used as the default for new machines.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {selectedSocietyForMaster && (\r\n            <>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Select New Master Machine <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <select\r\n                  value={newMasterMachineId || ''}\r\n                  onChange={(e) => setNewMasterMachineId(e.target.value ? parseInt(e.target.value) : null)}\r\n                  className=\"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\r\n                >\r\n                  <option value=\"\">Select a machine</option>\r\n                  {machines\r\n                    .filter(m => m.societyId === selectedSocietyForMaster)\r\n                    .map(machine => (\r\n                      <option key={machine.id} value={machine.id}>\r\n                        {machine.machineId} - {machine.machineType}\r\n                        {machine.isMasterMachine ? ' (Current Master)' : ''}\r\n                      </option>\r\n                    ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"setForAllMachines\"\r\n                  checked={setForAll}\r\n                  onChange={(e) => setSetForAll(e.target.checked)}\r\n                  className=\"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n                />\r\n                <div className=\"flex-1\">\r\n                  <label htmlFor=\"setForAllMachines\" className=\"text-sm font-medium text-blue-900 dark:text-blue-100 cursor-pointer\">\r\n                    Apply master's passwords to all machines in society\r\n                  </label>\r\n                  <p className=\"text-xs text-blue-700 dark:text-blue-300 mt-1\">\r\n                    If checked, all machines in this society will be updated with the new master machine's passwords immediately.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              {error && (\r\n                <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3\">\r\n                  <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          <div className=\"flex justify-end gap-3 pt-4\">\r\n            <button\r\n              onClick={() => setShowChangeMasterModal(false)}\r\n              disabled={isChangingMaster}\r\n              className=\"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors disabled:opacity-50\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              onClick={handleChangeMasterConfirm}\r\n              disabled={isChangingMaster || !newMasterMachineId}\r\n              className=\"px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n            >\r\n              {isChangingMaster ? (\r\n                <>\r\n                  <svg className=\"animate-spin h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\r\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\r\n                  </svg>\r\n                  Changing...\r\n                </>\r\n              ) : (\r\n                'Change Master'\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </FormModal>\r\n\r\n      {/* Bulk Delete Confirmation Modal */}\r\n      <BulkDeleteConfirmModal\r\n        isOpen={showDeleteConfirm}\r\n        itemCount={selectedMachines.size}\r\n        itemType=\"machine\"\r\n        onConfirm={handleBulkDelete}\r\n        onClose={() => setShowDeleteConfirm(false)}\r\n      />\r\n\r\n      {/* Bulk Actions Toolbar */}\r\n      <BulkActionsToolbar\r\n        selectedCount={selectedMachines.size}\r\n        totalCount={machines.length}\r\n        onBulkDelete={() => setShowDeleteConfirm(true)}\r\n        onBulkStatusUpdate={handleBulkStatusUpdate}\r\n        onClearSelection={() => {\r\n          setSelectedMachines(new Set());\r\n          setSelectedSocieties(new Set());\r\n          setSelectAll(false);\r\n        }}\r\n        itemType=\"machine\"\r\n        showStatusUpdate={true}\r\n        currentBulkStatus={bulkStatus}\r\n        onBulkStatusChange={(status) => setBulkStatus(status as typeof bulkStatus)}\r\n      />\r\n\r\n      {/* Floating Action Button */}\r\n      <FloatingActionButton\r\n        actions={[\r\n          {\r\n            icon: <Plus className=\"w-6 h-6 text-white\" />,\r\n            label: 'Add Machine',\r\n            onClick: openAddModal,\r\n            color: 'bg-gradient-to-br from-blue-500 to-blue-600'\r\n          }\r\n        ]}\r\n        directClick={true}\r\n      />\r\n\r\n      {/* Show Password Modal */}\r\n      <FormModal\r\n        isOpen={showPasswordViewModal && !!machineToShowPassword}\r\n        onClose={closePasswordViewModal}\r\n        title={`View Passwords - ${machineToShowPassword?.machineId || ''}`}\r\n      >\r\n        {!revealedPasswords ? (\r\n          <form onSubmit={handleVerifyAndShowPasswords} className=\"space-y-4\">\r\n            <div className=\"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <AlertTriangle className=\"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5\" />\r\n                <div className=\"flex-1\">\r\n                  <h4 className=\"text-sm font-medium text-amber-800 dark:text-amber-200 mb-1\">\r\n                    Security Verification Required\r\n                  </h4>\r\n                  <p className=\"text-xs text-amber-700 dark:text-amber-300\">\r\n                    Enter your admin password to view machine passwords. This action will be logged for security purposes.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <FormInput\r\n              label=\"Admin Password\"\r\n              type=\"password\"\r\n              value={adminPasswordForView}\r\n              onChange={(value) => setAdminPasswordForView(value)}\r\n              placeholder=\"Enter your admin password\"\r\n              error={viewPasswordError}\r\n              required\r\n            />\r\n\r\n            <div className=\"flex gap-3 pt-2\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={closePasswordViewModal}\r\n                className=\"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={viewingPasswords || !adminPasswordForView}\r\n                className=\"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2\"\r\n              >\r\n                {viewingPasswords ? (\r\n                  <>\r\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n                    Verifying...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Eye className=\"w-4 h-4\" />\r\n                    View Passwords\r\n                  </>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <CheckCircle className=\"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5\" />\r\n                <div className=\"flex-1\">\r\n                  <h4 className=\"text-sm font-medium text-green-800 dark:text-green-200 mb-1\">\r\n                    Passwords Retrieved Successfully\r\n                  </h4>\r\n                  <p className=\"text-xs text-green-700 dark:text-green-300\">\r\n                    Machine passwords for {machineToShowPassword?.machineId}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3\">\r\n              <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2\">\r\n                    <Key className=\"w-4 h-4\" />\r\n                    User Password\r\n                  </label>\r\n                </div>\r\n                <div className=\"bg-white dark:bg-gray-900 rounded-md px-4 py-3 border border-gray-300 dark:border-gray-600\">\r\n                  <span className=\"text-2xl font-mono font-bold text-gray-900 dark:text-white tracking-wider\">\r\n                    {revealedPasswords.userPassword || 'Not Set'}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2\">\r\n                    <Lock className=\"w-4 h-4\" />\r\n                    Supervisor Password\r\n                  </label>\r\n                </div>\r\n                <div className=\"bg-white dark:bg-gray-900 rounded-md px-4 py-3 border border-gray-300 dark:border-gray-600\">\r\n                  <span className=\"text-2xl font-mono font-bold text-gray-900 dark:text-white tracking-wider\">\r\n                    {revealedPasswords.supervisorPassword || 'Not Set'}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex gap-3 pt-2\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={closePasswordViewModal}\r\n                className=\"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all\"\r\n              >\r\n                Close\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </FormModal>\r\n\r\n      {/* Graph Modal */}\r\n      {showGraphModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\" onClick={() => setShowGraphModal(false)}>\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center\">\r\n              <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n                {graphMetric === 'quantity' && 'Top 20 Machines by Quantity (Last 30 Days)'}\r\n                {graphMetric === 'tests' && 'Top 20 Machines by Total Tests (Last 30 Days)'}\r\n                {graphMetric === 'cleaning' && 'Top 20 Machines by Cleaning Count (Last 30 Days)'}\r\n                {graphMetric === 'skip' && 'Top 20 Machines by Cleaning Skip Count (Last 30 Days)'}\r\n                {graphMetric === 'today' && 'Most Active Machines Today'}\r\n                {graphMetric === 'uptime' && 'Top 20 Machines by Uptime Days (Last 30 Days)'}\r\n              </h2>\r\n              <button onClick={() => setShowGraphModal(false)} className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\">\r\n                <X className=\"w-6 h-6\" />\r\n              </button>\r\n            </div>\r\n            <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-80px)]\">\r\n              {graphData.length > 0 ? (\r\n                <ResponsiveContainer width=\"100%\" height={400}>\r\n                  <LineChart data={graphData}>\r\n                    <CartesianGrid strokeDasharray=\"3 3\" />\r\n                    <XAxis \r\n                      dataKey=\"label\" \r\n                      angle={-45} \r\n                      textAnchor=\"end\" \r\n                      height={100}\r\n                      tick={{ fontSize: 12 }}\r\n                    />\r\n                    <YAxis />\r\n                    <Tooltip content={({ active, payload }) => {\r\n                      if (active && payload && payload[0]) {\r\n                        const data = payload[0].payload;\r\n                        return (\r\n                          <div className=\"bg-white dark:bg-gray-800 p-3 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700\">\r\n                            <p className=\"font-semibold text-gray-900 dark:text-white\">{data.machine.machineId}</p>\r\n                            <p className=\"text-sm text-gray-600 dark:text-gray-400\">{data.machine.machineType}</p>\r\n                            {data.machine.societyName && (\r\n                              <p className=\"text-sm text-gray-600 dark:text-gray-400\">{data.machine.societyName}</p>\r\n                            )}\r\n                            <p className=\"text-sm font-semibold text-blue-600 dark:text-blue-400 mt-1\">\r\n                              {graphMetric === 'quantity' && `${data.value.toFixed(2)} L`}\r\n                              {graphMetric === 'tests' && `${data.value} Tests`}\r\n                              {graphMetric === 'cleaning' && `${data.value} Cleanings`}\r\n                              {graphMetric === 'skip' && `${data.value} Skips`}\r\n                              {graphMetric === 'today' && `${data.value} Collections Today`}\r\n                              {graphMetric === 'uptime' && `${data.value} Days Active`}\r\n                            </p>\r\n                          </div>\r\n                        );\r\n                      }\r\n                      return null;\r\n                    }} />\r\n                    <Line \r\n                      type=\"monotone\" \r\n                      dataKey=\"value\" \r\n                      stroke=\"#3b82f6\" \r\n                      strokeWidth={2}\r\n                      dot={{ fill: '#3b82f6', r: 4 }}\r\n                      activeDot={{ r: 6 }}\r\n                    />\r\n                  </LineChart>\r\n                </ResponsiveContainer>\r\n              ) : (\r\n                <div className=\"text-center text-gray-500 dark:text-gray-400 py-8\">\r\n                  No data available\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\n// Wrapper component with Suspense boundary for useSearchParams\r\nfunction MachineManagementWrapper() {\r\n  return (\r\n    <Suspense fallback={\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500\"></div>\r\n      </div>\r\n    }>\r\n      <MachineManagement />\r\n    </Suspense>\r\n  );\r\n}\r\n\r\nexport default MachineManagementWrapper;\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z',\n      key: '1s6t7t',\n    },\n  ],\n  ['circle', { cx: '16.5', cy: '7.5', r: '.5', fill: 'currentColor', key: 'w0ekpg' }],\n];\n\n/**\n * @component @name KeyRound\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMi41ODYgMTcuNDE0QTIgMiAwIDAgMCAyIDE4LjgyOFYyMWExIDEgMCAwIDAgMSAxaDNhMSAxIDAgMCAwIDEtMXYtMWExIDEgMCAwIDEgMS0xaDFhMSAxIDAgMCAwIDEtMXYtMWExIDEgMCAwIDEgMS0xaC4xNzJhMiAyIDAgMCAwIDEuNDE0LS41ODZsLjgxNC0uODE0YTYuNSA2LjUgMCAxIDAtNC00eiIgLz4KICA8Y2lyY2xlIGN4PSIxNi41IiBjeT0iNy41IiByPSIuNSIgZmlsbD0iY3VycmVudENvbG9yIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/key-round\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst KeyRound = createLucideIcon('key-round', __iconNode);\n\nexport default KeyRound;\n"],"names":[],"mappings":"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","ignoreList":[1]}