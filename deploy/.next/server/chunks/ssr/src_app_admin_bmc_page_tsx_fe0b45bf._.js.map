{"version":3,"sources":["turbopack:///[project]/src/app/admin/bmc/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { formatPhoneInput, validatePhoneOnBlur } from '@/lib/validation/phoneValidation';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { useUser } from '@/contexts/UserContext';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer\r\n} from 'recharts';\r\nimport { \r\n  Factory, \r\n  MapPin,\r\n  Phone,\r\n  Mail,\r\n  User,\r\n  Calendar,\r\n  Activity,\r\n  Building2,\r\n  Milk,\r\n  Save,\r\n  Edit3,\r\n  Trash2,\r\n  Users,\r\n  TrendingUp,\r\n  Award,\r\n  Droplets,\r\n  Eye,\r\n  EyeOff,\r\n  Plus,\r\n  BarChart3,\r\n  X,\r\n  ExternalLink\r\n} from 'lucide-react';\r\nimport { \r\n  FlowerSpinner, \r\n  LoadingSpinner,\r\n  FormModal, \r\n  FormInput, \r\n  FormSelect, \r\n  FormActions, \r\n  FormGrid,\r\n  PageHeader,\r\n  StatusMessage,\r\n  StatsCard,\r\n  FilterControls,\r\n  EmptyState,\r\n  StatusDropdown\r\n} from '@/components';\r\nimport FloatingActionButton from '@/components/management/FloatingActionButton';\r\nimport NavigationConfirmModal from '@/components/NavigationConfirmModal';\r\nimport TransferSocietiesModal from '@/components/modals/TransferSocietiesModal';\r\nimport DeleteBMCModal from '@/components/modals/DeleteBMCModal';\r\n\r\ninterface BMC {\r\n  id: number;\r\n  name: string;\r\n  bmcId: string;\r\n  dairyFarmId: number;\r\n  dairyFarmName?: string;\r\n  location?: string;\r\n  contactPerson?: string;\r\n  phone?: string;\r\n  email?: string;\r\n  capacity?: number;\r\n  status: 'active' | 'inactive' | 'maintenance';\r\n  monthlyTarget?: number;\r\n  createdAt: string;\r\n  lastActivity?: string;\r\n  societyCount?: number;\r\n  totalCollections30d?: number;\r\n  totalQuantity30d?: number;\r\n  totalAmount30d?: number;\r\n  weightedFat30d?: number;\r\n  weightedSnf30d?: number;\r\n  weightedClr30d?: number;\r\n  weightedWater30d?: number;\r\n}\r\n\r\ninterface BMCFormData {\r\n  name: string;\r\n  bmcId: string;\r\n  password: string;\r\n  dairyFarmId: string;\r\n  location: string;\r\n  contactPerson: string;\r\n  phone: string;\r\n  email: string;\r\n  capacity: string;\r\n  status: 'active' | 'inactive' | 'maintenance';\r\n  monthlyTarget: string;\r\n}\r\n\r\nconst initialFormData: BMCFormData = {\r\n  name: '',\r\n  bmcId: '',\r\n  password: '',\r\n  dairyFarmId: '',\r\n  location: '',\r\n  contactPerson: '',\r\n  phone: '',\r\n  email: '',\r\n  capacity: '',\r\n  status: 'active',\r\n  monthlyTarget: ''\r\n};\r\n\r\ninterface Dairy {\r\n  id: number;\r\n  name: string;\r\n  dairyId: string;\r\n}\r\n\r\n// Helper function to highlight matching text in search results\r\nconst highlightText = (text: string | number | null | undefined, searchQuery: string) => {\r\n  if (!text && text !== 0) return text || '';\r\n  if (!searchQuery) return text;\r\n  \r\n  const textStr = text.toString();\r\n  const regex = new RegExp(`(${searchQuery.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\r\n  const parts = textStr.split(regex);\r\n  \r\n  return parts.map((part, index) => \r\n    regex.test(part) ? (\r\n      <span key={index} className=\"bg-yellow-200 dark:bg-yellow-800 px-0.5 rounded\">\r\n        {part}\r\n      </span>\r\n    ) : (\r\n      part\r\n    )\r\n  );\r\n};\r\n\r\nexport default function BMCManagement() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const { user } = useUser();\r\n  const { t } = useLanguage();\r\n  \r\n  // State management\r\n  const [bmcs, setBMCs] = useState<BMC[]>([]);\r\n  const [dairies, setDairies] = useState<Dairy[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [dairiesLoading, setDairiesLoading] = useState(true);\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [showEditForm, setShowEditForm] = useState(false);\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [showTransferModal, setShowTransferModal] = useState(false);\r\n  const [societies, setSocieties] = useState<any[]>([]);\r\n  const [availableBMCs, setAvailableBMCs] = useState<BMC[]>([]);\r\n  const [selectedBMC, setSelectedBMC] = useState<BMC | null>(null);\r\n  const [formData, setFormData] = useState<BMCFormData>(initialFormData);\r\n  const [formLoading, setFormLoading] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'inactive' | 'maintenance'>('all');\r\n  const [dairyFilter, setDairyFilter] = useState<string[]>([]);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [currentPassword, setCurrentPassword] = useState('');\r\n  const [showAddPassword, setShowAddPassword] = useState(false);\r\n  const [fieldErrors, setFieldErrors] = useState<{ \r\n    bmcId?: string; \r\n    name?: string;\r\n    phone?: string;\r\n  }>({});\r\n  const [showGraphModal, setShowGraphModal] = useState(false);\r\n  const [graphMetric, setGraphMetric] = useState<'quantity' | 'revenue' | 'fat' | 'snf' | 'collections' | 'water'>('quantity');\r\n  const [showSocietiesAlert, setShowSocietiesAlert] = useState(false);\r\n  const [bmcForNavigation, setBmcForNavigation] = useState<BMC | null>(null);\r\n\r\n  // Fetch dairies for dropdown\r\n  const fetchDairies = useCallback(async () => {\r\n    try {\r\n      setDairiesLoading(true);\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch('/api/user/dairy', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        setDairies(result.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching dairies:', error);\r\n    } finally {\r\n      setDairiesLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch BMCs\r\n  const fetchBMCs = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) {\r\n        router.push('/login');\r\n        return;\r\n      }\r\n\r\n      const response = await fetch('/api/user/bmc', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (!response.ok) {\r\n        if (response.status === 401 || response.status === 403) {\r\n          localStorage.removeItem('authToken');\r\n          router.push('/login');\r\n          return;\r\n        }\r\n        throw new Error('Failed to fetch BMCs');\r\n      }\r\n\r\n      const result = await response.json();\r\n      setBMCs(result.data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching BMCs:', error);\r\n      setError('Failed to load BMC data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [router]);\r\n\r\n  // Handle Add BMC button click with validation\r\n  const handleAddBMCClick = () => {\r\n    if (dairies.length === 0) {\r\n      setError('Please add a dairy farm first before adding BMC');\r\n      setTimeout(() => setError(''), 5000);\r\n      return;\r\n    }\r\n    setError('');\r\n    setShowAddForm(true);\r\n  };\r\n\r\n  // Add new BMC\r\n  const handleAddBMC = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setFormLoading(true);\r\n    setError('');\r\n\r\n    // Validate required fields\r\n    if (!formData.dairyFarmId) {\r\n      setError('Please select a dairy farm');\r\n      setFormLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/bmc', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          ...formData,\r\n          dairyFarmId: parseInt(formData.dairyFarmId),\r\n          capacity: formData.capacity ? parseInt(formData.capacity) : undefined,\r\n          monthlyTarget: formData.monthlyTarget ? parseInt(formData.monthlyTarget) : undefined\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSuccess('BMC added successfully!');\r\n        setShowAddForm(false);\r\n        setFormData(initialFormData);\r\n        await fetchBMCs();\r\n        \r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        const errorResponse = await response.json();\r\n        const errorMessage = errorResponse.error || 'Failed to add BMC';\r\n        \r\n        // Clear previous field errors\r\n        setFieldErrors({});\r\n        \r\n        // Check for specific field errors\r\n        if (errorMessage.toLowerCase().includes('bmc id') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ bmcId: 'This BMC ID already exists' });\r\n        } else if (errorMessage.toLowerCase().includes('bmc name') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ name: 'This BMC name already exists' });\r\n        } else {\r\n          setError(errorMessage);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding BMC:', error);\r\n      setError('Failed to add BMC');\r\n    } finally {\r\n      setFormLoading(false);\r\n    }\r\n  };\r\n\r\n  // Open edit modal\r\n  const handleEditClick = async (bmc: BMC) => {\r\n    setSelectedBMC(bmc);\r\n    setShowPassword(false);\r\n    setCurrentPassword('');\r\n    \r\n    // Fetch current password\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch(`/api/user/bmc/password?id=${bmc.id}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        const fetchedPassword = result.data?.password || result.password || '';\r\n        setCurrentPassword(fetchedPassword);\r\n        \r\n        setFormData({\r\n          name: bmc.name,\r\n          bmcId: bmc.bmcId,\r\n          password: fetchedPassword,\r\n          dairyFarmId: bmc.dairyFarmId?.toString() || '',\r\n          location: bmc.location || '',\r\n          contactPerson: bmc.contactPerson || '',\r\n          phone: bmc.phone || '',\r\n          email: bmc.email || '',\r\n          capacity: bmc.capacity?.toString() || '',\r\n          status: bmc.status || 'active',\r\n          monthlyTarget: bmc.monthlyTarget?.toString() || ''\r\n        });\r\n      } else {\r\n        setFormData({\r\n          name: bmc.name,\r\n          bmcId: bmc.bmcId,\r\n          password: '',\r\n          dairyFarmId: bmc.dairyFarmId?.toString() || '',\r\n          location: bmc.location || '',\r\n          contactPerson: bmc.contactPerson || '',\r\n          phone: bmc.phone || '',\r\n          email: bmc.email || '',\r\n          capacity: bmc.capacity?.toString() || '',\r\n          status: bmc.status || 'active',\r\n          monthlyTarget: bmc.monthlyTarget?.toString() || ''\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching password:', error);\r\n      setFormData({\r\n        name: bmc.name,\r\n        bmcId: bmc.bmcId,\r\n        password: '',\r\n        dairyFarmId: bmc.dairyFarmId?.toString() || '',\r\n        location: bmc.location || '',\r\n        contactPerson: bmc.contactPerson || '',\r\n        phone: bmc.phone || '',\r\n        email: bmc.email || '',\r\n        capacity: bmc.capacity?.toString() || '',\r\n        status: bmc.status || 'active',\r\n        monthlyTarget: bmc.monthlyTarget?.toString() || ''\r\n      });\r\n    }\r\n    \r\n    setShowEditForm(true);\r\n  };\r\n\r\n  // Update BMC\r\n  const handleUpdateBMC = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!selectedBMC) return;\r\n\r\n    setFormLoading(true);\r\n    setError('');\r\n\r\n    // Validate required fields\r\n    if (!formData.dairyFarmId) {\r\n      setError('Please select a dairy farm');\r\n      setFormLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const updateData: Record<string, string | number | undefined> = {\r\n        id: selectedBMC.id,\r\n        name: formData.name,\r\n        dairyFarmId: parseInt(formData.dairyFarmId),\r\n        location: formData.location,\r\n        contactPerson: formData.contactPerson,\r\n        phone: formData.phone,\r\n        email: formData.email,\r\n        capacity: formData.capacity ? parseInt(formData.capacity) : undefined,\r\n        status: formData.status,\r\n        monthlyTarget: formData.monthlyTarget ? parseInt(formData.monthlyTarget) : undefined\r\n      };\r\n\r\n      // Only include password if it was changed from the original\r\n      if (formData.password && formData.password !== currentPassword) {\r\n        updateData.password = formData.password;\r\n      }\r\n\r\n      const response = await fetch('/api/user/bmc', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(updateData)\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSuccess('BMC updated successfully!');\r\n        setShowEditForm(false);\r\n        setSelectedBMC(null);\r\n        setFormData(initialFormData);\r\n        await fetchBMCs();\r\n        \r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        const errorResponse = await response.json();\r\n        const errorMessage = errorResponse.error || 'Failed to update BMC';\r\n        \r\n        // Clear previous field errors\r\n        setFieldErrors({});\r\n        \r\n        // Check for specific field errors\r\n        if (errorMessage.toLowerCase().includes('bmc name') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ name: 'This BMC name already exists' });\r\n        } else {\r\n          setError(errorMessage);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating BMC:', error);\r\n      setError('Failed to update BMC');\r\n    } finally {\r\n      setFormLoading(false);\r\n    }\r\n  };\r\n\r\n  // Update BMC status\r\n  const handleStatusChange = async (bmc: BMC, newStatus: 'active' | 'inactive' | 'maintenance') => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/bmc', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          id: bmc.id,\r\n          status: newStatus\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSuccess(`Status updated to ${newStatus}!`);\r\n        await fetchBMCs();\r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        const error = await response.json();\r\n        setError(error.error || 'Failed to update status');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating status:', error);\r\n      setError('Failed to update status');\r\n    }\r\n  };\r\n\r\n  // Open delete confirmation modal\r\n  const handleDeleteClick = async (bmc: BMC) => {\r\n    setSelectedBMC(bmc);\r\n    \r\n    // Fetch societies for this BMC\r\n    const bmcSocieties = await fetchSocietiesForBMC(bmc.id);\r\n    \r\n    if (bmcSocieties.length > 0) {\r\n      // Has societies - show transfer modal\r\n      setSocieties(bmcSocieties);\r\n      const otherBMCs = bmcs.filter(b => b.id !== bmc.id);\r\n      setAvailableBMCs(otherBMCs);\r\n      setShowTransferModal(true);\r\n    } else {\r\n      // No societies - store BMC ID for OTP modal and show delete modal\r\n      (window as any).selectedBmcIdForDelete = bmc.id;\r\n      setShowDeleteModal(true);\r\n    }\r\n  };\r\n\r\n  // Fetch societies under a specific BMC\r\n  const fetchSocietiesForBMC = async (bmcId: number) => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/society', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        const bmcSocieties = result.data?.filter((s: any) => s.bmc_id === bmcId) || [];\r\n        return bmcSocieties;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching societies:', error);\r\n    }\r\n    return [];\r\n  };\r\n\r\n  // Delete BMC (no societies) with OTP verification\r\n  const handleConfirmDelete = async (otp: string) => {\r\n    if (!selectedBMC) return;\r\n\r\n    try {\r\n      setIsDeleting(true);\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/bmc', {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          id: selectedBMC.id,\r\n          otp\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSuccess('BMC deleted successfully!');\r\n        setShowDeleteModal(false);\r\n        setSelectedBMC(null);\r\n        await fetchBMCs();\r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        const error = await response.json();\r\n        throw new Error(error.error || 'Failed to delete BMC');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error deleting BMC:', error);\r\n      throw error;\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  // Handle transfer and delete\r\n  const handleTransferAndDelete = async (newBmcId: number | null, deleteAll: boolean, otp?: string) => {\r\n    if (!selectedBMC) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/bmc', {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ \r\n          id: selectedBMC.id,\r\n          newBmcId,\r\n          deleteAll,\r\n          otp\r\n        })\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (response.ok) {\r\n        setShowTransferModal(false);\r\n        setSelectedBMC(null);\r\n        if (deleteAll) {\r\n          setSuccess('All data deleted successfully!');\r\n        } else {\r\n          setSuccess(`Transferred ${result.data?.transferredSocieties || 0} societies and deleted BMC successfully!`);\r\n        }\r\n        await fetchBMCs();\r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        setError(result.error || 'Failed to delete BMC');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting BMC:', error);\r\n      setError('Failed to delete BMC');\r\n    }\r\n  };\r\n\r\n  // Handle form input changes\r\n  const handleInputChange = (field: keyof BMCFormData, value: string) => {\r\n    if (field === 'bmcId' && !showEditForm) {\r\n      const cleanValue = value.replace(/^B-/i, '');\r\n      value = `B-${cleanValue}`;\r\n    }\r\n    \r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n    \r\n    // Clear field error when user starts typing\r\n    if (fieldErrors[field as keyof typeof fieldErrors]) {\r\n      setFieldErrors(prev => ({\r\n        ...prev,\r\n        [field]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  // Filter BMCs\r\n  const filteredBMCs = bmcs.filter(bmc => {\r\n    const matchesSearch = searchQuery === '' ||\r\n                         bmc.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         bmc.bmcId.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         bmc.location?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         bmc.contactPerson?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         bmc.phone?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         bmc.email?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         bmc.dairyFarmName?.toLowerCase().includes(searchQuery.toLowerCase());\r\n    \r\n    const matchesStatus = statusFilter === 'all' || bmc.status === statusFilter;\r\n    \r\n    const matchesDairy = dairyFilter.length === 0 || dairyFilter.includes(bmc.dairyFarmId?.toString() || '');\r\n    \r\n    return matchesSearch && matchesStatus && matchesDairy;\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchBMCs();\r\n    fetchDairies();\r\n  }, [fetchBMCs, fetchDairies]);\r\n\r\n  // Listen for global search events from header\r\n  useEffect(() => {\r\n    const handleGlobalSearch = (event: Event) => {\r\n      const customEvent = event as CustomEvent;\r\n      const query = customEvent.detail?.query || '';\r\n      setSearchQuery(query);\r\n    };\r\n    window.addEventListener('globalSearch', handleGlobalSearch);\r\n    return () => window.removeEventListener('globalSearch', handleGlobalSearch);\r\n  }, []);\r\n\r\n  // Handle URL parameters for dairy filter\r\n  useEffect(() => {\r\n    const dairyFilterParam = searchParams.get('dairyFilter');\r\n    if (dairyFilterParam && dairies.length > 0) {\r\n      setDairyFilter([dairyFilterParam]);\r\n    }\r\n  }, [searchParams, dairies]);\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\r\n        <FlowerSpinner />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"p-4 sm:p-6 lg:p-8 space-y-4 sm:space-y-6 lg:pb-8\">\r\n        {/* Page Header */}\r\n        <PageHeader\r\n          title=\"BMC Management\"\r\n          subtitle=\"Manage your Bulk Milk Cooling Centers\"\r\n          icon={<Factory className=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" />}\r\n          onRefresh={fetchBMCs}\r\n        />\r\n\r\n        {/* Success/Error Messages */}\r\n        <StatusMessage \r\n          success={success} \r\n          error={error && !error.includes('dairy farm first') ? error : undefined}\r\n        />\r\n        \r\n        {/* Custom Error Message for Dairy Dependency */}\r\n        {error && error.includes('dairy farm first') && (\r\n          <StatusMessage \r\n            error={error}\r\n          />\r\n        )}\r\n\r\n        {/* Top Performers Section */}\r\n        {bmcs.length > 0 && (() => {\r\n          const bmcsWithStats = bmcs.filter(b => b.totalQuantity30d && Number(b.totalQuantity30d) > 0);\r\n          \r\n          if (bmcsWithStats.length === 0) return null;\r\n\r\n          const topCollection = [...bmcsWithStats].sort((a, b) => \r\n            Number(b.totalQuantity30d || 0) - Number(a.totalQuantity30d || 0)\r\n          )[0];\r\n          \r\n          const topRevenue = [...bmcsWithStats].sort((a, b) => \r\n            Number(b.totalAmount30d || 0) - Number(a.totalAmount30d || 0)\r\n          )[0];\r\n          \r\n          const topFat = [...bmcsWithStats].sort((a, b) => \r\n            Number(b.weightedFat30d || 0) - Number(a.weightedFat30d || 0)\r\n          )[0];\r\n          \r\n          const topSnf = [...bmcsWithStats].sort((a, b) => \r\n            Number(b.weightedSnf30d || 0) - Number(a.weightedSnf30d || 0)\r\n          )[0];\r\n          \r\n          const mostCollections = [...bmcsWithStats].sort((a, b) => \r\n            Number(b.totalCollections30d || 0) - Number(a.totalCollections30d || 0)\r\n          )[0];\r\n          \r\n          const leastWater = [...bmcsWithStats].sort((a, b) => \r\n            Number(a.weightedWater30d || 100) - Number(b.weightedWater30d || 100)\r\n          )[0];\r\n\r\n          return (\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3 sm:gap-4\">\r\n              {topCollection && (\r\n                <div \r\n                  className=\"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-4 rounded-lg border border-green-200 dark:border-green-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                  onClick={() => {\r\n                    setGraphMetric('quantity');\r\n                    setShowGraphModal(true);\r\n                  }}\r\n                >\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-semibold text-green-900 dark:text-green-100\">Top Collection (30d)</h3>\r\n                    <Users className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\r\n                  </div>\r\n                  <p className=\"text-lg font-bold text-green-800 dark:text-green-200\">{topCollection.name}</p>\r\n                  <p className=\"text-sm text-green-600 dark:text-green-400\">{Number(topCollection.totalQuantity30d || 0).toFixed(2)} L</p>\r\n                </div>\r\n              )}\r\n              \r\n              {topRevenue && (\r\n                <div \r\n                  className=\"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                  onClick={() => {\r\n                    setGraphMetric('revenue');\r\n                    setShowGraphModal(true);\r\n                  }}\r\n                >\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-semibold text-blue-900 dark:text-blue-100\">Top Revenue (30d)</h3>\r\n                    <Building2 className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\r\n                  </div>\r\n                  <p className=\"text-lg font-bold text-blue-800 dark:text-blue-200\">{topRevenue.name}</p>\r\n                  <p className=\"text-sm text-blue-600 dark:text-blue-400\">₹{Number(topRevenue.totalAmount30d || 0).toFixed(2)}</p>\r\n                </div>\r\n              )}\r\n              \r\n              {topFat && (\r\n                <div \r\n                  className=\"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-4 rounded-lg border border-purple-200 dark:border-purple-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                  onClick={() => {\r\n                    setGraphMetric('fat');\r\n                    setShowGraphModal(true);\r\n                  }}\r\n                >\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-semibold text-purple-900 dark:text-purple-100\">Best Quality (30d)</h3>\r\n                    <Eye className=\"w-5 h-5 text-purple-600 dark:text-purple-400\" />\r\n                  </div>\r\n                  <p className=\"text-lg font-bold text-purple-800 dark:text-purple-200\">{topFat.name}</p>\r\n                  <p className=\"text-sm text-purple-600 dark:text-purple-400\">{Number(topFat.weightedFat30d || 0).toFixed(2)}% Fat</p>\r\n                </div>\r\n              )}\r\n              \r\n              {topSnf && (\r\n                <div \r\n                  className=\"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 p-4 rounded-lg border border-orange-200 dark:border-orange-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                  onClick={() => {\r\n                    setGraphMetric('snf');\r\n                    setShowGraphModal(true);\r\n                  }}\r\n                >\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-semibold text-orange-900 dark:text-orange-100\">Best SNF (30d)</h3>\r\n                    <TrendingUp className=\"w-5 h-5 text-orange-600 dark:text-orange-400\" />\r\n                  </div>\r\n                  <p className=\"text-lg font-bold text-orange-800 dark:text-orange-200\">{topSnf.name}</p>\r\n                  <p className=\"text-sm text-orange-600 dark:text-orange-400\">{Number(topSnf.weightedSnf30d || 0).toFixed(2)}% SNF</p>\r\n                </div>\r\n              )}\r\n              \r\n              {mostCollections && (\r\n                <div \r\n                  className=\"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 p-4 rounded-lg border border-pink-200 dark:border-pink-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                  onClick={() => {\r\n                    setGraphMetric('collections');\r\n                    setShowGraphModal(true);\r\n                  }}\r\n                >\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-semibold text-pink-900 dark:text-pink-100\">Most Active (30d)</h3>\r\n                    <Award className=\"w-5 h-5 text-pink-600 dark:text-pink-400\" />\r\n                  </div>\r\n                  <p className=\"text-lg font-bold text-pink-800 dark:text-pink-200\">{mostCollections.name}</p>\r\n                  <p className=\"text-sm text-pink-600 dark:text-pink-400\">{Number(mostCollections.totalCollections30d || 0)} Collections</p>\r\n                </div>\r\n              )}\r\n              \r\n              {leastWater && (\r\n                <div \r\n                  className=\"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 p-4 rounded-lg border border-red-200 dark:border-red-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                  onClick={() => {\r\n                    setGraphMetric('water');\r\n                    setShowGraphModal(true);\r\n                  }}\r\n                >\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-semibold text-red-900 dark:text-red-100\">Most Water (30d)</h3>\r\n                    <Droplets className=\"w-5 h-5 text-red-600 dark:text-red-400\" />\r\n                  </div>\r\n                  <p className=\"text-lg font-bold text-red-800 dark:text-red-200\">{leastWater.name}</p>\r\n                  <p className=\"text-sm text-red-600 dark:text-red-400\">{Number(leastWater.weightedWater30d || 0).toFixed(2)}% Water</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })()}\r\n\r\n        {/* Stats Cards removed per request */}\r\n\r\n        {/* Filter Controls */}\r\n        <FilterControls\r\n          icon={<Building2 className=\"w-4 h-4 flex-shrink-0\" />}\r\n          showingText={`Showing ${filteredBMCs.length} of ${bmcs.length} BMCs`}\r\n          filterLabel=\"Filter:\"\r\n          filterValue={statusFilter}\r\n          filterOptions={[\r\n            { value: 'all', label: 'All Status' },\r\n            { value: 'active', label: 'Active' },\r\n            { value: 'inactive', label: 'Inactive' },\r\n            { value: 'maintenance', label: 'Maintenance' }\r\n          ]}\r\n          onFilterChange={(value) => setStatusFilter(value as typeof statusFilter)}\r\n        />\r\n\r\n        {/* Main Content */}\r\n        {loading ? (\r\n          <LoadingSpinner />\r\n        ) : filteredBMCs.length > 0 ? (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6\">\r\n            {filteredBMCs.map((bmc) => (\r\n              <div key={bmc.id} className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-lg transition-all duration-200 overflow-visible border border-gray-200 dark:border-gray-700 hover:border-green-200 dark:hover:border-green-700 relative z-10 hover:z-20\">\r\n                {/* Header */}\r\n                <div className=\"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 border-b border-gray-200 dark:border-gray-700 rounded-t-lg\">\r\n                  <div className=\"flex items-start justify-between gap-3\">\r\n                    <div className=\"flex items-center gap-3 flex-1 min-w-0\">\r\n                      <div className=\"p-2 bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30 rounded-lg flex-shrink-0\">\r\n                        <Factory className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\r\n                      </div>\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white truncate\">{highlightText(bmc.name, searchQuery)}</h3>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">{highlightText(bmc.bmcId, searchQuery)}</p>\r\n                      </div>\r\n                    </div>\r\n                    <StatusDropdown\r\n                      currentStatus={bmc.status}\r\n                      onStatusChange={(status) => handleStatusChange(bmc, status as 'active' | 'inactive' | 'maintenance')}\r\n                      options={[\r\n                        {\r\n                          status: 'active',\r\n                          label: 'Active',\r\n                          color: 'bg-green-500',\r\n                          bgColor: 'hover:bg-green-50 dark:hover:bg-green-900/30'\r\n                        },\r\n                        {\r\n                          status: 'inactive',\r\n                          label: 'Inactive',\r\n                          color: 'bg-red-500',\r\n                          bgColor: 'hover:bg-red-50 dark:hover:bg-red-900/30'\r\n                        },\r\n                        {\r\n                          status: 'maintenance',\r\n                          label: 'Maintenance',\r\n                          color: 'bg-yellow-500',\r\n                          bgColor: 'hover:bg-yellow-50 dark:hover:bg-yellow-900/30'\r\n                        }\r\n                      ]}\r\n                      compact={true}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"p-4 space-y-3\">\r\n                  {/* Basic Info - Two Columns */}\r\n                  <div className=\"grid grid-cols-2 gap-3\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <User className=\"w-4 h-4 text-gray-500 flex-shrink-0\" />\r\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300 truncate\">{highlightText(bmc.contactPerson || 'No Contact', searchQuery)}</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Phone className=\"w-4 h-4 text-gray-500 flex-shrink-0\" />\r\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300 truncate\">{highlightText(bmc.phone || 'No Phone', searchQuery)}</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Location & Dairy - Two Columns */}\r\n                  <div className=\"grid grid-cols-2 gap-3\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <MapPin className=\"w-4 h-4 text-gray-500 flex-shrink-0\" />\r\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300 truncate\">{highlightText(bmc.location || 'No Location', searchQuery)}</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Milk className=\"w-4 h-4 text-blue-500 flex-shrink-0\" />\r\n                      <span className=\"text-sm text-blue-600 dark:text-blue-400 font-medium truncate\">{highlightText(bmc.dairyFarmName || 'No Dairy', searchQuery)}</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Divider */}\r\n                  <div className=\"border-t border-gray-200 dark:border-gray-700 my-3\"></div>\r\n\r\n                  {/* 30-Day Statistics Header */}\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide\">Last 30 Days</span>\r\n                    <Calendar className=\"w-4 h-4 text-gray-400\" />\r\n                  </div>\r\n\r\n                  {/* Collections & Quantity */}\r\n                  <div className=\"flex items-center justify-between bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className=\"w-2 h-2 rounded-full bg-blue-500\"></div>\r\n                      <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Collections</span>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <div className=\"text-lg font-bold text-blue-600 dark:text-blue-400\">{Number(bmc.totalCollections30d || 0)}</div>\r\n                      <div className=\"text-xs text-gray-600 dark:text-gray-400\">{Number(bmc.totalQuantity30d || 0).toFixed(2)} Liters</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Quality Metrics - Three Columns */}\r\n                  <div className=\"grid grid-cols-3 gap-2\">\r\n                    <div className=\"bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-2 text-center\">\r\n                      <div className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">Fat</div>\r\n                      <div className=\"text-sm font-bold text-indigo-600 dark:text-indigo-400\">{Number(bmc.weightedFat30d || 0).toFixed(2)}%</div>\r\n                    </div>\r\n                    <div className=\"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-2 text-center\">\r\n                      <div className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">SNF</div>\r\n                      <div className=\"text-sm font-bold text-purple-600 dark:text-purple-400\">{Number(bmc.weightedSnf30d || 0).toFixed(2)}%</div>\r\n                    </div>\r\n                    <div className=\"bg-pink-50 dark:bg-pink-900/20 rounded-lg p-2 text-center\">\r\n                      <div className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">CLR</div>\r\n                      <div className=\"text-sm font-bold text-pink-600 dark:text-pink-400\">{Number(bmc.weightedClr30d || 0).toFixed(1)}</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Revenue */}\r\n                  <div className=\"flex items-center justify-between bg-emerald-50 dark:bg-emerald-900/20 rounded-lg p-3\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className=\"w-2 h-2 rounded-full bg-emerald-500\"></div>\r\n                      <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Total Revenue</span>\r\n                    </div>\r\n                    <div className=\"text-lg font-bold text-emerald-600 dark:text-emerald-400\">\r\n                      ₹{Number(bmc.totalAmount30d || 0).toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Footer Actions */}\r\n                <div className=\"bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-100 dark:border-gray-700 flex items-center justify-between gap-2 rounded-b-lg\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <button\r\n                      onClick={() => handleEditClick(bmc)}\r\n                      className=\"p-2 text-gray-400 dark:text-gray-500 hover:text-green-600 dark:hover:text-green-400 transition-colors rounded-lg hover:bg-green-50 dark:hover:bg-green-900/30\"\r\n                      title=\"Edit\"\r\n                    >\r\n                      <Edit3 className=\"w-4 h-4\" />\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleDeleteClick(bmc)}\r\n                      className=\"p-2 text-gray-400 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 transition-colors rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30\"\r\n                      title=\"Delete\"\r\n                    >\r\n                      <Trash2 className=\"w-4 h-4\" />\r\n                    </button>\r\n                  </div>\r\n                  \r\n                  {/* Right side actions */}\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <button\r\n                      onClick={() => {\r\n                        setBmcForNavigation(bmc);\r\n                        setShowSocietiesAlert(true);\r\n                      }}\r\n                      className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors group\"\r\n                      title={`View ${bmc.societyCount || 0} societies under ${bmc.name}`}\r\n                    >\r\n                      <Building2 className=\"w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-colors\" />\r\n                      <span className=\"text-sm text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 font-medium transition-colors\">\r\n                        {bmc.societyCount || 0} Societies\r\n                      </span>\r\n                    </button>\r\n                    \r\n                    <button\r\n                      onClick={() => router.push(`/admin/bmc/${bmc.id}`)}\r\n                      className=\"flex items-center px-3 py-1.5 text-sm text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg transition-colors\"\r\n                      title=\"View Details\"\r\n                    >\r\n                      <Eye className=\"w-4 h-4 mr-1\" />\r\n                      <span>View</span>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <EmptyState\r\n            icon={<Factory className=\"w-12 h-12 sm:w-16 sm:h-16 text-gray-400\" />}\r\n            title=\"No BMCs found\"\r\n            message={statusFilter === 'all' ? 'Get started by adding your first BMC' : 'Try changing the filter to see more results'}\r\n            actionText={statusFilter === 'all' ? 'Add Your First BMC' : undefined}\r\n            onAction={statusFilter === 'all' ? handleAddBMCClick : undefined}\r\n            showAction={statusFilter === 'all'}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {/* Floating Action Button */}\r\n      <FloatingActionButton\r\n        actions={[\r\n          {\r\n            icon: <Plus className=\"w-6 h-6 text-white\" />,\r\n            label: 'Add BMC',\r\n            onClick: () => {\r\n              setFieldErrors({});\r\n              setError('');\r\n              setShowAddForm(true);\r\n              fetchDairies();\r\n            },\r\n            color: 'bg-gradient-to-br from-green-500 to-green-600'\r\n          }\r\n        ]}\r\n        directClick={true}\r\n      />\r\n\r\n      {/* Add BMC Modal - Positioned outside main container */}\r\n      <FormModal\r\n        isOpen={showAddForm}\r\n        onClose={() => {\r\n          setShowAddForm(false);\r\n          setFormData(initialFormData);\r\n        }}\r\n        title={t.bmcManagement.addBMC}\r\n        maxWidth=\"lg\"\r\n      >\r\n        <form onSubmit={handleAddBMC} className=\"space-y-4 sm:space-y-6\">\r\n          <FormGrid>\r\n            {/* Mandatory Fields First */}\r\n            <FormInput\r\n              label=\"BMC Name\"\r\n              value={formData.name}\r\n              onChange={(value) => handleInputChange('name', value)}\r\n              placeholder=\"Enter BMC name\"\r\n              required\r\n              error={fieldErrors.name}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"BMC ID\"\r\n              value={formData.bmcId}\r\n              onChange={(value) => handleInputChange('bmcId', value)}\r\n              placeholder=\"B-001\"\r\n              required\r\n              disabled={showEditForm}\r\n              error={fieldErrors.bmcId}\r\n              colSpan={1}\r\n            />\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Password <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type={showAddPassword ? 'text' : 'password'}\r\n                  value={formData.password}\r\n                  onChange={(e) => handleInputChange('password', e.target.value)}\r\n                  placeholder=\"Enter password\"\r\n                  required={!showEditForm}\r\n                  className=\"form-input-custom w-full px-3 sm:px-4 py-2 sm:py-2.5 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-200 focus:outline-none\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowAddPassword(!showAddPassword)}\r\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors\"\r\n                  title={showAddPassword ? 'Hide password' : 'Show password'}\r\n                >\r\n                  {showAddPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <FormSelect\r\n              label=\"Dairy Farm\"\r\n              value={formData.dairyFarmId}\r\n              onChange={(value) => handleInputChange('dairyFarmId', value)}\r\n              options={dairies.map(dairy => ({ \r\n                value: dairy.id, \r\n                label: `${dairy.name} (${dairy.dairyId})` \r\n              }))}\r\n              placeholder=\"Select dairy farm\"\r\n              required\r\n              disabled={dairiesLoading}\r\n              colSpan={1}\r\n            />\r\n\r\n            {/* Optional Fields */}\r\n            <FormInput\r\n              label=\"Capacity (Liters)\"\r\n              type=\"number\"\r\n              value={formData.capacity}\r\n              onChange={(value) => handleInputChange('capacity', value)}\r\n              placeholder=\"2000\"\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Monthly Target (Liters)\"\r\n              type=\"number\"\r\n              value={formData.monthlyTarget}\r\n              onChange={(value) => handleInputChange('monthlyTarget', value)}\r\n              placeholder=\"2000\"\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Contact Person\"\r\n              value={formData.contactPerson}\r\n              onChange={(value) => handleInputChange('contactPerson', value)}\r\n              placeholder=\"Enter contact person\"\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Phone Number\"\r\n              type=\"tel\"\r\n              value={formData.phone}\r\n              onChange={(value) => {\r\n                const formatted = formatPhoneInput(value);\r\n                handleInputChange('phone', formatted);\r\n              }}\r\n              onBlur={() => {\r\n                const error = validatePhoneOnBlur(formData.phone);\r\n                if (error) {\r\n                  setFieldErrors(prev => ({ ...prev, phone: error }));\r\n                } else {\r\n                  setFieldErrors(prev => ({ ...prev, phone: undefined }));\r\n                }\r\n              }}\r\n              placeholder=\"Enter 10-digit phone number\"\r\n              error={fieldErrors.phone}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Email\"\r\n              type=\"email\"\r\n              value={formData.email}\r\n              onChange={(value) => handleInputChange('email', value)}\r\n              placeholder=\"bmc@example.com\"\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormSelect\r\n              label=\"Status\"\r\n              value={formData.status}\r\n              onChange={(value) => handleInputChange('status', value)}\r\n              options={[\r\n                { value: 'active', label: 'Active' },\r\n                { value: 'inactive', label: 'Inactive' },\r\n                { value: 'maintenance', label: 'Maintenance' }\r\n              ]}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Location\"\r\n              value={formData.location}\r\n              onChange={(value) => handleInputChange('location', value)}\r\n              placeholder=\"Enter location\"\r\n              colSpan={2}\r\n            />\r\n          </FormGrid>\r\n\r\n          <FormActions\r\n            onCancel={() => {\r\n              setShowAddForm(false);\r\n              setFormData(initialFormData);\r\n            }}\r\n            submitText={t.bmcManagement.addBMC}\r\n            isLoading={formLoading}\r\n            cancelText={t.common.cancel}\r\n          />\r\n        </form>\r\n      </FormModal>\r\n\r\n      {/* Edit BMC Modal */}\r\n      <FormModal\r\n        isOpen={showEditForm && !!selectedBMC}\r\n        onClose={() => {\r\n          setShowEditForm(false);\r\n          setSelectedBMC(null);\r\n          setFormData(initialFormData);\r\n        }}\r\n        title={selectedBMC ? `${t.common.edit} ${selectedBMC.name}` : t.common.edit}\r\n        maxWidth=\"lg\"\r\n      >\r\n        <form onSubmit={handleUpdateBMC} className=\"space-y-4 sm:space-y-6\">\r\n          <FormGrid>\r\n            {/* Mandatory Fields First */}\r\n            <FormInput\r\n              label={`${t.bmcManagement.bmcName}`}\r\n              value={formData.name}\r\n              onChange={(value) => handleInputChange('name', value)}\r\n              placeholder={t.bmcManagement.enterBMCName}\r\n              required\r\n              error={fieldErrors.name}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label={`${t.bmcManagement.bmcId} (Read-only)`}\r\n              value={formData.bmcId}\r\n              onChange={() => {}} \r\n              readOnly\r\n              disabled\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormSelect\r\n              label={`${t.bmcManagement.dairyFarm}`}\r\n              value={formData.dairyFarmId}\r\n              onChange={(value) => handleInputChange('dairyFarmId', value)}\r\n              options={dairies.map(dairy => ({ \r\n                value: dairy.id, \r\n                label: `${dairy.name} (${dairy.dairyId})` \r\n              }))}\r\n              placeholder=\"Select dairy farm\"\r\n              required\r\n              disabled={dairiesLoading}\r\n              colSpan={2}\r\n            />\r\n\r\n            {/* Optional Fields */}\r\n            <div className=\"sm:col-span-2\">\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Password\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  value={formData.password}\r\n                  onChange={(e) => handleInputChange('password', e.target.value)}\r\n                  placeholder=\"Enter password\"\r\n                  className=\"form-input-custom w-full px-3 sm:px-4 py-2 sm:py-2.5 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 focus:border-emerald-500 dark:focus:border-emerald-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-200 focus:outline-none\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors\"\r\n                  title={showPassword ? 'Hide password' : 'Show password'}\r\n                >\r\n                  {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                </button>\r\n              </div>\r\n              <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\r\n                Current password is pre-filled. Click eye icon to view or edit to change.\r\n              </p>\r\n            </div>\r\n\r\n            <FormInput\r\n              label={t.bmcManagement.capacity}\r\n              type=\"number\"\r\n              value={formData.capacity}\r\n              onChange={(value) => handleInputChange('capacity', value)}\r\n              placeholder={t.bmcManagement.enterCapacity}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.bmcManagement.monthlyTarget}\r\n              type=\"number\"\r\n              value={formData.monthlyTarget}\r\n              onChange={(value) => handleInputChange('monthlyTarget', value)}\r\n              placeholder={t.bmcManagement.enterMonthlyTarget}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.bmcManagement.contactPerson}\r\n              value={formData.contactPerson}\r\n              onChange={(value) => handleInputChange('contactPerson', value)}\r\n              placeholder={t.bmcManagement.enterContactPerson}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.bmcManagement.phone}\r\n              type=\"tel\"\r\n              value={formData.phone}\r\n              onChange={(value) => {\r\n                const formatted = formatPhoneInput(value);\r\n                handleInputChange('phone', formatted);\r\n              }}\r\n              onBlur={() => {\r\n                const error = validatePhoneOnBlur(formData.phone);\r\n                if (error) {\r\n                  setFieldErrors(prev => ({ ...prev, phone: error }));\r\n                } else {\r\n                  setFieldErrors(prev => ({ ...prev, phone: undefined }));\r\n                }\r\n              }}\r\n              placeholder={t.bmcManagement.enterPhoneNumber}\r\n              error={fieldErrors.phone}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.bmcManagement.email}\r\n              type=\"email\"\r\n              value={formData.email}\r\n              onChange={(value) => handleInputChange('email', value)}\r\n              placeholder={t.bmcManagement.enterEmail}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormSelect\r\n              label={t.bmcManagement.status}\r\n              value={formData.status}\r\n              onChange={(value) => handleInputChange('status', value)}\r\n              options={[\r\n                { value: 'active', label: t.bmcManagement.active },\r\n                { value: 'inactive', label: t.bmcManagement.inactive },\r\n                { value: 'maintenance', label: t.bmcManagement.maintenance }\r\n              ]}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.bmcManagement.location}\r\n              value={formData.location}\r\n              onChange={(value) => handleInputChange('location', value)}\r\n              placeholder={t.bmcManagement.enterLocation}\r\n              colSpan={2}\r\n            />\r\n          </FormGrid>\r\n\r\n          <FormActions\r\n            onCancel={() => {\r\n              setShowEditForm(false);\r\n              setSelectedBMC(null);\r\n              setFormData(initialFormData);\r\n            }}\r\n            submitText={t.bmcManagement.updateBMC}\r\n            isLoading={formLoading}\r\n            cancelText={t.common.cancel}\r\n            loadingText={t.bmcManagement.updatingBMC}\r\n            submitIcon={<Save className=\"w-4 h-4\" />}\r\n          />\r\n        </form>\r\n      </FormModal>\r\n\r\n      {/* Delete Confirmation Modal */}\r\n      <DeleteBMCModal\r\n        isOpen={showDeleteModal && !!selectedBMC}\r\n        onClose={() => {\r\n          setShowDeleteModal(false);\r\n          setSelectedBMC(null);\r\n        }}\r\n        onConfirm={handleConfirmDelete}\r\n        bmcName={selectedBMC?.name || ''}\r\n        loading={isDeleting}\r\n        societyCount={selectedBMC?.societyCount || 0}\r\n      />\r\n\r\n      {/* Transfer Societies Modal */}\r\n      <TransferSocietiesModal\r\n        isOpen={showTransferModal}\r\n        onClose={() => {\r\n          setShowTransferModal(false);\r\n          setSelectedBMC(null);\r\n        }}\r\n        onConfirm={handleTransferAndDelete}\r\n        bmcName={selectedBMC?.name || ''}\r\n        bmcId={selectedBMC?.id || 0}\r\n        societies={societies}\r\n        availableBMCs={availableBMCs}\r\n      />\r\n\r\n      {/* Societies Navigation Alert Modal */}\r\n      <NavigationConfirmModal\r\n        isOpen={showSocietiesAlert && !!bmcForNavigation}\r\n        onClose={() => {\r\n          setShowSocietiesAlert(false);\r\n          setBmcForNavigation(null);\r\n        }}\r\n        onConfirm={() => {\r\n          setShowSocietiesAlert(false);\r\n          router.push(`/admin/society?bmcFilter=${bmcForNavigation?.id}`);\r\n          setBmcForNavigation(null);\r\n        }}\r\n        title=\"Navigate to Society Management\"\r\n        message={`View all societies from ${bmcForNavigation?.name} in the Society Management page with filters applied.`}\r\n        confirmText=\"Go to Society Management\"\r\n        cancelText=\"Cancel\"\r\n      />\r\n\r\n      {/* Graph Modal */}\r\n      {showGraphModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <BarChart3 className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\r\n                <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n                  {graphMetric === 'quantity' && 'Collection Volume - Last 30 Days'}\r\n                  {graphMetric === 'revenue' && 'Revenue - Last 30 Days'}\r\n                  {graphMetric === 'fat' && 'Average Fat % - Last 30 Days'}\r\n                  {graphMetric === 'snf' && 'Average SNF % - Last 30 Days'}\r\n                  {graphMetric === 'collections' && 'Number of Collections - Last 30 Days'}\r\n                  {graphMetric === 'water' && 'Average Water % - Last 30 Days'}\r\n                </h2>\r\n              </div>\r\n              <button\r\n                onClick={() => setShowGraphModal(false)}\r\n                className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\r\n              >\r\n                <X className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Graph Content */}\r\n            <div className=\"flex-1 overflow-y-auto p-6\">\r\n              {(() => {\r\n                const bmcsWithStats = bmcs.filter(b => b.totalQuantity30d && b.totalQuantity30d > 0);\r\n                \r\n                // Prepare data for line chart (all BMCs)\r\n                const chartData = bmcsWithStats.map(bmc => ({\r\n                  name: bmc.name,\r\n                  bmcId: bmc.bmcId,\r\n                  value: graphMetric === 'quantity' ? (bmc.totalQuantity30d || 0) :\r\n                         graphMetric === 'revenue' ? (bmc.totalAmount30d || 0) :\r\n                         graphMetric === 'fat' ? (bmc.weightedFat30d || 0) :\r\n                         graphMetric === 'snf' ? (bmc.weightedSnf30d || 0) :\r\n                         graphMetric === 'collections' ? (bmc.totalCollections30d || 0) :\r\n                         (bmc.weightedWater30d || 0)\r\n                })).sort((a, b) => b.value - a.value);\r\n\r\n                // Get color and settings\r\n                const getLineColor = () => {\r\n                  switch(graphMetric) {\r\n                    case 'quantity': return '#10b981';\r\n                    case 'revenue': return '#3b82f6';\r\n                    case 'fat': return '#8b5cf6';\r\n                    case 'snf': return '#f97316';\r\n                    case 'collections': return '#ec4899';\r\n                    case 'water': return '#ef4444';\r\n                    default: return '#6b7280';\r\n                  }\r\n                };\r\n\r\n                return chartData.length > 0 ? (\r\n                  <div className=\"w-full h-[500px]\">\r\n                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                      <LineChart data={chartData} margin={{ top: 5, right: 30, left: 20, bottom: 80 }}>\r\n                        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" className=\"dark:stroke-gray-700\" />\r\n                        <XAxis \r\n                          dataKey=\"name\" \r\n                          angle={-45}\r\n                          textAnchor=\"end\"\r\n                          height={100}\r\n                          interval={0}\r\n                          tick={{ fontSize: 11 }}\r\n                          stroke=\"#6b7280\"\r\n                          label={{ \r\n                            value: 'BMC Name', \r\n                            position: 'insideBottom', \r\n                            offset: -5,\r\n                            style: { fontSize: 13, fontWeight: 500, fill: '#9ca3af' }\r\n                          }}\r\n                        />\r\n                        <YAxis \r\n                          label={{ \r\n                            value: graphMetric === 'revenue' ? 'Revenue (₹)' : \r\n                                   graphMetric === 'fat' || graphMetric === 'snf' || graphMetric === 'water' ? 'Percentage (%)' : \r\n                                   graphMetric === 'quantity' ? 'Volume (L)' : 'Count', \r\n                            angle: -90, \r\n                            position: 'insideLeft',\r\n                            style: { fontSize: 13, fontWeight: 500, fill: '#9ca3af' }\r\n                          }}\r\n                          stroke=\"#6b7280\"\r\n                        />\r\n                        <Tooltip \r\n                          contentStyle={{\r\n                            backgroundColor: '#1f2937',\r\n                            border: 'none',\r\n                            borderRadius: '0.5rem',\r\n                            color: '#fff',\r\n                            boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1)'\r\n                          }}\r\n                          formatter={(value: any) => {\r\n                            if (graphMetric === 'revenue') {\r\n                              return ['₹' + Number(value).toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })];\r\n                            }\r\n                            if (graphMetric === 'fat' || graphMetric === 'snf' || graphMetric === 'water') {\r\n                              return [Number(value).toFixed(2) + '%'];\r\n                            }\r\n                            if (graphMetric === 'quantity') {\r\n                              return [Number(value).toFixed(2) + ' L'];\r\n                            }\r\n                            return [Number(value)];\r\n                          }}\r\n                          labelFormatter={(label: string) => `BMC: ${label}`}\r\n                          cursor={{ stroke: '#9ca3af', strokeWidth: 1 }}\r\n                        />\r\n                        <Line \r\n                          type=\"monotone\" \r\n                          dataKey=\"value\" \r\n                          stroke={getLineColor()} \r\n                          strokeWidth={2}\r\n                          dot={{ fill: getLineColor(), r: 4 }}\r\n                          activeDot={{ r: 6 }}\r\n                          isAnimationActive={true}\r\n                          name=\"Value\"\r\n                        />\r\n                      </LineChart>\r\n                    </ResponsiveContainer>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"flex items-center justify-center h-[500px]\">\r\n                    <div className=\"text-center\">\r\n                      <BarChart3 className=\"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-3\" />\r\n                      <p className=\"text-gray-600 dark:text-gray-400 text-lg\">No data available for this metric</p>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })()}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div className=\"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-700/50\">\r\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                Showing performance metrics for all BMCs over the last 30 days. Click the X to close this view.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}