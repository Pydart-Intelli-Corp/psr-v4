module.exports=[556704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},120635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},909270,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.AppRouterContext},736313,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.HooksClientContext},818341,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.ServerInsertedHtml},738783,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored["react-ssr"].ReactServerDOMTurbopackClient},935112,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored["react-ssr"].ReactDOM},732860,a=>{"use strict";let b=(0,a.i(170106).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],732860)},400210,a=>{"use strict";let b=(0,a.i(170106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],400210)},292e3,a=>{"use strict";let b=(0,a.i(170106).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],292e3)},641710,a=>{"use strict";let b=(0,a.i(170106).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],641710)},724669,a=>{"use strict";let b=(0,a.i(170106).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);a.s(["TrendingUp",()=>b],724669)},244494,a=>{"use strict";let b=(0,a.i(170106).default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);a.s(["Globe",()=>b],244494)},781560,a=>{"use strict";let b=(0,a.i(170106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],781560)},669520,a=>{"use strict";let b=(0,a.i(170106).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],669520)},369012,a=>{"use strict";let b=(0,a.i(170106).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);a.s(["Filter",()=>b],369012)},352244,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(238246),f=a.i(571987),g=a.i(346271);a.i(16707);var h=a.i(529784);let i=`
  .otp-input {
    color: #111827 !important;
    background-color: #ffffff !important;
    -webkit-text-fill-color: #111827 !important;
  }
  .otp-input:focus {
    color: #111827 !important;
    background-color: #ffffff !important;
    -webkit-text-fill-color: #111827 !important;
  }
  .otp-input::-webkit-autofill,
  .otp-input::-webkit-autofill:hover,
  .otp-input::-webkit-autofill:focus,
  .otp-input::-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 30px white inset !important;
    -webkit-text-fill-color: #111827 !important;
    color: #111827 !important;
  }
  
  /* Force link visibility */
  .otp-link {
    color: #10b981 !important;
    text-decoration: none !important;
  }
  .otp-link:hover {
    color: #059669 !important;
    text-decoration: none !important;
  }
  .otp-link:visited {
    color: #10b981 !important;
  }
  .otp-link:active {
    color: #047857 !important;
  }
  
  /* Override any global link styles */
  a.otp-link,
  a.otp-link:hover,
  a.otp-link:focus,
  a.otp-link:active,
  a.otp-link:visited {
    color: #10b981 !important;
    opacity: 1 !important;
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
    -webkit-text-fill-color: #10b981 !important;
  }
  a.otp-link:hover {
    color: #059669 !important;
    -webkit-text-fill-color: #059669 !important;
  }
`;if("undefined"!=typeof document){let a=document.createElement("style");a.innerText=i,document.head.appendChild(a)}function j(){let[a,i]=(0,c.useState)("input"),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(["","","","","",""]),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(600),[v,w]=(0,c.useState)(5),x=(0,d.useSearchParams)(),y=(0,d.useRouter)(),z=(0,c.useRef)([]);(0,c.useEffect)(()=>{document.title="Verify Email - Poornasree Equipments Cloud";let a=x.get("email"),b=localStorage.getItem("verificationEmail")||localStorage.getItem("registrationEmail")||localStorage.getItem("loginEmail"),c=a||b||"";c&&q(decodeURIComponent(c));let d=x.get("resent"),e=x.get("resend_required");"true"===d?(k(""),u(600)):"true"===e&&k("Please verify your email to continue."),setTimeout(()=>{z.current[0]?.focus()},100)},[x]),(0,c.useEffect)(()=>{if(t>0){let a=setTimeout(()=>u(t-1),1e3);return()=>clearTimeout(a)}},[t]);let A=a=>{a.preventDefault();let b=a.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);6===b.length&&(o(b.split("")),B(b))},B=async a=>{if(!p.trim()){i("error"),k("Email address is required. Please go back to login.");return}i("verifying");try{let b=await fetch("/api/auth/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p,otpCode:a})}),c=await b.json();if(c.success){if(i("success"),k(c.message||"Email verified successfully!"),m(c.data),localStorage.removeItem("verificationEmail"),localStorage.removeItem("registrationEmail"),localStorage.removeItem("loginEmail"),c.autoLogin&&c.data?.token){let{token:a,refreshToken:b,user:d,redirectTo:e}=c.data;localStorage.setItem("authToken",a),localStorage.setItem("refreshToken",b),localStorage.setItem("userData",JSON.stringify(d)),setTimeout(()=>{y.push(e||"/user/dashboard")},2e3)}}else{i("error"),k(c.message||"Invalid OTP code. Please try again.");let a=c.message?.match(/(\d+) attempts remaining/);a&&w(parseInt(a[1])),o(["","","","","",""]),z.current[0]?.focus()}}catch(a){console.error("OTP verification error:",a),i("error"),k("Network error. Please check your connection and try again."),o(["","","","","",""]),z.current[0]?.focus()}},C=async()=>{if(!p.trim())return void alert("Email address is required");s(!0);try{let a=await fetch("/api/auth/resend-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p})}),b=await a.json();b.success?(i("input"),k(""),o(["","","","","",""]),w(5),u(600),z.current[0]?.focus(),alert("A new OTP has been sent to your email address.")):alert(b.message||"Failed to resend OTP. Please try again.")}catch(a){console.error("Resend OTP error:",a),alert("Network error. Please check your connection and try again.")}finally{s(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-emerald-900 via-green-900 to-teal-900 relative overflow-hidden",children:[(0,b.jsxs)("div",{className:"absolute inset-0",children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 w-72 h-72 bg-green-500/20 rounded-full mix-blend-multiply filter blur-xl animate-pulse"}),(0,b.jsx)("div",{className:"absolute top-0 right-0 w-72 h-72 bg-emerald-500/20 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-2000"}),(0,b.jsx)("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-teal-500/20 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-4000"}),(0,b.jsx)("div",{className:"absolute -bottom-8 -right-8 w-72 h-72 bg-green-500/20 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-6000"})]}),(0,b.jsx)("div",{className:"relative z-10 flex flex-col justify-center py-12 sm:px-6 lg:px-8 min-h-screen",children:(0,b.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,b.jsxs)(g.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-8",children:[(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)(f.default,{src:"/fulllogo.png",alt:"Poornasree Equipments Logo",width:100,height:100,className:"object-contain mx-auto"})}),(0,b.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-emerald-400 to-green-400 bg-clip-text text-transparent",children:"Poornasree Equipments"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-gray-300",children:"Email Verification"})]}),(0,b.jsx)(g.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-white/95 backdrop-blur-xl py-8 px-4 shadow-2xl rounded-2xl sm:px-10 border border-white/20",children:(()=>{switch(a){case"input":let c;return(0,b.jsxs)(g.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[(0,b.jsx)("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-emerald-100 mb-6",children:(0,b.jsx)("svg",{className:"h-8 w-8 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Enter Verification Code"}),(0,b.jsxs)("p",{className:"text-gray-600 mb-6",children:["We've sent a 6-digit verification code to",(0,b.jsx)("br",{}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:p})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex justify-center space-x-3",onPaste:A,children:n.map((a,c)=>(0,b.jsx)(g.motion.input,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1*c},ref:a=>{z.current[c]=a},type:"text",inputMode:"numeric",maxLength:1,value:a,onChange:a=>((a,b)=>{if(b.length>1||!/^\d*$/.test(b))return;let c=[...n];c[a]=b,o(c),b&&a<5&&z.current[a+1]?.focus(),c.every(a=>a)&&6===c.join("").length&&B(c.join(""))})(c,a.target.value),onKeyDown:a=>{"Backspace"===a.key&&!n[c]&&c>0&&z.current[c-1]?.focus()},className:"otp-input w-12 h-12 text-center text-xl font-bold border-2 border-gray-300 rounded-lg focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500 focus:ring-opacity-50 transition-all bg-white hover:border-emerald-400",placeholder:"0",style:{color:"#111827 !important",backgroundColor:"#ffffff !important",WebkitTextFillColor:"#111827 !important"}},c))}),j&&(0,b.jsxs)(g.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-sm text-red-700",children:j}),v<5&&(0,b.jsxs)("p",{className:"text-xs text-red-600 mt-1",children:[v," attempts remaining"]})]}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:t>0?(0,b.jsxs)("p",{children:["Code expires in ",(c=Math.floor(t/60),`${c}:${(t%60).toString().padStart(2,"0")}`)]}):(0,b.jsx)("p",{className:"text-red-600",children:"Code has expired. Please request a new one."})}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("button",{onClick:()=>B(n.join("")),disabled:6!==n.join("").length,className:"w-full bg-gradient-to-r from-emerald-600 to-green-600 text-white px-6 py-3 rounded-lg font-medium hover:from-emerald-700 hover:to-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02]",children:"Verify Code"}),(0,b.jsx)("button",{onClick:C,disabled:r||t>540,className:"w-full text-emerald-600 px-6 py-2 rounded-lg font-medium hover:text-emerald-700 hover:bg-emerald-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:r?"Sending...":"Resend Code"})]})]})]});case"verifying":return(0,b.jsxs)(g.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsx)(h.FlowerSpinner,{size:64})}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verifying Code"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Please wait while we verify your code..."})]});case"success":return(0,b.jsxs)(g.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"text-center",children:[(0,b.jsx)("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-6",children:(0,b.jsx)("svg",{className:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-green-600 mb-2",children:"Email Verified Successfully!"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:j}),l&&(0,b.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[(0,b.jsxs)("p",{className:"text-sm text-green-800",children:["Welcome ",l.fullName||l.user?.fullName,"! Your account is now active.",l.welcomeEmailSent&&" A welcome email has been sent to your inbox."]}),l.token&&(0,b.jsxs)("div",{className:"mt-3 flex items-center justify-center text-emerald-600",children:[(0,b.jsx)(h.FlowerSpinner,{size:16,className:"mr-2"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Logging you in and redirecting to dashboard..."})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[!l?.token&&(0,b.jsx)(e.default,{href:"/login",className:"w-full bg-gradient-to-r from-emerald-600 to-green-600 text-white px-6 py-3 rounded-lg font-medium hover:from-emerald-700 hover:to-green-700 transition-all duration-200 inline-block text-center transform hover:scale-[1.02]",children:"Login to Your Account"}),(0,b.jsx)(e.default,{href:"/",className:"otp-link w-full bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-medium transition-colors inline-block text-center hover:bg-gray-200",style:{color:"#374151 !important"},children:"Back to Homepage"})]})]});case"error":return(0,b.jsxs)(g.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"text-center",children:[(0,b.jsx)("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-6",children:(0,b.jsx)("svg",{className:"h-8 w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:"Verification Failed"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:j}),(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-red-800 mb-2",children:"Need help?"}),(0,b.jsxs)("ul",{className:"text-sm text-red-700 space-y-1",children:[(0,b.jsx)("li",{children:"• Make sure you entered all 6 digits correctly"}),(0,b.jsx)("li",{children:"• Check your email for the latest code"}),(0,b.jsx)("li",{children:"• The code expires after 10 minutes"}),v>0&&(0,b.jsxs)("li",{children:["• You have ",v," attempts remaining"]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[v>0?(0,b.jsx)("button",{onClick:()=>{i("input"),k(""),o(["","","","","",""]),z.current[0]?.focus()},className:"w-full bg-emerald-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-emerald-700 transition-colors transform hover:scale-[1.02]",children:"Try Again"}):(0,b.jsx)("button",{onClick:C,disabled:r,className:"w-full bg-emerald-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?"Sending...":"Get New Code"}),(0,b.jsx)(e.default,{href:"/login",className:"otp-link w-full bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-medium transition-colors inline-block text-center hover:bg-gray-200",style:{color:"#374151 !important"},children:"Back to Login"})]})]});default:return null}})()}),(0,b.jsxs)(g.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},className:"mt-6 text-center",children:[(0,b.jsxs)("p",{className:"text-xs text-gray-300 mb-2",children:["Need help? Contact our support team at"," ",(0,b.jsx)("a",{href:"mailto:support@poornasreeequipments.com",className:"text-emerald-400 hover:text-emerald-300",children:"support@poornasreeequipments.com"})]}),(0,b.jsx)("div",{className:"flex justify-center space-x-4 text-xs text-gray-400 mt-4",children:(0,b.jsx)(e.default,{href:"/login",className:"otp-link transition-colors text-emerald-400 hover:text-emerald-300 flex items-center gap-1",children:"← Back to Login"})})]})]})})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__0c6e1559._.js.map