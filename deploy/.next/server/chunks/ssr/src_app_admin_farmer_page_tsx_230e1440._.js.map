{"version":3,"sources":["turbopack:///[project]/src/app/admin/farmer/page.tsx","turbopack:///[project]/src/lib/utils/downloadUtils.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useCallback, useMemo, Suspense } from 'react';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\nimport { Users, UserCheck, Phone, Mail, Building2, Settings, Folder, FolderOpen, ChevronDown, ChevronRight, Plus, Upload, Droplets, TrendingUp, Award, BarChart3, X } from 'lucide-react';\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer\r\n} from 'recharts';\r\nimport { formatPhoneInput, validatePhoneOnBlur } from '@/lib/validation/phoneValidation';\r\nimport { validateEmailOnBlur } from '@/lib/validation/emailValidation';\r\nimport { \r\n  FlowerSpinner,\r\n  FormModal, \r\n  FormInput, \r\n  FormSelect, \r\n  FormActions, \r\n  FormGrid,\r\n  StatusMessage,\r\n  ItemCard,\r\n  EmptyState,\r\n  ColumnSelectionModal\r\n} from '@/components';\r\nimport {\r\n  BulkDeleteConfirmModal,\r\n  ConfirmDeleteModal,\r\n  BulkActionsToolbar,\r\n  LoadingSnackbar,\r\n  ViewModeToggle,\r\n  FilterDropdown,\r\n  StatsGrid,\r\n  ManagementPageHeader,\r\n  FloatingActionButton\r\n} from '@/components/management';\r\nimport CSVUploadModal from '@/components/forms/CSVUploadModal';\r\nimport { downloadFarmersAsCSV, downloadFarmersAsPDF, getFarmerColumns } from '@/lib/utils/downloadUtils';\r\n\r\nimport { Society, Farmer } from '@/types';\r\n\r\nconst FarmerManagement = () => {\r\n  const { t } = useLanguage();\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const [farmers, setFarmers] = useState<Farmer[]>([]);\r\n  const [societies, setSocieties] = useState<Society[]>([]);\r\n  const [machines, setMachines] = useState<Array<{id: number, machineId: string, machineType: string, societyId?: number, societyName?: string}>>([]);\r\n  const [dairies, setDairies] = useState<Array<{ id: number; name: string; dairyId: string }>>([]);\r\n  const [bmcs, setBmcs] = useState<Array<{ id: number; name: string; bmcId: string; dairyFarmId?: number }>>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [machinesLoading, setMachinesLoading] = useState(false);\r\n  const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'inactive' | 'suspended' | 'maintenance'>('all');\r\n  const [dairyFilter, setDairyFilter] = useState<string[]>([]);\r\n  const [bmcFilter, setBmcFilter] = useState<string[]>([]);\r\n  const [societyFilter, setSocietyFilter] = useState<string[]>([]);\r\n  const [machineFilter, setMachineFilter] = useState<string[]>([]);\r\n  const [searchQuery, setSearchQuery] = useState<string>('');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [showEditForm, setShowEditForm] = useState(false);\r\n  const [showBulkModal, setShowBulkModal] = useState(false);\r\n  const [showCSVUpload, setShowCSVUpload] = useState(false);\r\n  const [selectedFarmer, setSelectedFarmer] = useState<Farmer | null>(null);\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n  const [bulkSocietyId, setBulkSocietyId] = useState<string>('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [fieldErrors, setFieldErrors] = useState<{[key: string]: string}>({});\r\n  \r\n  // Selective deletion state\r\n  const [selectedFarmers, setSelectedFarmers] = useState<Set<number>>(new Set());\r\n  const [selectAll, setSelectAll] = useState(false);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n  const [farmerToDelete, setFarmerToDelete] = useState<{id: number, name: string, farmerId: string} | null>(null);\r\n  const [showSingleDeleteConfirm, setShowSingleDeleteConfirm] = useState(false);\r\n  const [isDownloading, setIsDownloading] = useState(false);\r\n  const [isDeletingBulk, setIsDeletingBulk] = useState(false);\r\n  const [showColumnSelection, setShowColumnSelection] = useState(false);\r\n  const [isUpdatingStatus, setIsUpdatingStatus] = useState(false);\r\n  const [isBulkUpdatingStatus, setIsBulkUpdatingStatus] = useState(false);\r\n  const [updateProgress, setUpdateProgress] = useState(0);\r\n  \r\n  // Folder view state\r\n  const [expandedSocieties, setExpandedSocieties] = useState<Set<number>>(new Set());\r\n  const [viewMode, setViewMode] = useState<'folder' | 'list'>('folder');\r\n  const [selectedSocieties, setSelectedSocieties] = useState<Set<number>>(new Set());\r\n  \r\n  // Graph modal state\r\n  const [showGraphModal, setShowGraphModal] = useState(false);\r\n  const [graphMetric, setGraphMetric] = useState<'quantity' | 'revenue' | 'fat' | 'snf' | 'collections' | 'rate'>('quantity');\r\n  const [graphData, setGraphData] = useState<any[]>([]);\r\n  \r\n  // Bulk status update state\r\n  const [bulkStatus, setBulkStatus] = useState<'active' | 'inactive' | 'suspended' | 'maintenance'>('active');\r\n  const [performanceStats, setPerformanceStats] = useState<{\r\n    topCollector: { farmer: any; totalQuantity: number } | null;\r\n    bestFat: { farmer: any; avgFat: number } | null;\r\n    bestSnf: { farmer: any; avgSnf: number } | null;\r\n    topRevenue: { farmer: any; totalAmount: number } | null;\r\n    mostActive: { farmer: any; totalCollections: number } | null;\r\n    bestQuality: { farmer: any; avgRate: number } | null;\r\n  }>({  \r\n    topCollector: null,\r\n    bestFat: null,\r\n    bestSnf: null,\r\n    topRevenue: null,\r\n    mostActive: null,\r\n    bestQuality: null\r\n  });\r\n\r\n  // Form state\r\n  const [formData, setFormData] = useState({\r\n    farmerId: '',\r\n    rfId: '',\r\n    farmerName: '',\r\n    contactNumber: '',\r\n    email: '',\r\n    smsEnabled: 'OFF',\r\n    emailNotificationsEnabled: 'ON',\r\n    bonus: 0,\r\n    address: '',\r\n    bankName: '',\r\n    bankAccountNumber: '',\r\n    ifscCode: '',\r\n    societyId: '',\r\n    machineId: '',\r\n    status: 'active',\r\n    notes: ''\r\n  });\r\n\r\n\r\n\r\n  // Fetch farmers, societies, and machines\r\n  // Clear messages after 5 seconds\r\n  useEffect(() => {\r\n    if (success || error) {\r\n      const timer = setTimeout(() => {\r\n        setSuccess('');\r\n        setError('');\r\n      }, 5000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [success, error]);\r\n\r\n  // Listen for global search events from header\r\n  useEffect(() => {\r\n    const handleGlobalSearch = (event: Event) => {\r\n      const customEvent = event as CustomEvent;\r\n      const query = customEvent.detail?.query || '';\r\n      setSearchQuery(query);\r\n    };\r\n\r\n    window.addEventListener('globalSearch', handleGlobalSearch);\r\n    return () => {\r\n      window.removeEventListener('globalSearch', handleGlobalSearch);\r\n    };\r\n  }, []);\r\n\r\n  // Reset machine filter when society filter changes\r\n  useEffect(() => {\r\n    if (societyFilter.length > 0 && machineFilter.length > 0) {\r\n      // Check if current machine selections are still valid for the selected society\r\n      const validMachines = machineFilter.filter(mId => {\r\n        const machine = machines.find(m => m.id.toString() === mId);\r\n        return machine && societyFilter.includes(machine.societyId?.toString() || '');\r\n      });\r\n      if (validMachines.length !== machineFilter.length) {\r\n        setMachineFilter(validMachines);\r\n      }\r\n    }\r\n  }, [societyFilter, machineFilter, machines]);\r\n\r\n  // Read URL parameters and initialize filters on mount\r\n  useEffect(() => {\r\n    const societyId = searchParams.get('societyId');\r\n    const societyName = searchParams.get('societyName');\r\n    const dairyFilterParam = searchParams.get('dairyFilter');\r\n    const bmcFilterParam = searchParams.get('bmcFilter');\r\n    \r\n    if (societyId && !societyFilter.includes(societyId)) {\r\n      setSocietyFilter([societyId]);\r\n      \r\n      // Show success message with society name\r\n      if (societyName) {\r\n        setSuccess(`Filter Applied: ${decodeURIComponent(societyName)}`);\r\n      }\r\n    }\r\n    \r\n    if (dairyFilterParam && !dairyFilter.includes(dairyFilterParam)) {\r\n      setDairyFilter([dairyFilterParam]);\r\n      setSuccess('Filter Applied: Dairy');\r\n    }\r\n    \r\n    if (bmcFilterParam && !bmcFilter.includes(bmcFilterParam)) {\r\n      setBmcFilter([bmcFilterParam]);\r\n      setSuccess('Filter Applied: BMC');\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // Run once on mount\r\n\r\n  const fetchFarmers = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) {\r\n        router.push('/login');\r\n        return;\r\n      }\r\n\r\n      const response = await fetch('/api/user/farmer', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.status === 401) {\r\n        localStorage.removeItem('authToken');\r\n        router.push('/login');\r\n        return;\r\n      }\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setFarmers(data.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching farmers:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [router]);\r\n\r\n  const fetchPerformanceStats = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/analytics/farmer-performance', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setPerformanceStats(data.stats || {\r\n          topCollector: null,\r\n          bestFat: null,\r\n          bestSnf: null,\r\n          topRevenue: null,\r\n          mostActive: null,\r\n          bestQuality: null\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching performance stats:', error);\r\n    }\r\n  }, []);\r\n\r\n  const fetchGraphData = useCallback(async (metric: string) => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch(`/api/analytics/farmer-performance?graphData=true`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const allFarmers = data.farmers || [];\r\n        \r\n        const chartData = allFarmers.map((farmer: any) => ({\r\n          name: farmer.farmer_name,\r\n          farmerId: farmer.farmer_id,\r\n          societyName: farmer.society_name,\r\n          value: metric === 'quantity' ? (parseFloat(farmer.total_quantity) || 0) :\r\n                 metric === 'revenue' ? (parseFloat(farmer.total_amount) || 0) :\r\n                 metric === 'fat' ? (parseFloat(farmer.avg_fat) || 0) :\r\n                 metric === 'snf' ? (parseFloat(farmer.avg_snf) || 0) :\r\n                 metric === 'collections' ? (parseInt(farmer.total_collections) || 0) :\r\n                 (parseFloat(farmer.avg_rate) || 0)\r\n        })).sort((a: any, b: any) => b.value - a.value).slice(0, 20); // Top 20 farmers\r\n        \r\n        setGraphData(chartData);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching graph data:', error);\r\n      setGraphData([]);\r\n    }\r\n  }, []);\r\n\r\n  const handleCardClick = (metric: 'quantity' | 'revenue' | 'fat' | 'snf' | 'collections' | 'rate') => {\r\n    setGraphMetric(metric);\r\n    fetchGraphData(metric);\r\n    setShowGraphModal(true);\r\n  };\r\n\r\n  const fetchSocieties = async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/society', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setSocieties(data.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching societies:', error);\r\n    }\r\n  };\r\n\r\n  // Fetch dairies\r\n  const fetchDairies = async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/dairy', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setDairies(data.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching dairies:', error);\r\n    }\r\n  };\r\n\r\n  // Fetch BMCs\r\n  const fetchBmcs = async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/bmc', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setBmcs(data.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching BMCs:', error);\r\n    }\r\n  };\r\n\r\n  // Fetch all machines\r\n  const fetchAllMachines = async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/machine', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setMachines(data.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching machines:', error);\r\n      setMachines([]);\r\n    }\r\n  };\r\n\r\n  // Fetch machines by society ID\r\n  const fetchMachinesBySociety = async (societyId: string) => {\r\n    if (!societyId) {\r\n      setMachines([]);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setMachinesLoading(true);\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch(`/api/user/machine/by-society?societyId=${societyId}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setMachines(data.data || []);\r\n      } else {\r\n        setMachines([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching machines:', error);\r\n      setMachines([]);\r\n    } finally {\r\n      setMachinesLoading(false);\r\n    }\r\n  };\r\n\r\n  // Handle status change\r\n  const handleStatusChange = async (id: number, newStatus: string) => {\r\n    setIsUpdatingStatus(true);\r\n    setUpdateProgress(0);\r\n    try {\r\n      const farmer = farmers.find(f => f.id === id);\r\n      if (!farmer) return;\r\n\r\n      setUpdateProgress(30);\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/farmer', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          id: farmer.id,\r\n          farmerId: farmer.farmerId,\r\n          rfId: farmer.rfId,\r\n          farmerName: farmer.farmerName,\r\n          contactNumber: farmer.contactNumber,\r\n          smsEnabled: farmer.smsEnabled,\r\n          emailNotificationsEnabled: farmer.emailNotificationsEnabled || 'ON',\r\n          bonus: farmer.bonus,\r\n          address: farmer.address,\r\n          bankName: farmer.bankName,\r\n          bankAccountNumber: farmer.bankAccountNumber,\r\n          ifscCode: farmer.ifscCode,\r\n          societyId: farmer.societyId,\r\n          machineId: farmer.machineId,\r\n          status: newStatus,\r\n          notes: farmer.notes\r\n        })\r\n      });\r\n\r\n      setUpdateProgress(70);\r\n      if (response.ok) {\r\n        setFarmers(prev =>\r\n          prev.map(f => (f.id === id ? { ...f, status: newStatus as Farmer['status'] } : f))\r\n        );\r\n        setUpdateProgress(100);\r\n        setSuccess('Farmer status updated successfully');\r\n        setError('');\r\n      } else {\r\n        setError('Failed to update farmer status');\r\n        setSuccess('');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating status:', error);\r\n      setError('Error updating farmer status');\r\n      setSuccess('');\r\n    } finally {\r\n      setIsUpdatingStatus(false);\r\n    }\r\n  };\r\n\r\n  // Handle farmer deletion - show confirmation\r\n  const handleDelete = (id: number) => {\r\n    const farmer = farmers.find(f => f.id === id);\r\n    if (farmer) {\r\n      setFarmerToDelete({ id: farmer.id, name: farmer.farmerName, farmerId: farmer.farmerId });\r\n      setShowSingleDeleteConfirm(true);\r\n    }\r\n  };\r\n\r\n  // Confirm single farmer deletion\r\n  const confirmDeleteFarmer = async () => {\r\n    if (!farmerToDelete) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch(`/api/user/farmer?id=${farmerToDelete.id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          Authorization: `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        setFarmers(prev => prev.filter(f => f.id !== farmerToDelete.id));\r\n        setSuccess(t.farmerManagement.deletedSuccessfully || 'Farmer deleted successfully');\r\n        setError('');\r\n      } else {\r\n        setError(t.farmerManagement.deleteError || 'Failed to delete farmer. Please try again.');\r\n        setSuccess('');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting farmer:', error);\r\n      setError(t.farmerManagement.deleteError || 'Error deleting farmer. Please try again.');\r\n      setSuccess('');\r\n    } finally {\r\n      setShowSingleDeleteConfirm(false);\r\n      setFarmerToDelete(null);\r\n    }\r\n  };\r\n\r\n  // Selection handlers\r\n  const handleSelectFarmer = (farmerId: number) => {\r\n    setSelectedFarmers(prev => {\r\n      const newSelected = new Set(prev);\r\n      const isDeselecting = newSelected.has(farmerId);\r\n      \r\n      if (isDeselecting) {\r\n        newSelected.delete(farmerId);\r\n        \r\n        // When deselecting a farmer, uncheck selectAll\r\n        setSelectAll(false);\r\n        \r\n        // Check if we should deselect the society folder\r\n        const farmer = filteredFarmers.find(f => f.id === farmerId);\r\n        if (farmer && farmer.societyId) {\r\n          const societyId = farmer.societyId;\r\n          const societyFarmers = filteredFarmers.filter(f => f.societyId === societyId);\r\n          const allSocietyFarmersSelected = societyFarmers.every(f => \r\n            f.id === farmerId ? false : newSelected.has(f.id)\r\n          );\r\n          \r\n          // If not all farmers in the society are selected, deselect the society folder\r\n          if (!allSocietyFarmersSelected) {\r\n            setSelectedSocieties(prevSocieties => {\r\n              const updatedSocieties = new Set(prevSocieties);\r\n              updatedSocieties.delete(societyId);\r\n              return updatedSocieties;\r\n            });\r\n          }\r\n        }\r\n      } else {\r\n        newSelected.add(farmerId);\r\n        \r\n        // Check if the society folder should be selected\r\n        const farmer = filteredFarmers.find(f => f.id === farmerId);\r\n        if (farmer && farmer.societyId) {\r\n          const societyId = farmer.societyId;\r\n          const societyFarmers = filteredFarmers.filter(f => f.societyId === societyId);\r\n          const allSocietyFarmersSelected = societyFarmers.every(f => \r\n            f.id === farmerId ? true : newSelected.has(f.id)\r\n          );\r\n          \r\n          // If all farmers in the society are now selected, select the society folder\r\n          if (allSocietyFarmersSelected) {\r\n            setSelectedSocieties(prevSocieties => {\r\n              const updatedSocieties = new Set(prevSocieties);\r\n              updatedSocieties.add(societyId);\r\n              return updatedSocieties;\r\n            });\r\n          }\r\n        }\r\n        \r\n        // Check if all filtered farmers are now selected\r\n        const allFilteredIds = new Set(filteredFarmers.map(f => f.id));\r\n        const allSelected = Array.from(allFilteredIds).every(id => \r\n          id === farmerId ? true : newSelected.has(id)\r\n        );\r\n        \r\n        if (allSelected) {\r\n          setSelectAll(true);\r\n        }\r\n      }\r\n      \r\n      return newSelected;\r\n    });\r\n  };\r\n\r\n  // Toggle society folder expansion\r\n  const toggleSocietyExpansion = (societyId: number) => {\r\n    setExpandedSocieties(prev => {\r\n      const newExpanded = new Set(prev);\r\n      if (newExpanded.has(societyId)) {\r\n        newExpanded.delete(societyId);\r\n      } else {\r\n        newExpanded.add(societyId);\r\n      }\r\n      return newExpanded;\r\n    });\r\n  };\r\n\r\n  // Toggle society selection\r\n  const toggleSocietySelection = (societyId: number, farmerIds: number[]) => {\r\n    setSelectedSocieties(prev => {\r\n      const newSelected = new Set(prev);\r\n      if (newSelected.has(societyId)) {\r\n        // Deselect society and all its farmers\r\n        newSelected.delete(societyId);\r\n        setSelectedFarmers(prevFarmers => {\r\n          const updatedFarmers = new Set(prevFarmers);\r\n          farmerIds.forEach(id => updatedFarmers.delete(id));\r\n          \r\n          // Check if we should unset selectAll\r\n          // If any farmer is deselected, selectAll should be false\r\n          setSelectAll(false);\r\n          \r\n          return updatedFarmers;\r\n        });\r\n      } else {\r\n        // Select society and all its farmers\r\n        newSelected.add(societyId);\r\n        setSelectedFarmers(prevFarmers => {\r\n          const updatedFarmers = new Set(prevFarmers);\r\n          farmerIds.forEach(id => updatedFarmers.add(id));\r\n          \r\n          // Check if all filtered farmers are now selected\r\n          const allFilteredIds = new Set(filteredFarmers.map(f => f.id));\r\n          const allSelected = Array.from(allFilteredIds).every(id => updatedFarmers.has(id));\r\n          if (allSelected) {\r\n            setSelectAll(true);\r\n          }\r\n          \r\n          return updatedFarmers;\r\n        });\r\n      }\r\n      return newSelected;\r\n    });\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    if (selectAll) {\r\n      setSelectedFarmers(new Set());\r\n      setSelectedSocieties(new Set());\r\n      setSelectAll(false);\r\n    } else {\r\n      // Select only the currently filtered farmers\r\n      setSelectedFarmers(new Set(filteredFarmers.map(f => f.id)));\r\n      \r\n      // Also select all societies that have farmers in the filtered list\r\n      const farmersBySociety = filteredFarmers.reduce((acc, farmer) => {\r\n        const societyId = farmer.societyId || 0;\r\n        if (!acc.includes(societyId)) {\r\n          acc.push(societyId);\r\n        }\r\n        return acc;\r\n      }, [] as number[]);\r\n      setSelectedSocieties(new Set(farmersBySociety));\r\n      \r\n      setSelectAll(true);\r\n    }\r\n  };\r\n\r\n  // Clear selections when filters or search change or keep only visible farmers\r\n  useEffect(() => {\r\n    if (selectedFarmers.size > 0) {\r\n      // Calculate filtered farmers inline to avoid dependency issues\r\n      const currentlyFilteredFarmers = farmers.filter(farmer => {\r\n        const statusMatch = statusFilter === 'all' || farmer.status === statusFilter;\r\n        const societyMatch = societyFilter.length === 0 || societyFilter.includes(farmer.societyId?.toString() || '');\r\n        const machineMatch = machineFilter.length === 0 || \r\n          machineFilter.includes(farmer.machineId?.toString() || '');\r\n        const searchMatch = searchQuery === '' || \r\n          farmer.farmerName.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n          farmer.farmerId.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n          farmer.contactNumber?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n          farmer.rfId?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n          farmer.societyName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n          farmer.societyIdentifier?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n          farmer.address?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n          farmer.bankName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n          farmer.bankAccountNumber?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n          farmer.ifscCode?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n          farmer.notes?.toLowerCase().includes(searchQuery.toLowerCase());\r\n        return statusMatch && societyMatch && machineMatch && searchMatch;\r\n      });\r\n      \r\n      // Keep only farmers that are still visible after filtering/searching\r\n      const visibleFarmerIds = new Set(currentlyFilteredFarmers.map(f => f.id));\r\n      const updatedSelection = new Set(\r\n        Array.from(selectedFarmers).filter(id => visibleFarmerIds.has(id))\r\n      );\r\n      \r\n      if (updatedSelection.size !== selectedFarmers.size) {\r\n        setSelectedFarmers(updatedSelection);\r\n        setSelectAll(false);\r\n        \r\n        // Update society selections based on remaining selected farmers\r\n        const visibleSocietyIds = new Set(currentlyFilteredFarmers.map(f => f.societyId).filter(Boolean));\r\n        const updatedSocietySelection = new Set<number>();\r\n        \r\n        visibleSocietyIds.forEach(societyId => {\r\n          const societyFarmers = currentlyFilteredFarmers.filter(f => f.societyId === societyId);\r\n          const allSocietyFarmersSelected = societyFarmers.every(f => updatedSelection.has(f.id));\r\n          if (allSocietyFarmersSelected && societyFarmers.length > 0) {\r\n            updatedSocietySelection.add(societyId as number);\r\n          }\r\n        });\r\n        \r\n        setSelectedSocieties(updatedSocietySelection);\r\n      }\r\n    } else {\r\n      setSelectAll(false);\r\n      setSelectedSocieties(new Set());\r\n    }\r\n  }, [statusFilter, societyFilter, machineFilter, searchQuery, farmers, selectedFarmers]);\r\n\r\n  const handleBulkDelete = async () => {\r\n    if (selectedFarmers.size === 0) return;\r\n\r\n    // Close the confirmation modal immediately and show LoadingSnackbar\r\n    setShowDeleteConfirm(false);\r\n    setIsDeletingBulk(true);\r\n    setUpdateProgress(0);\r\n    \r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      setUpdateProgress(10);\r\n      \r\n      const ids = Array.from(selectedFarmers);\r\n      setUpdateProgress(20);\r\n      \r\n      const response = await fetch(`/api/user/farmer?ids=${encodeURIComponent(JSON.stringify(ids))}`, {\r\n        method: 'DELETE',\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      \r\n      setUpdateProgress(60);\r\n\r\n      if (response.ok) {\r\n        setUpdateProgress(80);\r\n        await fetchFarmers(); // Refresh the list\r\n        setUpdateProgress(95);\r\n        setSelectedFarmers(new Set());\r\n        setSelectAll(false);\r\n        setSuccess(`Successfully deleted ${ids.length} farmer(s)${(statusFilter !== 'all' || dairyFilter.length > 0 || bmcFilter.length > 0 || societyFilter.length > 0 || machineFilter.length > 0) ? ' from filtered results' : ''}`);\r\n        setSocietyFilter([]);\r\n        setError('');\r\n        setUpdateProgress(100);\r\n      } else {\r\n        const data = await response.json();\r\n        setError(data.message || 'Failed to delete selected farmers');\r\n        setSuccess('');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting farmers:', error);\r\n      setError('Error deleting selected farmers');\r\n      setSuccess('');\r\n    } finally {\r\n      setIsDeletingBulk(false);\r\n      setUpdateProgress(0);\r\n    }\r\n  };\r\n\r\n  // Handle bulk status update\r\n  const handleBulkStatusUpdate = async (newStatus?: string) => {\r\n    if (selectedFarmers.size === 0) return;\r\n\r\n    const statusToUpdate = newStatus || bulkStatus;\r\n    setIsBulkUpdatingStatus(true);\r\n    setUpdateProgress(0);\r\n\r\n    try {\r\n      // Step 1: Get token (5%)\r\n      const token = localStorage.getItem('authToken');\r\n      setUpdateProgress(5);\r\n      \r\n      // Step 2: Prepare farmer IDs (10%)\r\n      const farmerIds = Array.from(selectedFarmers);\r\n      const totalFarmers = farmerIds.length;\r\n      setUpdateProgress(10);\r\n      \r\n      console.log(`ðŸ”„ Bulk updating ${totalFarmers} farmers to status: ${statusToUpdate}`);\r\n      \r\n      // Step 3: Single bulk update API call (10% to 90%)\r\n      setUpdateProgress(30);\r\n      const response = await fetch('/api/user/farmer', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          bulkStatusUpdate: true,\r\n          farmerIds: farmerIds,\r\n          status: statusToUpdate\r\n        })\r\n      });\r\n\r\n      setUpdateProgress(70);\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Failed to update farmer status');\r\n      }\r\n\r\n      const result = await response.json();\r\n      const updatedCount = result.data?.updated || totalFarmers;\r\n      \r\n      // Step 4: Refresh data (90%)\r\n      setUpdateProgress(90);\r\n      await fetchFarmers();\r\n      \r\n      // Step 5: Finalize (100%)\r\n      setUpdateProgress(100);\r\n      setSelectedFarmers(new Set());\r\n      setSelectedSocieties(new Set());\r\n      setSelectAll(false);\r\n      \r\n      console.log(`âœ… Successfully updated ${updatedCount} farmers`);\r\n      \r\n      setSuccess(\r\n        `Successfully updated status to \"${statusToUpdate}\" for ${updatedCount} farmer(s)${\r\n          (statusFilter !== 'all' || dairyFilter.length > 0 || bmcFilter.length > 0 || societyFilter.length > 0) ? ' from filtered results' : ''\r\n        }`\r\n      );\r\n      setError('');\r\n\r\n    } catch (error) {\r\n      console.error('Error updating farmer status:', error);\r\n      setUpdateProgress(100);\r\n      setError(error instanceof Error ? error.message : 'Error updating farmer status. Please try again.');\r\n      setSuccess('');\r\n    } finally {\r\n      setIsBulkUpdatingStatus(false);\r\n    }\r\n  };\r\n\r\n  // Handle bulk download for selected farmers\r\n  const handleBulkDownload = () => {\r\n    if (selectedFarmers.size === 0) {\r\n      setError('No farmers selected');\r\n      return;\r\n    }\r\n    handleOpenColumnSelection();\r\n  };\r\n\r\n  // Handle opening column selection modal\r\n  const handleOpenColumnSelection = () => {\r\n    setShowColumnSelection(true);\r\n  };\r\n\r\n  // Handle download with selected columns\r\n  const handleDownloadWithColumns = async (selectedColumns: string[], format: 'csv' | 'pdf') => {\r\n    setIsDownloading(true);\r\n    try {\r\n      // If farmers are selected, download only selected farmers (that are also filtered)\r\n      // If no farmers are selected, download all filtered farmers\r\n      const farmersForDownload = selectedFarmers.size > 0 \r\n        ? filteredFarmers.filter(farmer => selectedFarmers.has(farmer.id))\r\n        : filteredFarmers;\r\n\r\n      const farmersToDownload = farmersForDownload.map(farmer => ({\r\n        farmerId: farmer.farmerId,\r\n        rfId: farmer.rfId,\r\n        farmerName: farmer.farmerName,\r\n        contactNumber: farmer.contactNumber,\r\n        email: farmer.contactNumber, // Using contactNumber as email since no separate email field\r\n        societyId: farmer.societyId,\r\n        address: farmer.address,\r\n        notes: farmer.notes,\r\n        status: farmer.status,\r\n        smsEnabled: farmer.smsEnabled === 'ON',\r\n        bonus: farmer.bonus,\r\n        bankName: farmer.bankName,\r\n        bankAccountNumber: farmer.bankAccountNumber,\r\n        ifscCode: farmer.ifscCode\r\n      }));\r\n\r\n      const societiesData = societies.map(society => ({\r\n        id: society.id,\r\n        name: society.name,\r\n        society_id: society.society_id\r\n      }));\r\n\r\n      const filters = {\r\n        status: statusFilter !== 'all' ? statusFilter : undefined,\r\n        society: societyFilter.length > 0 ? societyFilter[0] : undefined,\r\n        selection: selectedFarmers.size > 0 ? `${selectedFarmers.size}-selected` : undefined\r\n      };\r\n\r\n      const downloadMessage = selectedFarmers.size > 0 \r\n        ? `${selectedFarmers.size} selected farmer(s) downloaded successfully`\r\n        : `${farmersToDownload.length} farmer(s) downloaded successfully`;\r\n\r\n      if (format === 'csv') {\r\n        downloadFarmersAsCSV(farmersToDownload, societiesData, filters, selectedColumns);\r\n        setSuccess(`${downloadMessage} as CSV`);\r\n      } else {\r\n        await downloadFarmersAsPDF(farmersToDownload, societiesData, filters, selectedColumns);\r\n        setSuccess(`${downloadMessage} as PDF`);\r\n      }\r\n    } catch (error) {\r\n      console.error(`Error downloading ${format.toUpperCase()}:`, error);\r\n      setError(`Failed to download ${format.toUpperCase()} file`);\r\n    } finally {\r\n      setIsDownloading(false);\r\n    }\r\n  };\r\n\r\n  // Handle add form submission\r\n  const handleAddSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    // Validate required fields\r\n    if (!formData.farmerId || !formData.farmerId.trim()) {\r\n      setError('Please enter a farmer ID.');\r\n      setSuccess('');\r\n      return;\r\n    }\r\n\r\n    if (!formData.farmerName || !formData.farmerName.trim()) {\r\n      setError('Please enter the farmer name.');\r\n      setSuccess('');\r\n      return;\r\n    }\r\n\r\n    if (!formData.societyId) {\r\n      setError('Please select a society for the farmer.');\r\n      setSuccess('');\r\n      return;\r\n    }\r\n\r\n    if (!formData.machineId) {\r\n      setError('Please select a machine for the farmer.');\r\n      setSuccess('');\r\n      return;\r\n    }\r\n    \r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/farmer', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          ...formData,\r\n          societyId: formData.societyId ? parseInt(formData.societyId) : null,\r\n          bonus: Number(formData.bonus)\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setShowAddForm(false);\r\n        setFormData({\r\n          farmerId: '',\r\n          rfId: '',\r\n          farmerName: '',\r\n          contactNumber: '',\r\n          email: '',\r\n          smsEnabled: 'OFF',\r\n          emailNotificationsEnabled: 'ON',\r\n          bonus: 0,\r\n          address: '',\r\n          bankName: '',\r\n          bankAccountNumber: '',\r\n          ifscCode: '',\r\n          societyId: '',\r\n          machineId: '',\r\n          status: 'active',\r\n          notes: ''\r\n        });\r\n        setSuccess('Farmer created successfully');\r\n        setError('');\r\n        fetchFarmers();\r\n      } else {\r\n        const errorResponse = await response.json();\r\n        const errorMessage = errorResponse.error || errorResponse.message || 'Failed to create farmer';\r\n        \r\n        // Clear previous field errors\r\n        setFieldErrors({});\r\n        \r\n        // Check for specific field errors\r\n        if (errorMessage.toLowerCase().includes('farmer id') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ farmerId: 'This Farmer ID already exists' });\r\n        } else if (errorMessage.toLowerCase().includes('farmer name') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ farmerName: 'This Farmer name already exists' });\r\n        } else if (errorMessage.toLowerCase().includes('email') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ email: 'This email address already exists' });\r\n        } else {\r\n          setError(errorMessage);\r\n        }\r\n        setSuccess('');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating farmer:', error);\r\n      setError('Error creating farmer. Please try again.');\r\n      setSuccess('');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Handle edit form submission\r\n  const handleEditSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!selectedFarmer) return;\r\n\r\n    // Validate required fields\r\n    if (!formData.farmerId || !formData.farmerId.trim()) {\r\n      setError('Please enter a farmer ID.');\r\n      setSuccess('');\r\n      return;\r\n    }\r\n\r\n    if (!formData.farmerName || !formData.farmerName.trim()) {\r\n      setError('Please enter the farmer name.');\r\n      setSuccess('');\r\n      return;\r\n    }\r\n\r\n    if (!formData.societyId) {\r\n      setError('Please select a society for the farmer.');\r\n      setSuccess('');\r\n      return;\r\n    }\r\n\r\n    if (!formData.machineId) {\r\n      setError('Please select a machine for the farmer.');\r\n      setSuccess('');\r\n      return;\r\n    }\r\n    \r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/farmer', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          id: selectedFarmer.id,\r\n          ...formData,\r\n          societyId: formData.societyId ? parseInt(formData.societyId) : null,\r\n          bonus: Number(formData.bonus)\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setShowEditForm(false);\r\n        setSelectedFarmer(null);\r\n        setFormData({\r\n          farmerId: '',\r\n          rfId: '',\r\n          farmerName: '',\r\n          contactNumber: '',\r\n          email: '',\r\n          smsEnabled: 'OFF',\r\n          emailNotificationsEnabled: 'ON',\r\n          bonus: 0,\r\n          address: '',\r\n          bankName: '',\r\n          bankAccountNumber: '',\r\n          ifscCode: '',\r\n          societyId: '',\r\n          machineId: '',\r\n          status: 'active',\r\n          notes: ''\r\n        });\r\n        setSuccess('Farmer updated successfully');\r\n        setError('');\r\n        fetchFarmers();\r\n      } else {\r\n        const errorResponse = await response.json();\r\n        const errorMessage = errorResponse.error || errorResponse.message || 'Failed to update farmer';\r\n        \r\n        // Clear previous field errors\r\n        setFieldErrors({});\r\n        \r\n        // Check for specific field errors\r\n        if (errorMessage.toLowerCase().includes('farmer id') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ farmerId: 'This Farmer ID already exists' });\r\n        } else if (errorMessage.toLowerCase().includes('farmer name') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ farmerName: 'This Farmer name already exists' });\r\n        } else if (errorMessage.toLowerCase().includes('email') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ email: 'This email address already exists' });\r\n        } else {\r\n          setError(errorMessage);\r\n        }\r\n        setSuccess('');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating farmer:', error);\r\n      setError('Error updating farmer. Please try again.');\r\n      setSuccess('');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Handle bulk upload\r\n  const handleBulkUpload = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!selectedFile) return;\r\n    \r\n    // Validate required fields\r\n    if (!bulkSocietyId) {\r\n      setError('Please select a default society for bulk upload.');\r\n      setSuccess('');\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      const text = await selectedFile.text();\r\n      const lines = text.split('\\n').filter(line => line.trim());\r\n      const headers = lines[0].split(',').map(h => h.trim().replace(/\"/g, ''));\r\n      \r\n      const farmers = lines.slice(1).map(line => {\r\n        const values = line.split(',').map(v => v.trim().replace(/\"/g, ''));\r\n        const farmer: Record<string, string | number> = {};\r\n        \r\n        headers.forEach((header, index) => {\r\n          const value = values[index] || '';\r\n          \r\n          // Map CSV headers to our farmer fields\r\n          switch (header.toLowerCase()) {\r\n            case 'id':\r\n            case 'farmer_id':\r\n            case 'farmerid':\r\n              farmer.farmerId = value;\r\n              break;\r\n            case 'rf-id':\r\n            case 'rfid':\r\n            case 'rf_id':\r\n              farmer.rfId = value;\r\n              break;\r\n            case 'name':\r\n            case 'farmer_name':\r\n            case 'farmername':\r\n              farmer.farmerName = value;\r\n              break;\r\n            case 'mobile':\r\n            case 'phone':\r\n            case 'contact':\r\n            case 'contact_number':\r\n              farmer.contactNumber = value;\r\n              break;\r\n            case 'sms':\r\n            case 'sms_enabled':\r\n              farmer.smsEnabled = value.toUpperCase() === 'ON' ? 'ON' : 'OFF';\r\n              break;\r\n            case 'bonus':\r\n              farmer.bonus = parseFloat(value) || 0;\r\n              break;\r\n            case 'address':\r\n              farmer.address = value;\r\n              break;\r\n            case 'bank_name':\r\n            case 'bankname':\r\n              farmer.bankName = value;\r\n              break;\r\n            case 'bank_account_number':\r\n            case 'account_number':\r\n            case 'accountnumber':\r\n              farmer.bankAccountNumber = value;\r\n              break;\r\n            case 'ifsc_code':\r\n            case 'ifsc':\r\n              farmer.ifscCode = value;\r\n              break;\r\n            case 'society_id':\r\n            case 'societyid':\r\n            case 'society':\r\n              const societyId = parseInt(value);\r\n              if (societyId && !isNaN(societyId)) {\r\n                farmer.societyId = societyId;\r\n              }\r\n              break;\r\n            case 'machine-id':\r\n            case 'machine_id':\r\n            case 'machineid':\r\n              const machineId = parseInt(value);\r\n              if (machineId && !isNaN(machineId)) {\r\n                farmer.machineId = machineId;\r\n              }\r\n              break;\r\n          }\r\n        });\r\n\r\n        // Ensure every farmer has a society ID - use CSV value if available, otherwise use default\r\n        if (!farmer.societyId) {\r\n          farmer.societyId = parseInt(bulkSocietyId);\r\n        }\r\n\r\n        return farmer;\r\n      }).filter(farmer => farmer.farmerId && farmer.farmerName);\r\n\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/farmer', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ farmers })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setShowBulkModal(false);\r\n        setSelectedFile(null);\r\n        setBulkSocietyId('');\r\n        setSuccess('Farmers uploaded successfully');\r\n        setError('');\r\n        fetchFarmers();\r\n      } else {\r\n        const data = await response.json();\r\n        setError(data.error || 'Failed to upload farmers');\r\n        setSuccess('');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error uploading farmers:', error);\r\n      setError('Error uploading farmers. Please try again.');\r\n      setSuccess('');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Modal control functions\r\n  const openAddModal = () => {\r\n    setFormData({\r\n      farmerId: '',\r\n      rfId: '',\r\n      farmerName: '',\r\n      contactNumber: '',\r\n      email: '',\r\n      smsEnabled: 'OFF',\r\n      emailNotificationsEnabled: 'ON',\r\n      bonus: 0,\r\n      address: '',\r\n      bankName: '',\r\n      bankAccountNumber: '',\r\n      ifscCode: '',\r\n      societyId: '',\r\n      machineId: '',\r\n      status: 'active',\r\n      notes: ''\r\n    });\r\n    setShowAddForm(true);\r\n    setError('');\r\n    setSuccess('');\r\n    setFieldErrors({});\r\n  };\r\n\r\n  const handleEditClick = (farmer: Farmer) => {\r\n    setSelectedFarmer(farmer);\r\n    const societyId = farmer.societyId?.toString() || '';\r\n    setFormData({\r\n      farmerId: farmer.farmerId,\r\n      rfId: farmer.rfId || '',\r\n      farmerName: farmer.farmerName,\r\n      contactNumber: farmer.contactNumber || '',\r\n      email: farmer.email || '',\r\n      smsEnabled: farmer.smsEnabled,\r\n      emailNotificationsEnabled: farmer.emailNotificationsEnabled || 'ON',\r\n      bonus: farmer.bonus,\r\n      address: farmer.address || '',\r\n      bankName: farmer.bankName || '',\r\n      bankAccountNumber: farmer.bankAccountNumber || '',\r\n      ifscCode: farmer.ifscCode || '',\r\n      societyId: societyId,\r\n      machineId: farmer.machineId?.toString() || '',\r\n      status: farmer.status,\r\n      notes: farmer.notes || ''\r\n    });\r\n    \r\n    // Load machines for the farmer's society\r\n    if (societyId) {\r\n      fetchMachinesBySociety(societyId);\r\n    }\r\n    \r\n    setShowEditForm(true);\r\n    setError('');\r\n    setSuccess('');\r\n    setFieldErrors({});\r\n  };\r\n\r\n  const closeAddModal = () => {\r\n    setShowAddForm(false);\r\n    setFormData({\r\n      farmerId: '',\r\n      rfId: '',\r\n      farmerName: '',\r\n      contactNumber: '',\r\n      email: '',\r\n      smsEnabled: 'OFF',\r\n      emailNotificationsEnabled: 'ON',\r\n      bonus: 0,\r\n      address: '',\r\n      bankName: '',\r\n      bankAccountNumber: '',\r\n      ifscCode: '',\r\n      societyId: '',\r\n      machineId: '',\r\n      status: 'active',\r\n      notes: ''\r\n    });\r\n    setError('');\r\n    setSuccess('');\r\n  };\r\n\r\n  const closeEditModal = () => {\r\n    setShowEditForm(false);\r\n    setSelectedFarmer(null);\r\n    setFormData({\r\n      farmerId: '',\r\n      rfId: '',\r\n      farmerName: '',\r\n      contactNumber: '',\r\n      email: '',\r\n      smsEnabled: 'OFF',\r\n      emailNotificationsEnabled: 'ON',\r\n      bonus: 0,\r\n      address: '',\r\n      bankName: '',\r\n      bankAccountNumber: '',\r\n      ifscCode: '',\r\n      societyId: '',\r\n      machineId: '',\r\n      status: 'active',\r\n      notes: ''\r\n    });\r\n    setError('');\r\n    setSuccess('');\r\n  };\r\n\r\n  // Initial data fetch\r\n  useEffect(() => {\r\n    fetchFarmers();\r\n    fetchDairies();\r\n    fetchBmcs();\r\n    fetchSocieties();\r\n    fetchAllMachines();\r\n    fetchPerformanceStats();\r\n  }, [fetchFarmers, fetchPerformanceStats]);\r\n\r\n  // Filter farmers using inline logic that supports array-based filters\r\n  const filteredFarmers = farmers.filter(farmer => {\r\n    // Search query filter\r\n    const searchMatch = searchQuery === '' ||\r\n      farmer.farmerName.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      farmer.farmerId.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      farmer.contactNumber?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      farmer.rfId?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      farmer.societyName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      farmer.societyIdentifier?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      farmer.address?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      farmer.bankName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      farmer.bankAccountNumber?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      farmer.ifscCode?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      farmer.notes?.toLowerCase().includes(searchQuery.toLowerCase());\r\n\r\n    if (!searchMatch) return false;\r\n\r\n    // Status filter\r\n    const statusMatch = statusFilter === 'all' || farmer.status === statusFilter;\r\n    if (!statusMatch) return false;\r\n\r\n    // Get farmer's society, BMC, and dairy\r\n    const farmerSociety = societies.find(s => s.id === farmer.societyId);\r\n    const farmerBmc = farmerSociety?.bmc_id ? bmcs.find(b => b.id === farmerSociety.bmc_id) : null;\r\n    const farmerDairy = farmerBmc?.dairyFarmId ? dairies.find(d => d.id === farmerBmc.dairyFarmId) : null;\r\n\r\n    // Dairy filter\r\n    if (dairyFilter.length > 0) {\r\n      if (!farmerDairy || !dairyFilter.includes(farmerDairy.id.toString())) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    // BMC filter\r\n    if (bmcFilter.length > 0) {\r\n      if (!farmerBmc || !bmcFilter.includes(farmerBmc.id.toString())) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    // Society filter (additional check beyond the utility function)\r\n    if (societyFilter.length > 0) {\r\n      if (!farmer.societyId || !societyFilter.includes(farmer.societyId.toString())) {\r\n        return false;\r\n      }\r\n    }\r\n    \r\n    // Machine filter\r\n    if (machineFilter.length > 0) {\r\n      const farmerMachineId = farmer.machineId?.toString();\r\n      if (!farmerMachineId || !machineFilter.includes(farmerMachineId)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  });\r\n\r\n  // Filter societies to only show those with farmers in the current filtered list\r\n  const availableSocieties = useMemo(() => {\r\n    // Get unique society IDs from farmers based on current status and search filters\r\n    const farmersForSocietyFilter = farmers.filter(farmer => {\r\n      // Search filter\r\n      const searchMatch = searchQuery === '' || \r\n        farmer.farmerName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.farmerId?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.contactNumber?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.rfId?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.societyName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.societyIdentifier?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.address?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.bankName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.bankAccountNumber?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.ifscCode?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.notes?.toLowerCase().includes(searchQuery.toLowerCase());\r\n      if (!searchMatch) return false;\r\n      \r\n      // Status filter\r\n      const statusMatch = statusFilter === 'all' || farmer.status === statusFilter;\r\n      if (!statusMatch) return false;\r\n      \r\n      // Machine filter (but not society filter)\r\n      if (machineFilter.length > 0) {\r\n        const farmerMachineId = farmer.machineId?.toString();\r\n        if (!farmerMachineId || !machineFilter.includes(farmerMachineId)) {\r\n          return false;\r\n        }\r\n      }\r\n      \r\n      return true;\r\n    });\r\n\r\n    const societyIdsWithFarmers = new Set(\r\n      farmersForSocietyFilter\r\n        .map(f => f.societyId)\r\n        .filter(Boolean)\r\n    );\r\n\r\n    return societies.filter(society => societyIdsWithFarmers.has(society.id));\r\n  }, [farmers, societies, searchQuery, statusFilter, machineFilter]);\r\n\r\n  // Filter machines to only show those with farmers in the current filtered list\r\n  const availableMachines = useMemo(() => {\r\n    // Get unique machine IDs from farmers based on current status, search, and society filters\r\n    const farmersForMachineFilter = farmers.filter(farmer => {\r\n      // Search filter\r\n      const searchMatch = searchQuery === '' || \r\n        farmer.farmerName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.farmerId?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.contactNumber?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.rfId?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.societyName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.societyIdentifier?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.address?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.bankName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.bankAccountNumber?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.ifscCode?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        farmer.notes?.toLowerCase().includes(searchQuery.toLowerCase());\r\n      if (!searchMatch) return false;\r\n      \r\n      // Status filter\r\n      const statusMatch = statusFilter === 'all' || farmer.status === statusFilter;\r\n      if (!statusMatch) return false;\r\n      \r\n      // Society filter (but not machine filter)\r\n      if (societyFilter.length > 0) {\r\n        if (!societyFilter.includes(farmer.societyId?.toString() || '')) {\r\n          return false;\r\n        }\r\n      }\r\n      \r\n      return true;\r\n    });\r\n\r\n    const machineIdsWithFarmers = new Set(\r\n      farmersForMachineFilter\r\n        .map(f => f.machineId)\r\n        .filter(Boolean)\r\n    );\r\n\r\n    return machines.filter(machine => machineIdsWithFarmers.has(machine.id));\r\n  }, [farmers, machines, searchQuery, statusFilter, societyFilter]);\r\n\r\n  return (\r\n    <>\r\n    {/* Loading Snackbar for All Operations */}\r\n    <LoadingSnackbar\r\n      isVisible={isSubmitting || isUpdatingStatus || isBulkUpdatingStatus || isDeletingBulk}\r\n      message={\r\n        isSubmitting ? (selectedFarmer ? t.farmerManagement.updatingFarmer : t.farmerManagement.addingFarmer) :\r\n        isDeletingBulk ? t.farmerManagement.deletingFarmers :\r\n        isBulkUpdatingStatus ? t.farmerManagement.updatingFarmers : \r\n        t.farmerManagement.updatingStatus\r\n      }\r\n      submessage={t.farmerManagement.pleaseWait}\r\n      progress={isBulkUpdatingStatus || isDeletingBulk ? updateProgress : undefined}\r\n      showProgress={isBulkUpdatingStatus || isDeletingBulk}\r\n    />\r\n    \r\n    <div className=\"p-3 xs:p-4 sm:p-6 lg:p-8 space-y-3 xs:space-y-4 sm:space-y-6 lg:pb-8\">\r\n      {/* Page Header */}\r\n      <ManagementPageHeader\r\n        title={t.farmerManagement.title}\r\n        subtitle={t.farmerManagement.subtitle}\r\n        icon={<Users className=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" />}\r\n        onRefresh={fetchFarmers}\r\n        hasData={filteredFarmers.length > 0}\r\n      />\r\n\r\n      {/* Success/Error Messages */}\r\n      <StatusMessage \r\n        success={success} \r\n        error={error}\r\n      />\r\n\r\n      {/* Performance Stats Cards */}\r\n      {(performanceStats.topCollector || performanceStats.bestFat || performanceStats.topRevenue) && (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3 sm:gap-4\">\r\n          {performanceStats.topCollector && (\r\n            <div \r\n              onClick={() => handleCardClick('quantity')}\r\n              className=\"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-4 rounded-lg border border-green-200 dark:border-green-700 hover:shadow-lg transition-shadow cursor-pointer\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <h3 className=\"text-sm font-semibold text-green-900 dark:text-green-100\">Top Collector (30d)</h3>\r\n                <Droplets className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\r\n              </div>\r\n              <p className=\"text-lg font-bold text-green-800 dark:text-green-200 truncate\">{performanceStats.topCollector.farmer.farmerName}</p>\r\n              <p className=\"text-xs text-green-700 dark:text-green-300 truncate\">ID: {performanceStats.topCollector.farmer.farmerId}</p>\r\n              {performanceStats.topCollector.farmer.societyName && (\r\n                <p className=\"text-xs text-green-600 dark:text-green-400 truncate\">{performanceStats.topCollector.farmer.societyName}</p>\r\n              )}\r\n              <p className=\"text-sm font-semibold text-green-600 dark:text-green-400 mt-1\">{performanceStats.topCollector.totalQuantity.toFixed(2)} L</p>\r\n            </div>\r\n          )}\r\n          \r\n          {performanceStats.topRevenue && (\r\n            <div \r\n              onClick={() => handleCardClick('revenue')}\r\n              className=\"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700 hover:shadow-lg transition-shadow cursor-pointer\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <h3 className=\"text-sm font-semibold text-blue-900 dark:text-blue-100\">Top Earner (30d)</h3>\r\n                <TrendingUp className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\r\n              </div>\r\n              <p className=\"text-lg font-bold text-blue-800 dark:text-blue-200 truncate\">{performanceStats.topRevenue.farmer.farmerName}</p>\r\n              <p className=\"text-xs text-blue-700 dark:text-blue-300 truncate\">ID: {performanceStats.topRevenue.farmer.farmerId}</p>\r\n              {performanceStats.topRevenue.farmer.societyName && (\r\n                <p className=\"text-xs text-blue-600 dark:text-blue-400 truncate\">{performanceStats.topRevenue.farmer.societyName}</p>\r\n              )}\r\n              <p className=\"text-sm font-semibold text-blue-600 dark:text-blue-400 mt-1\">â‚¹{performanceStats.topRevenue.totalAmount.toFixed(2)}</p>\r\n            </div>\r\n          )}\r\n          \r\n          {performanceStats.bestFat && (\r\n            <div \r\n              onClick={() => handleCardClick('fat')}\r\n              className=\"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-4 rounded-lg border border-purple-200 dark:border-purple-700 hover:shadow-lg transition-shadow cursor-pointer\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <h3 className=\"text-sm font-semibold text-purple-900 dark:text-purple-100\">Best Fat (30d)</h3>\r\n                <Award className=\"w-5 h-5 text-purple-600 dark:text-purple-400\" />\r\n              </div>\r\n              <p className=\"text-lg font-bold text-purple-800 dark:text-purple-200 truncate\">{performanceStats.bestFat.farmer.farmerName}</p>\r\n              <p className=\"text-xs text-purple-700 dark:text-purple-300 truncate\">ID: {performanceStats.bestFat.farmer.farmerId}</p>\r\n              {performanceStats.bestFat.farmer.societyName && (\r\n                <p className=\"text-xs text-purple-600 dark:text-purple-400 truncate\">{performanceStats.bestFat.farmer.societyName}</p>\r\n              )}\r\n              <p className=\"text-sm font-semibold text-purple-600 dark:text-purple-400 mt-1\">{performanceStats.bestFat.avgFat.toFixed(2)}% Fat</p>\r\n            </div>\r\n          )}\r\n          \r\n          {performanceStats.bestSnf && (\r\n            <div \r\n              onClick={() => handleCardClick('snf')}\r\n              className=\"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 p-4 rounded-lg border border-orange-200 dark:border-orange-700 hover:shadow-lg transition-shadow cursor-pointer\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <h3 className=\"text-sm font-semibold text-orange-900 dark:text-orange-100\">Best SNF (30d)</h3>\r\n                <BarChart3 className=\"w-5 h-5 text-orange-600 dark:text-orange-400\" />\r\n              </div>\r\n              <p className=\"text-lg font-bold text-orange-800 dark:text-orange-200 truncate\">{performanceStats.bestSnf.farmer.farmerName}</p>\r\n              <p className=\"text-xs text-orange-700 dark:text-orange-300 truncate\">ID: {performanceStats.bestSnf.farmer.farmerId}</p>\r\n              {performanceStats.bestSnf.farmer.societyName && (\r\n                <p className=\"text-xs text-orange-600 dark:text-orange-400 truncate\">{performanceStats.bestSnf.farmer.societyName}</p>\r\n              )}\r\n              <p className=\"text-sm font-semibold text-orange-600 dark:text-orange-400 mt-1\">{performanceStats.bestSnf.avgSnf.toFixed(2)}% SNF</p>\r\n            </div>\r\n          )}\r\n          \r\n          {performanceStats.mostActive && (\r\n            <div \r\n              onClick={() => handleCardClick('collections')}\r\n              className=\"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 p-4 rounded-lg border border-pink-200 dark:border-pink-700 hover:shadow-lg transition-shadow cursor-pointer\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <h3 className=\"text-sm font-semibold text-pink-900 dark:text-pink-100\">Most Active (30d)</h3>\r\n                <Users className=\"w-5 h-5 text-pink-600 dark:text-pink-400\" />\r\n              </div>\r\n              <p className=\"text-lg font-bold text-pink-800 dark:text-pink-200 truncate\">{performanceStats.mostActive.farmer.farmerName}</p>\r\n              <p className=\"text-xs text-pink-700 dark:text-pink-300 truncate\">ID: {performanceStats.mostActive.farmer.farmerId}</p>\r\n              {performanceStats.mostActive.farmer.societyName && (\r\n                <p className=\"text-xs text-pink-600 dark:text-pink-400 truncate\">{performanceStats.mostActive.farmer.societyName}</p>\r\n              )}\r\n              <p className=\"text-sm font-semibold text-pink-600 dark:text-pink-400 mt-1\">{performanceStats.mostActive.totalCollections} Collections</p>\r\n            </div>\r\n          )}\r\n          \r\n          {performanceStats.bestQuality && (\r\n            <div \r\n              onClick={() => handleCardClick('rate')}\r\n              className=\"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-4 rounded-lg border border-indigo-200 dark:border-indigo-700 hover:shadow-lg transition-shadow cursor-pointer\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <h3 className=\"text-sm font-semibold text-indigo-900 dark:text-indigo-100\">Best Rate (30d)</h3>\r\n                <Award className=\"w-5 h-5 text-indigo-600 dark:text-indigo-400\" />\r\n              </div>\r\n              <p className=\"text-lg font-bold text-indigo-800 dark:text-indigo-200 truncate\">{performanceStats.bestQuality.farmer.farmerName}</p>\r\n              <p className=\"text-xs text-indigo-700 dark:text-indigo-300 truncate\">ID: {performanceStats.bestQuality.farmer.farmerId}</p>\r\n              {performanceStats.bestQuality.farmer.societyName && (\r\n                <p className=\"text-xs text-indigo-600 dark:text-indigo-400 truncate\">{performanceStats.bestQuality.farmer.societyName}</p>\r\n              )}\r\n              <p className=\"text-sm font-semibold text-indigo-600 dark:text-indigo-400 mt-1\">â‚¹{performanceStats.bestQuality.avgRate.toFixed(2)}/L</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Status Stats Cards */}\r\n      <StatsGrid\r\n        allItems={farmers}\r\n        filteredItems={filteredFarmers}\r\n        hasFilters={statusFilter !== 'all' || dairyFilter.length > 0 || bmcFilter.length > 0 || societyFilter.length > 0 || machineFilter.length > 0}\r\n        onStatusFilterChange={(status) => setStatusFilter(status)}\r\n        currentStatusFilter={statusFilter}\r\n      />\r\n\r\n      {/* Filter Controls */}\r\n      <FilterDropdown\r\n        statusFilter={statusFilter}\r\n        onStatusChange={(value) => setStatusFilter(value as typeof statusFilter)}\r\n        dairyFilter={dairyFilter}\r\n        onDairyChange={(value) => setDairyFilter(Array.isArray(value) ? value : [value])}\r\n        bmcFilter={bmcFilter}\r\n        onBmcChange={(value) => setBmcFilter(Array.isArray(value) ? value : [value])}\r\n        societyFilter={societyFilter}\r\n        onSocietyChange={(value) => setSocietyFilter(Array.isArray(value) ? value : [value])}\r\n        machineFilter={machineFilter}\r\n        onMachineChange={(value) => setMachineFilter(Array.isArray(value) ? value : [value])}\r\n        dairies={dairies}\r\n        bmcs={bmcs}\r\n        societies={availableSocieties}\r\n        machines={availableMachines}\r\n        filteredCount={filteredFarmers.length}\r\n        totalCount={farmers.length}\r\n        searchQuery={searchQuery}\r\n        onSearchChange={setSearchQuery}\r\n        icon={<Users className=\"w-5 h-5\" />}\r\n        hideMainFilterButton={true}\r\n      />\r\n\r\n      {/* Select All and View Mode Controls */}\r\n      {filteredFarmers.length > 0 && (\r\n        <div className=\"flex flex-col xs:flex-row items-start xs:items-center justify-between gap-3 bg-white dark:bg-gray-800 p-3 sm:p-4 rounded-lg border border-gray-200 dark:border-gray-700\">\r\n          {/* Select All Control - Left Side */}\r\n          <label className=\"flex items-center space-x-3 cursor-pointer\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={selectAll}\r\n              onChange={handleSelectAll}\r\n              className=\"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600\"\r\n            />\r\n            <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n              {t.farmerManagement.selectAll} {filteredFarmers.length} {filteredFarmers.length === 1 ? t.roles.farmer : t.farmerManagement.farmers}\r\n              {(statusFilter !== 'all' || dairyFilter.length > 0 || bmcFilter.length > 0 || societyFilter.length > 0 || machineFilter.length > 0) && ` (${t.common.filter.toLowerCase()})`}\r\n            </span>\r\n          </label>\r\n\r\n          {/* View Mode Toggle - Right Side */}\r\n          <div className=\"flex items-center gap-3\">\r\n            {/* View Mode Toggle */}\r\n            <ViewModeToggle\r\n              viewMode={viewMode}\r\n              onViewModeChange={setViewMode}\r\n              folderLabel=\"Folder View\"\r\n              listLabel=\"Grid View\"\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Farmers Grid */}\r\n      {loading ? (\r\n        <div className=\"flex items-center justify-center py-12 sm:py-20\">\r\n          <FlowerSpinner size={40} />\r\n        </div>\r\n      ) : filteredFarmers.length > 0 ? (\r\n        viewMode === 'folder' ? (\r\n          // Folder View - Grouped by Society\r\n          <div className=\"space-y-4\">\r\n            {(() => {\r\n              // Group farmers by society\r\n              const farmersBySociety = filteredFarmers.reduce((acc, farmer) => {\r\n                const societyId = farmer.societyId || 0;\r\n                const societyName = farmer.societyName || 'Unassigned';\r\n                const societyIdentifier = farmer.societyIdentifier || 'N/A';\r\n                \r\n                if (!acc[societyId]) {\r\n                  acc[societyId] = {\r\n                    id: societyId,\r\n                    name: societyName,\r\n                    identifier: societyIdentifier,\r\n                    farmers: []\r\n                  };\r\n                }\r\n                acc[societyId].farmers.push(farmer);\r\n                return acc;\r\n              }, {} as Record<number, {id: number; name: string; identifier: string; farmers: Farmer[]}>);\r\n\r\n              const societyGroups = Object.values(farmersBySociety).sort((a, b) => \r\n                a.name.localeCompare(b.name)\r\n              );\r\n\r\n              return societyGroups.map(society => {\r\n                const isExpanded = expandedSocieties.has(society.id);\r\n                const isSocietySelected = selectedSocieties.has(society.id);\r\n                const farmerCount = society.farmers.length;\r\n                const activeCount = society.farmers.filter(f => f.status === 'active').length;\r\n                const inactiveCount = society.farmers.filter(f => f.status === 'inactive').length;\r\n                const farmerIds = society.farmers.map(f => f.id);\r\n\r\n                return (\r\n                  <div key={society.id} className={`relative bg-white dark:bg-gray-800 rounded-lg border-2 transition-colors hover:z-10 ${\r\n                    isSocietySelected \r\n                      ? 'border-blue-500 dark:border-blue-400' \r\n                      : 'border-gray-200 dark:border-gray-700'\r\n                  }`}>\r\n                    {/* Society Folder Header */}\r\n                    <div className=\"flex items-center p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors\">\r\n                      {/* Society Selection Checkbox */}\r\n                      <div \r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          toggleSocietySelection(society.id, farmerIds);\r\n                        }}\r\n                        className=\"flex items-center mr-3 cursor-pointer\"\r\n                      >\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={isSocietySelected}\r\n                          onChange={() => {}} // Handled by parent div\r\n                          className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 cursor-pointer\"\r\n                        />\r\n                      </div>\r\n\r\n                      {/* Expandable Header */}\r\n                      <button\r\n                        onClick={() => toggleSocietyExpansion(society.id)}\r\n                        className=\"flex-1 flex items-center justify-between\"\r\n                      >\r\n                        <div className=\"flex items-center space-x-3\">\r\n                          {isExpanded ? (\r\n                            <ChevronDown className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\r\n                          ) : (\r\n                            <ChevronRight className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\r\n                          )}\r\n                          {isExpanded ? (\r\n                            <FolderOpen className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\r\n                          ) : (\r\n                            <Folder className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\r\n                          )}\r\n                          <div className=\"text-left\">\r\n                            <h3 className=\"text-base sm:text-lg font-semibold text-gray-900 dark:text-white\">\r\n                              {society.name}\r\n                          </h3>\r\n                          <p className=\"text-xs sm:text-sm text-gray-500 dark:text-gray-400\">\r\n                            ID: {society.identifier}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-4\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <div className=\"text-right\">\r\n                            <div className=\"flex items-center space-x-2 text-xs sm:text-sm text-gray-600 dark:text-gray-400\">\r\n                              <span className=\"flex items-center space-x-1\">\r\n                                <div className=\"w-2 h-2 rounded-full bg-green-500\"></div>\r\n                                <span>{activeCount}</span>\r\n                              </span>\r\n                              <span className=\"flex items-center space-x-1\">\r\n                                <div className=\"w-2 h-2 rounded-full bg-red-500\"></div>\r\n                                <span>{inactiveCount}</span>\r\n                              </span>\r\n                            </div>\r\n                            <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                              {farmerCount} {farmerCount === 1 ? 'farmer' : 'farmers'}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </button>\r\n                  </div>\r\n\r\n                    {/* Farmers Grid - Shown when expanded */}\r\n                    {isExpanded && (\r\n                      <div className=\"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-900/30\">\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                          {society.farmers.map((farmer) => (\r\n                            <div key={farmer.id} className=\"relative hover:z-20\">\r\n                            <ItemCard\r\n                              id={farmer.id}\r\n                              name={farmer.farmerName}\r\n                              identifier={`ID: ${farmer.farmerId}`}\r\n                              status={farmer.status}\r\n                              icon={<Users className=\"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 dark:text-blue-400\" />}\r\n                              details={[\r\n                                ...(farmer.contactNumber ? [{ icon: <Phone className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, text: farmer.contactNumber }] : []),\r\n                                ...(farmer.email ? [{ icon: <Mail className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, text: farmer.email }] : []),\r\n                                ...(farmer.machineName || farmer.machineType ? [{ \r\n                                  icon: <Settings className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, \r\n                                  text: farmer.machineType && farmer.machineName \r\n                                    ? `${farmer.machineType} (${farmer.machineName})`\r\n                                    : farmer.machineName || farmer.machineType || 'Machine Not Assigned',\r\n                                  highlight: farmer.machineName ? false : undefined\r\n                                }] : [{ \r\n                                  icon: <Settings className=\"w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400\" />, \r\n                                  text: 'No Machine Assigned',\r\n                                  className: 'text-gray-500 dark:text-gray-400'\r\n                                }]),\r\n                                { icon: <UserCheck className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, text: `Bonus: ${farmer.bonus}` }\r\n                              ]}\r\n                              onStatusChange={(newStatus) => handleStatusChange(farmer.id, newStatus)}\r\n                              onView={() => router.push(`/admin/farmer/${farmer.id}`)}\r\n                              onEdit={() => handleEditClick(farmer)}\r\n                              onDelete={() => handleDelete(farmer.id)}\r\n                              viewText=\"View Details\"\r\n                              selectable={true}\r\n                              selected={selectedFarmers.has(farmer.id)}\r\n                              onSelect={() => handleSelectFarmer(farmer.id)}\r\n                              searchQuery={searchQuery}\r\n                            />\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                );\r\n              });\r\n            })()}\r\n          </div>\r\n        ) : (\r\n          // List View - Traditional flat grid\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {filteredFarmers.map(farmer => (\r\n              <ItemCard\r\n                key={farmer.id}\r\n                id={farmer.id}\r\n                name={farmer.farmerName}\r\n                identifier={`ID: ${farmer.farmerId}`}\r\n                status={farmer.status}\r\n                icon={<Users className=\"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 dark:text-blue-400\" />}\r\n                details={[\r\n                  ...(farmer.contactNumber ? [{ icon: <Phone className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, text: farmer.contactNumber }] : []),\r\n                  ...(farmer.email ? [{ icon: <Mail className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, text: farmer.email }] : []),\r\n                  ...(farmer.societyName ? [{ \r\n                    icon: <Building2 className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, \r\n                    text: farmer.societyIdentifier \r\n                      ? `${farmer.societyName} (${farmer.societyIdentifier})` \r\n                      : farmer.societyName,\r\n                    highlight: true\r\n                  }] : []),\r\n                  ...(farmer.machineName || farmer.machineType ? [{ \r\n                    icon: <Settings className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, \r\n                    text: farmer.machineType && farmer.machineName \r\n                      ? `${farmer.machineType} (${farmer.machineName})`\r\n                      : farmer.machineName || farmer.machineType || 'Machine Not Assigned',\r\n                    highlight: farmer.machineName ? false : undefined\r\n                  }] : [{ \r\n                    icon: <Settings className=\"w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400\" />, \r\n                    text: 'No Machine Assigned',\r\n                    className: 'text-gray-500 dark:text-gray-400'\r\n                  }]),\r\n                  { icon: <UserCheck className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />, text: `Bonus: ${farmer.bonus}` }\r\n                ]}\r\n                onStatusChange={(newStatus) => handleStatusChange(farmer.id, newStatus)}\r\n                onView={() => router.push(`/admin/farmer/${farmer.id}`)}\r\n                onEdit={() => handleEditClick(farmer)}\r\n                onDelete={() => handleDelete(farmer.id)}\r\n                viewText=\"View Details\"\r\n                selectable={true}\r\n                selected={selectedFarmers.has(farmer.id)}\r\n                onSelect={() => handleSelectFarmer(farmer.id)}\r\n                searchQuery={searchQuery}\r\n              />\r\n            ))}\r\n          </div>\r\n        )\r\n      ) : (\r\n        <EmptyState\r\n          icon={<Users className=\"w-12 h-12 sm:w-16 sm:h-16 text-gray-400\" />}\r\n          title={farmers.length === 0 ? t.farmerManagement.noFarmersFound : t.farmerManagement.noMatchingFarmers}\r\n          message={farmers.length === 0 \r\n            ? t.farmerManagement.getStartedMessage\r\n            : searchQuery \r\n              ? `${t.farmerManagement.noMatchingFarmers}. ${t.farmerManagement.tryChangingFilters}`\r\n              : t.farmerManagement.tryChangingFilters\r\n          }\r\n          actionText={farmers.length === 0 ? t.farmerManagement.addFarmer : undefined}\r\n          onAction={farmers.length === 0 ? openAddModal : undefined}\r\n          showAction={farmers.length === 0}\r\n        />\r\n      )}\r\n      </div>\r\n\r\n      {/* Add Farmer Modal */}\r\n      <FormModal\r\n        isOpen={showAddForm}\r\n        onClose={closeAddModal}\r\n        title={t.farmerManagement.addFarmer}\r\n      >\r\n        <form onSubmit={handleAddSubmit} className=\"space-y-4 sm:space-y-6\">\r\n          <FormGrid>\r\n          {/* Mandatory Fields First */}\r\n          <FormInput\r\n            label={t.farmerManagement.farmerId}\r\n            type=\"text\"\r\n            value={formData.farmerId}\r\n            onChange={(value) => {\r\n              // Allow only numbers\r\n              const numericValue = value.replace(/[^0-9]/g, '');\r\n              setFormData({ ...formData, farmerId: numericValue });\r\n            }}\r\n            placeholder={t.farmerManagement.enterFarmerId}\r\n            required\r\n            error={fieldErrors.farmerId}\r\n          />\r\n          <FormInput\r\n            label={t.farmerManagement.farmerName}\r\n            type=\"text\"\r\n            value={formData.farmerName}\r\n            onChange={(value) => setFormData({ ...formData, farmerName: value })}\r\n            placeholder={t.farmerManagement.enterFarmerName}\r\n            required\r\n            error={fieldErrors.farmerName}\r\n          />\r\n          <FormSelect\r\n            label={t.farmerManagement.society}\r\n            value={formData.societyId}\r\n            onChange={(value) => {\r\n              setFormData({ ...formData, societyId: value, machineId: '' });\r\n              fetchMachinesBySociety(value);\r\n            }}\r\n            options={societies.map(society => ({\r\n              value: society.id.toString(),\r\n              label: `${society.name} (${society.society_id})`\r\n            }))}\r\n            placeholder={t.farmerManagement.selectSociety}\r\n            required\r\n            colSpan={1}\r\n          />\r\n          \r\n          {/* Machine Selection - Same row as society */}\r\n          <FormSelect\r\n            label={t.farmerManagement.machine}\r\n            value={formData.machineId}\r\n            onChange={(value) => setFormData({ ...formData, machineId: value })}\r\n            options={machines.map(machine => ({\r\n              value: machine.id.toString(),\r\n              label: `${machine.machineId} - ${machine.machineType}`\r\n            }))}\r\n            placeholder={machinesLoading ? t.common.loading : machines.length > 0 ? t.farmerManagement.selectMachine : t.farmerManagement.unassigned}\r\n            disabled={machinesLoading}\r\n            required\r\n            colSpan={1}\r\n            className=\"sm:max-w-[320px]\"\r\n          />\r\n          \r\n          {/* Show message if society selected but no machines */}\r\n          {formData.societyId && !machinesLoading && machines.length === 0 && (\r\n            <div className=\"col-span-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg\">\r\n              <p className=\"text-sm text-yellow-700 dark:text-yellow-300\">\r\n                No machines found for this society. You can <strong>add machines first</strong> from the Machine Management section, or proceed without assigning a machine.\r\n              </p>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Contact Information */}\r\n          <FormInput\r\n            label={t.farmerManagement.contactNumber}\r\n            type=\"tel\"\r\n            value={formData.contactNumber}\r\n            onChange={(value) => {\r\n              const formatted = formatPhoneInput(value);\r\n              setFormData({ ...formData, contactNumber: formatted });\r\n            }}\r\n            onBlur={() => {\r\n              const error = validatePhoneOnBlur(formData.contactNumber);\r\n              if (error) {\r\n                setFieldErrors(prev => ({ ...prev, contactNumber: error }));\r\n              } else {\r\n                const { contactNumber: _removed, ...rest } = fieldErrors;\r\n                setFieldErrors(rest);\r\n              }\r\n            }}\r\n            placeholder={t.farmerManagement.enterContactNumber}\r\n            error={fieldErrors.contactNumber}\r\n          />\r\n          <FormInput\r\n            label=\"Email\"\r\n            type=\"email\"\r\n            value={formData.email}\r\n            onChange={(value) => setFormData({ ...formData, email: value })}\r\n            onBlur={() => {\r\n              const error = validateEmailOnBlur(formData.email);\r\n              if (error) {\r\n                setFieldErrors(prev => ({ ...prev, email: error }));\r\n              } else {\r\n                const { email: _removed, ...rest } = fieldErrors;\r\n                setFieldErrors(rest);\r\n              }\r\n            }}\r\n            placeholder=\"Enter Email Address\"\r\n            error={fieldErrors.email}\r\n          />\r\n          <FormSelect\r\n            label={t.farmerManagement.smsEnabled}\r\n            value={formData.smsEnabled}\r\n            onChange={(value) => setFormData({ ...formData, smsEnabled: value })}\r\n            options={[\r\n              { value: 'OFF', label: 'OFF' },\r\n              { value: 'ON', label: 'ON' }\r\n            ]}\r\n            placeholder={t.farmerManagement.selectStatus}\r\n          />\r\n          <FormSelect\r\n            label=\"Email Notifications\"\r\n            value={formData.emailNotificationsEnabled}\r\n            onChange={(value) => setFormData({ ...formData, emailNotificationsEnabled: value })}\r\n            options={[\r\n              { value: 'OFF', label: 'OFF' },\r\n              { value: 'ON', label: 'ON' }\r\n            ]}\r\n            placeholder=\"Select Option\"\r\n          />\r\n          \r\n          {/* Optional Fields */}\r\n          <FormInput\r\n            label={t.farmerManagement.rfId}\r\n            type=\"text\"\r\n            value={formData.rfId}\r\n            onChange={(value) => setFormData({ ...formData, rfId: value })}\r\n            placeholder={t.farmerManagement.enterRfId}\r\n          />\r\n          <FormInput\r\n            label={t.farmerManagement.bonus}\r\n            type=\"number\"\r\n            value={formData.bonus}\r\n            onChange={(value) => setFormData({ ...formData, bonus: Number(value) })}\r\n            placeholder={t.farmerManagement.enterBonus}\r\n          />\r\n          <FormSelect\r\n            label={t.farmerManagement.status}\r\n            value={formData.status}\r\n            onChange={(value) => setFormData({ ...formData, status: value })}\r\n            options={[\r\n              { value: 'active', label: t.farmerManagement.active },\r\n              { value: 'inactive', label: t.farmerManagement.inactive },\r\n              { value: 'suspended', label: t.farmerManagement.suspended },\r\n              { value: 'maintenance', label: t.farmerManagement.maintenance }\r\n            ]}\r\n            placeholder={t.farmerManagement.selectStatus}\r\n          />\r\n          \r\n          {/* Banking Information */}\r\n          <FormInput\r\n            label={t.farmerManagement.bankName}\r\n            type=\"text\"\r\n            value={formData.bankName}\r\n            onChange={(value) => setFormData({ ...formData, bankName: value })}\r\n            placeholder={t.farmerManagement.enterBankName}\r\n          />\r\n          <FormInput\r\n            label={t.farmerManagement.bankAccountNumber}\r\n            type=\"number\"\r\n            value={formData.bankAccountNumber}\r\n            onChange={(value) => {\r\n              // Only allow numbers\r\n              const numericValue = value.replace(/\\D/g, '');\r\n              setFormData({ ...formData, bankAccountNumber: numericValue });\r\n            }}\r\n            placeholder={t.farmerManagement.enterAccountNumber}\r\n            pattern=\"[0-9]*\"\r\n            inputMode=\"numeric\"\r\n          />\r\n          <FormInput\r\n            label={t.farmerManagement.ifscCode}\r\n            type=\"text\"\r\n            value={formData.ifscCode}\r\n            onChange={(value) => setFormData({ ...formData, ifscCode: value })}\r\n            placeholder={t.farmerManagement.enterIfscCode}\r\n          />\r\n          \r\n          <FormInput\r\n            label={t.farmerManagement.address}\r\n            type=\"text\"\r\n            value={formData.address}\r\n            onChange={(value) => setFormData({ ...formData, address: value })}\r\n            placeholder={t.farmerManagement.enterAddress}\r\n          />\r\n          \r\n          <FormInput\r\n            label={t.farmerManagement.notes}\r\n            type=\"text\"\r\n            value={formData.notes}\r\n            onChange={(value) => setFormData({ ...formData, notes: value })}\r\n            placeholder={t.farmerManagement.enterNotes}\r\n          />\r\n        </FormGrid>\r\n          \r\n          <FormActions\r\n            onCancel={closeAddModal}\r\n            submitText={t.farmerManagement.createFarmer}\r\n            isLoading={isSubmitting}\r\n            isSubmitDisabled={\r\n              !formData.societyId || \r\n              !formData.machineId || \r\n              !formData.farmerId || \r\n              !formData.farmerName ||\r\n              Object.values(fieldErrors).some(error => error !== '')\r\n            }\r\n            submitType=\"submit\"\r\n          />\r\n        </form>\r\n      </FormModal>\r\n\r\n      {/* Edit Farmer Modal */}\r\n      <FormModal\r\n        isOpen={showEditForm && !!selectedFarmer}\r\n        onClose={closeEditModal}\r\n        title={t.farmerManagement.editFarmer}\r\n      >\r\n        <form onSubmit={handleEditSubmit} className=\"space-y-4 sm:space-y-6\">\r\n          <FormGrid>\r\n          {/* Mandatory Fields First */}\r\n          <FormInput\r\n            label={t.farmerManagement.farmerId}\r\n            type=\"text\"\r\n            value={formData.farmerId}\r\n            onChange={(value) => setFormData({ ...formData, farmerId: value })}\r\n            placeholder={t.farmerManagement.enterUniqueFarmerId}\r\n            required\r\n            readOnly\r\n            colSpan={1}\r\n            error={fieldErrors.farmerId}\r\n          />\r\n          \r\n          <FormInput\r\n            label={t.farmerManagement.farmerName}\r\n            type=\"text\"\r\n            value={formData.farmerName}\r\n            onChange={(value) => setFormData({ ...formData, farmerName: value })}\r\n            placeholder={t.farmerManagement.enterFarmerFullName}\r\n            required\r\n            colSpan={1}\r\n            error={fieldErrors.farmerName}\r\n          />\r\n          \r\n          <FormSelect\r\n            label={t.farmerManagement.society}\r\n            value={formData.societyId}\r\n            onChange={(value) => {\r\n              setFormData({ ...formData, societyId: value, machineId: '' });\r\n              fetchMachinesBySociety(value.toString());\r\n            }}\r\n            options={societies.map(society => ({ value: society.id, label: `${society.name} (${society.society_id})` }))}\r\n            placeholder={t.farmerManagement.selectSociety}\r\n            required\r\n            colSpan={1}\r\n          />\r\n          \r\n          {/* Machine Selection - Same row as society */}\r\n          <FormSelect\r\n            label={t.farmerManagement.machine}\r\n            value={formData.machineId}\r\n            onChange={(value) => setFormData({ ...formData, machineId: value })}\r\n            options={machines.map(machine => ({\r\n              value: machine.id.toString(),\r\n              label: `${machine.machineId} - ${machine.machineType}`\r\n            }))}\r\n            placeholder={machinesLoading ? t.common.loading : machines.length > 0 ? t.farmerManagement.selectMachine : t.farmerManagement.noMachinesAvailable}\r\n            disabled={machinesLoading}\r\n            required\r\n            colSpan={1}\r\n            className=\"sm:max-w-[320px]\"\r\n          />\r\n\r\n          {/* Optional Fields */}\r\n          <FormInput\r\n            label={t.farmerManagement.rfId}\r\n            type=\"text\"\r\n            value={formData.rfId}\r\n            onChange={(value) => setFormData({ ...formData, rfId: value })}\r\n            placeholder={t.farmerManagement.enterRfIdOptional}\r\n            colSpan={1}\r\n          />\r\n          \r\n          <FormInput\r\n            label={t.farmerManagement.contactNumber}\r\n            type=\"tel\"\r\n            value={formData.contactNumber}\r\n            onChange={(value) => {\r\n              const formatted = formatPhoneInput(value);\r\n              setFormData({ ...formData, contactNumber: formatted });\r\n              if (fieldErrors.contactNumber) {\r\n                setFieldErrors({ ...fieldErrors, contactNumber: '' });\r\n              }\r\n            }}\r\n            onBlur={() => {\r\n              const validationError = validatePhoneOnBlur(formData.contactNumber);\r\n              if (validationError) {\r\n                setFieldErrors({ ...fieldErrors, contactNumber: validationError });\r\n              }\r\n            }}\r\n            error={fieldErrors.contactNumber}\r\n            placeholder={t.farmerManagement.enterMobileNumber}\r\n            colSpan={1}\r\n          />\r\n          \r\n          <FormInput\r\n            label=\"Email\"\r\n            type=\"email\"\r\n            value={formData.email}\r\n            onChange={(value) => {\r\n              setFormData({ ...formData, email: value });\r\n              if (fieldErrors.email) {\r\n                setFieldErrors({ ...fieldErrors, email: '' });\r\n              }\r\n            }}\r\n            onBlur={() => {\r\n              const validationError = validateEmailOnBlur(formData.email);\r\n              if (validationError) {\r\n                setFieldErrors({ ...fieldErrors, email: validationError });\r\n              }\r\n            }}\r\n            error={fieldErrors.email}\r\n            placeholder=\"Enter email address\"\r\n            colSpan={1}\r\n          />\r\n          \r\n          <FormSelect\r\n            label={t.farmerManagement.smsEnabled}\r\n            value={formData.smsEnabled}\r\n            onChange={(value) => setFormData({ ...formData, smsEnabled: value })}\r\n            options={[\r\n              { value: 'OFF', label: 'OFF' },\r\n              { value: 'ON', label: 'ON' }\r\n            ]}\r\n            colSpan={1}\r\n          />\r\n          \r\n          <FormSelect\r\n            label=\"Email Notifications\"\r\n            value={formData.emailNotificationsEnabled}\r\n            onChange={(value) => setFormData({ ...formData, emailNotificationsEnabled: value })}\r\n            options={[\r\n              { value: 'OFF', label: 'OFF' },\r\n              { value: 'ON', label: 'ON' }\r\n            ]}\r\n            colSpan={1}\r\n          />\r\n          \r\n          <FormInput\r\n            label={t.farmerManagement.bonus}\r\n            type=\"number\"\r\n            value={formData.bonus}\r\n            onChange={(value) => setFormData({ ...formData, bonus: parseFloat(value) || 0 })}\r\n            placeholder={t.farmerManagement.enterBonus}\r\n            colSpan={1}\r\n          />\r\n          \r\n          <FormInput\r\n            label={t.farmerManagement.address}\r\n            type=\"text\"\r\n            value={formData.address}\r\n            onChange={(value) => setFormData({ ...formData, address: value })}\r\n            placeholder={t.farmerManagement.enterFarmerAddress}\r\n            colSpan={2}\r\n          />\r\n          \r\n          <FormInput\r\n            label={t.farmerManagement.bankName}\r\n            type=\"text\"\r\n            value={formData.bankName}\r\n            onChange={(value) => setFormData({ ...formData, bankName: value })}\r\n            placeholder={t.farmerManagement.enterBankName}\r\n            colSpan={1}\r\n          />\r\n          \r\n          <FormInput\r\n            label={t.farmerManagement.bankAccountNumber}\r\n            type=\"number\"\r\n            value={formData.bankAccountNumber}\r\n            onChange={(value) => {\r\n              // Only allow numbers\r\n              const numericValue = value.replace(/\\D/g, '');\r\n              setFormData({ ...formData, bankAccountNumber: numericValue });\r\n            }}\r\n            placeholder={t.farmerManagement.enterAccountNumber}\r\n            pattern=\"[0-9]*\"\r\n            inputMode=\"numeric\"\r\n            colSpan={1}\r\n          />\r\n          \r\n          <FormInput\r\n            label={t.farmerManagement.ifscCode}\r\n            type=\"text\"\r\n            value={formData.ifscCode}\r\n            onChange={(value) => setFormData({ ...formData, ifscCode: value.toUpperCase() })}\r\n            placeholder={t.farmerManagement.enterIfscCode}\r\n            colSpan={1}\r\n          />\r\n          \r\n          <FormSelect\r\n            label={t.farmerManagement.status}\r\n            value={formData.status}\r\n            onChange={(value) => setFormData({ ...formData, status: value })}\r\n            options={[\r\n              { value: 'active', label: t.farmerManagement.active },\r\n              { value: 'inactive', label: t.farmerManagement.inactive },\r\n              { value: 'suspended', label: t.farmerManagement.suspended },\r\n              { value: 'maintenance', label: t.farmerManagement.maintenance }\r\n            ]}\r\n            colSpan={1}\r\n          />\r\n          \r\n          <FormInput\r\n            label={t.farmerManagement.notes}\r\n            type=\"text\"\r\n            value={formData.notes}\r\n            onChange={(value) => setFormData({ ...formData, notes: value })}\r\n            placeholder={t.farmerManagement.enterNotes}\r\n            colSpan={2}\r\n          />\r\n          </FormGrid>\r\n          \r\n          <FormActions\r\n            onCancel={closeEditModal}\r\n            submitText={t.farmerManagement.updateFarmer}\r\n            isLoading={isSubmitting}\r\n            isSubmitDisabled={\r\n              !formData.societyId || \r\n              !formData.machineId || \r\n              !formData.farmerId || \r\n              !formData.farmerName ||\r\n              Object.values(fieldErrors).some(error => error !== '')\r\n            }\r\n            submitType=\"submit\"\r\n          />\r\n        </form>\r\n      </FormModal>\r\n\r\n      {/* Bulk Upload Modal */}\r\n      <FormModal\r\n        isOpen={showBulkModal}\r\n        onClose={() => {\r\n          setShowBulkModal(false);\r\n          setBulkSocietyId('');\r\n          setSelectedFile(null);\r\n        }}\r\n        title=\"Bulk Upload Farmers\"\r\n      >\r\n        <form onSubmit={handleBulkUpload} className=\"space-y-4\">\r\n          <FormSelect\r\n            label=\"Default Society\"\r\n            value={bulkSocietyId}\r\n            onChange={(value) => setBulkSocietyId(value)}\r\n            options={[\r\n              ...societies.map(society => ({\r\n                value: society.id.toString(),\r\n                label: `${society.name} (${society.society_id})`\r\n              }))\r\n            ]}\r\n            placeholder=\"Select Society\"\r\n            required\r\n          />\r\n          <div className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n            <p>This society will be assigned to all farmers that don&apos;t have a society_id in the CSV</p>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              CSV File\r\n            </label>\r\n            <input\r\n              type=\"file\"\r\n              accept=\".csv\"\r\n              onChange={(e) => setSelectedFile(e.target.files?.[0] || null)}\r\n              className=\"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n          <div className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n            <p className=\"font-medium mb-2\">CSV Format Requirements:</p>\r\n            <ul className=\"list-disc list-inside space-y-1\">\r\n              <li>Headers: ID, RF-ID, NAME, MOBILE, SMS, BONUS (minimum)</li>\r\n              <li>Optional: ADDRESS, BANK_NAME, ACCOUNT_NUMBER, IFSC_CODE, SOCIETY_ID, MACHINE-ID</li>\r\n              <li>SMS values: ON or OFF</li>\r\n              <li>MACHINE-ID should be a valid machine ID (optional)</li>\r\n              <li>All farmers must have a society - either from CSV SOCIETY_ID or the default above</li>\r\n              <li>File should be UTF-8 encoded</li>\r\n            </ul>\r\n          </div>\r\n          \r\n          <FormActions\r\n            onCancel={() => setShowBulkModal(false)}\r\n            submitText=\"Upload Farmers\"\r\n            isLoading={isSubmitting}\r\n            isSubmitDisabled={!selectedFile || !bulkSocietyId}\r\n            submitType=\"submit\"\r\n          />\r\n        </form>\r\n      </FormModal>\r\n\r\n      {/* Bulk Delete Confirmation Modal */}\r\n      <BulkDeleteConfirmModal\r\n        isOpen={showDeleteConfirm}\r\n        onClose={() => setShowDeleteConfirm(false)}\r\n        onConfirm={handleBulkDelete}\r\n        itemCount={selectedFarmers.size}\r\n        itemType=\"farmer\"\r\n        hasFilters={statusFilter !== 'all' || dairyFilter.length > 0 || bmcFilter.length > 0 || societyFilter.length > 0}\r\n      />\r\n\r\n      {/* CSV Upload Modal */}\r\n      <CSVUploadModal\r\n        isOpen={showCSVUpload}\r\n        onClose={() => setShowCSVUpload(false)}\r\n        societies={societies}\r\n        onUploadComplete={() => {\r\n          fetchFarmers(); // Refresh the farmer list\r\n          setSuccess('CSV upload completed successfully!');\r\n        }}\r\n      />\r\n\r\n      {/* Column Selection Modal */}\r\n      <ColumnSelectionModal\r\n        isOpen={showColumnSelection}\r\n        onClose={() => setShowColumnSelection(false)}\r\n        onDownload={handleDownloadWithColumns}\r\n        availableColumns={getFarmerColumns().map(col => ({\r\n          key: col.key,\r\n          label: col.header,\r\n          required: ['farmerId'].includes(col.key) // Make farmer ID required\r\n        }))}\r\n        defaultColumns={['farmerId', 'rfId', 'farmerName', 'contactNumber', 'smsEnabled', 'bonus']}\r\n        title=\"Select Columns for Farmer Download\"\r\n        isDownloading={isDownloading}\r\n      />\r\n\r\n      {/* Floating Bulk Actions Toolbar */}\r\n      <BulkActionsToolbar\r\n        selectedCount={selectedFarmers.size}\r\n        totalCount={farmers.length}\r\n        onBulkDelete={() => setShowDeleteConfirm(true)}\r\n        onBulkDownload={handleBulkDownload}\r\n        onBulkStatusUpdate={handleBulkStatusUpdate}\r\n        onClearSelection={() => {\r\n          setSelectedFarmers(new Set());\r\n          setSelectedSocieties(new Set());\r\n          setSelectAll(false);\r\n        }}\r\n        itemType=\"farmer\"\r\n        showStatusUpdate={true}\r\n        currentBulkStatus={bulkStatus}\r\n        onBulkStatusChange={(status) => setBulkStatus(status as typeof bulkStatus)}\r\n      />\r\n\r\n      {/* Single Farmer Delete Confirmation */}\r\n      <ConfirmDeleteModal\r\n        isOpen={showSingleDeleteConfirm}\r\n        onClose={() => {\r\n          setShowSingleDeleteConfirm(false);\r\n          setFarmerToDelete(null);\r\n        }}\r\n        onConfirm={confirmDeleteFarmer}\r\n        itemName={farmerToDelete?.farmerId || ''}\r\n        title=\"Delete Farmer\"\r\n        message=\"Are you sure you want to permanently delete farmer\"\r\n        confirmText={t.common.delete}\r\n        cancelText={t.common.cancel}\r\n      />\r\n\r\n      {/* Floating Action Button */}\r\n      <FloatingActionButton\r\n        actions={[\r\n          {\r\n            icon: <Plus className=\"w-6 h-6 text-white\" />,\r\n            label: t.farmerManagement.addFarmer,\r\n            onClick: openAddModal,\r\n            color: 'bg-gradient-to-br from-emerald-500 to-emerald-600'\r\n          },\r\n          {\r\n            icon: <Upload className=\"w-6 h-6 text-white\" />,\r\n            label: t.farmerManagement.uploadCSV,\r\n            onClick: () => setShowCSVUpload(true),\r\n            color: 'bg-gradient-to-br from-blue-500 to-blue-600'\r\n          }\r\n        ]}\r\n      />\r\n\r\n      {/* Graph Modal */}\r\n      {showGraphModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <BarChart3 className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\r\n                <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n                  {graphMetric === 'quantity' && 'Top Collectors - Last 30 Days'}\r\n                  {graphMetric === 'revenue' && 'Top Earners - Last 30 Days'}\r\n                  {graphMetric === 'fat' && 'Best Fat Percentage - Last 30 Days'}\r\n                  {graphMetric === 'snf' && 'Best SNF Percentage - Last 30 Days'}\r\n                  {graphMetric === 'collections' && 'Most Active Farmers - Last 30 Days'}\r\n                  {graphMetric === 'rate' && 'Best Rates - Last 30 Days'}\r\n                </h2>\r\n              </div>\r\n              <button\r\n                onClick={() => setShowGraphModal(false)}\r\n                className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\r\n              >\r\n                <X className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Graph Content */}\r\n            <div className=\"flex-1 overflow-y-auto p-6\">\r\n              {(() => {\r\n                const getLineColor = () => {\r\n                  switch (graphMetric) {\r\n                    case 'quantity': return '#10b981';\r\n                    case 'revenue': return '#3b82f6';\r\n                    case 'fat': return '#8b5cf6';\r\n                    case 'snf': return '#f59e0b';\r\n                    case 'collections': return '#ec4899';\r\n                    case 'rate': return '#6366f1';\r\n                    default: return '#6b7280';\r\n                  }\r\n                };\r\n\r\n                const getYAxisLabel = () => {\r\n                  switch (graphMetric) {\r\n                    case 'quantity': return 'Quantity (L)';\r\n                    case 'revenue': return 'Revenue (â‚¹)';\r\n                    case 'fat': return 'Fat %';\r\n                    case 'snf': return 'SNF %';\r\n                    case 'collections': return 'Collections';\r\n                    case 'rate': return 'Rate (â‚¹/L)';\r\n                    default: return 'Value';\r\n                  }\r\n                };\r\n\r\n                const CustomTooltip = ({ active, payload }: {\r\n                  active?: boolean;\r\n                  payload?: Array<{\r\n                    payload: { name: string; farmerId: string; societyName: string; value: number };\r\n                  }>;\r\n                }) => {\r\n                  if (active && payload && payload.length) {\r\n                    const data = payload[0].payload;\r\n                    return (\r\n                      <div className=\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700\">\r\n                        <p className=\"font-bold text-gray-900 dark:text-white mb-1\">{data.name}</p>\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">ID: {data.farmerId}</p>\r\n                        {data.societyName && (\r\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">{data.societyName}</p>\r\n                        )}\r\n                        <p className=\"font-semibold\" style={{ color: getLineColor() }}>\r\n                          {graphMetric === 'revenue' && 'â‚¹'}\r\n                          {data.value.toFixed(2)}\r\n                          {graphMetric === 'fat' || graphMetric === 'snf' ? '%' : ''}\r\n                          {graphMetric === 'quantity' ? ' L' : ''}\r\n                          {graphMetric === 'rate' ? '/L' : ''}\r\n                        </p>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  return null;\r\n                };\r\n\r\n                return graphData.length > 0 ? (\r\n                  <div className=\"w-full h-[500px]\">\r\n                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                      <LineChart data={graphData} margin={{ top: 5, right: 30, left: 20, bottom: 80 }}>\r\n                        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" className=\"dark:stroke-gray-700\" />\r\n                        <XAxis \r\n                          dataKey=\"name\" \r\n                          angle={-45}\r\n                          textAnchor=\"end\"\r\n                          height={100}\r\n                          interval={0}\r\n                          tick={{ fontSize: 11 }}\r\n                          stroke=\"#6b7280\"\r\n                          label={{ \r\n                            value: 'Farmer Name', \r\n                            position: 'insideBottom', \r\n                            offset: -5,\r\n                            style: { fontSize: 13, fontWeight: 500, fill: '#9ca3af' }\r\n                          }}\r\n                        />\r\n                        <YAxis \r\n                          label={{ \r\n                            value: getYAxisLabel(), \r\n                            angle: -90, \r\n                            position: 'insideLeft',\r\n                            style: { fontSize: 14, fontWeight: 600 }\r\n                          }}\r\n                          tick={{ fontSize: 12 }}\r\n                          stroke=\"#6b7280\"\r\n                        />\r\n                        <Tooltip content={<CustomTooltip />} />\r\n                        <Line \r\n                          type=\"monotone\" \r\n                          dataKey=\"value\" \r\n                          stroke={getLineColor()} \r\n                          strokeWidth={3}\r\n                          dot={{ fill: getLineColor(), r: 5 }}\r\n                          activeDot={{ r: 7 }}\r\n                          name={getYAxisLabel()}\r\n                        />\r\n                      </LineChart>\r\n                    </ResponsiveContainer>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-12\">\r\n                    <BarChart3 className=\"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4\" />\r\n                    <p className=\"text-gray-500 dark:text-gray-400\">No data available for the last 30 days</p>\r\n                  </div>\r\n                );\r\n              })()}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\n// Wrapper component with Suspense boundary for useSearchParams\r\nconst FarmerManagementWrapper = () => {\r\n  return (\r\n    <Suspense fallback={\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500\"></div>\r\n      </div>\r\n    }>\r\n      <FarmerManagement />\r\n    </Suspense>\r\n  );\r\n};\r\n\r\nexport default FarmerManagementWrapper;","import jsPDF from 'jspdf';\r\n\r\n// jsPDF and autoTable will be imported as needed\r\n\r\n// Types for farmer download functions\r\ninterface FarmerDownloadData {\r\n  farmerId: string;\r\n  rfId?: string;\r\n  farmerName: string;\r\n  contactNumber?: string;\r\n  email?: string;\r\n  societyId?: string | number;\r\n  status: string;\r\n  smsEnabled: boolean;\r\n  bonus?: number;\r\n  address?: string;\r\n  bankName?: string;\r\n  bankAccountNumber?: string;\r\n  ifscCode?: string;\r\n  notes?: string;\r\n}\r\n\r\ninterface SocietyDownloadData {\r\n  id: number;\r\n  name: string;\r\n  society_id: string;\r\n}\r\n\r\ninterface SocietyInfo {\r\n  name: string;\r\n  id: string;\r\n}\r\n\r\nexport interface DownloadableData {\r\n  [key: string]: unknown;\r\n}\r\n\r\nexport interface ColumnConfig {\r\n  key: string;\r\n  header: string;\r\n  width?: number;\r\n  formatter?: (value: unknown) => string;\r\n}\r\n\r\n/**\r\n * Download data as CSV file\r\n */\r\nexport const downloadAsCSV = (\r\n  data: DownloadableData[],\r\n  columns: ColumnConfig[],\r\n  filename: string\r\n) => {\r\n  if (data.length === 0) {\r\n    alert('No data to download');\r\n    return;\r\n  }\r\n\r\n  // Create CSV headers\r\n  const headers = columns.map(col => col.header);\r\n  \r\n  // Create CSV rows\r\n  const csvRows = data.map(item => {\r\n    return columns.map(col => {\r\n      const value = item[col.key];\r\n      const formattedValue = col.formatter ? col.formatter(value) : value;\r\n      // Escape CSV values that contain commas or quotes\r\n      const stringValue = String(formattedValue || '');\r\n      return stringValue.includes(',') || stringValue.includes('\"') \r\n        ? `\"${stringValue.replace(/\"/g, '\"\"')}\"` \r\n        : stringValue;\r\n    });\r\n  });\r\n\r\n  // Combine headers and rows\r\n  const csvContent = [headers, ...csvRows]\r\n    .map(row => row.join(','))\r\n    .join('\\n');\r\n\r\n  // Create and download file\r\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n  const url = window.URL.createObjectURL(blob);\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  link.download = `${filename}.csv`;\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  window.URL.revokeObjectURL(url);\r\n};\r\n\r\n/**\r\n * Download data as PDF file in landscape orientation\r\n */\r\nexport const downloadAsPDF = async (\r\n  data: DownloadableData[],\r\n  columns: ColumnConfig[],\r\n  filename: string,\r\n  title?: string,\r\n  additionalInfo?: string[]\r\n) => {\r\n  if (data.length === 0) {\r\n    alert('No data to download');\r\n    return;\r\n  }\r\n\r\n  // Dynamically import jspdf-autotable and get the autoTable function\r\n  const { default: autoTable } = await import('jspdf-autotable');\r\n\r\n  // Create new PDF document in landscape orientation\r\n  const doc = new jsPDF('landscape', 'pt', 'a4');\r\n  \r\n  // Modern color palette\r\n  const colors = {\r\n    primary: [41, 128, 185] as [number, number, number],      // Professional blue\r\n    secondary: [52, 73, 94] as [number, number, number],      // Dark blue-gray\r\n    accent: [231, 76, 60] as [number, number, number],        // Red accent\r\n    light: [236, 240, 241] as [number, number, number],       // Light gray\r\n    text: [44, 62, 80] as [number, number, number],           // Dark text\r\n    border: [189, 195, 199] as [number, number, number]       // Light border\r\n  };\r\n\r\n  // Page dimensions and margins\r\n  const pdfPageWidth = 842;\r\n  const pdfPageHeight = 595;\r\n  const margin = 50;\r\n  const headerHeight = 130; // Increased for centered layout\r\n\r\n  // Modern header background\r\n  doc.setFillColor(...colors.light);\r\n  doc.rect(0, 0, pdfPageWidth, headerHeight, 'F');\r\n  \r\n  // Header accent bar\r\n  doc.setFillColor(...colors.primary);\r\n  doc.rect(0, 0, pdfPageWidth, 8, 'F');\r\n\r\n  // Add logo in left top corner with proper aspect ratio\r\n  try {\r\n    const logoResponse = await fetch('/fulllogo.png');\r\n    const logoBlob = await logoResponse.blob();\r\n    const logoBase64 = await new Promise<string>((resolve) => {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => resolve(reader.result as string);\r\n      reader.readAsDataURL(logoBlob);\r\n    });\r\n    \r\n    // Logo positioned in left top corner with proper aspect ratio (don't stretch)\r\n    const logoWidth = 120;\r\n    const logoHeight = 40;\r\n    doc.addImage(logoBase64, 'PNG', margin, 25, logoWidth, logoHeight);\r\n  } catch (error) {\r\n    console.warn('Could not load logo:', error);\r\n  }\r\n\r\n  // Modern title design with center alignment\r\n  if (title) {\r\n    doc.setTextColor(...colors.secondary);\r\n    doc.setFontSize(24);\r\n    doc.setFont('helvetica', 'bold');\r\n    \r\n    // Title centered below logo\r\n    const titleY = 80;\r\n    const titleWidth = doc.getTextWidth(title);\r\n    const titleX = (pdfPageWidth - titleWidth) / 2;\r\n    doc.text(title, titleX, titleY);\r\n    \r\n    // Subtitle/tagline area - also centered\r\n    doc.setTextColor(...colors.text);\r\n    doc.setFontSize(11);\r\n    doc.setFont('helvetica', 'normal');\r\n    const subtitle = 'Comprehensive Farmer Management Report';\r\n    const subtitleWidth = doc.getTextWidth(subtitle);\r\n    const subtitleX = (pdfPageWidth - subtitleWidth) / 2;\r\n    doc.text(subtitle, subtitleX, titleY + 20);\r\n  }\r\n\r\n  // Document metadata section with modern card-like design\r\n  let yOffset = headerHeight + 30;\r\n  \r\n  if (additionalInfo && additionalInfo.length > 0) {\r\n    // Info card background\r\n    const cardHeight = additionalInfo.length * 18 + 25;\r\n    doc.setFillColor(...colors.light);\r\n    doc.setDrawColor(...colors.border);\r\n    doc.setLineWidth(0.5);\r\n    doc.roundedRect(margin, yOffset - 15, pdfPageWidth - (margin * 2), cardHeight, 5, 5, 'FD');\r\n    \r\n    // Info header - centered\r\n    doc.setTextColor(...colors.primary);\r\n    doc.setFontSize(12);\r\n    doc.setFont('helvetica', 'bold');\r\n    const headerText = 'Report Information';\r\n    const headerWidth = doc.getTextWidth(headerText);\r\n    const headerX = (pdfPageWidth - headerWidth) / 2;\r\n    doc.text(headerText, headerX, yOffset + 5);\r\n    \r\n    // Info content with centered alignment\r\n    doc.setTextColor(...colors.text);\r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'normal');\r\n    \r\n    additionalInfo.forEach((info, index) => {\r\n      const infoY = yOffset + 25 + (index * 18);\r\n      \r\n      // Center each info line\r\n      const infoWidth = doc.getTextWidth(info);\r\n      const infoX = (pdfPageWidth - infoWidth) / 2;\r\n      \r\n      // Add bullet point before centered text\r\n      doc.setFillColor(...colors.primary);\r\n      doc.circle(infoX - 15, infoY - 3, 2, 'F');\r\n      \r\n      // Add centered info text\r\n      doc.text(info, infoX, infoY);\r\n    });\r\n    \r\n    yOffset += cardHeight + 20;\r\n  }\r\n\r\n  // Prepare table data\r\n  const tableHeaders = columns.map(col => col.header);\r\n  const tableData = data.map(item => {\r\n    return columns.map(col => {\r\n      const value = item[col.key];\r\n      const formattedValue = col.formatter ? col.formatter(value) : value;\r\n      return String(formattedValue || '');\r\n    });\r\n  });\r\n\r\n  // Calculate column widths\r\n  const tableMargins = 100; // Left + right margins for table\r\n  const availableWidth = pdfPageWidth - tableMargins;\r\n  \r\n  const columnWidths = columns.map(col => {\r\n    if (col.width) return col.width;\r\n    // Auto-calculate width based on header length and content\r\n    const headerLength = col.header.length;\r\n    const maxContentLength = Math.max(\r\n      ...tableData.map(row => {\r\n        const cellIndex = columns.indexOf(col);\r\n        return String(row[cellIndex] || '').length;\r\n      })\r\n    );\r\n    const maxLength = Math.max(headerLength, maxContentLength);\r\n    return Math.max(60, Math.min(150, maxLength * 6)); // 6 points per character\r\n  });\r\n\r\n  // Adjust widths to fit page\r\n  const totalWidth = columnWidths.reduce((sum, width) => sum + width, 0);\r\n  if (totalWidth > availableWidth) {\r\n    const scale = availableWidth / totalWidth;\r\n    columnWidths.forEach((width, index) => {\r\n      columnWidths[index] = width * scale;\r\n    });\r\n  }\r\n\r\n  // Modern table design\r\n  autoTable(doc, {\r\n    head: [tableHeaders],\r\n    body: tableData,\r\n    startY: yOffset,\r\n    margin: { left: margin, right: margin },\r\n    columnStyles: columns.reduce((styles: { [key: number]: { cellWidth?: number } }, col, index) => {\r\n      styles[index] = { cellWidth: columnWidths[index] };\r\n      return styles;\r\n    }, {}),\r\n    styles: {\r\n      fontSize: 9,\r\n      cellPadding: { top: 8, right: 6, bottom: 8, left: 6 },\r\n      lineColor: colors.border,\r\n      lineWidth: 0.5,\r\n      textColor: colors.text,\r\n      font: 'helvetica',\r\n      overflow: 'linebreak',\r\n      valign: 'middle',\r\n      halign: 'center'\r\n    },\r\n    headStyles: {\r\n      fillColor: colors.primary,\r\n      textColor: [255, 255, 255],\r\n      fontStyle: 'bold',\r\n      fontSize: 10,\r\n      cellPadding: { top: 12, right: 8, bottom: 12, left: 8 },\r\n      halign: 'center',\r\n      valign: 'middle'\r\n    },\r\n    alternateRowStyles: {\r\n      fillColor: [249, 250, 251] as [number, number, number], // Light gray\r\n    },\r\n    tableLineColor: colors.border,\r\n    tableLineWidth: 0.5\r\n  });\r\n\r\n  // Modern footer design\r\n  const footerY = pdfPageHeight - 40;\r\n  \r\n  // Footer background bar\r\n  doc.setFillColor(...colors.light);\r\n  doc.rect(0, footerY - 10, pdfPageWidth, 50, 'F');\r\n  \r\n  // Footer accent line\r\n  doc.setDrawColor(...colors.primary);\r\n  doc.setLineWidth(2);\r\n  doc.line(margin, footerY - 5, pdfPageWidth - margin, footerY - 5);\r\n  \r\n  // Footer content - all centered\r\n  doc.setTextColor(...colors.text);\r\n  doc.setFontSize(8);\r\n  doc.setFont('helvetica', 'normal');\r\n  \r\n  // Generation info - centered\r\n  const currentDate = new Date().toLocaleString('en-US', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n    hour12: true\r\n  });\r\n  const dateText = `Generated on: ${currentDate}`;\r\n  const dateWidth = doc.getTextWidth(dateText);\r\n  doc.text(dateText, (pdfPageWidth - dateWidth) / 2, footerY + 10);\r\n  \r\n  // Company info - centered\r\n  doc.setFont('helvetica', 'bold');\r\n  const companyText = 'Poornasree Equipments Cloud â€¢ Page 1';\r\n  const companyWidth = doc.getTextWidth(companyText);\r\n  doc.text(companyText, (pdfPageWidth - companyWidth) / 2, footerY + 22);\r\n  \r\n  // Confidentiality notice - centered\r\n  doc.setFont('helvetica', 'italic');\r\n  doc.setFontSize(7);\r\n  const confidentialText = 'This document contains confidential information';\r\n  const confidentialWidth = doc.getTextWidth(confidentialText);\r\n  doc.text(confidentialText, (pdfPageWidth - confidentialWidth) / 2, footerY + 32);\r\n\r\n  // Save the PDF\r\n  doc.save(`${filename}.pdf`);\r\n};\r\n\r\n/**\r\n * Format date for display\r\n */\r\nexport const formatDate = (dateString: string | null | undefined): string => {\r\n  if (!dateString) return '';\r\n  try {\r\n    return new Date(dateString).toLocaleDateString('en-IN');\r\n  } catch {\r\n    return '';\r\n  }\r\n};\r\n\r\n/**\r\n * Format currency for display\r\n */\r\nexport const formatCurrency = (amount: number | null | undefined): string => {\r\n  if (amount === null || amount === undefined) return '0';\r\n  return amount.toLocaleString('en-IN');\r\n};\r\n\r\n/**\r\n * Format status for display\r\n */\r\nexport const formatStatus = (status: string): string => {\r\n  return status.charAt(0).toUpperCase() + status.slice(1);\r\n}\r\n\r\n/**\r\n * Farmer-specific download functions\r\n */\r\n\r\n// Import types at the top if not already imported\r\n// import { Farmer, Society } from '@/types';\r\n\r\n// Get all available farmer columns\r\nexport const getFarmerColumns = (): ColumnConfig[] => [\r\n  { key: 'farmerId', header: 'Farmer ID' },\r\n  { key: 'rfId', header: 'RF-ID' },\r\n  { key: 'farmerName', header: 'Farmer Name' },\r\n  { key: 'contactNumber', header: 'Contact Number' },\r\n  { key: 'email', header: 'Email' },\r\n  { key: 'societyInfo', header: 'Society', formatter: (society: unknown) => {\r\n    const s = society as SocietyInfo;\r\n    return s ? `${s.name} (${s.id})` : '';\r\n  }},\r\n  { key: 'status', header: 'Status', formatter: (status: unknown) => formatStatus(status as string) },\r\n  { key: 'smsEnabled', header: 'SMS Enabled', formatter: (value: unknown) => (value as boolean) ? 'ON' : 'OFF' },\r\n  { key: 'bonus', header: 'Bonus', formatter: (amount: unknown) => formatCurrency(amount as number | null | undefined) },\r\n  { key: 'address', header: 'Address' },\r\n  { key: 'bankName', header: 'Bank Name' },\r\n  { key: 'bankAccountNumber', header: 'Account Number' },\r\n  { key: 'ifscCode', header: 'IFSC Code' },\r\n  { key: 'notes', header: 'Notes' }\r\n];\r\n\r\nexport const downloadFarmersAsCSV = (\r\n  farmers: FarmerDownloadData[],\r\n  societies: SocietyDownloadData[],\r\n  filters: { status?: string; society?: string } = {},\r\n  selectedColumns?: string[]\r\n) => {\r\n  const getSocietyInfo = (societyId: string | number | undefined): SocietyInfo => {\r\n    if (!societyId) return { name: '', id: '' };\r\n    const society = societies.find(s => s.id.toString() === societyId.toString());\r\n    return society ? { name: society.name, id: society.society_id } : { name: '', id: '' };\r\n  };\r\n\r\n  // Get all available columns\r\n  const allColumns = getFarmerColumns();\r\n  \r\n  // Use selected columns or default to all columns\r\n  const columns = selectedColumns && selectedColumns.length > 0 \r\n    ? allColumns.filter(col => selectedColumns.includes(col.key))\r\n    : allColumns;\r\n\r\n  const processedData = farmers.map(farmer => ({\r\n    farmerId: farmer.farmerId || '',\r\n    rfId: farmer.rfId || '', // Add RF-ID field\r\n    farmerName: farmer.farmerName || '',\r\n    contactNumber: farmer.contactNumber || '',\r\n    email: farmer.email || '',\r\n    societyInfo: getSocietyInfo(farmer.societyId),\r\n    status: farmer.status || 'active',\r\n    smsEnabled: farmer.smsEnabled,\r\n    bonus: farmer.bonus || 0,\r\n    address: farmer.address || '',\r\n    bankName: farmer.bankName || '',\r\n    bankAccountNumber: farmer.bankAccountNumber || '',\r\n    ifscCode: farmer.ifscCode || '',\r\n    notes: farmer.notes || ''\r\n  }));\r\n\r\n  const filterSuffix = getFilterSuffix(filters);\r\n  const filename = `farmers_export${filterSuffix}_${new Date().toISOString().split('T')[0]}`;\r\n\r\n  downloadAsCSV(processedData, columns, filename);\r\n};\r\n\r\nexport const downloadFarmersAsPDF = async (\r\n  farmers: FarmerDownloadData[],\r\n  societies: SocietyDownloadData[],\r\n  filters: { status?: string; society?: string; selection?: string } = {},\r\n  selectedColumns?: string[]\r\n) => {\r\n  const getSocietyInfo = (societyId: string | number | undefined): SocietyInfo => {\r\n    if (!societyId) return { name: '', id: '' };\r\n    const society = societies.find(s => s.id.toString() === societyId.toString());\r\n    return society ? { name: society.name, id: society.society_id } : { name: '', id: '' };\r\n  };\r\n\r\n  // Define all columns with PDF-specific configurations (widths optimized for landscape)\r\n  const allColumns: ColumnConfig[] = [\r\n    { key: 'farmerId', header: 'ID', width: 60 },\r\n    { key: 'rfId', header: 'RF-ID', width: 60 },\r\n    { key: 'farmerName', header: 'Name', width: 120 },\r\n    { key: 'contactNumber', header: 'Contact', width: 80 },\r\n    { key: 'email', header: 'Email', width: 80 },\r\n    { key: 'societyInfo', header: 'Society', width: 120, formatter: (society: unknown) => {\r\n      const s = society as SocietyInfo;\r\n      return s ? `${s.name}` : '';\r\n    }},\r\n    { key: 'status', header: 'Status', width: 60, formatter: (status: unknown) => formatStatus(status as string) },\r\n    { key: 'smsEnabled', header: 'SMS', width: 40, formatter: (value: unknown) => (value as boolean) ? 'ON' : 'OFF' },\r\n    { key: 'bonus', header: 'Bonus', width: 60, formatter: (amount: unknown) => formatCurrency(amount as number | null | undefined) },\r\n    { key: 'address', header: 'Address', width: 100 },\r\n    { key: 'bankName', header: 'Bank', width: 80 },\r\n    { key: 'bankAccountNumber', header: 'Account', width: 80 },\r\n    { key: 'ifscCode', header: 'IFSC', width: 60 },\r\n    { key: 'notes', header: 'Notes', width: 80 }\r\n  ];\r\n\r\n  // Use selected columns or default to essential columns for PDF\r\n  const defaultPDFColumns = ['farmerId', 'rfId', 'farmerName', 'contactNumber', 'societyInfo', 'status', 'smsEnabled', 'bonus'];\r\n  const columns = selectedColumns && selectedColumns.length > 0 \r\n    ? allColumns.filter(col => selectedColumns.includes(col.key))\r\n    : allColumns.filter(col => defaultPDFColumns.includes(col.key));\r\n\r\n  const processedData = farmers.map(farmer => ({\r\n    farmerId: farmer.farmerId || '',\r\n    rfId: farmer.rfId || '',\r\n    farmerName: farmer.farmerName || '',\r\n    contactNumber: farmer.contactNumber || '',\r\n    email: farmer.email || '',\r\n    societyInfo: getSocietyInfo(farmer.societyId),\r\n    status: farmer.status || 'active',\r\n    smsEnabled: farmer.smsEnabled,\r\n    bonus: farmer.bonus || 0,\r\n    address: farmer.address || '',\r\n    bankName: farmer.bankName || '',\r\n    bankAccountNumber: farmer.bankAccountNumber || '',\r\n    ifscCode: farmer.ifscCode || '',\r\n    notes: farmer.notes || ''\r\n  }));\r\n\r\n  const filterSuffix = getFilterSuffix(filters);\r\n  const filterText = getFilterText(filters, societies);\r\n  \r\n  const title = 'Farmers Report';\r\n  const additionalInfo = [\r\n    `Generated on: ${new Date().toLocaleString()}`,\r\n    `Total Records: ${farmers.length}`,\r\n    ...(filterText ? [filterText] : [])\r\n  ];\r\n  \r\n  const filename = `farmers_report${filterSuffix}_${new Date().toISOString().split('T')[0]}`;\r\n\r\n  await downloadAsPDF(processedData, columns, filename, title, additionalInfo);\r\n};\r\n\r\n// Helper functions for filters\r\nconst getFilterSuffix = (filters: { status?: string; society?: string; selection?: string }): string => {\r\n  const parts: string[] = [];\r\n  \r\n  if (filters.status && filters.status !== 'all') {\r\n    parts.push(filters.status);\r\n  }\r\n  \r\n  if (filters.society && filters.society !== 'all') {\r\n    parts.push('society_filtered');\r\n  }\r\n  \r\n  if (filters.selection) {\r\n    parts.push(filters.selection);\r\n  }\r\n  \r\n  return parts.length > 0 ? `_${parts.join('_')}` : '';\r\n};\r\n\r\nconst getFilterText = (filters: { status?: string; society?: string; selection?: string }, societies: SocietyDownloadData[]): string => {\r\n  const parts: string[] = [];\r\n  \r\n  if (filters.status && filters.status !== 'all') {\r\n    parts.push(`Status: ${formatStatus(filters.status)}`);\r\n  }\r\n  \r\n  if (filters.society && filters.society !== 'all') {\r\n    const society = societies.find(s => s.id.toString() === filters.society);\r\n    if (society) {\r\n      parts.push(`Society: ${society.name} (${society.society_id})`);\r\n    }\r\n  }\r\n  \r\n  if (filters.selection) {\r\n    parts.push(`Selection: ${filters.selection.replace('-', ' ')}`);\r\n  }\r\n  \r\n  return parts.length > 0 ? `Filters Applied: ${parts.join(', ')}` : '';\r\n};;"],"names":[],"mappings":"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"}