{"version":3,"sources":["turbopack:///[project]/src/app/admin/dairy/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useUser } from '@/contexts/UserContext';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\nimport { formatPhoneInput, validatePhoneOnBlur } from '@/lib/validation/phoneValidation';\r\nimport { validateEmailQuick } from '@/lib/emailValidation';\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer\r\n} from 'recharts';\r\nimport { \r\n  Milk, \r\n  Plus,\r\n  Edit3,\r\n  MapPin,\r\n  Phone,\r\n  Mail,\r\n  User,\r\n  Calendar,\r\n  Activity,\r\n  Building2,\r\n  Trash2,\r\n  Factory,\r\n  Users,\r\n  TrendingUp,\r\n  Award,\r\n  Droplets,\r\n  Eye,\r\n  EyeOff,\r\n  BarChart3,\r\n  X\r\n} from 'lucide-react';\r\nimport { \r\n  FlowerSpinner, \r\n  LoadingSpinner,\r\n  FormModal, \r\n  FormInput, \r\n  FormSelect, \r\n  FormActions, \r\n  FormGrid,\r\n  PageHeader,\r\n  StatusMessage,\r\n  StatsCard,\r\n  FilterControls,\r\n  EmptyState,\r\n  StatusDropdown\r\n} from '@/components';\r\nimport DeleteDairyModal from '@/components/modals/DeleteDairyModal';\r\nimport FloatingActionButton from '@/components/management/FloatingActionButton';\r\nimport NavigationConfirmModal from '@/components/NavigationConfirmModal';\r\nimport TransferBMCsModal from '@/components/modals/TransferBMCsModal';\r\n\r\ninterface Dairy {\r\n  id: number;\r\n  name: string;\r\n  dairyId: string;\r\n  location?: string;\r\n  contactPerson?: string;\r\n  phone?: string;\r\n  email?: string;\r\n  capacity?: number;\r\n  status: 'active' | 'inactive' | 'maintenance';\r\n  monthlyTarget?: number;\r\n  createdAt: string;\r\n  lastActivity?: string;\r\n  bmcCount?: number;\r\n  societyCount?: number;\r\n  totalCollections30d?: number;\r\n  totalQuantity30d?: number;\r\n  totalAmount30d?: number;\r\n  weightedFat30d?: number;\r\n  weightedSnf30d?: number;\r\n  weightedClr30d?: number;\r\n  weightedWater30d?: number;\r\n}\r\n\r\ninterface DairyFormData {\r\n  name: string;\r\n  dairyId: string;\r\n  password: string;\r\n  location: string;\r\n  contactPerson: string;\r\n  phone: string;\r\n  email: string;\r\n  capacity: string;\r\n  status: 'active' | 'inactive' | 'maintenance';\r\n  monthlyTarget: string;\r\n}\r\n\r\nconst initialFormData: DairyFormData = {\r\n  name: '',\r\n  dairyId: '',\r\n  password: '',\r\n  location: '',\r\n  contactPerson: '',\r\n  phone: '',\r\n  email: '',\r\n  capacity: '',\r\n  status: 'active',\r\n  monthlyTarget: ''\r\n};\r\n\r\n// Helper function to highlight matching text in search results\r\nconst highlightText = (text: string | number | null | undefined, searchQuery: string) => {\r\n  if (!text && text !== 0) return text || '';\r\n  if (!searchQuery) return text;\r\n  \r\n  const textStr = text.toString();\r\n  const regex = new RegExp(`(${searchQuery.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\r\n  const parts = textStr.split(regex);\r\n  \r\n  return parts.map((part, index) => \r\n    regex.test(part) ? (\r\n      <span key={index} className=\"bg-yellow-200 dark:bg-yellow-800 px-0.5 rounded\">\r\n        {part}\r\n      </span>\r\n    ) : (\r\n      part\r\n    )\r\n  );\r\n};\r\n\r\nexport default function DairyManagement() {\r\n  const router = useRouter();\r\n  const { user } = useUser();\r\n  const { t } = useLanguage();\r\n  \r\n  // State management\r\n  const [dairies, setDairies] = useState<Dairy[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [showEditForm, setShowEditForm] = useState(false);\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [selectedDairy, setSelectedDairy] = useState<Dairy | null>(null);\r\n  const [formData, setFormData] = useState<DairyFormData>(initialFormData);\r\n  const [formLoading, setFormLoading] = useState(false);\r\n  const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'inactive' | 'maintenance'>('all');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [fieldErrors, setFieldErrors] = useState<{\r\n    dairyId?: string;\r\n    name?: string;\r\n    phone?: string;\r\n    email?: string;\r\n  }>({});\r\n  const [showGraphModal, setShowGraphModal] = useState(false);\r\n  const [graphMetric, setGraphMetric] = useState<'quantity' | 'revenue' | 'fat' | 'snf' | 'collections' | 'water'>('quantity');\r\n  const [showBmcsAlert, setShowBmcsAlert] = useState(false);\r\n  const [showSocietiesAlert, setShowSocietiesAlert] = useState(false);\r\n  const [dairyForNavigation, setDairyForNavigation] = useState<Dairy | null>(null);\r\n  const [showTransferModal, setShowTransferModal] = useState(false);\r\n  const [bmcsForTransfer, setBmcsForTransfer] = useState<Array<{ id: number; name: string; bmcId: string }>>([]);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [currentPassword, setCurrentPassword] = useState('');\r\n\r\n\r\n  // Fetch dairies\r\n  const fetchDairies = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) {\r\n        router.push('/login');\r\n        return;\r\n      }\r\n\r\n      const response = await fetch('/api/user/dairy', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (!response.ok) {\r\n        if (response.status === 401 || response.status === 403) {\r\n          localStorage.removeItem('authToken');\r\n          router.push('/login');\r\n          return;\r\n        }\r\n        throw new Error('Failed to fetch dairies');\r\n      }\r\n\r\n      const result = await response.json();\r\n      setDairies(result.data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching dairies:', error);\r\n      setError('Failed to load dairy data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [router]);\r\n\r\n  // Add new dairy\r\n  const handleAddDairy = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setFormLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/dairy', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          ...formData,\r\n          capacity: formData.capacity ? parseInt(formData.capacity) : undefined,\r\n          monthlyTarget: formData.monthlyTarget ? parseInt(formData.monthlyTarget) : undefined\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSuccess('Dairy added successfully!');\r\n        setShowAddForm(false);\r\n        setFormData(initialFormData);\r\n        await fetchDairies();\r\n        \r\n        // Clear success message after 3 seconds\r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        const errorResponse = await response.json();\r\n        const errorMessage = errorResponse.error || 'Failed to add dairy';\r\n        \r\n        // Clear previous field errors\r\n        setFieldErrors({});\r\n        \r\n        // Check for specific field errors\r\n        if (errorMessage.toLowerCase().includes('dairy id') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ dairyId: 'This Dairy ID already exists' });\r\n        } else if (errorMessage.toLowerCase().includes('dairy name') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ name: 'This Dairy name already exists' });\r\n        } else if (errorMessage.toLowerCase().includes('already exists')) {\r\n          // Generic duplicate error - could be dairy ID\r\n          setFieldErrors({ dairyId: 'This Dairy ID already exists' });\r\n        } else {\r\n          setError(errorMessage);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding dairy:', error);\r\n      setError('Failed to add dairy');\r\n    } finally {\r\n      setFormLoading(false);\r\n    }\r\n  };\r\n\r\n  // Open edit modal\r\n  const handleEditClick = async (dairy: Dairy) => {\r\n    setSelectedDairy(dairy);\r\n    setShowPassword(false);\r\n    setCurrentPassword('');\r\n    \r\n    // Fetch current password\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch(`/api/user/dairy/password?id=${dairy.id}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        let fetchedPassword = '';\r\n        if (result.data) {\r\n          if (typeof result.data === 'string') {\r\n            fetchedPassword = result.data;\r\n          } else if (typeof result.data === 'object' && result.data.password) {\r\n            fetchedPassword = String(result.data.password);\r\n          }\r\n        } else if (result.password) {\r\n          fetchedPassword = String(result.password);\r\n        }\r\n        \r\n        setCurrentPassword(fetchedPassword);\r\n        \r\n        setFormData({\r\n          name: dairy.name,\r\n          dairyId: dairy.dairyId,\r\n          password: fetchedPassword,\r\n          location: dairy.location || '',\r\n          contactPerson: dairy.contactPerson || '',\r\n          phone: dairy.phone || '',\r\n          email: dairy.email || '',\r\n          capacity: dairy.capacity?.toString() || '',\r\n          status: dairy.status || 'active',\r\n          monthlyTarget: dairy.monthlyTarget?.toString() || ''\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching password:', error);\r\n    }\r\n    \r\n    setShowEditForm(true);\r\n  };\r\n\r\n  // Update dairy\r\n  const handleUpdateDairy = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!selectedDairy) return;\r\n\r\n    setFormLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const updateData: {\r\n        id: number;\r\n        name: string;\r\n        location: string;\r\n        contactPerson: string;\r\n        phone: string;\r\n        email: string;\r\n        capacity?: number;\r\n        status?: 'active' | 'inactive' | 'maintenance';\r\n        monthlyTarget?: number;\r\n        password?: string;\r\n      } = {\r\n        id: selectedDairy.id,\r\n        name: formData.name,\r\n        location: formData.location,\r\n        contactPerson: formData.contactPerson,\r\n        phone: formData.phone,\r\n        email: formData.email,\r\n        capacity: formData.capacity ? parseInt(formData.capacity) : undefined,\r\n        status: formData.status,\r\n        monthlyTarget: formData.monthlyTarget ? parseInt(formData.monthlyTarget) : undefined\r\n      };\r\n\r\n      // Only include password if it was changed\r\n      if (formData.password && formData.password !== currentPassword) {\r\n        updateData.password = formData.password;\r\n      }\r\n\r\n      const response = await fetch('/api/user/dairy', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(updateData)\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSuccess('Dairy updated successfully!');\r\n        setShowEditForm(false);\r\n        setSelectedDairy(null);\r\n        setFormData(initialFormData);\r\n        await fetchDairies();\r\n        \r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        const errorResponse = await response.json();\r\n        const errorMessage = errorResponse.error || 'Failed to update dairy';\r\n        \r\n        // Clear previous field errors\r\n        setFieldErrors({});\r\n        \r\n        // Check for specific field errors\r\n        if (errorMessage.toLowerCase().includes('dairy name') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ name: 'This Dairy name already exists' });\r\n        } else if (errorMessage.toLowerCase().includes('already exists')) {\r\n          // Generic duplicate error - likely dairy name in edit mode\r\n          setFieldErrors({ name: 'This Dairy name already exists' });\r\n        } else {\r\n          setError(errorMessage);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating dairy:', error);\r\n      setError('Failed to update dairy');\r\n    } finally {\r\n      setFormLoading(false);\r\n    }\r\n  };\r\n\r\n  // Update dairy status\r\n  const handleStatusChange = async (dairy: Dairy, newStatus: 'active' | 'inactive' | 'maintenance') => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/dairy', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          id: dairy.id,\r\n          status: newStatus\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSuccess(`Status updated to ${newStatus}!`);\r\n        await fetchDairies();\r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        const error = await response.json();\r\n        setError(error.error || 'Failed to update status');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating status:', error);\r\n      setError('Failed to update status');\r\n    }\r\n  };\r\n\r\n  // Fetch BMCs for dairy\r\n  const fetchBMCsForDairy = async (dairyId: number) => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/bmc', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        const allBmcs = result.data || [];\r\n        const filteredBmcs = allBmcs.filter((b: { dairyFarmId: number }) => b.dairyFarmId === dairyId);\r\n        return filteredBmcs.map((b: { id: number; name: string; bmcId: string }) => ({\r\n          id: b.id,\r\n          name: b.name,\r\n          bmcId: b.bmcId\r\n        }));\r\n      }\r\n      return [];\r\n    } catch (error) {\r\n      console.error('Error fetching BMCs:', error);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  // Open delete confirmation modal\r\n  const handleDeleteClick = async (dairy: Dairy) => {\r\n    setSelectedDairy(dairy);\r\n    \r\n    // Fetch BMCs for this dairy\r\n    const bmcs = await fetchBMCsForDairy(dairy.id);\r\n    setBmcsForTransfer(bmcs);\r\n    \r\n    if (bmcs.length > 0) {\r\n      // Show transfer modal if BMCs exist\r\n      setShowTransferModal(true);\r\n    } else {\r\n      // Store dairy ID for OTP modal and show delete modal\r\n      (window as any).selectedDairyIdForDelete = dairy.id;\r\n      setShowDeleteModal(true);\r\n    }\r\n  };\r\n\r\n  // Handle transfer and delete (or cascade delete)\r\n  const handleTransferAndDelete = async (newDairyId: number | null, deleteAll: boolean, otp?: string) => {\r\n    if (!selectedDairy) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/dairy', {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          id: selectedDairy.id,\r\n          newDairyId,\r\n          deleteAll,\r\n          otp\r\n        })\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (response.ok) {\r\n        if (deleteAll) {\r\n          setSuccess('Dairy and all related data deleted successfully!');\r\n        } else {\r\n          setSuccess(`${result.data.transferredBMCs} BMC(s) transferred and dairy deleted successfully!`);\r\n        }\r\n        setShowTransferModal(false);\r\n        setSelectedDairy(null);\r\n        setBmcsForTransfer([]);\r\n        await fetchDairies();\r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        setError(result.message || 'Failed to delete dairy');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting dairy:', error);\r\n      setError('Failed to delete dairy');\r\n    }\r\n  };\r\n\r\n  // Delete dairy (no BMCs) with OTP verification\r\n  const handleConfirmDelete = async (otp: string) => {\r\n    if (!selectedDairy) return;\r\n\r\n    try {\r\n      setIsDeleting(true);\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/dairy', {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          id: selectedDairy.id,\r\n          otp\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSuccess('Dairy deleted successfully!');\r\n        setShowDeleteModal(false);\r\n        setSelectedDairy(null);\r\n        await fetchDairies();\r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        const error = await response.json();\r\n        throw new Error(error.error || 'Failed to delete dairy');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error deleting dairy:', error);\r\n      throw error;\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  // Handle form input changes\r\n  const handleInputChange = (field: keyof DairyFormData, value: string) => {\r\n    // Auto-prefix dairy ID with \"D-\" only for new dairies (add form)\r\n    if (field === 'dairyId' && !showEditForm) {\r\n      const cleanValue = value.replace(/^D-/i, '');\r\n      value = `D-${cleanValue}`;\r\n    }\r\n    \r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n    \r\n    // Clear field error when user starts typing\r\n    if (fieldErrors[field as keyof typeof fieldErrors]) {\r\n      setFieldErrors(prev => ({\r\n        ...prev,\r\n        [field]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  // Filter dairies based on status\r\n  const filteredDairies = dairies.filter(dairy => {\r\n    const matchesStatus = statusFilter === 'all' || dairy.status === statusFilter;\r\n    \r\n    // Search across multiple fields\r\n    const searchMatch = searchQuery === '' || \r\n      dairy.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      dairy.dairyId.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      dairy.location?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      dairy.contactPerson?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      dairy.phone?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      dairy.email?.toLowerCase().includes(searchQuery.toLowerCase());\r\n    \r\n    return matchesStatus && searchMatch;\r\n  });\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    fetchDairies();\r\n  }, [fetchDairies]);\r\n\r\n  // Listen for global search events from header\r\n  useEffect(() => {\r\n    const handleGlobalSearch = (event: Event) => {\r\n      const customEvent = event as CustomEvent;\r\n      const query = customEvent.detail?.query || '';\r\n      setSearchQuery(query);\r\n    };\r\n    window.addEventListener('globalSearch', handleGlobalSearch);\r\n    return () => window.removeEventListener('globalSearch', handleGlobalSearch);\r\n  }, []);\r\n\r\n  // Don't render until user is loaded from context\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\r\n        <FlowerSpinner />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"p-4 sm:p-6 lg:p-8 space-y-4 sm:space-y-6 lg:pb-8\">\r\n      {/* Page Header */}\r\n      <PageHeader\r\n        title={t.dairyManagement.title}\r\n        subtitle={t.dairyManagement.subtitle}\r\n        icon={<Milk className=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" />}\r\n        onRefresh={fetchDairies}\r\n      />\r\n\r\n      {/* Success/Error Messages */}\r\n      <StatusMessage success={success} error={error} />\r\n\r\n      {/* Top Performers Section */}\r\n      {dairies.length > 0 && (() => {\r\n        const dairiesWithStats = dairies.filter(d => d.totalQuantity30d && Number(d.totalQuantity30d) > 0);\r\n        \r\n        if (dairiesWithStats.length === 0) return null;\r\n\r\n        const topCollection = [...dairiesWithStats].sort((a, b) => \r\n          Number(b.totalQuantity30d || 0) - Number(a.totalQuantity30d || 0)\r\n        )[0];\r\n        \r\n        const topRevenue = [...dairiesWithStats].sort((a, b) => \r\n          Number(b.totalAmount30d || 0) - Number(a.totalAmount30d || 0)\r\n        )[0];\r\n        \r\n        const topFat = [...dairiesWithStats].sort((a, b) => \r\n          Number(b.weightedFat30d || 0) - Number(a.weightedFat30d || 0)\r\n        )[0];\r\n        \r\n        const topSnf = [...dairiesWithStats].sort((a, b) => \r\n          Number(b.weightedSnf30d || 0) - Number(a.weightedSnf30d || 0)\r\n        )[0];\r\n        \r\n        const mostCollections = [...dairiesWithStats].sort((a, b) => \r\n          Number(b.totalCollections30d || 0) - Number(a.totalCollections30d || 0)\r\n        )[0];\r\n        \r\n        const leastWater = [...dairiesWithStats].sort((a, b) => \r\n          Number(a.weightedWater30d || 100) - Number(b.weightedWater30d || 100)\r\n        )[0];\r\n\r\n        return (\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3 sm:gap-4\">\r\n            {topCollection && (\r\n              <div \r\n                className=\"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-4 rounded-lg border border-green-200 dark:border-green-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                onClick={() => {\r\n                  setGraphMetric('quantity');\r\n                  setShowGraphModal(true);\r\n                }}\r\n              >\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <h3 className=\"text-sm font-semibold text-green-900 dark:text-green-100\">Top Collection (30d)</h3>\r\n                  <Users className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\r\n                </div>\r\n                <p className=\"text-lg font-bold text-green-800 dark:text-green-200\">{topCollection.name}</p>\r\n                <p className=\"text-sm text-green-600 dark:text-green-400\">{Number(topCollection.totalQuantity30d || 0).toFixed(2)} L</p>\r\n              </div>\r\n            )}\r\n            \r\n            {topRevenue && (\r\n              <div \r\n                className=\"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                onClick={() => {\r\n                  setGraphMetric('revenue');\r\n                  setShowGraphModal(true);\r\n                }}\r\n              >\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <h3 className=\"text-sm font-semibold text-blue-900 dark:text-blue-100\">Top Revenue (30d)</h3>\r\n                  <Building2 className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\r\n                </div>\r\n                <p className=\"text-lg font-bold text-blue-800 dark:text-blue-200\">{topRevenue.name}</p>\r\n                <p className=\"text-sm text-blue-600 dark:text-blue-400\">₹{Number(topRevenue.totalAmount30d || 0).toFixed(2)}</p>\r\n              </div>\r\n            )}\r\n            \r\n            {topFat && (\r\n              <div \r\n                className=\"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-4 rounded-lg border border-purple-200 dark:border-purple-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                onClick={() => {\r\n                  setGraphMetric('fat');\r\n                  setShowGraphModal(true);\r\n                }}\r\n              >\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <h3 className=\"text-sm font-semibold text-purple-900 dark:text-purple-100\">Best Quality (30d)</h3>\r\n                  <Eye className=\"w-5 h-5 text-purple-600 dark:text-purple-400\" />\r\n                </div>\r\n                <p className=\"text-lg font-bold text-purple-800 dark:text-purple-200\">{topFat.name}</p>\r\n                <p className=\"text-sm text-purple-600 dark:text-purple-400\">{Number(topFat.weightedFat30d || 0).toFixed(2)}% Fat</p>\r\n              </div>\r\n            )}\r\n            \r\n            {topSnf && (\r\n              <div \r\n                className=\"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 p-4 rounded-lg border border-orange-200 dark:border-orange-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                onClick={() => {\r\n                  setGraphMetric('snf');\r\n                  setShowGraphModal(true);\r\n                }}\r\n              >\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <h3 className=\"text-sm font-semibold text-orange-900 dark:text-orange-100\">Best SNF (30d)</h3>\r\n                  <TrendingUp className=\"w-5 h-5 text-orange-600 dark:text-orange-400\" />\r\n                </div>\r\n                <p className=\"text-lg font-bold text-orange-800 dark:text-orange-200\">{topSnf.name}</p>\r\n                <p className=\"text-sm text-orange-600 dark:text-orange-400\">{Number(topSnf.weightedSnf30d || 0).toFixed(2)}% SNF</p>\r\n              </div>\r\n            )}\r\n            \r\n            {mostCollections && (\r\n              <div \r\n                className=\"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 p-4 rounded-lg border border-pink-200 dark:border-pink-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                onClick={() => {\r\n                  setGraphMetric('collections');\r\n                  setShowGraphModal(true);\r\n                }}\r\n              >\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <h3 className=\"text-sm font-semibold text-pink-900 dark:text-pink-100\">Most Active (30d)</h3>\r\n                  <Award className=\"w-5 h-5 text-pink-600 dark:text-pink-400\" />\r\n                </div>\r\n                <p className=\"text-lg font-bold text-pink-800 dark:text-pink-200\">{mostCollections.name}</p>\r\n                <p className=\"text-sm text-pink-600 dark:text-pink-400\">{Number(mostCollections.totalCollections30d || 0)} Collections</p>\r\n              </div>\r\n            )}\r\n            \r\n            {leastWater && (\r\n              <div \r\n                className=\"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 p-4 rounded-lg border border-red-200 dark:border-red-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                onClick={() => {\r\n                  setGraphMetric('water');\r\n                  setShowGraphModal(true);\r\n                }}\r\n              >\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <h3 className=\"text-sm font-semibold text-red-900 dark:text-red-100\">Most Water (30d)</h3>\r\n                  <Droplets className=\"w-5 h-5 text-red-600 dark:text-red-400\" />\r\n                </div>\r\n                <p className=\"text-lg font-bold text-red-800 dark:text-red-200\">{leastWater.name}</p>\r\n                <p className=\"text-sm text-red-600 dark:text-red-400\">{Number(leastWater.weightedWater30d || 0).toFixed(2)}% Water</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n      })()}\r\n\r\n      {/* Stats Cards removed per request */}\r\n\r\n      {/* Filter Controls */}\r\n      <FilterControls\r\n        icon={<Milk className=\"w-4 h-4 flex-shrink-0\" />}\r\n        showingText={`Showing ${filteredDairies.length} of ${dairies.length} Dairies`}\r\n        filterLabel=\"Filter:\"\r\n        filterValue={statusFilter}\r\n        filterOptions={[\r\n          { value: 'all', label: 'All Status' },\r\n          { value: 'active', label: 'Active' },\r\n          { value: 'inactive', label: 'Inactive' },\r\n          { value: 'maintenance', label: 'Maintenance' }\r\n        ]}\r\n        onFilterChange={(value) => setStatusFilter(value as typeof statusFilter)}\r\n      />\r\n\r\n      {/* Main Content */}\r\n      {loading ? (\r\n        <LoadingSpinner />\r\n      ) : filteredDairies.length > 0 ? (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6\">\r\n          {filteredDairies.map((dairy) => (\r\n            <div key={dairy.id} className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-lg transition-all duration-200 overflow-visible border border-gray-200 dark:border-gray-700 hover:border-blue-200 dark:hover:border-blue-700 relative z-10 hover:z-20\">\r\n              {/* Header */}\r\n              <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-4 border-b border-gray-200 dark:border-gray-700 rounded-t-lg\">\r\n                <div className=\"flex items-start justify-between gap-3\">\r\n                  <div className=\"flex items-center gap-3 flex-1 min-w-0\">\r\n                    <div className=\"p-2 bg-gradient-to-r from-blue-100 to-indigo-100 dark:from-blue-900/30 dark:to-indigo-900/30 rounded-lg flex-shrink-0\">\r\n                      <Milk className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\r\n                    </div>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white truncate\">{highlightText(dairy.name, searchQuery)}</h3>\r\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400\">{highlightText(dairy.dairyId, searchQuery)}</p>\r\n                    </div>\r\n                  </div>\r\n                  <StatusDropdown\r\n                    currentStatus={dairy.status}\r\n                    onStatusChange={(status) => handleStatusChange(dairy, status as 'active' | 'inactive' | 'maintenance')}\r\n                    options={[\r\n                      {\r\n                        status: 'active',\r\n                        label: 'Active',\r\n                        color: 'bg-green-500',\r\n                        bgColor: 'hover:bg-green-50 dark:hover:bg-green-900/30'\r\n                      },\r\n                      {\r\n                        status: 'inactive',\r\n                        label: 'Inactive',\r\n                        color: 'bg-red-500',\r\n                        bgColor: 'hover:bg-red-50 dark:hover:bg-red-900/30'\r\n                      },\r\n                      {\r\n                        status: 'maintenance',\r\n                        label: 'Maintenance',\r\n                        color: 'bg-yellow-500',\r\n                        bgColor: 'hover:bg-yellow-50 dark:hover:bg-yellow-900/30'\r\n                      }\r\n                    ]}\r\n                    compact={true}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Content */}\r\n              <div className=\"p-4 space-y-3\">\r\n                {/* Basic Info - Two Columns */}\r\n                <div className=\"grid grid-cols-2 gap-3\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <User className=\"w-4 h-4 text-gray-500 flex-shrink-0\" />\r\n                    <span className=\"text-sm text-gray-700 dark:text-gray-300 truncate\">{highlightText(dairy.contactPerson || 'No Contact', searchQuery)}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Phone className=\"w-4 h-4 text-gray-500 flex-shrink-0\" />\r\n                    <span className=\"text-sm text-gray-700 dark:text-gray-300 truncate\">{highlightText(dairy.phone || 'No Phone', searchQuery)}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Location & Email */}\r\n                <div className=\"grid grid-cols-2 gap-3\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <MapPin className=\"w-4 h-4 text-gray-500 flex-shrink-0\" />\r\n                    <span className=\"text-sm text-gray-700 dark:text-gray-300 truncate\">{highlightText(dairy.location || 'No Location', searchQuery)}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Mail className=\"w-4 h-4 text-gray-500 flex-shrink-0\" />\r\n                    <span className=\"text-sm text-gray-700 dark:text-gray-300 truncate\">{highlightText(dairy.email || 'No Email', searchQuery)}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Divider */}\r\n                <div className=\"border-t border-gray-200 dark:border-gray-700 my-3\"></div>\r\n\r\n                {/* 30-Day Statistics Header */}\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide\">Last 30 Days</span>\r\n                  <Calendar className=\"w-4 h-4 text-gray-400\" />\r\n                </div>\r\n\r\n                {/* Collections & Quantity */}\r\n                <div className=\"flex items-center justify-between bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-blue-500\"></div>\r\n                    <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Collections</span>\r\n                  </div>\r\n                  <div className=\"text-right\">\r\n                    <div className=\"text-lg font-bold text-blue-600 dark:text-blue-400\">{Number(dairy.totalCollections30d || 0)}</div>\r\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400\">{Number(dairy.totalQuantity30d || 0).toFixed(2)} Liters</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Quality Metrics - Three Columns */}\r\n                <div className=\"grid grid-cols-3 gap-2\">\r\n                  <div className=\"bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-2 text-center\">\r\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">Fat</div>\r\n                    <div className=\"text-sm font-bold text-indigo-600 dark:text-indigo-400\">{Number(dairy.weightedFat30d || 0).toFixed(2)}%</div>\r\n                  </div>\r\n                  <div className=\"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-2 text-center\">\r\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">SNF</div>\r\n                    <div className=\"text-sm font-bold text-purple-600 dark:text-purple-400\">{Number(dairy.weightedSnf30d || 0).toFixed(2)}%</div>\r\n                  </div>\r\n                  <div className=\"bg-pink-50 dark:bg-pink-900/20 rounded-lg p-2 text-center\">\r\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">CLR</div>\r\n                    <div className=\"text-sm font-bold text-pink-600 dark:text-pink-400\">{Number(dairy.weightedClr30d || 0).toFixed(1)}</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Revenue */}\r\n                <div className=\"flex items-center justify-between bg-emerald-50 dark:bg-emerald-900/20 rounded-lg p-3\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-emerald-500\"></div>\r\n                    <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Total Revenue</span>\r\n                  </div>\r\n                  <div className=\"text-lg font-bold text-emerald-600 dark:text-emerald-400\">\r\n                    ₹{Number(dairy.totalAmount30d || 0).toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Footer Actions */}\r\n              <div className=\"bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-100 dark:border-gray-700 flex items-center justify-between gap-2 rounded-b-lg\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <button\r\n                    onClick={() => handleEditClick(dairy)}\r\n                    className=\"p-2 text-gray-400 dark:text-gray-500 hover:text-green-600 dark:hover:text-green-400 transition-colors rounded-lg hover:bg-green-50 dark:hover:bg-green-900/30\"\r\n                    title=\"Edit\"\r\n                  >\r\n                    <Edit3 className=\"w-4 h-4\" />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDeleteClick(dairy)}\r\n                    className=\"p-2 text-gray-400 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 transition-colors rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30\"\r\n                    title=\"Delete\"\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n                \r\n                {/* Right side actions */}\r\n                <div className=\"flex items-center gap-2\">\r\n                  <button\r\n                    onClick={() => {\r\n                      setDairyForNavigation(dairy);\r\n                      setShowBmcsAlert(true);\r\n                    }}\r\n                    className=\"flex items-center gap-1.5 px-2 py-1 rounded hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors group\"\r\n                    title={`View ${dairy.bmcCount || 0} BMCs under ${dairy.name}`}\r\n                  >\r\n                    <Factory className=\"w-3.5 h-3.5 text-gray-400 group-hover:text-orange-500 transition-colors\" />\r\n                    <span className=\"text-xs text-gray-600 dark:text-gray-400 group-hover:text-orange-600 dark:group-hover:text-orange-400 font-medium\">{dairy.bmcCount || 0}</span>\r\n                  </button>\r\n                  \r\n                  <button\r\n                    onClick={() => {\r\n                      setDairyForNavigation(dairy);\r\n                      setShowSocietiesAlert(true);\r\n                    }}\r\n                    className=\"flex items-center gap-1.5 px-2 py-1 rounded hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors group\"\r\n                    title={`View ${dairy.societyCount || 0} societies under ${dairy.name}`}\r\n                  >\r\n                    <Building2 className=\"w-3.5 h-3.5 text-gray-400 group-hover:text-blue-500 transition-colors\" />\r\n                    <span className=\"text-xs text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 font-medium\">{dairy.societyCount || 0}</span>\r\n                  </button>\r\n                  \r\n                  <button\r\n                    onClick={() => router.push(`/admin/dairy/${dairy.id}`)}\r\n                    className=\"flex items-center px-3 py-1.5 text-sm text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg transition-colors\"\r\n                    title=\"View Details\"\r\n                  >\r\n                    <Eye className=\"w-4 h-4 mr-1\" />\r\n                    <span>View</span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <EmptyState\r\n          icon={<Milk className=\"w-12 h-12 sm:w-16 sm:h-16 text-gray-400\" />}\r\n          title=\"No Dairies found\"\r\n          message={statusFilter === 'all' ? 'Get started by adding your first Dairy' : 'Try changing the filter to see more results'}\r\n          actionText={statusFilter === 'all' ? 'Add Your First Dairy' : undefined}\r\n          onAction={statusFilter === 'all' ? () => setShowAddForm(true) : undefined}\r\n          showAction={statusFilter === 'all'}\r\n        />\r\n      )}\r\n      </div>\r\n\r\n      {/* Floating Action Button */}\r\n      <FloatingActionButton\r\n        actions={[\r\n          {\r\n            icon: <Plus className=\"w-6 h-6 text-white\" />,\r\n            label: 'Add Dairy',\r\n            onClick: () => {\r\n              setFieldErrors({});\r\n              setError('');\r\n              setShowAddForm(true);\r\n            },\r\n            color: 'bg-gradient-to-br from-blue-500 to-blue-600'\r\n          }\r\n        ]}\r\n        directClick={true}\r\n      />\r\n\r\n      {/* Add Dairy Modal - Positioned outside main container */}\r\n      <FormModal\r\n        isOpen={showAddForm}\r\n        onClose={() => setShowAddForm(false)}\r\n        title={t.dairyManagement.addNewDairy}\r\n        maxWidth=\"lg\"\r\n      >\r\n        <form onSubmit={handleAddDairy} className=\"space-y-4 sm:space-y-6\">\r\n          <FormGrid>\r\n            <FormInput\r\n              label={t.dairyManagement.dairyName}\r\n              value={formData.name}\r\n              onChange={(value) => handleInputChange('name', value)}\r\n              placeholder={t.dairyManagement.enterDairyName}\r\n              required\r\n              error={fieldErrors.name}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.dairyManagement.dairyId}\r\n              value={formData.dairyId}\r\n              onChange={(value) => handleInputChange('dairyId', value)}\r\n              placeholder=\"D-001\"\r\n              required\r\n              error={fieldErrors.dairyId}\r\n            />\r\n\r\n            {/* Password with Eye Button */}\r\n            <div className=\"sm:col-span-2\">\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                {t.dairyManagement.password}\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  value={formData.password}\r\n                  onChange={(e) => handleInputChange('password', e.target.value)}\r\n                  placeholder={t.dairyManagement.enterSecurePassword}\r\n                  className=\"form-input-custom w-full px-3 sm:px-4 py-2 sm:py-2.5 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 focus:border-emerald-500 dark:focus:border-emerald-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-200 focus:outline-none\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors\"\r\n                  title={showPassword ? 'Hide password' : 'Show password'}\r\n                >\r\n                  {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                </button>\r\n              </div>\r\n              <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\r\n                Current password is pre-filled. Click eye icon to view or edit to change.\r\n              </p>\r\n            </div>\r\n\r\n            <FormInput\r\n              label={t.dairyManagement.capacity}\r\n              type=\"number\"\r\n              value={formData.capacity}\r\n              onChange={(value) => handleInputChange('capacity', value)}\r\n              placeholder={t.dairyManagement.enterCapacity}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.dairyManagement.contactPerson}\r\n              value={formData.contactPerson}\r\n              onChange={(value) => handleInputChange('contactPerson', value)}\r\n              placeholder={t.dairyManagement.enterContactPerson}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.dairyManagement.phone}\r\n              type=\"tel\"\r\n              value={formData.phone}\r\n              onChange={(value) => {\r\n                const formatted = formatPhoneInput(value);\r\n                handleInputChange('phone', formatted);\r\n              }}\r\n              onBlur={() => {\r\n                const error = validatePhoneOnBlur(formData.phone);\r\n                if (error) {\r\n                  setFieldErrors(prev => ({ ...prev, phone: error }));\r\n                } else {\r\n                  setFieldErrors(prev => ({ ...prev, phone: undefined }));\r\n                }\r\n              }}\r\n              placeholder={t.dairyManagement.enterPhoneNumber}\r\n              error={fieldErrors.phone}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.dairyManagement.email}\r\n              type=\"email\"\r\n              value={formData.email}\r\n              onChange={(value) => handleInputChange('email', value)}\r\n              onBlur={() => {\r\n                const error = validateEmailQuick(formData.email);\r\n                if (error) {\r\n                  setFieldErrors(prev => ({ ...prev, email: error }));\r\n                } else {\r\n                  setFieldErrors(prev => ({ ...prev, email: undefined }));\r\n                }\r\n              }}\r\n              placeholder={t.dairyManagement.enterEmail}\r\n              error={fieldErrors.email}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.dairyManagement.location}\r\n              value={formData.location}\r\n              onChange={(value) => handleInputChange('location', value)}\r\n              placeholder={t.dairyManagement.enterLocation}\r\n            />\r\n\r\n            <FormSelect\r\n              label=\"Status\"\r\n              value={formData.status}\r\n              onChange={(value) => handleInputChange('status', value as 'active' | 'inactive' | 'maintenance')}\r\n              options={[\r\n                { value: 'active', label: 'Active' },\r\n                { value: 'inactive', label: 'Inactive' },\r\n                { value: 'maintenance', label: 'Maintenance' }\r\n              ]}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Monthly Target (Liters)\"\r\n              type=\"number\"\r\n              value={formData.monthlyTarget}\r\n              onChange={(value) => handleInputChange('monthlyTarget', value)}\r\n              placeholder=\"Enter monthly target\"\r\n            />\r\n          </FormGrid>\r\n\r\n          <FormActions\r\n            onCancel={() => setShowAddForm(false)}\r\n            submitText={t.dairyManagement.addDairy}\r\n            isLoading={formLoading}\r\n            cancelText={t.common.cancel}\r\n            loadingText={t.dairyManagement.addingDairy}\r\n            submitIcon={<Plus className=\"w-4 h-4\" />}\r\n          />\r\n        </form>\r\n      </FormModal>\r\n\r\n      {/* Edit Dairy Modal */}\r\n      <FormModal\r\n        isOpen={showEditForm && !!selectedDairy}\r\n        onClose={() => {\r\n          setShowEditForm(false);\r\n          setSelectedDairy(null);\r\n          setFormData(initialFormData);\r\n        }}\r\n        title={selectedDairy ? `${t.common.edit} ${selectedDairy.name}` : t.common.edit}\r\n        maxWidth=\"lg\"\r\n      >\r\n        <form onSubmit={handleUpdateDairy} className=\"space-y-4 sm:space-y-6\">\r\n          <FormGrid>\r\n            <FormInput\r\n              label={t.dairyManagement.dairyName}\r\n              value={formData.name}\r\n              onChange={(value) => handleInputChange('name', value)}\r\n              placeholder={t.dairyManagement.enterDairyName}\r\n              required\r\n              error={fieldErrors.name}\r\n            />\r\n\r\n            <FormInput\r\n              label={`${t.dairyManagement.dairyId} (Read-only)`}\r\n              value={formData.dairyId}\r\n              onChange={() => {}}\r\n              readOnly\r\n              disabled\r\n            />\r\n\r\n            {/* Password with Eye Button */}\r\n            <div className=\"sm:col-span-2\">\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                {t.dairyManagement.password}\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  value={formData.password}\r\n                  onChange={(e) => handleInputChange('password', e.target.value)}\r\n                  placeholder=\"Enter password\"\r\n                  className=\"form-input-custom w-full px-3 sm:px-4 py-2 sm:py-2.5 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 focus:border-emerald-500 dark:focus:border-emerald-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-200 focus:outline-none\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors\"\r\n                  title={showPassword ? 'Hide password' : 'Show password'}\r\n                >\r\n                  {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                </button>\r\n              </div>\r\n              <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\r\n                Current password is pre-filled. Click eye icon to view or edit to change.\r\n              </p>\r\n            </div>\r\n\r\n            <FormInput\r\n              label={t.dairyManagement.capacity}\r\n              type=\"number\"\r\n              value={formData.capacity}\r\n              onChange={(value) => handleInputChange('capacity', value)}\r\n              placeholder={t.dairyManagement.enterCapacity}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.dairyManagement.contactPerson}\r\n              value={formData.contactPerson}\r\n              onChange={(value) => handleInputChange('contactPerson', value)}\r\n              placeholder={t.dairyManagement.enterContactPerson}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.dairyManagement.phone}\r\n              type=\"tel\"\r\n              value={formData.phone}\r\n              onChange={(value) => {\r\n                const formatted = formatPhoneInput(value);\r\n                handleInputChange('phone', formatted);\r\n              }}\r\n              onBlur={() => {\r\n                const error = validatePhoneOnBlur(formData.phone);\r\n                if (error) {\r\n                  setFieldErrors(prev => ({ ...prev, phone: error }));\r\n                } else {\r\n                  setFieldErrors(prev => ({ ...prev, phone: undefined }));\r\n                }\r\n              }}\r\n              placeholder={t.dairyManagement.enterPhoneNumber}\r\n              error={fieldErrors.phone}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.dairyManagement.email}\r\n              type=\"email\"\r\n              value={formData.email}\r\n              onChange={(value) => handleInputChange('email', value)}\r\n              onBlur={() => {\r\n                const error = validateEmailQuick(formData.email);\r\n                if (error) {\r\n                  setFieldErrors(prev => ({ ...prev, email: error }));\r\n                } else {\r\n                  setFieldErrors(prev => ({ ...prev, email: undefined }));\r\n                }\r\n              }}\r\n              placeholder={t.dairyManagement.enterEmail}\r\n              error={fieldErrors.email}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.dairyManagement.location}\r\n              value={formData.location}\r\n              onChange={(value) => handleInputChange('location', value)}\r\n              placeholder={t.dairyManagement.enterLocation}\r\n            />\r\n\r\n            <FormSelect\r\n              label=\"Status\"\r\n              value={formData.status}\r\n              onChange={(value) => handleInputChange('status', value as 'active' | 'inactive' | 'maintenance')}\r\n              options={[\r\n                { value: 'active', label: 'Active' },\r\n                { value: 'inactive', label: 'Inactive' },\r\n                { value: 'maintenance', label: 'Maintenance' }\r\n              ]}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Monthly Target (Liters)\"\r\n              type=\"number\"\r\n              value={formData.monthlyTarget}\r\n              onChange={(value) => handleInputChange('monthlyTarget', value)}\r\n              placeholder=\"Enter monthly target\"\r\n            />\r\n          </FormGrid>\r\n\r\n          <FormActions\r\n            onCancel={() => {\r\n              setShowEditForm(false);\r\n              setSelectedDairy(null);\r\n              setFormData(initialFormData);\r\n            }}\r\n            submitText=\"Update Dairy\"\r\n            isLoading={formLoading}\r\n            cancelText={t.common.cancel}\r\n            loadingText=\"Updating...\"\r\n            submitIcon={<Edit3 className=\"w-4 h-4\" />}\r\n          />\r\n        </form>\r\n      </FormModal>\r\n\r\n      {/* Delete Confirmation Modal */}\r\n      <DeleteDairyModal\r\n        isOpen={showDeleteModal && !!selectedDairy}\r\n        onClose={() => {\r\n          setShowDeleteModal(false);\r\n          setSelectedDairy(null);\r\n        }}\r\n        onConfirm={handleConfirmDelete}\r\n        dairyName={selectedDairy?.name || ''}\r\n        loading={isDeleting}\r\n        bmcCount={selectedDairy?.bmcCount || 0}\r\n        societyCount={selectedDairy?.societyCount || 0}\r\n      />\r\n\r\n      {/* BMCs Navigation Alert Modal */}\r\n      <NavigationConfirmModal\r\n        isOpen={showBmcsAlert && !!dairyForNavigation}\r\n        onClose={() => {\r\n          setShowBmcsAlert(false);\r\n          setDairyForNavigation(null);\r\n        }}\r\n        onConfirm={() => {\r\n          setShowBmcsAlert(false);\r\n          router.push(`/admin/bmc?dairyFilter=${dairyForNavigation?.id}`);\r\n          setDairyForNavigation(null);\r\n        }}\r\n        title=\"Navigate to BMC Management\"\r\n        message={`View all BMCs from ${dairyForNavigation?.name} in the BMC Management page with filters applied.`}\r\n        confirmText=\"Go to BMC Management\"\r\n        cancelText=\"Cancel\"\r\n      />\r\n\r\n      {/* Societies Navigation Alert Modal */}\r\n      <NavigationConfirmModal\r\n        isOpen={showSocietiesAlert && !!dairyForNavigation}\r\n        onClose={() => {\r\n          setShowSocietiesAlert(false);\r\n          setDairyForNavigation(null);\r\n        }}\r\n        onConfirm={() => {\r\n          setShowSocietiesAlert(false);\r\n          router.push(`/admin/society?dairyFilter=${dairyForNavigation?.id}`);\r\n          setDairyForNavigation(null);\r\n        }}\r\n        title=\"Navigate to Society Management\"\r\n        message={`View all societies from ${dairyForNavigation?.name} in the Society Management page with filters applied.`}\r\n        confirmText=\"Go to Society Management\"\r\n        cancelText=\"Cancel\"\r\n      />\r\n\r\n      {/* Transfer BMCs Modal */}\r\n      <TransferBMCsModal\r\n        isOpen={showTransferModal}\r\n        onClose={() => {\r\n          setShowTransferModal(false);\r\n          setSelectedDairy(null);\r\n          setBmcsForTransfer([]);\r\n        }}\r\n        onConfirm={handleTransferAndDelete}\r\n        bmcs={bmcsForTransfer}\r\n        dairies={dairies}\r\n        dairyName={selectedDairy?.name || ''}\r\n        currentDairyId={selectedDairy?.id || 0}\r\n        adminEmail={user?.email || ''}\r\n      />\r\n\r\n      {/* Graph Modal */}\r\n      {showGraphModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <BarChart3 className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\r\n                <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n                  {graphMetric === 'quantity' && 'Collection Volume - Last 30 Days'}\r\n                  {graphMetric === 'revenue' && 'Revenue - Last 30 Days'}\r\n                  {graphMetric === 'fat' && 'Average Fat % - Last 30 Days'}\r\n                  {graphMetric === 'snf' && 'Average SNF % - Last 30 Days'}\r\n                  {graphMetric === 'collections' && 'Number of Collections - Last 30 Days'}\r\n                  {graphMetric === 'water' && 'Average Water % - Last 30 Days'}\r\n                </h2>\r\n              </div>\r\n              <button\r\n                onClick={() => setShowGraphModal(false)}\r\n                className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\r\n              >\r\n                <X className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Graph Content */}\r\n            <div className=\"flex-1 overflow-y-auto p-6\">\r\n              {(() => {\r\n                const dairiesWithStats = dairies.filter(d => d.totalQuantity30d && Number(d.totalQuantity30d) > 0);\r\n                \r\n                // Prepare data for line chart (all dairies)\r\n                const chartData = dairiesWithStats.map(dairy => ({\r\n                  name: dairy.name,\r\n                  dairyId: dairy.dairyId,\r\n                  value: graphMetric === 'quantity' ? Number(dairy.totalQuantity30d || 0) :\r\n                         graphMetric === 'revenue' ? Number(dairy.totalAmount30d || 0) :\r\n                         graphMetric === 'fat' ? Number(dairy.weightedFat30d || 0) :\r\n                         graphMetric === 'snf' ? Number(dairy.weightedSnf30d || 0) :\r\n                         graphMetric === 'collections' ? Number(dairy.totalCollections30d || 0) :\r\n                         Number(dairy.weightedWater30d || 0)\r\n                })).sort((a, b) => b.value - a.value);\r\n\r\n                // Get color and settings\r\n                const getLineColor = () => {\r\n                  switch(graphMetric) {\r\n                    case 'quantity': return '#10b981';\r\n                    case 'revenue': return '#3b82f6';\r\n                    case 'fat': return '#8b5cf6';\r\n                    case 'snf': return '#f97316';\r\n                    case 'collections': return '#ec4899';\r\n                    case 'water': return '#ef4444';\r\n                    default: return '#6b7280';\r\n                  }\r\n                };\r\n\r\n                return chartData.length > 0 ? (\r\n                  <div className=\"w-full h-[500px]\">\r\n                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                      <LineChart data={chartData} margin={{ top: 5, right: 30, left: 20, bottom: 80 }}>\r\n                        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" className=\"dark:stroke-gray-700\" />\r\n                        <XAxis \r\n                          dataKey=\"name\" \r\n                          angle={-45}\r\n                          textAnchor=\"end\"\r\n                          height={100}\r\n                          interval={0}\r\n                          tick={{ fontSize: 11 }}\r\n                          stroke=\"#6b7280\"\r\n                          label={{ \r\n                            value: 'Dairy Name', \r\n                            position: 'insideBottom', \r\n                            offset: -5,\r\n                            style: { fontSize: 13, fontWeight: 500, fill: '#9ca3af' }\r\n                          }}\r\n                        />\r\n                        <YAxis \r\n                          label={{ \r\n                            value: graphMetric === 'revenue' ? 'Revenue (₹)' : \r\n                                   graphMetric === 'fat' || graphMetric === 'snf' || graphMetric === 'water' ? 'Percentage (%)' : \r\n                                   graphMetric === 'quantity' ? 'Volume (L)' : 'Count', \r\n                            angle: -90, \r\n                            position: 'insideLeft',\r\n                            style: { fontSize: 13, fontWeight: 500, fill: '#9ca3af' }\r\n                          }}\r\n                          stroke=\"#6b7280\"\r\n                        />\r\n                        <Tooltip \r\n                          contentStyle={{\r\n                            backgroundColor: '#1f2937',\r\n                            border: 'none',\r\n                            borderRadius: '0.5rem',\r\n                            color: '#fff',\r\n                            boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1)'\r\n                          }}\r\n                          formatter={(value: any) => {\r\n                            if (graphMetric === 'revenue') {\r\n                              return ['₹' + Number(value).toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })];\r\n                            }\r\n                            if (graphMetric === 'fat' || graphMetric === 'snf' || graphMetric === 'water') {\r\n                              return [Number(value).toFixed(2) + '%'];\r\n                            }\r\n                            if (graphMetric === 'quantity') {\r\n                              return [Number(value).toFixed(2) + ' L'];\r\n                            }\r\n                            return [Number(value)];\r\n                          }}\r\n                          labelFormatter={(label: string) => `Dairy: ${label}`}\r\n                          cursor={{ stroke: '#9ca3af', strokeWidth: 1 }}\r\n                        />\r\n                        <Line \r\n                          type=\"monotone\" \r\n                          dataKey=\"value\" \r\n                          stroke={getLineColor()} \r\n                          strokeWidth={2}\r\n                          dot={{ fill: getLineColor(), r: 4 }}\r\n                          activeDot={{ r: 6 }}\r\n                          isAnimationActive={true}\r\n                          name=\"Value\"\r\n                        />\r\n                      </LineChart>\r\n                    </ResponsiveContainer>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"flex items-center justify-center h-[500px]\">\r\n                    <div className=\"text-center\">\r\n                      <BarChart3 className=\"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-3\" />\r\n                      <p className=\"text-gray-600 dark:text-gray-400 text-lg\">No data available for this metric</p>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })()}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div className=\"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-700/50\">\r\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                Showing performance metrics for all dairies over the last 30 days. Click the X to close this view.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":"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"}