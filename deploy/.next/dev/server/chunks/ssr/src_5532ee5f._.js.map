{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/lib/clientAuth.ts"],"sourcesContent":["'use client';\r\n\r\nimport type { AppRouterInstance } from 'next/dist/shared/lib/app-router-context.shared-runtime';\r\n\r\ninterface UserData {\r\n  id: number;\r\n  uid: string;\r\n  email: string;\r\n  role: string;\r\n  fullName: string;\r\n}\r\n\r\n/**\r\n * Verify if the current user session is valid by checking with the server\r\n */\r\nexport async function verifyUserSession(): Promise<{ isValid: boolean; user?: UserData }> {\r\n  try {\r\n    const token = localStorage.getItem('authToken');\r\n    \r\n    if (!token) {\r\n      console.log('üîç verifyUserSession: No token found');\r\n      return { isValid: false };\r\n    }\r\n\r\n    console.log('üîç verifyUserSession: Token found, making API call');\r\n    const response = await fetch('/api/auth/verify-session', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n\r\n    console.log('üîç verifyUserSession: API response status:', response.status);\r\n    \r\n    if (response.ok) {\r\n      const data = await response.json();\r\n      console.log('üîç verifyUserSession: API response data:', data);\r\n      \r\n      if (data.success && data.data && data.data.user) {\r\n        // Update localStorage with fresh user data\r\n        localStorage.setItem('userData', JSON.stringify(data.data.user));\r\n        console.log('‚úÖ verifyUserSession: Session valid, user:', data.data.user);\r\n        return { isValid: true, user: data.data.user };\r\n      }\r\n    }\r\n\r\n    // If verification fails, clear stored data\r\n    console.log('‚ùå verifyUserSession: Session invalid, clearing storage');\r\n    localStorage.removeItem('authToken');\r\n    localStorage.removeItem('userData');\r\n    return { isValid: false };\r\n  } catch (error) {\r\n    console.error('‚ùå verifyUserSession: Session verification failed:', error);\r\n    localStorage.removeItem('authToken');\r\n    localStorage.removeItem('userData');\r\n    return { isValid: false };\r\n  }\r\n}\r\n\r\n/**\r\n * Get the appropriate dashboard route for a user role\r\n */\r\nexport function getDashboardRoute(role: string): string {\r\n  switch (role) {\r\n    case 'super_admin':\r\n      return '/superadmin/dashboard';\r\n    case 'admin':\r\n      return '/admin/dashboard';\r\n    case 'dairy':\r\n      return '/dairy/dashboard';\r\n    case 'bmc':\r\n      return '/bmc/dashboard';\r\n    case 'society':\r\n      return '/society/dashboard';\r\n    case 'farmer':\r\n      return '/farmer/dashboard';\r\n    default:\r\n      console.warn(`Unknown role: ${role}, redirecting to login`);\r\n      return '/login';\r\n  }\r\n}\r\n\r\n/**\r\n * Check if user has valid session and redirect appropriately\r\n */\r\nexport async function checkAuthAndRedirect(router: AppRouterInstance): Promise<boolean> {\r\n  console.log('üîç checkAuthAndRedirect: Starting authentication check');\r\n  const { isValid, user } = await verifyUserSession();\r\n  \r\n  console.log('üîç checkAuthAndRedirect: Session check result:', { isValid, user });\r\n  \r\n  if (isValid && user) {\r\n    const dashboardRoute = getDashboardRoute(user.role);\r\n    console.log('‚úÖ checkAuthAndRedirect: Redirecting to:', dashboardRoute);\r\n    router.push(dashboardRoute);\r\n    return true;\r\n  }\r\n  \r\n  console.log('‚ÑπÔ∏è checkAuthAndRedirect: No valid session, staying on current page');\r\n  return false;\r\n}"],"names":[],"mappings":";;;;;;;;AAAA;AAeO,eAAe;IACpB,IAAI;QACF,MAAM,QAAQ,aAAa,OAAO,CAAC;QAEnC,IAAI,CAAC,OAAO;YACV,QAAQ,GAAG,CAAC;YACZ,OAAO;gBAAE,SAAS;YAAM;QAC1B;QAEA,QAAQ,GAAG,CAAC;QACZ,MAAM,WAAW,MAAM,MAAM,4BAA4B;YACvD,QAAQ;YACR,SAAS;gBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;gBAClC,gBAAgB;YAClB;QACF;QAEA,QAAQ,GAAG,CAAC,8CAA8C,SAAS,MAAM;QAEzE,IAAI,SAAS,EAAE,EAAE;YACf,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,QAAQ,GAAG,CAAC,4CAA4C;YAExD,IAAI,KAAK,OAAO,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,CAAC,IAAI,EAAE;gBAC/C,2CAA2C;gBAC3C,aAAa,OAAO,CAAC,YAAY,KAAK,SAAS,CAAC,KAAK,IAAI,CAAC,IAAI;gBAC9D,QAAQ,GAAG,CAAC,6CAA6C,KAAK,IAAI,CAAC,IAAI;gBACvE,OAAO;oBAAE,SAAS;oBAAM,MAAM,KAAK,IAAI,CAAC,IAAI;gBAAC;YAC/C;QACF;QAEA,2CAA2C;QAC3C,QAAQ,GAAG,CAAC;QACZ,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,OAAO;YAAE,SAAS;QAAM;IAC1B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qDAAqD;QACnE,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,OAAO;YAAE,SAAS;QAAM;IAC1B;AACF;AAKO,SAAS,kBAAkB,IAAY;IAC5C,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,QAAQ,IAAI,CAAC,CAAC,cAAc,EAAE,KAAK,sBAAsB,CAAC;YAC1D,OAAO;IACX;AACF;AAKO,eAAe,qBAAqB,MAAyB;IAClE,QAAQ,GAAG,CAAC;IACZ,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,MAAM;IAEhC,QAAQ,GAAG,CAAC,kDAAkD;QAAE;QAAS;IAAK;IAE9E,IAAI,WAAW,MAAM;QACnB,MAAM,iBAAiB,kBAAkB,KAAK,IAAI;QAClD,QAAQ,GAAG,CAAC,2CAA2C;QACvD,OAAO,IAAI,CAAC;QACZ,OAAO;IACT;IAEA,QAAQ,GAAG,CAAC;IACZ,OAAO;AACT","debugId":null}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/types/user.ts"],"sourcesContent":["// User role types for client-side components\r\nexport enum UserRole {\r\n  SUPER_ADMIN = 'super_admin',\r\n  ADMIN = 'admin', \r\n  DAIRY = 'dairy',\r\n  BMC = 'bmc',\r\n  SOCIETY = 'society',\r\n  FARMER = 'farmer'\r\n}"],"names":[],"mappings":"AAAA,6CAA6C;;;;;AACtC,IAAA,AAAK,kCAAA;;;;;;;WAAA","debugId":null}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/app/%28auth%29/login/page.tsx"],"sourcesContent":["'use client';\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\nimport { motion } from 'framer-motion';\r\nimport { Eye, EyeOff, AlertCircle, CheckCircle, Mail, Lock } from 'lucide-react';\r\nimport EmailVerificationPrompt from '@/components/auth/EmailVerificationPrompt';\r\nimport { FlowerSpinner } from '@/components';\r\nimport { checkAuthAndRedirect, getDashboardRoute } from '@/lib/clientAuth';\r\n\r\n// Custom CSS to force text visibility and styling\r\nconst inputStyle = `\r\n  .login-input {\r\n    color: #111827 !important;\r\n    background-color: #ffffff !important;\r\n    -webkit-text-fill-color: #111827 !important;\r\n  }\r\n  .login-input:focus {\r\n    color: #111827 !important;\r\n    background-color: #ffffff !important;\r\n    -webkit-text-fill-color: #111827 !important;\r\n  }\r\n  .login-input::-webkit-autofill,\r\n  .login-input::-webkit-autofill:hover,\r\n  .login-input::-webkit-autofill:focus,\r\n  .login-input::-webkit-autofill:active {\r\n    -webkit-box-shadow: 0 0 0 30px white inset !important;\r\n    -webkit-text-fill-color: #111827 !important;\r\n    color: #111827 !important;\r\n  }\r\n  \r\n  /* Force link visibility */\r\n  .login-link {\r\n    color: #2563eb !important;\r\n    text-decoration: none !important;\r\n  }\r\n  .login-link:hover {\r\n    color: #1d4ed8 !important;\r\n    text-decoration: none !important;\r\n  }\r\n  .login-link:visited {\r\n    color: #2563eb !important;\r\n  }\r\n  .login-link:active {\r\n    color: #1e40af !important;\r\n  }\r\n  \r\n  /* Override any global link styles */\r\n  a.login-link,\r\n  a.login-link:hover,\r\n  a.login-link:focus,\r\n  a.login-link:active,\r\n  a.login-link:visited {\r\n    color: #2563eb !important;\r\n    opacity: 1 !important;\r\n    background: none !important;\r\n    -webkit-background-clip: initial !important;\r\n    background-clip: initial !important;\r\n    -webkit-text-fill-color: #2563eb !important;\r\n  }\r\n  a.login-link:hover {\r\n    color: #1d4ed8 !important;\r\n    -webkit-text-fill-color: #1d4ed8 !important;\r\n  }\r\n  \r\n  /* Background animation keyframes */\r\n  @keyframes float {\r\n    0%, 100% { transform: translateY(0px) rotate(0deg); }\r\n    50% { transform: translateY(-20px) rotate(180deg); }\r\n  }\r\n  \r\n  @keyframes pulse {\r\n    0%, 100% { opacity: 0.4; }\r\n    50% { opacity: 0.8; }\r\n  }\r\n  \r\n  @keyframes slideIn {\r\n    from { opacity: 0; transform: translateX(-30px); }\r\n    to { opacity: 1; transform: translateX(0); }\r\n  }\r\n  \r\n  .float-animation {\r\n    animation: float 6s ease-in-out infinite;\r\n  }\r\n  \r\n  .pulse-animation {\r\n    animation: pulse 4s ease-in-out infinite;\r\n  }\r\n  \r\n  .slide-in-animation {\r\n    animation: slideIn 0.8s ease-out;\r\n  }\r\n`;\r\n\r\n// Style injection and title setting will be handled in useEffect\r\n\r\ninterface LoginForm {\r\n  email: string;\r\n  password: string;\r\n}\r\n\r\ninterface LoginResponse {\r\n  success: boolean;\r\n  message: string;\r\n  data?: {\r\n    token?: string;\r\n    refreshToken?: string;\r\n    user?: {\r\n      id: number;\r\n      email: string;\r\n      fullName: string;\r\n      role: string;\r\n    };\r\n  };\r\n  error?: {\r\n    message: string;\r\n    code: string;\r\n  };\r\n}\r\n\r\nconst LoginPage = () => {\r\n  const [form, setForm] = useState<LoginForm>({ email: '', password: '' });\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [isSuccess, setIsSuccess] = useState(false);\r\n  const [showEmailVerificationPrompt, setShowEmailVerificationPrompt] = useState(false);\r\n  const [pendingVerificationEmail, setPendingVerificationEmail] = useState('');\r\n\r\n  const [mounted, setMounted] = useState(false);\r\n  const router = useRouter();\r\n\r\n  // Handle hydration and client-side setup\r\n  useEffect(() => {\r\n    setMounted(true);\r\n    \r\n    // Inject styles\r\n    const styleSheet = document.createElement('style');\r\n    styleSheet.innerText = inputStyle;\r\n    document.head.appendChild(styleSheet);\r\n    \r\n    // Set document title\r\n    document.title = 'Login - Poornasree Equipments Cloud';\r\n    \r\n    return () => {\r\n      // Cleanup styles on unmount\r\n      if (document.head.contains(styleSheet)) {\r\n        document.head.removeChild(styleSheet);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Check if already logged in - Only redirect if user session is valid in database\r\n  useEffect(() => {\r\n    console.log('üîç Login useEffect: Checking user session validity');\r\n    \r\n    // Check if user has valid session in database and redirect accordingly\r\n    checkAuthAndRedirect(router).then((redirected) => {\r\n      if (redirected) {\r\n        console.log('‚úÖ Login: User has valid session, redirected to dashboard');\r\n      } else {\r\n        console.log('‚ÑπÔ∏è Login: No valid session found, staying on login page');\r\n      }\r\n    }).catch((error) => {\r\n      console.error('‚ùå Login: Session verification failed:', error);\r\n    });\r\n  }, [router]);\r\n\r\n  // Check for verification success from URL params\r\n  useEffect(() => {\r\n    if (mounted) {\r\n      const urlParams = new URLSearchParams(window.location.search);\r\n      if (urlParams.get('verified') === 'true') {\r\n        setIsSuccess(true);\r\n        setError('Email verified successfully! You can now sign in.');\r\n        // Clean the URL\r\n        window.history.replaceState({}, document.title, '/login');\r\n      }\r\n    }\r\n  }, [mounted]);\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setForm(prev => ({ ...prev, [name]: value }));\r\n    setError(''); // Clear error when user types\r\n    setIsSuccess(false); // Clear success state when user types\r\n  };\r\n\r\n  const validateForm = (): boolean => {\r\n    if (!form.email) {\r\n      setError('Email is required');\r\n      return false;\r\n    }\r\n    if (!form.email.includes('@')) {\r\n      setError('Please enter a valid email address');\r\n      return false;\r\n    }\r\n    if (!form.password) {\r\n      setError('Password is required');\r\n      return false;\r\n    }\r\n    if (form.password.length < 6) {\r\n      setError('Password must be at least 6 characters');\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const handleEmailVerificationPending = async (email: string) => {\r\n    // Show the email verification prompt instead of auto-redirecting\r\n    setPendingVerificationEmail(email);\r\n    setShowEmailVerificationPrompt(true);\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const handleVerificationCancel = () => {\r\n    setShowEmailVerificationPrompt(false);\r\n    setPendingVerificationEmail('');\r\n    setError('');\r\n  };\r\n\r\n  const handleVerificationProceed = () => {\r\n    // This will be handled by the EmailVerificationPrompt component\r\n    setShowEmailVerificationPrompt(false);\r\n    setPendingVerificationEmail('');\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError('');\r\n    setIsSuccess(false);\r\n\r\n    try {\r\n      // First check account status\r\n      const statusResponse = await fetch('/api/auth/check-status', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ email: form.email }),\r\n      });\r\n\r\n      let accountExists = false;\r\n      \r\n      if (statusResponse.ok) {\r\n        const statusResult = await statusResponse.json();\r\n        \r\n        if (statusResult.success && statusResult.data) {\r\n          const accountStatus = statusResult.data;\r\n          \r\n          // Check if account exists\r\n          if (accountStatus.exists === false) {\r\n            setError('Account not found. Please check your email or register a new account.');\r\n            setIsLoading(false);\r\n            return;\r\n          }\r\n          \r\n          accountExists = true;\r\n          \r\n          // Check if user can login\r\n          if (!accountStatus.canLogin) {\r\n            // Handle email verification pending case\r\n            if (accountStatus.statusType === 'email_verification_pending' && accountStatus.nextAction === 'verify_email') {\r\n              await handleEmailVerificationPending(form.email);\r\n              return;\r\n            }\r\n            \r\n            setError(accountStatus.statusMessage);\r\n            setIsLoading(false);\r\n            return;\r\n          }\r\n        }\r\n      }\r\n\r\n      // Proceed with login\r\n      const response = await fetch('/api/auth/login', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(form),\r\n      });\r\n\r\n      const result: LoginResponse = await response.json();\r\n\r\n      if (result.success && result.data && result.data.user) {\r\n        const { user, token, refreshToken } = result.data;\r\n        \r\n        // Store tokens and user info\r\n        localStorage.setItem('authToken', token!);\r\n        localStorage.setItem('refreshToken', refreshToken!);\r\n        localStorage.setItem('userData', JSON.stringify(user));\r\n\r\n        setIsSuccess(true);\r\n        \r\n        // Redirect based on role using utility function\r\n        setTimeout(() => {\r\n          const dashboardRoute = getDashboardRoute(user.role);\r\n          router.push(dashboardRoute);\r\n        }, 1500);\r\n\r\n      } else {\r\n        // Handle specific error messages\r\n        const errorMessage = result.error?.message || result.message || 'Login failed. Please try again.';\r\n        \r\n        // If account exists but login failed (wrong password)\r\n        if (accountExists && errorMessage === 'Invalid credentials') {\r\n          setError('Incorrect password. Please try again or reset your password.');\r\n        } \r\n        // Other errors\r\n        else {\r\n          setError(errorMessage);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Login error:', error);\r\n      setError('Network error. Please check your connection and try again.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-emerald-900 via-green-900 to-teal-900 relative overflow-hidden\">\r\n      {/* Animated Background Elements */}\r\n      <div className=\"absolute inset-0\">\r\n        <div className=\"absolute top-0 left-0 w-72 h-72 bg-green-500/20 rounded-full mix-blend-multiply filter blur-xl animate-pulse\"></div>\r\n        <div className=\"absolute top-0 right-0 w-72 h-72 bg-emerald-500/20 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-2000\"></div>\r\n        <div className=\"absolute bottom-0 left-0 w-72 h-72 bg-teal-500/20 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-4000\"></div>\r\n        <div className=\"absolute -bottom-8 -right-8 w-72 h-72 bg-green-500/20 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-6000\"></div>\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"relative z-10 min-h-screen flex\">\r\n        {/* Left Side - Branding */}\r\n        <div className=\"hidden lg:flex lg:w-1/2 relative\">\r\n          <div className=\"flex flex-col justify-center items-center p-12 text-white w-full\">\r\n            <motion.div\r\n              initial={{ opacity: 0, y: 30 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ duration: 0.8 }}\r\n              className=\"text-center max-w-lg\"\r\n            >\r\n              <div className=\"mb-8\">\r\n                <Image \r\n                  src=\"/fulllogo.png\" \r\n                  alt=\"Poornasree Equipments Logo\" \r\n                  width={120} \r\n                  height={120} \r\n                  className=\"object-contain mx-auto\"\r\n                />\r\n              </div>\r\n              \r\n              <p className=\"text-xl text-gray-200 mb-12 leading-relaxed\">\r\n                Advanced dairy equipment management and cloud solutions. Join thousands who trust our integrated platform.\r\n              </p>\r\n              \r\n              <div className=\"space-y-6 text-left\">\r\n                <motion.div \r\n                  initial={{ opacity: 0, x: -20 }}\r\n                  animate={{ opacity: 1, x: 0 }}\r\n                  transition={{ delay: 0.3 }}\r\n                  className=\"flex items-center space-x-4 p-4 bg-white/10 backdrop-blur-sm rounded-2xl border border-white/20\"\r\n                >\r\n                  <div className=\"w-3 h-3 bg-gradient-to-r from-green-400 to-emerald-400 rounded-full\"></div>\r\n                  <span className=\"text-gray-200 font-medium\">Smart Equipment Tracking</span>\r\n                </motion.div>\r\n                \r\n                <motion.div \r\n                  initial={{ opacity: 0, x: -20 }}\r\n                  animate={{ opacity: 1, x: 0 }}\r\n                  transition={{ delay: 0.5 }}\r\n                  className=\"flex items-center space-x-4 p-4 bg-white/10 backdrop-blur-sm rounded-2xl border border-white/20\"\r\n                >\r\n                  <div className=\"w-3 h-3 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-full\"></div>\r\n                  <span className=\"text-gray-200 font-medium\">Real-time Data Analytics</span>\r\n                </motion.div>\r\n                \r\n                <motion.div \r\n                  initial={{ opacity: 0, x: -20 }}\r\n                  animate={{ opacity: 1, x: 0 }}\r\n                  transition={{ delay: 0.7 }}\r\n                  className=\"flex items-center space-x-4 p-4 bg-white/10 backdrop-blur-sm rounded-2xl border border-white/20\"\r\n                >\r\n                  <div className=\"w-3 h-3 bg-gradient-to-r from-teal-400 to-green-400 rounded-full\"></div>\r\n                  <span className=\"text-gray-200 font-medium\">Secure & Reliable Cloud</span>\r\n                </motion.div>\r\n              </div>\r\n            </motion.div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right Side - Login Form */}\r\n        <div className=\"w-full lg:w-1/2 flex items-center justify-center p-8\">\r\n          <motion.div\r\n            initial={{ opacity: 0, x: 50 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            transition={{ duration: 0.6 }}\r\n            className=\"w-full max-w-md\"\r\n          >\r\n            {/* Mobile Logo */}\r\n            <div className=\"lg:hidden text-center mb-8\">\r\n              <Image \r\n                src=\"/fulllogo.png\" \r\n                alt=\"Poornasree Equipments Logo\" \r\n                width={100} \r\n                height={100} \r\n                className=\"object-contain mx-auto\"\r\n              />\r\n            </div>\r\n\r\n            {/* Form Container */}\r\n            <div className=\"bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-white/20\">\r\n              {/* Header */}\r\n              <div className=\"text-center mb-8\">\r\n                <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">Welcome Back</h2>\r\n                <p className=\"text-gray-600\">Sign in to your account to continue</p>\r\n                <div className=\"mt-4 inline-flex items-center px-4 py-2 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-full\">\r\n                  <div className=\"w-2 h-2 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full mr-2\"></div>\r\n                  <span className=\"text-sm text-gray-700 font-medium\">User Login</span>\r\n                </div>\r\n              </div>\r\n\r\n              <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                {/* Email Field */}\r\n                <div className=\"space-y-2\">\r\n                  <label htmlFor=\"email\" className=\"block text-sm font-semibold text-gray-700\">\r\n                    Email Address\r\n                  </label>\r\n                  <div className=\"relative\">\r\n                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                      <Mail className=\"h-5 w-5 text-gray-400\" />\r\n                    </div>\r\n                    <input\r\n                      type=\"email\"\r\n                      id=\"email\"\r\n                      name=\"email\"\r\n                      value={form.email}\r\n                      onChange={handleInputChange}\r\n                      required\r\n                      className=\"login-input w-full pl-12 pr-4 py-4 bg-white border border-gray-200 rounded-xl placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 focus:outline-none transition-all duration-200\"\r\n                      placeholder=\"Enter your email address\"\r\n                      style={{ \r\n                        color: '#111827 !important',\r\n                        backgroundColor: '#ffffff !important',\r\n                        WebkitTextFillColor: '#111827 !important'\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Password Field */}\r\n                <div className=\"space-y-2\">\r\n                  <label htmlFor=\"password\" className=\"block text-sm font-semibold text-gray-700\">\r\n                    Password\r\n                  </label>\r\n                  <div className=\"relative overflow-hidden rounded-xl\">\r\n                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10\">\r\n                      <Lock className=\"h-5 w-5 text-gray-400\" />\r\n                    </div>\r\n                    <input\r\n                      type={showPassword ? 'text' : 'password'}\r\n                      id=\"password\"\r\n                      name=\"password\"\r\n                      value={form.password}\r\n                      onChange={handleInputChange}\r\n                      required\r\n                      autoComplete=\"current-password\"\r\n                      className=\"login-input w-full pl-12 pr-12 py-4 bg-white border border-gray-200 rounded-xl placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 focus:outline-none transition-all duration-200\"\r\n                      placeholder=\"Enter your password\"\r\n                      style={{ \r\n                        color: '#111827 !important',\r\n                        backgroundColor: '#ffffff !important',\r\n                        WebkitTextFillColor: '#111827 !important'\r\n                      }}\r\n                    />\r\n                    <div className=\"absolute inset-y-0 right-0 flex items-center pr-4 z-10\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setShowPassword(!showPassword)}\r\n                        className=\"text-gray-400 hover:text-gray-600 transition-colors focus:outline-none p-1\"\r\n                      >\r\n                        {showPassword ? (\r\n                          <EyeOff className=\"h-5 w-5\" />\r\n                        ) : (\r\n                          <Eye className=\"h-5 w-5\" />\r\n                        )}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Error/Success Message */}\r\n                {error && (\r\n                  <motion.div\r\n                    initial={{ opacity: 0, y: -10 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    className={`flex items-center space-x-3 rounded-xl p-4 ${\r\n                      isSuccess \r\n                        ? 'text-green-700 bg-green-50 border border-green-200' \r\n                        : 'text-red-700 bg-red-50 border border-red-200'\r\n                    }`}\r\n                  >\r\n                    {isSuccess ? (\r\n                      <CheckCircle className=\"h-5 w-5 flex-shrink-0\" />\r\n                    ) : (\r\n                      <AlertCircle className=\"h-5 w-5 flex-shrink-0\" />\r\n                    )}\r\n                    <span className=\"text-sm font-medium\">{error}</span>\r\n                  </motion.div>\r\n                )}\r\n\r\n                {/* Submit Button */}\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={isLoading}\r\n                  className=\"w-full bg-gradient-to-r from-green-600 via-emerald-600 to-green-700 text-white font-semibold py-4 px-6 rounded-xl hover:from-green-700 hover:via-emerald-700 hover:to-green-800 focus:ring-2 focus:ring-green-500/20 focus:outline-none transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg shadow-green-500/25\"\r\n                >\r\n                  {isLoading ? (\r\n                    <div className=\"flex items-center justify-center space-x-2\">\r\n                      <FlowerSpinner size={20} className=\"brightness-200\" />\r\n                      <span>Signing In...</span>\r\n                    </div>\r\n                  ) : (\r\n                    'Sign In'\r\n                  )}\r\n                </button>\r\n              </form>\r\n\r\n              {/* Links */}\r\n              <div className=\"mt-8 space-y-4\">\r\n                <div className=\"text-center\">\r\n                  <Link \r\n                    href=\"/forgot-password\" \r\n                    className=\"login-link text-sm font-medium transition-colors\"\r\n                  >\r\n                    Forgot your password?\r\n                  </Link>\r\n                </div>\r\n                \r\n                <div className=\"border-t border-gray-200 pt-6 text-center\">\r\n                  <p className=\"text-sm text-gray-600\">\r\n                    {mounted ? \"Don't have an account?\" : \"Don\\u2019t have an account?\"}{' '}\r\n                    <Link \r\n                      href=\"/register\" \r\n                      className=\"login-link font-semibold transition-colors\"\r\n                    >\r\n                      Create one here\r\n                    </Link>\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"text-center\">\r\n                  <Link \r\n                    href=\"/superadmin\" \r\n                    className=\"login-link text-sm transition-colors\"\r\n                  >\r\n                    Super Admin Access\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Back to Home */}\r\n            <div className=\"mt-8 text-center\">\r\n              <Link \r\n                href=\"/\" \r\n                className=\"text-sm text-gray-300 hover:text-white transition-colors inline-flex items-center space-x-2\"\r\n              >\r\n                <span>‚Üê</span>\r\n                <span>Back to Home</span>\r\n              </Link>\r\n            </div>\r\n          </motion.div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Email Verification Prompt Overlay */}\r\n      {showEmailVerificationPrompt && (\r\n        <EmailVerificationPrompt\r\n          email={pendingVerificationEmail}\r\n          onCancel={handleVerificationCancel}\r\n          onVerify={handleVerificationProceed}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}