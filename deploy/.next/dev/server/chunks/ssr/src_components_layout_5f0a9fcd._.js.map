{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/components/layout/Sidebar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\nimport Image from 'next/image';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport FlowerSpinner from '@/components/loading/FlowerSpinner';\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\nimport { \r\n  Home, \r\n  Users, \r\n  Settings, \r\n  LogOut, \r\n  ChevronLeft, \r\n  ChevronRight,\r\n  Milk,\r\n  Building2,\r\n  Tractor,\r\n  BarChart3,\r\n  FileText,\r\n  Bell,\r\n  Cog,\r\n  Receipt\r\n} from 'lucide-react';\r\nimport { UserRole } from '@/types/user';\r\n\r\ninterface SidebarProps {\r\n  userRole: UserRole;\r\n  isCollapsed: boolean;\r\n  onToggle: () => void;\r\n  onLogout: () => void;\r\n}\r\n\r\ninterface NavItem {\r\n  icon: React.ComponentType<{ className?: string }>;\r\n  labelKey: keyof typeof import('@/locales/en').en.nav;\r\n  href: string;\r\n  roles: UserRole[];\r\n  badge?: string;\r\n}\r\n\r\nconst navigationItems: NavItem[] = [\r\n  {\r\n    icon: Home,\r\n    labelKey: 'dashboard',\r\n    href: '/dashboard',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN, UserRole.DAIRY, UserRole.BMC, UserRole.SOCIETY, UserRole.FARMER]\r\n  },\r\n  {\r\n    icon: FileText,\r\n    labelKey: 'reports',\r\n    href: '/admin/reports',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN, UserRole.DAIRY, UserRole.BMC, UserRole.SOCIETY]\r\n  },\r\n  {\r\n    icon: BarChart3,\r\n    labelKey: 'analytics',\r\n    href: '/admin/analytics',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN, UserRole.DAIRY, UserRole.BMC]\r\n  },\r\n  {\r\n    icon: Milk,\r\n    labelKey: 'dairyManagement',\r\n    href: '/admin/dairy',\r\n    roles: [UserRole.ADMIN]\r\n  },\r\n  {\r\n    icon: Building2,\r\n    labelKey: 'bmcManagement',\r\n    href: '/admin/bmc',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN, UserRole.DAIRY, UserRole.BMC]\r\n  },\r\n  {\r\n    icon: Users,\r\n    labelKey: 'societyManagement',\r\n    href: '/admin/society',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN, UserRole.DAIRY, UserRole.BMC, UserRole.SOCIETY]\r\n  },\r\n  {\r\n    icon: Cog,\r\n    labelKey: 'machineManagement',\r\n    href: '/admin/machine',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN]\r\n  },\r\n  {\r\n    icon: Receipt,\r\n    labelKey: 'ratechartManagement',\r\n    href: '/admin/ratechart',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN]\r\n  },\r\n  {\r\n    icon: Tractor,\r\n    labelKey: 'farmerManagement',\r\n    href: '/admin/farmer',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN]\r\n  },\r\n  {\r\n    icon: Bell,\r\n    labelKey: 'notifications',\r\n    href: '/notifications',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN, UserRole.DAIRY, UserRole.BMC, UserRole.SOCIETY, UserRole.FARMER]\r\n  },\r\n  {\r\n    icon: Settings,\r\n    labelKey: 'settings',\r\n    href: '/settings',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN, UserRole.DAIRY, UserRole.BMC, UserRole.SOCIETY, UserRole.FARMER]\r\n  }\r\n];\r\n\r\nconst roleColors: Record<UserRole, string> = {\r\n  [UserRole.SUPER_ADMIN]: 'from-green-600 to-emerald-600',    // Primary green gradient\r\n  [UserRole.ADMIN]: 'from-green-500 to-emerald-500',         // Slightly lighter green\r\n  [UserRole.DAIRY]: 'from-teal-600 to-cyan-600',            // Teal for dairy operations\r\n  [UserRole.BMC]: 'from-emerald-600 to-green-600',          // Emerald for BMC\r\n  [UserRole.SOCIETY]: 'from-green-700 to-teal-700',         // Deeper green for society\r\n  [UserRole.FARMER]: 'from-emerald-500 to-green-500'        // Natural green for farmers\r\n};\r\n\r\nexport default function Sidebar({ userRole, isCollapsed, onToggle, onLogout }: SidebarProps) {\r\n  const pathname = usePathname();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [prevPathname, setPrevPathname] = useState(pathname);\r\n  const { t } = useLanguage();\r\n\r\n  // Mouse handlers - only for visual hover state\r\n  const handleMouseEnter = () => {\r\n    // No auto-expansion on hover - sidebar now expands only on button click\r\n  };\r\n\r\n  // Handle mouse leave - no action needed\r\n  const handleMouseLeave = () => {\r\n  };\r\n\r\n  // Simplified toggle - just toggle the state\r\n  const handleToggleClick = () => {\r\n    onToggle();\r\n  };\r\n\r\n  // Detect route changes for loading state - moved to useEffect to prevent infinite loop\r\n  useEffect(() => {\r\n    if (pathname !== prevPathname) {\r\n      setPrevPathname(pathname);\r\n      setIsLoading(true);\r\n      const timer = setTimeout(() => setIsLoading(false), 500);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [pathname, prevPathname]);\r\n\r\n  // Get the correct dashboard href based on user role\r\n  const getDashboardHref = (role: UserRole): string => {\r\n    if (role === UserRole.SUPER_ADMIN) {\r\n      return '/superadmin/dashboard';\r\n    }\r\n    if (role === UserRole.ADMIN) {\r\n      return '/admin/dashboard';\r\n    }\r\n    // For other roles, default to admin dashboard\r\n    return '/admin/dashboard';\r\n  };\r\n\r\n  // Update navigation items with dynamic dashboard href\r\n  const updatedNavItems = navigationItems.map(item => {\r\n    if (item.labelKey === 'dashboard') {\r\n      return { ...item, href: getDashboardHref(userRole) };\r\n    }\r\n    return item;\r\n  });\r\n\r\n  const filteredNavItems = updatedNavItems.filter(item => \r\n    item.roles.includes(userRole)\r\n  );\r\n\r\n  // Mobile nav items: top 4 + settings\r\n  const mobileNavItems = filteredNavItems.slice(0, 4);\r\n  const settingsItem = filteredNavItems.find(item => item.labelKey === 'settings');\r\n  if (settingsItem && mobileNavItems.length < 5) {\r\n    mobileNavItems.push(settingsItem);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Mobile Bottom Navigation - Hidden for admin and super admin */}\r\n      {userRole !== UserRole.ADMIN && userRole !== UserRole.SUPER_ADMIN && (\r\n        <nav className=\"\r\n          fixed bottom-0 left-0 right-0 z-50\r\n          bg-white dark:bg-gray-900\r\n          border-t border-gray-200 dark:border-gray-700\r\n          safe-area-pb\r\n          lg:hidden\r\n        \">\r\n        <div className=\"flex justify-around items-center px-2 py-2\">\r\n        {mobileNavItems.map((item) => {\r\n          const Icon = item.icon;\r\n          const isActive = pathname === item.href || pathname.startsWith(item.href + '/');            return (\r\n              <Link\r\n                key={item.href}\r\n                href={item.href}\r\n                className=\"flex-1\"\r\n              >\r\n                <div className={`\r\n                  flex flex-col items-center justify-center\r\n                  py-2 px-1\r\n                  rounded-lg\r\n                  transition-all duration-200\r\n                  min-h-[60px]\r\n                  ${isActive \r\n                    ? `bg-gradient-to-br ${roleColors[userRole]} text-white shadow-lg` \r\n                    : 'text-gray-600 dark:text-gray-400'\r\n                  }\r\n                `}>\r\n                  <Icon className={`w-5 h-5 mb-1 ${isActive ? 'text-white' : ''}`} />\r\n                  <span className={`\r\n                    text-[10px] font-medium text-center leading-tight truncate max-w-[60px]\r\n                    ${isActive ? 'text-white' : ''}\r\n                  `}>\r\n                    {t.nav[item.labelKey]}\r\n                  </span>\r\n                  {item.badge && (\r\n                    <span className=\"absolute top-1 right-1 bg-red-500 text-white text-[8px] px-1.5 py-0.5 rounded-full\">\r\n                      {item.badge}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              </Link>\r\n            );\r\n          })}\r\n        </div>\r\n      </nav>\r\n      )}\r\n\r\n      {/* Desktop Sidebar - Always rendered, CSS controls visibility */}\r\n      <motion.aside\r\n        initial={{ width: isCollapsed ? 80 : 280 }}\r\n        animate={{ width: isCollapsed ? 80 : 280 }}\r\n        transition={{ duration: 0.3, ease: 'easeInOut' }}\r\n        onMouseEnter={handleMouseEnter}\r\n        onMouseLeave={handleMouseLeave}\r\n        className=\"hidden lg:flex h-screen bg-white dark:bg-gray-900 shadow-xl border-r border-gray-200 dark:border-gray-700 flex-col relative z-20\"\r\n      >\r\n        {/* Header */}\r\n      <div className=\"p-2 border-b border-gray-200 dark:border-gray-700\">\r\n        <div className=\"flex flex-col items-center\">\r\n          {/* Flower Spinner */}\r\n          <div className=\"flex items-center justify-center mb-[-8px]\">\r\n            <FlowerSpinner size={isCollapsed ? 32 : 40} className=\"text-green-600 dark:text-green-400\" isLoading={isLoading} />\r\n          </div>\r\n          \r\n          {/* Logo and Toggle Button */}\r\n          <div className=\"flex items-center justify-center w-full\">\r\n          <AnimatePresence mode=\"wait\">\r\n            {!isCollapsed && (\r\n              <motion.div\r\n                initial={{ opacity: 0, x: -20 }}\r\n                animate={{ opacity: 1, x: 0 }}\r\n                exit={{ opacity: 0, x: -20 }}\r\n                transition={{ duration: 0.2 }}\r\n                className=\"flex items-center space-x-3 flex-1\"\r\n              >\r\n                <div className=\"w-full h-10 flex items-center justify-center ml-8\">\r\n                  <Image \r\n                    src=\"/flogo.png\" \r\n                    alt=\"Poornasree Equipments Logo\" \r\n                    width={157} \r\n                    height={45} \r\n                    className=\"object-contain\"\r\n                  />\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n          \r\n          {/* Toggle button - click to expand/collapse */}\r\n          <button\r\n            onClick={handleToggleClick}\r\n            className=\"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors\"\r\n            title={isCollapsed ? 'Click to expand' : 'Click to collapse'}\r\n          >\r\n            {isCollapsed ? (\r\n              <ChevronRight className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\r\n            ) : (\r\n              <ChevronLeft className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\r\n            )}\r\n          </button>\r\n        </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Navigation */}\r\n      <nav className=\"flex-1 p-4 space-y-2\">\r\n        {filteredNavItems.map((item) => {\r\n          const Icon = item.icon;\r\n          const isActive = pathname === item.href || pathname.startsWith(item.href + '/');\r\n          \r\n          return (\r\n            <Link\r\n              key={item.href}\r\n              href={item.href}\r\n              className=\"block\"\r\n              title={isCollapsed ? t.nav[item.labelKey] : undefined}\r\n            >\r\n              <motion.div\r\n                whileHover={{ x: 4 }}\r\n                className={`\r\n                  flex items-center space-x-3 p-3 rounded-xl transition-all duration-200\r\n                  ${isActive \r\n                    ? `bg-gradient-to-r ${roleColors[userRole]} text-white shadow-lg` \r\n                    : 'text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-100'\r\n                  }\r\n                `}\r\n              >\r\n                <Icon className={`w-5 h-5 flex-shrink-0 ${isActive ? 'text-white' : 'text-gray-500 dark:text-gray-400'}`} />\r\n                \r\n                <AnimatePresence mode=\"wait\">\r\n                  {!isCollapsed && (\r\n                    <motion.span\r\n                      initial={{ opacity: 0, width: 0 }}\r\n                      animate={{ opacity: 1, width: 'auto' }}\r\n                      exit={{ opacity: 0, width: 0 }}\r\n                      transition={{ duration: 0.2 }}\r\n                      className=\"body-medium font-medium\"\r\n                    >\r\n                      {t.nav[item.labelKey]}\r\n                    </motion.span>\r\n                  )}\r\n                </AnimatePresence>\r\n                \r\n                {item.badge && !isCollapsed && (\r\n                  <span className=\"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full\">\r\n                    {item.badge}\r\n                  </span>\r\n                )}\r\n              </motion.div>\r\n            </Link>\r\n          );\r\n        })}\r\n      </nav>\r\n\r\n      {/* Footer - (Logout removed from sidebar per request) */}\r\n    </motion.aside>\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 515, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/components/layout/Header.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport Image from 'next/image';\r\nimport ThemeToggle from '@/components/ui/ThemeToggle';\r\nimport { useLanguage, languages, type Language } from '@/contexts/LanguageContext';\r\nimport { \r\n  Search, \r\n  Bell, \r\n  Settings, \r\n  User, \r\n  LogOut, \r\n  ChevronDown,\r\n  Check,\r\n  Globe,\r\n  Home,\r\n  Users,\r\n  Milk,\r\n  Building2,\r\n  Tractor,\r\n  BarChart3,\r\n  FileText,\r\n  AlertCircle\r\n} from 'lucide-react';\r\nimport { UserRole } from '@/types/user';\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\n\r\ninterface HeaderProps {\r\n  user: {\r\n    firstName: string;\r\n    lastName: string;\r\n    email: string;\r\n    role: UserRole;\r\n  };\r\n  onLogout: () => void;\r\n  onSearch?: (query: string) => void;\r\n}\r\n\r\ninterface Notification {\r\n  id: string;\r\n  title: string;\r\n  message: string;\r\n  time: string;\r\n  type: 'info' | 'warning' | 'success' | 'error';\r\n  read: boolean;\r\n  societyId?: number;\r\n}\r\n\r\ninterface PausedSectionNotification {\r\n  sectionPulseId: number;\r\n  societyId: number;\r\n  societyName: string;\r\n  societyCode: string;\r\n  bmcId: number;\r\n  bmcName: string;\r\n  dairyFarmId: number;\r\n  dairyName: string;\r\n  pulseDate: string;\r\n  pausedSince: string;\r\n  lastChecked: string;\r\n  inactiveDays: number;\r\n  totalCollections: number;\r\n}\r\n\r\nconst roleColors: Record<UserRole, string> = {\r\n  [UserRole.SUPER_ADMIN]: 'from-green-600 to-emerald-600',    // Primary green gradient\r\n  [UserRole.ADMIN]: 'from-green-500 to-emerald-500',         // Slightly lighter green\r\n  [UserRole.DAIRY]: 'from-teal-600 to-cyan-600',            // Teal for dairy operations\r\n  [UserRole.BMC]: 'from-emerald-600 to-green-600',          // Emerald for BMC\r\n  [UserRole.SOCIETY]: 'from-green-700 to-teal-700',         // Deeper green for society\r\n  [UserRole.FARMER]: 'from-emerald-500 to-green-500'        // Natural green for farmers\r\n};\r\n\r\ninterface NavItem {\r\n  icon: React.ComponentType<{ className?: string }>;\r\n  labelKey: keyof typeof import('@/locales/en').en.nav;\r\n  href: string;\r\n  roles: UserRole[];\r\n}\r\n\r\nconst navigationItems: NavItem[] = [\r\n  {\r\n    icon: Home,\r\n    labelKey: 'dashboard',\r\n    href: '/dashboard',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN, UserRole.DAIRY, UserRole.BMC, UserRole.SOCIETY, UserRole.FARMER]\r\n  },\r\n  {\r\n    icon: FileText,\r\n    labelKey: 'reports',\r\n    href: '/admin/reports',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN, UserRole.DAIRY, UserRole.BMC, UserRole.SOCIETY]\r\n  },\r\n  {\r\n    icon: BarChart3,\r\n    labelKey: 'analytics',\r\n    href: '/analytics',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN, UserRole.DAIRY, UserRole.BMC]\r\n  },\r\n  {\r\n    icon: Users,\r\n    labelKey: 'userManagement',\r\n    href: '/users',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN, UserRole.DAIRY]\r\n  },\r\n  {\r\n    icon: Milk,\r\n    labelKey: 'dairyManagement',\r\n    href: '/admin/dairy',\r\n    roles: [UserRole.ADMIN]\r\n  },\r\n  {\r\n    icon: Building2,\r\n    labelKey: 'bmcManagement',\r\n    href: '/admin/bmc',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN, UserRole.DAIRY, UserRole.BMC]\r\n  },\r\n  {\r\n    icon: Users,\r\n    labelKey: 'societyManagement',\r\n    href: '/society',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN, UserRole.DAIRY, UserRole.BMC, UserRole.SOCIETY]\r\n  },\r\n  {\r\n    icon: Tractor,\r\n    labelKey: 'farmerPortal',\r\n    href: '/farmer',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN, UserRole.DAIRY, UserRole.BMC, UserRole.SOCIETY, UserRole.FARMER]\r\n  },\r\n  {\r\n    icon: Bell,\r\n    labelKey: 'notifications',\r\n    href: '/notifications',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN, UserRole.DAIRY, UserRole.BMC, UserRole.SOCIETY, UserRole.FARMER]\r\n  },\r\n  {\r\n    icon: Settings,\r\n    labelKey: 'settings',\r\n    href: '/settings',\r\n    roles: [UserRole.SUPER_ADMIN, UserRole.ADMIN, UserRole.DAIRY, UserRole.BMC, UserRole.SOCIETY, UserRole.FARMER]\r\n  }\r\n];\r\n\r\nexport default function Header({ user, onLogout, onSearch }: HeaderProps) {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [showNotifications, setShowNotifications] = useState(false);\r\n  const [showProfile, setShowProfile] = useState(false);\r\n  const [showLanguage, setShowLanguage] = useState(false);\r\n  const [showMobileLanguage, setShowMobileLanguage] = useState(false);\r\n  const [showLogoutConfirm, setShowLogoutConfirm] = useState(false);\r\n  const [notifications, setNotifications] = useState<Notification[]>([]);\r\n  const [pausedSections, setPausedSections] = useState<PausedSectionNotification[]>([]);\r\n  const [isLoadingNotifications, setIsLoadingNotifications] = useState(false);\r\n  const { language, setLanguage, t } = useLanguage();\r\n  const pathname = usePathname();\r\n  \r\n  const notificationRef = useRef<HTMLDivElement>(null);\r\n  const profileRef = useRef<HTMLDivElement>(null);\r\n  const languageRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Fetch paused sections notifications\r\n  useEffect(() => {\r\n    const fetchPausedSections = async () => {\r\n      try {\r\n        setIsLoadingNotifications(true);\r\n        \r\n        const token = localStorage.getItem('authToken');\r\n        if (!token) {\r\n          console.warn('No auth token found for notifications');\r\n          return;\r\n        }\r\n        \r\n        const response = await fetch('/api/admin/notifications/paused-sections', {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n        \r\n        if (response.ok) {\r\n          const result = await response.json();\r\n          if (result.success) {\r\n            setPausedSections(result.data);\r\n            \r\n            // Convert paused sections to notifications\r\n            const pausedNotifications: Notification[] = result.data.map((section: PausedSectionNotification) => ({\r\n              id: `paused-${section.sectionPulseId}`,\r\n              title: 'Section Paused',\r\n              message: `${section.dairyName} > ${section.bmcName} > ${section.societyName} (${section.societyCode})`,\r\n              time: getRelativeTime(section.lastChecked),\r\n              type: 'warning' as const,\r\n              read: false,\r\n              societyId: section.societyId\r\n            }));\r\n            \r\n            setNotifications(pausedNotifications);\r\n          }\r\n        } else if (response.status === 401) {\r\n          console.warn('Unauthorized: Token may be expired');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching paused sections:', error);\r\n      } finally {\r\n        setIsLoadingNotifications(false);\r\n      }\r\n    };\r\n\r\n    // Fetch immediately\r\n    fetchPausedSections();\r\n    \r\n    // Refresh every 60 seconds\r\n    const interval = setInterval(fetchPausedSections, 60000);\r\n    \r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // Get relative time from timestamp\r\n  const getRelativeTime = (timestamp: string): string => {\r\n    const now = new Date();\r\n    const time = new Date(timestamp);\r\n    const diffInMinutes = Math.floor((now.getTime() - time.getTime()) / (1000 * 60));\r\n    \r\n    if (diffInMinutes < 1) return 'Just now';\r\n    if (diffInMinutes < 60) return `${diffInMinutes} minute${diffInMinutes > 1 ? 's' : ''} ago`;\r\n    \r\n    const diffInHours = Math.floor(diffInMinutes / 60);\r\n    if (diffInHours < 24) return `${diffInHours} hour${diffInHours > 1 ? 's' : ''} ago`;\r\n    \r\n    const diffInDays = Math.floor(diffInHours / 24);\r\n    return `${diffInDays} day${diffInDays > 1 ? 's' : ''} ago`;\r\n  };\r\n\r\n  const unreadCount = notifications.filter(n => !n.read).length;\r\n\r\n  // Listen for global search clear events\r\n  useEffect(() => {\r\n    const handleGlobalSearchClear = (event: Event) => {\r\n      const customEvent = event as CustomEvent;\r\n      if (customEvent.detail?.query === '') {\r\n        setSearchQuery('');\r\n      }\r\n    };\r\n\r\n    window.addEventListener('globalSearch', handleGlobalSearchClear);\r\n    return () => {\r\n      window.removeEventListener('globalSearch', handleGlobalSearchClear);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (notificationRef.current && !notificationRef.current.contains(event.target as Node)) {\r\n        setShowNotifications(false);\r\n      }\r\n      if (profileRef.current && !profileRef.current.contains(event.target as Node)) {\r\n        setShowProfile(false);\r\n      }\r\n      if (languageRef.current && !languageRef.current.contains(event.target as Node)) {\r\n        setShowLanguage(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  const handleSearch = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (onSearch && searchQuery.trim()) {\r\n      onSearch(searchQuery);\r\n    }\r\n  };\r\n\r\n  // Live search on every keystroke\r\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = e.target.value;\r\n    setSearchQuery(value);\r\n    if (onSearch) {\r\n      onSearch(value);\r\n    }\r\n  };\r\n\r\n  const markAsRead = (id: string) => {\r\n    setNotifications(prev => \r\n      prev.map(n => n.id === id ? { ...n, read: true } : n)\r\n    );\r\n  };\r\n\r\n  const handleNotificationClick = (notification: Notification) => {\r\n    markAsRead(notification.id);\r\n    \r\n    // Navigate to society details if societyId is present\r\n    if (notification.societyId) {\r\n      window.location.href = `/admin/society/${notification.societyId}`;\r\n    }\r\n    \r\n    setShowNotifications(false);\r\n  };\r\n\r\n  const markAllAsRead = () => {\r\n    setNotifications(prev => prev.map(n => ({ ...n, read: true })));\r\n  };\r\n\r\n  const getRoleDisplayName = (role: UserRole): string => {\r\n    const roleNames: Record<UserRole, string> = {\r\n      [UserRole.SUPER_ADMIN]: t.roles.superAdmin,\r\n      [UserRole.ADMIN]: t.roles.admin, \r\n      [UserRole.DAIRY]: t.roles.dairy,\r\n      [UserRole.BMC]: t.roles.bmc,\r\n      [UserRole.SOCIETY]: t.roles.society,\r\n      [UserRole.FARMER]: t.roles.farmer\r\n    };\r\n    return roleNames[role];\r\n  };\r\n\r\n  const getNotificationIcon = (type: Notification['type']) => {\r\n    const icons = {\r\n      info: 'ℹ️',\r\n      warning: '⚠️',\r\n      success: '✅', \r\n      error: '❌'\r\n    };\r\n    return icons[type];\r\n  };\r\n\r\n  // Get the correct dashboard href based on user role\r\n  const getDashboardHref = (role: UserRole): string => {\r\n    if (role === UserRole.SUPER_ADMIN) {\r\n      return '/superadmin/dashboard';\r\n    }\r\n    if (role === UserRole.ADMIN) {\r\n      return '/admin/dashboard';\r\n    }\r\n    // For other roles, default to admin dashboard\r\n    return '/admin/dashboard';\r\n  };\r\n\r\n  // Update navigation items with dynamic dashboard href for admin/super admin\r\n  const getUpdatedNavItems = () => {\r\n    return navigationItems.map(item => {\r\n      if (item.labelKey === 'dashboard') {\r\n        return { ...item, href: getDashboardHref(user.role) };\r\n      }\r\n      return item;\r\n    }).filter(item => item.roles.includes(user.role));\r\n  };\r\n\r\n  return (\r\n    <header className=\"h-16 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 px-4 sm:px-6 flex items-center justify-between shadow-sm\">\r\n      {/* Search Bar - Hidden on mobile and on analytics page */}\r\n      {!pathname?.includes('/analytics') ? (\r\n        <div className=\"hidden lg:flex items-center space-x-4 flex-1 max-w-2xl\">\r\n          <div className=\"flex-1 max-w-md\">\r\n          <form onSubmit={handleSearch} className=\"relative\">\r\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500 dark:text-gray-400\" />\r\n            <input\r\n              type=\"text\"\r\n              value={searchQuery}\r\n              onChange={handleSearchChange}\r\n              placeholder={t.common.search}\r\n              className=\"w-full pl-10 pr-4 py-2 !bg-white dark:!bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl placeholder:text-gray-400 dark:placeholder:text-gray-500 !text-gray-900 dark:!text-gray-100 focus:!bg-white dark:focus:!bg-gray-800 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 focus:outline-none transition-all duration-200\"\r\n            />\r\n          </form>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"hidden lg:flex flex-1\"></div>\r\n      )}\r\n\r\n      {/* Mobile: Logo */}\r\n      <div className=\"lg:hidden flex items-center\">\r\n        <Image\r\n          src=\"/fulllogo.png\"\r\n          alt=\"Poornasree Equipments\"\r\n          width={140}\r\n          height={40}\r\n          className=\"h-8 sm:h-10 w-auto\"\r\n          priority\r\n        />\r\n      </div>\r\n\r\n      {/* Right Side Actions */}\r\n      <div className=\"flex items-center space-x-2 sm:space-x-4\">\r\n        {/* Theme Toggle - Desktop only */}\r\n        <div className=\"hidden lg:block\">\r\n          <ThemeToggle />\r\n        </div>\r\n\r\n        {/* Language Toggle - Desktop only */}\r\n        <div className=\"hidden lg:block relative\" ref={languageRef}>\r\n          <button\r\n            onClick={() => setShowLanguage(!showLanguage)}\r\n            className=\"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors\"\r\n            title=\"Change Language\"\r\n          >\r\n            <Globe className=\"w-5 h-5 text-gray-600 dark:text-gray-300\" />\r\n            <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n              {languages[language].nativeName}\r\n            </span>\r\n          </button>\r\n\r\n          <AnimatePresence>\r\n            {showLanguage && (\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 10, scale: 0.95 }}\r\n                animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                exit={{ opacity: 0, y: 10, scale: 0.95 }}\r\n                transition={{ duration: 0.2 }}\r\n                className=\"absolute right-0 top-full mt-2 w-56 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 z-50\"\r\n              >\r\n                <div className=\"p-2\">\r\n                  {(Object.keys(languages) as Language[]).map((lang) => (\r\n                    <button\r\n                      key={lang}\r\n                      onClick={() => {\r\n                        setLanguage(lang);\r\n                        setShowLanguage(false);\r\n                      }}\r\n                      className={`w-full flex items-center justify-between space-x-3 p-3 rounded-lg transition-colors ${\r\n                        language === lang\r\n                          ? 'bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400'\r\n                          : 'text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700'\r\n                      }`}\r\n                    >\r\n                      <div className=\"flex items-center space-x-3\">\r\n                        <span className=\"text-xl\">{languages[lang].flag}</span>\r\n                        <div className=\"text-left\">\r\n                          <p className=\"text-sm font-medium\">{languages[lang].nativeName}</p>\r\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400\">{languages[lang].name}</p>\r\n                        </div>\r\n                      </div>\r\n                      {language === lang && (\r\n                        <Check className=\"w-4 h-4\" />\r\n                      )}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n        </div>\r\n\r\n        {/* Notifications */}\r\n        <div className=\"relative\" ref={notificationRef}>\r\n          <button\r\n            onClick={() => setShowNotifications(!showNotifications)}\r\n            className=\"relative p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors\"\r\n          >\r\n            <Bell className=\"w-5 h-5 text-gray-600 dark:text-gray-300\" />\r\n            {unreadCount > 0 && (\r\n              <motion.span\r\n                initial={{ scale: 0 }}\r\n                animate={{ scale: 1 }}\r\n                className=\"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center\"\r\n              >\r\n                {unreadCount}\r\n              </motion.span>\r\n            )}\r\n          </button>\r\n\r\n          <AnimatePresence>\r\n            {showNotifications && (\r\n              <>\r\n                {/* Mobile overlay */}\r\n                <div \r\n                  className=\"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden\"\r\n                  onClick={() => setShowNotifications(false)}\r\n                />\r\n                \r\n                <motion.div\r\n                  initial={{ opacity: 0, y: 10, scale: 0.95 }}\r\n                  animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                  exit={{ opacity: 0, y: 10, scale: 0.95 }}\r\n                  transition={{ duration: 0.2 }}\r\n                  className=\"\r\n                    fixed lg:absolute \r\n                    inset-x-0 lg:inset-x-auto\r\n                    bottom-0 lg:bottom-auto\r\n                    lg:right-0 lg:top-full lg:mt-2\r\n                    w-full lg:w-80\r\n                    max-h-[80vh] lg:max-h-[32rem]\r\n                    bg-white dark:bg-gray-800 \r\n                    rounded-t-2xl lg:rounded-xl\r\n                    shadow-2xl \r\n                    border-t lg:border\r\n                    border-gray-200 dark:border-gray-700 \r\n                    z-50\r\n                    overflow-hidden\r\n                  \"\r\n                >\r\n                  {/* Drag handle for mobile */}\r\n                  <div className=\"lg:hidden flex justify-center py-2\">\r\n                    <div className=\"w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full\" />\r\n                  </div>\r\n\r\n                  <div className=\"p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between\">\r\n                    <h3 className=\"text-base sm:text-lg font-semibold text-gray-900 dark:text-gray-100\">{t.notifications.title}</h3>\r\n                    {unreadCount > 0 && (\r\n                      <button\r\n                        onClick={markAllAsRead}\r\n                        className=\"text-xs sm:text-sm text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-500\"\r\n                      >\r\n                        {t.common.markAllRead}\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"overflow-y-auto\" style={{ maxHeight: 'calc(80vh - 120px)' }}>\r\n                    {isLoadingNotifications ? (\r\n                      <div className=\"p-8 sm:p-12 text-center\">\r\n                        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto\"></div>\r\n                        <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-3\">Loading notifications...</p>\r\n                      </div>\r\n                    ) : notifications.length > 0 ? (\r\n                      notifications.map((notification) => (\r\n                        <div\r\n                          key={notification.id}\r\n                          onClick={() => handleNotificationClick(notification)}\r\n                          className={`p-3 sm:p-4 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors active:bg-gray-100 dark:active:bg-gray-600 ${\r\n                            !notification.read ? 'bg-green-50 dark:bg-green-900/20' : ''\r\n                          }`}\r\n                        >\r\n                          <div className=\"flex items-start space-x-2 sm:space-x-3\">\r\n                            <span className=\"text-base sm:text-lg flex-shrink-0\">{getNotificationIcon(notification.type)}</span>\r\n                            <div className=\"flex-1 min-w-0\">\r\n                              <p className=\"text-sm sm:text-base font-medium text-gray-900 dark:text-gray-100 truncate\">{notification.title}</p>\r\n                              <p className=\"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2\">{notification.message}</p>\r\n                              <p className=\"text-xs text-gray-500 dark:text-gray-500 mt-1.5 sm:mt-2\">{notification.time}</p>\r\n                            </div>\r\n                            {!notification.read && (\r\n                              <div className=\"w-2 h-2 bg-green-500 rounded-full flex-shrink-0 mt-1\"></div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <div className=\"p-8 sm:p-12 text-center text-gray-500 dark:text-gray-400\">\r\n                        <Bell className=\"w-10 h-10 sm:w-12 sm:h-12 mx-auto text-gray-300 dark:text-gray-600 mb-3\" />\r\n                        <p className=\"text-sm sm:text-base\">{t.notifications.noNotifications}</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </motion.div>\r\n              </>\r\n            )}\r\n          </AnimatePresence>\r\n        </div>\r\n\r\n        {/* Profile Menu */}\r\n        <div className=\"relative\" ref={profileRef}>\r\n          <button\r\n            onClick={() => setShowProfile(!showProfile)}\r\n            className=\"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors\"\r\n          >\r\n            <div className={`w-8 h-8 rounded-full bg-gradient-to-br ${roleColors[user.role]} flex items-center justify-center`}>\r\n              <span className=\"text-sm font-semibold text-white\">\r\n                {user.firstName.charAt(0)}{user.lastName.charAt(0)}\r\n              </span>\r\n            </div>\r\n            <div className=\"text-left hidden lg:block\">\r\n              <p className=\"body-medium font-medium text-gray-900 dark:text-gray-100\">\r\n                {user.firstName} {user.lastName}\r\n              </p>\r\n              <p className=\"body-small text-gray-600 dark:text-gray-400\">{getRoleDisplayName(user.role)}</p>\r\n            </div>\r\n            <ChevronDown className=\"w-4 h-4 text-gray-500 dark:text-gray-400\" />\r\n          </button>\r\n\r\n          <AnimatePresence>\r\n            {showProfile && (\r\n              <>\r\n                {/* Mobile overlay */}\r\n                <div \r\n                  className=\"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden\"\r\n                  onClick={() => setShowProfile(false)}\r\n                />\r\n                \r\n                <motion.div\r\n                  initial={{ \r\n                    opacity: 0, \r\n                    x: 300,\r\n                    scale: 0.95 \r\n                  }}\r\n                  animate={{ \r\n                    opacity: 1, \r\n                    x: 0,\r\n                    scale: 1 \r\n                  }}\r\n                  exit={{ \r\n                    opacity: 0, \r\n                    x: 300,\r\n                    scale: 0.95 \r\n                  }}\r\n                  transition={{ \r\n                    duration: 0.3,\r\n                    type: \"spring\",\r\n                    damping: 25,\r\n                    stiffness: 300\r\n                  }}\r\n                  className=\"\r\n                    fixed lg:absolute \r\n                    top-0 lg:top-full lg:mt-2\r\n                    right-0 lg:right-0\r\n                    h-full lg:h-auto\r\n                    w-80 lg:w-72\r\n                    max-h-screen lg:max-h-96\r\n                    bg-white dark:bg-gray-800 \r\n                    rounded-l-2xl lg:rounded-xl\r\n                    shadow-2xl \r\n                    border-l lg:border\r\n                    border-gray-200 dark:border-gray-700 \r\n                    z-50\r\n                    overflow-hidden\r\n                  \"\r\n                >\r\n                  {/* Header - Mobile drawer header */}\r\n                  <div className=\"lg:hidden flex justify-between items-center mb-3 px-4 pt-4\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">Menu</h3>\r\n                    <button\r\n                      onClick={() => setShowProfile(false)}\r\n                      className=\"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors\"\r\n                    >\r\n                      <ChevronDown className=\"w-5 h-5 text-gray-600 dark:text-gray-400 rotate-90\" />\r\n                    </button>\r\n                  </div>\r\n\r\n                  {/* Profile header - consistent for all users on desktop */}\r\n                  <div className=\"p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <div className={`w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-gradient-to-br ${roleColors[user.role]} flex items-center justify-center flex-shrink-0`}>\r\n                        <span className=\"text-base sm:text-lg font-semibold text-white\">\r\n                          {user.firstName.charAt(0)}{user.lastName.charAt(0)}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"min-w-0 flex-1\">\r\n                        <p className=\"text-sm sm:text-base font-semibold text-gray-900 dark:text-gray-100 truncate\">\r\n                          {user.firstName} {user.lastName}\r\n                        </p>\r\n                        <p className=\"text-xs sm:text-sm text-gray-600 dark:text-gray-400 truncate\">{user.email}</p>\r\n                        <span className={`inline-block px-2 py-0.5 sm:py-1 text-[10px] sm:text-xs font-medium text-white rounded-full bg-gradient-to-r ${roleColors[user.role]} mt-1`}>\r\n                          {getRoleDisplayName(user.role)}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"p-2 overflow-y-auto lg:overflow-visible\" style={{ \r\n                    maxHeight: 'calc(90vh - 150px)' \r\n                  }}>\r\n                    {/* Navigation items for Admin and Super Admin - only on mobile */}\r\n                    {(user.role === UserRole.ADMIN || user.role === UserRole.SUPER_ADMIN) ? (\r\n                      <>\r\n                        {/* Main Navigation Section - Mobile only */}\r\n                        <div className=\"mb-4 lg:hidden\">\r\n                          <h4 className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 px-2\">\r\n                            Navigation\r\n                          </h4>\r\n                          <div className=\"space-y-1\">\r\n                            {getUpdatedNavItems().slice(0, -1).map((item) => { // Exclude settings from main nav\r\n                              const Icon = item.icon;\r\n                              const isActive = pathname === item.href;\r\n                              \r\n                              return (\r\n                                <Link\r\n                                  key={item.href}\r\n                                  href={item.href}\r\n                                  onClick={() => setShowProfile(false)}\r\n                                  className={`w-full flex items-center space-x-3 p-2.5 sm:p-3 rounded-lg transition-all duration-200 ${\r\n                                    isActive \r\n                                      ? `bg-gradient-to-r ${roleColors[user.role]} text-white shadow-md` \r\n                                      : 'text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 active:bg-gray-100 dark:active:bg-gray-600'\r\n                                  }`}\r\n                                >\r\n                                  <Icon className={`w-4 h-4 flex-shrink-0 ${isActive ? 'text-white' : ''}`} />\r\n                                  <span className={`text-sm sm:text-base font-medium ${isActive ? 'text-white' : ''}`}>\r\n                                    {t.nav[item.labelKey]}\r\n                                  </span>\r\n                                </Link>\r\n                              );\r\n                            })}\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Profile & Settings Section */}\r\n                        <div className=\"mb-4\">\r\n                          <h4 className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 px-2 lg:hidden\">\r\n                            Account\r\n                          </h4>\r\n                          <div className=\"space-y-1\">\r\n                            <button \r\n                              onClick={() => {\r\n                                // Navigate to profile page based on user role\r\n                                if (user.role === UserRole.ADMIN) {\r\n                                  window.location.href = '/admin/profile';\r\n                                } else if (user.role === UserRole.SUPER_ADMIN) {\r\n                                  window.location.href = '/superadmin/profile';\r\n                                }\r\n                                setShowProfile(false);\r\n                              }}\r\n                              className=\"w-full flex items-center space-x-3 p-2.5 sm:p-3 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 active:bg-gray-100 dark:active:bg-gray-600 rounded-lg transition-colors\"\r\n                            >\r\n                              <User className=\"w-4 h-4 flex-shrink-0\" />\r\n                              <span className=\"text-sm sm:text-base font-medium\">{t.nav.profile}</span>\r\n                            </button>\r\n                            <Link\r\n                              href=\"/settings\"\r\n                              onClick={() => setShowProfile(false)}\r\n                              className={`w-full flex items-center space-x-3 p-2.5 sm:p-3 rounded-lg transition-colors ${\r\n                                pathname === '/settings'\r\n                                  ? `bg-gradient-to-r ${roleColors[user.role]} text-white shadow-md`\r\n                                  : 'text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 active:bg-gray-100 dark:active:bg-gray-600'\r\n                              }`}\r\n                            >\r\n                              <Settings className={`w-4 h-4 flex-shrink-0 ${pathname === '/settings' ? 'text-white' : ''}`} />\r\n                              <span className={`text-sm sm:text-base font-medium ${pathname === '/settings' ? 'text-white' : ''}`}>\r\n                                {t.nav.settings}\r\n                              </span>\r\n                            </Link>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Language & Theme Section for Admin/Super Admin */}\r\n                        <div className=\"lg:hidden mb-4\">\r\n                          <h4 className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 px-2\">\r\n                            Preferences\r\n                          </h4>\r\n                          <div className=\"space-y-1\">\r\n                            <button\r\n                              onClick={() => setShowMobileLanguage(!showMobileLanguage)}\r\n                              className=\"w-full flex items-center justify-between p-2.5 sm:p-3 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 active:bg-gray-100 dark:active:bg-gray-600 rounded-lg transition-colors\"\r\n                            >\r\n                              <div className=\"flex items-center space-x-3\">\r\n                                <Globe className=\"w-4 h-4 flex-shrink-0\" />\r\n                                <div className=\"text-left\">\r\n                                  <span className=\"text-sm sm:text-base block font-medium\">Language</span>\r\n                                  <span className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                                    {languages[language].flag} {languages[language].nativeName}\r\n                                  </span>\r\n                                </div>\r\n                              </div>\r\n                              <ChevronDown className={`w-4 h-4 transition-transform ${showMobileLanguage ? 'rotate-180' : ''}`} />\r\n                            </button>\r\n\r\n                            <AnimatePresence>\r\n                              {showMobileLanguage && (\r\n                                <motion.div\r\n                                  initial={{ height: 0, opacity: 0 }}\r\n                                  animate={{ height: 'auto', opacity: 1 }}\r\n                                  exit={{ height: 0, opacity: 0 }}\r\n                                  transition={{ duration: 0.2 }}\r\n                                  className=\"overflow-hidden\"\r\n                                >\r\n                                  <div className=\"px-2 py-2 space-y-1\">\r\n                                    {(Object.keys(languages) as Language[]).map((lang) => (\r\n                                      <button\r\n                                        key={lang}\r\n                                        onClick={() => {\r\n                                          setLanguage(lang);\r\n                                          setShowMobileLanguage(false);\r\n                                        }}\r\n                                        className={`w-full flex items-center justify-between p-2 rounded-lg transition-colors ${\r\n                                          language === lang\r\n                                            ? 'bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400'\r\n                                            : 'text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700'\r\n                                        }`}\r\n                                      >\r\n                                        <div className=\"flex items-center space-x-2\">\r\n                                          <span className=\"text-base sm:text-lg\">{languages[lang].flag}</span>\r\n                                          <span className=\"text-xs sm:text-sm\">{languages[lang].nativeName}</span>\r\n                                        </div>\r\n                                        {language === lang && (\r\n                                          <Check className=\"w-3 h-3 flex-shrink-0\" />\r\n                                        )}\r\n                                      </button>\r\n                                    ))}\r\n                                  </div>\r\n                                </motion.div>\r\n                              )}\r\n                            </AnimatePresence>\r\n\r\n                            <div className=\"px-2 sm:px-3 py-2\">\r\n                              <p className=\"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mb-2 font-medium\">Theme</p>\r\n                              <ThemeToggle />\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Logout Section for Admin/Super Admin */}\r\n                        <div className=\"border-t border-gray-200 dark:border-gray-700 pt-3\">\r\n                          <button\r\n                            onClick={() => setShowLogoutConfirm(true)}\r\n                            className=\"w-full flex items-center space-x-3 p-2.5 sm:p-3 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 active:bg-red-100 dark:active:bg-red-900/30 rounded-lg transition-colors\"\r\n                          >\r\n                            <LogOut className=\"w-4 h-4 flex-shrink-0\" />\r\n                            <span className=\"text-sm sm:text-base font-medium\">{t.nav.logout}</span>\r\n                          </button>\r\n                        </div>\r\n                      </>\r\n                    ) : (\r\n                      // Regular profile dropdown content for other users\r\n                      <>\r\n                        <button \r\n                          onClick={() => {\r\n                            window.location.href = '/profile';\r\n                            setShowProfile(false);\r\n                          }}\r\n                          className=\"w-full flex items-center space-x-3 p-2.5 sm:p-3 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 active:bg-gray-100 dark:active:bg-gray-600 rounded-lg transition-colors\"\r\n                        >\r\n                          <User className=\"w-4 h-4 flex-shrink-0\" />\r\n                          <span className=\"text-sm sm:text-base\">{t.nav.profile}</span>\r\n                        </button>\r\n                        <button className=\"w-full flex items-center space-x-3 p-2.5 sm:p-3 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 active:bg-gray-100 dark:active:bg-gray-600 rounded-lg transition-colors\">\r\n                          <Settings className=\"w-4 h-4 flex-shrink-0\" />\r\n                          <span className=\"text-sm sm:text-base\">{t.nav.settings}</span>\r\n                        </button>\r\n                      </>\r\n                    )}\r\n\r\n                    {/* Show language/theme section only for non-admin users */}\r\n                    {!(user.role === UserRole.ADMIN || user.role === UserRole.SUPER_ADMIN) && (\r\n                      <>\r\n                        <hr className=\"my-2 border-gray-200 dark:border-gray-700\" />\r\n\r\n                        {/* Language Selector in Dropdown - Mobile only */}\r\n                        <div className=\"lg:hidden\">\r\n                          <button\r\n                            onClick={() => setShowMobileLanguage(!showMobileLanguage)}\r\n                            className=\"w-full flex items-center justify-between p-2.5 sm:p-3 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 active:bg-gray-100 dark:active:bg-gray-600 rounded-lg transition-colors\"\r\n                          >\r\n                            <div className=\"flex items-center space-x-3\">\r\n                              <Globe className=\"w-4 h-4 flex-shrink-0\" />\r\n                              <div className=\"text-left\">\r\n                                <span className=\"text-sm sm:text-base block\">Language</span>\r\n                                <span className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                                  {languages[language].flag} {languages[language].nativeName}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                            <ChevronDown className={`w-4 h-4 transition-transform ${showMobileLanguage ? 'rotate-180' : ''}`} />\r\n                          </button>\r\n\r\n                      <AnimatePresence>\r\n                        {showMobileLanguage && (\r\n                          <motion.div\r\n                            initial={{ height: 0, opacity: 0 }}\r\n                            animate={{ height: 'auto', opacity: 1 }}\r\n                            exit={{ height: 0, opacity: 0 }}\r\n                            transition={{ duration: 0.2 }}\r\n                            className=\"overflow-hidden\"\r\n                          >\r\n                            <div className=\"px-2 py-2 space-y-1\">\r\n                              {(Object.keys(languages) as Language[]).map((lang) => (\r\n                                <button\r\n                                  key={lang}\r\n                                  onClick={() => {\r\n                                    setLanguage(lang);\r\n                                    setShowMobileLanguage(false);\r\n                                  }}\r\n                                  className={`w-full flex items-center justify-between p-2 rounded-lg transition-colors ${\r\n                                    language === lang\r\n                                      ? 'bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400'\r\n                                      : 'text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700'\r\n                                  }`}\r\n                                >\r\n                                  <div className=\"flex items-center space-x-2\">\r\n                                    <span className=\"text-base sm:text-lg\">{languages[lang].flag}</span>\r\n                                    <span className=\"text-xs sm:text-sm\">{languages[lang].nativeName}</span>\r\n                                  </div>\r\n                                  {language === lang && (\r\n                                    <Check className=\"w-3 h-3 flex-shrink-0\" />\r\n                                  )}\r\n                                </button>\r\n                              ))}\r\n                            </div>\r\n                          </motion.div>\r\n                        )}\r\n                          </AnimatePresence>\r\n\r\n                          <hr className=\"my-2 border-gray-200 dark:border-gray-700 lg:hidden\" />\r\n\r\n                          {/* Theme Toggle in Dropdown - Mobile only */}\r\n                          <div className=\"lg:hidden px-2 sm:px-3 py-2\">\r\n                            <p className=\"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mb-2\">Theme</p>\r\n                            <ThemeToggle />\r\n                          </div>\r\n\r\n                          <hr className=\"my-2 border-gray-200 dark:border-gray-700\" />\r\n                          \r\n                          <button\r\n                            onClick={() => setShowLogoutConfirm(true)}\r\n                            className=\"w-full flex items-center space-x-3 p-2.5 sm:p-3 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 active:bg-red-100 dark:active:bg-red-900/30 rounded-lg transition-colors\"\r\n                          >\r\n                            <LogOut className=\"w-4 h-4 flex-shrink-0\" />\r\n                            <span className=\"text-sm sm:text-base\">{t.nav.logout}</span>\r\n                          </button>\r\n                        </div>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                </motion.div>\r\n              </>\r\n            )}\r\n          </AnimatePresence>\r\n        </div>\r\n\r\n        {/* Logout Confirmation Dialog */}\r\n        <AnimatePresence>\r\n          {showLogoutConfirm && (\r\n            <motion.div\r\n              initial={{ opacity: 0 }}\r\n              animate={{ opacity: 1 }}\r\n              exit={{ opacity: 0 }}\r\n              className=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-[9999] p-4\"\r\n              style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0 }}\r\n              onClick={(e) => {\r\n                if (e.target === e.currentTarget) {\r\n                  setShowLogoutConfirm(false);\r\n                }\r\n              }}\r\n            >\r\n              <motion.div\r\n                initial={{ scale: 0.9, opacity: 0 }}\r\n                animate={{ scale: 1, opacity: 1 }}\r\n                exit={{ scale: 0.9, opacity: 0 }}\r\n                transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n                className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md\"\r\n                onClick={(e) => e.stopPropagation()}\r\n              >\r\n                <div className=\"p-6\">\r\n                  <div className=\"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-amber-100 dark:bg-amber-900/30 rounded-full\">\r\n                    <AlertCircle className=\"w-6 h-6 text-amber-600 dark:text-amber-400\" />\r\n                  </div>\r\n                  \r\n                  <h3 className=\"text-lg font-semibold text-center text-gray-900 dark:text-gray-100 mb-2\">\r\n                    Confirm Logout\r\n                  </h3>\r\n                  \r\n                  <p className=\"text-sm text-center text-gray-600 dark:text-gray-400 mb-6\">\r\n                    Are you sure you want to logout? This action cannot be undone.\r\n                  </p>\r\n\r\n                  <div className=\"flex flex-col-reverse sm:flex-row gap-3 sm:gap-4\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowLogoutConfirm(false)}\r\n                      className=\"w-full px-4 py-2.5 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\r\n                    >\r\n                      Cancel\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        setShowLogoutConfirm(false);\r\n                        onLogout();\r\n                      }}\r\n                      className=\"w-full flex items-center justify-center px-4 py-2.5 bg-amber-600 dark:bg-amber-700 text-white rounded-lg hover:bg-amber-700 dark:hover:bg-amber-600 transition-colors\"\r\n                    >\r\n                      <LogOut className=\"w-4 h-4 mr-2\" />\r\n                      Logout\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </motion.div>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </div>\r\n    </header>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2367, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/components/layout/DashboardLayout.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useMemo } from 'react';\r\nimport Sidebar from './Sidebar';\r\nimport Header from './Header';\r\nimport { UserRole } from '@/types/user';\r\n\r\ninterface DashboardLayoutProps {\r\n  children: React.ReactNode;\r\n  user: {\r\n    id: number;\r\n    uid: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    email: string;\r\n    role: UserRole;\r\n  };\r\n}\r\n\r\nexport default function DashboardLayout({ children, user }: DashboardLayoutProps) {\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      const mobile = window.innerWidth < 768;\r\n      setIsMobile(mobile);\r\n      if (mobile) {\r\n        setSidebarCollapsed(true);\r\n        setSidebarOpen(false);\r\n      }\r\n    };\r\n\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  const handleSidebarToggle = () => {\r\n    if (isMobile) {\r\n      setSidebarOpen(!sidebarOpen);\r\n    } else {\r\n      setSidebarCollapsed(!sidebarCollapsed);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      // Call logout API\r\n      const response = await fetch('/api/auth/logout', {\r\n        method: 'POST',\r\n        credentials: 'include'\r\n      });\r\n\r\n      if (response.ok) {\r\n        // Clear any client-side storage\r\n        localStorage.removeItem('authToken');\r\n        sessionStorage.clear();\r\n        \r\n        // Redirect to login\r\n        window.location.href = '/login';\r\n      }\r\n    } catch (error) {\r\n      console.error('Logout failed:', error);\r\n      // Force redirect anyway\r\n      window.location.href = '/login';\r\n    }\r\n  };\r\n\r\n  const handleSearch = (query: string) => {\r\n    console.log('Search query:', query);\r\n    \r\n    // Emit global search event for pages to listen to\r\n    const event = new CustomEvent('globalSearch', {\r\n      detail: { query }\r\n    });\r\n    window.dispatchEvent(event);\r\n  };\r\n\r\n  // Memoize sidebar overlay to prevent unnecessary re-renders\r\n  const sidebarOverlay = useMemo(() => {\r\n    if (!isMobile || !sidebarOpen) return null;\r\n    \r\n    return (\r\n      <div\r\n        onClick={() => setSidebarOpen(false)}\r\n        className=\"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden transition-opacity duration-300\"\r\n      />\r\n    );\r\n  }, [isMobile, sidebarOpen]);\r\n\r\n  return (\r\n    <div className=\"h-screen flex bg-gray-50 dark:bg-gray-900 overflow-hidden\">\r\n      {/* Mobile Sidebar Overlay */}\r\n      {sidebarOverlay}\r\n\r\n      {/* Sidebar - Always render, CSS controls visibility */}\r\n      <Sidebar\r\n        userRole={user.role}\r\n        isCollapsed={!isMobile && sidebarCollapsed}\r\n        onToggle={handleSidebarToggle}\r\n        onLogout={handleLogout}\r\n      />\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col min-w-0\">\r\n        {/* Header */}\r\n        <Header\r\n          user={user}\r\n          onLogout={handleLogout}\r\n          onSearch={handleSearch}\r\n        />\r\n\r\n        {/* Page Content */}\r\n        <main className=\"flex-1 overflow-y-auto bg-gray-50 dark:bg-gray-900\">\r\n          <div className=\"p-6\">\r\n            {children}\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAmBe,SAAS,gBAAgB,EAAE,QAAQ,EAAE,IAAI,EAAwB;IAC9E,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IACzD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,IAAA,kNAAS,EAAC;QACR,MAAM,cAAc;YAClB,MAAM,SAAS,OAAO,UAAU,GAAG;YACnC,YAAY;YACZ,IAAI,QAAQ;gBACV,oBAAoB;gBACpB,eAAe;YACjB;QACF;QAEA;QACA,OAAO,gBAAgB,CAAC,UAAU;QAClC,OAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;IACpD,GAAG,EAAE;IAEL,MAAM,sBAAsB;QAC1B,IAAI,UAAU;YACZ,eAAe,CAAC;QAClB,OAAO;YACL,oBAAoB,CAAC;QACvB;IACF;IAEA,MAAM,eAAe;QACnB,IAAI;YACF,kBAAkB;YAClB,MAAM,WAAW,MAAM,MAAM,oBAAoB;gBAC/C,QAAQ;gBACR,aAAa;YACf;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,gCAAgC;gBAChC,aAAa,UAAU,CAAC;gBACxB,eAAe,KAAK;gBAEpB,oBAAoB;gBACpB,OAAO,QAAQ,CAAC,IAAI,GAAG;YACzB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kBAAkB;YAChC,wBAAwB;YACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB;IACF;IAEA,MAAM,eAAe,CAAC;QACpB,QAAQ,GAAG,CAAC,iBAAiB;QAE7B,kDAAkD;QAClD,MAAM,QAAQ,IAAI,YAAY,gBAAgB;YAC5C,QAAQ;gBAAE;YAAM;QAClB;QACA,OAAO,aAAa,CAAC;IACvB;IAEA,4DAA4D;IAC5D,MAAM,iBAAiB,IAAA,gNAAO,EAAC;QAC7B,IAAI,CAAC,YAAY,CAAC,aAAa,OAAO;QAEtC,qBACE,8OAAC;YACC,SAAS,IAAM,eAAe;YAC9B,WAAU;;;;;;IAGhB,GAAG;QAAC;QAAU;KAAY;IAE1B,qBACE,8OAAC;QAAI,WAAU;;YAEZ;0BAGD,8OAAC,kJAAO;gBACN,UAAU,KAAK,IAAI;gBACnB,aAAa,CAAC,YAAY;gBAC1B,UAAU;gBACV,UAAU;;;;;;0BAIZ,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC,iJAAM;wBACL,MAAM;wBACN,UAAU;wBACV,UAAU;;;;;;kCAIZ,8OAAC;wBAAK,WAAU;kCACd,cAAA,8OAAC;4BAAI,WAAU;sCACZ;;;;;;;;;;;;;;;;;;;;;;;AAMb","debugId":null}}]
}