{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/components/forms/AddEntityModal.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { \r\n  Building2, \r\n  Milk, \r\n  Users, \r\n  X, \r\n  Eye, \r\n  EyeOff,\r\n  Plus\r\n} from 'lucide-react';\r\nimport { FlowerSpinner } from '@/components';\r\n\r\ninterface AddEntityModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  type: 'dairy' | 'bmc' | 'society';\r\n  onSuccess: () => void;\r\n}\r\n\r\ninterface EntityFormData {\r\n  name: string;\r\n  password: string;\r\n  entityId: string;\r\n  location?: string;\r\n  contactPerson?: string;\r\n  phone?: string;\r\n  email?: string;\r\n  capacity?: number;\r\n  presidentName?: string;\r\n  contactPhone?: string;\r\n  dairyFarmId?: number;\r\n  bmcId?: number;\r\n}\r\n\r\ninterface DairyFarm {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\ninterface BMC {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\nexport default function AddEntityModal({ isOpen, onClose, type, onSuccess }: AddEntityModalProps) {\r\n  const [formData, setFormData] = useState<EntityFormData>({\r\n    name: '',\r\n    password: '',\r\n    entityId: '',\r\n    location: '',\r\n    contactPerson: '',\r\n    phone: '',\r\n    email: '',\r\n    capacity: undefined,\r\n    presidentName: '',\r\n    contactPhone: '',\r\n    dairyFarmId: undefined,\r\n    bmcId: undefined\r\n  });\r\n  \r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [dairyFarms, setDairyFarms] = useState<DairyFarm[]>([]);\r\n  const [bmcs, setBMCs] = useState<BMC[]>([]);\r\n\r\n  // Load dependent data when modal opens\r\n  const loadDependentData = async () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) return;\r\n\r\n    try {\r\n      if (type === 'bmc') {\r\n        // Load dairy farms for BMC\r\n        const response = await fetch('/api/user/dairy', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (response.ok) {\r\n          const result = await response.json();\r\n          setDairyFarms(result.data || []);\r\n        }\r\n      } else if (type === 'society') {\r\n        // Load BMCs for society\r\n        const response = await fetch('/api/user/bmc', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (response.ok) {\r\n          const result = await response.json();\r\n          setBMCs(result.data || []);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading dependent data:', error);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      setError('Authentication required');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let endpoint = '';\r\n      let payload: any = {\r\n        name: formData.name,\r\n        password: formData.password\r\n      };\r\n\r\n      switch (type) {\r\n        case 'dairy':\r\n          endpoint = '/api/user/dairy';\r\n          payload = {\r\n            ...payload,\r\n            dairyId: formData.entityId,\r\n            location: formData.location,\r\n            contactPerson: formData.contactPerson,\r\n            phone: formData.phone,\r\n            email: formData.email\r\n          };\r\n          break;\r\n        case 'bmc':\r\n          endpoint = '/api/user/bmc';\r\n          payload = {\r\n            ...payload,\r\n            bmcId: formData.entityId,\r\n            location: formData.location,\r\n            capacity: formData.capacity,\r\n            dairyFarmId: formData.dairyFarmId\r\n          };\r\n          break;\r\n        case 'society':\r\n          endpoint = '/api/user/society';\r\n          payload = {\r\n            ...payload,\r\n            societyId: formData.entityId,\r\n            location: formData.location,\r\n            presidentName: formData.presidentName,\r\n            contactPhone: formData.contactPhone,\r\n            bmcId: formData.bmcId\r\n          };\r\n          break;\r\n      }\r\n\r\n      const response = await fetch(endpoint, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(payload)\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (response.ok) {\r\n        onSuccess();\r\n        onClose();\r\n        // Reset form\r\n        setFormData({\r\n          name: '',\r\n          password: '',\r\n          entityId: '',\r\n          location: '',\r\n          contactPerson: '',\r\n          phone: '',\r\n          email: '',\r\n          capacity: undefined,\r\n          presidentName: '',\r\n          contactPhone: '',\r\n          dairyFarmId: undefined,\r\n          bmcId: undefined\r\n        });\r\n      } else {\r\n        setError(result.message || `Failed to add ${type}`);\r\n      }\r\n    } catch (error) {\r\n      setError(`Error adding ${type}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getTitle = () => {\r\n    switch (type) {\r\n      case 'dairy': return 'Add Dairy Farm';\r\n      case 'bmc': return 'Add BMC';\r\n      case 'society': return 'Add Society';\r\n    }\r\n  };\r\n\r\n  const getIcon = () => {\r\n    switch (type) {\r\n      case 'dairy': return Building2;\r\n      case 'bmc': return Milk;\r\n      case 'society': return Users;\r\n    }\r\n  };\r\n\r\n  const getIdLabel = () => {\r\n    switch (type) {\r\n      case 'dairy': return 'Dairy ID';\r\n      case 'bmc': return 'BMC ID';\r\n      case 'society': return 'Society ID';\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  // Load dependent data when modal opens\r\n  if (isOpen && (type === 'bmc' || type === 'society')) {\r\n    loadDependentData();\r\n  }\r\n\r\n  const Icon = getIcon();\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <motion.div\r\n        initial={{ opacity: 0, scale: 0.9 }}\r\n        animate={{ opacity: 1, scale: 1 }}\r\n        exit={{ opacity: 0, scale: 0.9 }}\r\n        className=\"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\"\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"p-3 bg-emerald-100 rounded-xl\">\r\n              <Icon className=\"w-6 h-6 text-emerald-600\" />\r\n            </div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">{getTitle()}</h2>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n          {error && (\r\n            <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n              <p className=\"text-red-600 text-sm\">{error}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Basic Information */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Name */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Name *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.name}\r\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                placeholder={`Enter ${type} name`}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Entity ID */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                {getIdLabel()} <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.entityId}\r\n                onChange={(e) => setFormData({ ...formData, entityId: e.target.value })}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                placeholder={`Enter unique ${getIdLabel().toLowerCase()}`}\r\n                required\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Password */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Password *\r\n            </label>\r\n            <div className=\"relative\">\r\n              <input\r\n                type={showPassword ? 'text' : 'password'}\r\n                value={formData.password}\r\n                onChange={(e) => setFormData({ ...formData, password: e.target.value })}\r\n                className=\"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                placeholder=\"Enter secure password\"\r\n                required\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowPassword(!showPassword)}\r\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\r\n              >\r\n                {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Location */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Location\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.location}\r\n              onChange={(e) => setFormData({ ...formData, location: e.target.value })}\r\n              className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n              placeholder=\"Enter location\"\r\n            />\r\n          </div>\r\n\r\n          {/* Type-specific fields */}\r\n          {type === 'dairy' && (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Contact Person\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.contactPerson}\r\n                  onChange={(e) => setFormData({ ...formData, contactPerson: e.target.value })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                  placeholder=\"Contact person name\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Phone\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  value={formData.phone}\r\n                  onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                  placeholder=\"Phone number\"\r\n                />\r\n              </div>\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Email\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  value={formData.email}\r\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                  placeholder=\"Email address\"\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {type === 'bmc' && (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Capacity (Liters)\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={formData.capacity || ''}\r\n                  onChange={(e) => setFormData({ ...formData, capacity: parseInt(e.target.value) || undefined })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                  placeholder=\"Storage capacity\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Dairy Farm\r\n                </label>\r\n                <select\r\n                  value={formData.dairyFarmId || ''}\r\n                  onChange={(e) => setFormData({ ...formData, dairyFarmId: parseInt(e.target.value) || undefined })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                >\r\n                  <option value=\"\">Select dairy farm</option>\r\n                  {dairyFarms.map((dairy) => (\r\n                    <option key={dairy.id} value={dairy.id}>\r\n                      {dairy.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {type === 'society' && (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  President Name\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.presidentName}\r\n                  onChange={(e) => setFormData({ ...formData, presidentName: e.target.value })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                  placeholder=\"Society president name\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Contact Phone\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  value={formData.contactPhone}\r\n                  onChange={(e) => setFormData({ ...formData, contactPhone: e.target.value })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                  placeholder=\"Contact phone number\"\r\n                />\r\n              </div>\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  BMC\r\n                </label>\r\n                <select\r\n                  value={formData.bmcId || ''}\r\n                  onChange={(e) => setFormData({ ...formData, bmcId: parseInt(e.target.value) || undefined })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\r\n                >\r\n                  <option value=\"\">Select BMC</option>\r\n                  {bmcs.map((bmc) => (\r\n                    <option key={bmc.id} value={bmc.id}>\r\n                      {bmc.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Submit Button */}\r\n          <div className=\"flex justify-end space-x-4 pt-6 border-t border-gray-200\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-6 py-3 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center space-x-2 disabled:opacity-50\"\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <FlowerSpinner size={16} />\r\n                  <span>Adding...</span>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Plus className=\"w-4 h-4\" />\r\n                  <span>Add {type.charAt(0).toUpperCase() + type.slice(1)}</span>\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 854, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/app/admin/dashboard/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { motion } from 'framer-motion';\r\nimport { useUser } from '@/contexts/UserContext';\r\nimport AddEntityModal from '@/components/forms/AddEntityModal';\r\nimport { \r\n  Building2, \r\n  Milk, \r\n  Users, \r\n  Plus,\r\n  Eye,\r\n  Trash2,\r\n  Shield,\r\n  BarChart3\r\n} from 'lucide-react';\r\nimport { FlowerSpinner } from '@/components';\r\n\r\ninterface DashboardStats {\r\n  totalDairies: number;\r\n  totalBMCs: number;\r\n  totalSocieties: number;\r\n  totalFarmers: number;\r\n}\r\n\r\ninterface Entity {\r\n  id: number;\r\n  name: string;\r\n  location?: string;\r\n  created_at: string;\r\n  // Type-specific fields\r\n  dairy_id?: string;\r\n  bmc_id?: string;\r\n  society_id?: string;\r\n  contact_person?: string;\r\n  phone?: string;\r\n  email?: string;\r\n  capacity?: number;\r\n  dairy_farm_name?: string;\r\n  president_name?: string;\r\n  contact_phone?: string;\r\n  bmc_name?: string;\r\n}\r\n\r\nexport default function AdminDashboard() {\r\n  const router = useRouter();\r\n  const { user } = useUser(); // Use centralized user context\r\n  \r\n  const [stats, setStats] = useState<DashboardStats>({\r\n    totalDairies: 0,\r\n    totalBMCs: 0,\r\n    totalSocieties: 0,\r\n    totalFarmers: 0\r\n  });\r\n  \r\n  const [dairies, setDairies] = useState<Entity[]>([]);\r\n  const [bmcs, setBMCs] = useState<Entity[]>([]);\r\n  const [societies, setSocieties] = useState<Entity[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeModal, setActiveModal] = useState<'dairy' | 'bmc' | 'society' | null>(null);\r\n  const [activeTab, setActiveTab] = useState<'overview' | 'dairies' | 'bmcs' | 'societies'>('overview');\r\n\r\n  // Load dashboard data - defined before useEffect to avoid dependency issues\r\n  const loadData = useCallback(async () => {\r\n    const token = localStorage.getItem('authToken');\r\n    if (!token) {\r\n      console.error('No auth token found');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      console.log('üîÑ Loading dashboard data...');\r\n      console.log('üîë Token preview:', token.substring(0, 50) + '...');\r\n      \r\n      const headers = { \r\n        'Authorization': `Bearer ${token}`,\r\n        'Content-Type': 'application/json'\r\n      };\r\n      \r\n      // Load dairy data first to check authentication\r\n      console.log('üì° Fetching dairy data...');\r\n      const dairyRes = await fetch('/api/user/dairy', { headers });\r\n      console.log('üè™ Dairy response:', dairyRes.status, dairyRes.statusText);\r\n      \r\n      if (!dairyRes.ok) {\r\n        const errorData = await dairyRes.text();\r\n        console.error('‚ùå Dairy API error:', errorData);\r\n        \r\n        if (dairyRes.status === 401 || dairyRes.status === 403) {\r\n          console.log('Authentication failed, redirecting to login');\r\n          localStorage.removeItem('authToken');\r\n          localStorage.removeItem('userData');\r\n          router.push('/login');\r\n          return;\r\n        }\r\n        \r\n        if (dairyRes.status === 404) {\r\n          console.error('‚ùå Admin schema not found - admin may not be approved yet');\r\n          alert('Your admin account is not fully activated yet. Please contact super admin.');\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        \r\n        throw new Error(`Dairy API failed: ${dairyRes.status} - ${errorData}`);\r\n      }\r\n\r\n      // Load all entities in parallel if dairy request succeeded\r\n      console.log('üì° Fetching all entity data...');\r\n      const [bmcRes, societyRes] = await Promise.all([\r\n        fetch('/api/user/bmc', { headers }),\r\n        fetch('/api/user/society', { headers })\r\n      ]);\r\n\r\n      console.log('üìà All API responses:', {\r\n        dairy: dairyRes.status,\r\n        bmc: bmcRes.status,\r\n        society: societyRes.status\r\n      });\r\n\r\n      const [dairyData, bmcData, societyData] = await Promise.all([\r\n        dairyRes.json(),\r\n        bmcRes.json(),\r\n        societyRes.json()\r\n      ]);\r\n\r\n      console.log('‚úÖ API data received:', { dairyData, bmcData, societyData });\r\n\r\n      if (dairyData.success) setDairies(dairyData.data || []);\r\n      if (bmcData.success) setBMCs(bmcData.data || []);\r\n      if (societyData.success) setSocieties(societyData.data || []);\r\n\r\n      // Update stats\r\n      setStats({\r\n        totalDairies: dairyData.data?.length || 0,\r\n        totalBMCs: bmcData.data?.length || 0,\r\n        totalSocieties: societyData.data?.length || 0,\r\n        totalFarmers: 0 // TODO: Add farmers API\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error loading dashboard data:', error);\r\n      // Still set loading to false even if there's an error\r\n      setStats({\r\n        totalDairies: 0,\r\n        totalBMCs: 0,\r\n        totalSocieties: 0,\r\n        totalFarmers: 0\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [router]);\r\n\r\n  // Load data when user is available\r\n  useEffect(() => {\r\n    if (user) {\r\n      console.log('‚úÖ User loaded from context, loading dashboard data');\r\n      loadData();\r\n    }\r\n  }, [user, loadData]);\r\n\r\n  const handleEntityAdded = () => {\r\n    loadData(); // Reload data after adding new entity\r\n  };\r\n\r\n  const statCards = [\r\n    {\r\n      title: 'Dairy Farms',\r\n      value: stats.totalDairies.toString(),\r\n      icon: Building2,\r\n      color: 'bg-gradient-to-r from-green-500 to-emerald-500',\r\n      actionLabel: 'Add Dairy',\r\n      onClick: () => setActiveModal('dairy')\r\n    },\r\n    {\r\n      title: 'BMCs',\r\n      value: stats.totalBMCs.toString(),\r\n      icon: Milk,\r\n      color: 'bg-gradient-to-r from-emerald-500 to-teal-500',\r\n      actionLabel: 'Add BMC',\r\n      onClick: () => setActiveModal('bmc')\r\n    },\r\n    {\r\n      title: 'Societies',\r\n      value: stats.totalSocieties.toString(),\r\n      icon: Users,\r\n      color: 'bg-gradient-to-r from-teal-500 to-green-500',\r\n      actionLabel: 'Add Society',\r\n      onClick: () => setActiveModal('society')\r\n    },\r\n    {\r\n      title: 'Total Farmers',\r\n      value: stats.totalFarmers.toString(),\r\n      icon: Shield,\r\n      color: 'bg-gradient-to-r from-green-600 to-emerald-600',\r\n      actionLabel: 'View Farmers',\r\n      onClick: () => {} // TODO: Navigate to farmers\r\n    }\r\n  ];\r\n\r\n  const tabs = [\r\n    { id: 'overview', label: 'Overview', icon: BarChart3 },\r\n    { id: 'dairies', label: 'Dairy Farms', icon: Building2 },\r\n    { id: 'bmcs', label: 'BMCs', icon: Milk },\r\n    { id: 'societies', label: 'Societies', icon: Users }\r\n  ];\r\n\r\n  const renderEntityCard = (entity: Entity, type: 'dairy' | 'bmc' | 'society') => {\r\n    const getEntityId = () => {\r\n      switch (type) {\r\n        case 'dairy': return entity.dairy_id;\r\n        case 'bmc': return entity.bmc_id;\r\n        case 'society': return entity.society_id;\r\n      }\r\n    };\r\n\r\n    const getSubtitle = () => {\r\n      switch (type) {\r\n        case 'dairy': return entity.contact_person || entity.location;\r\n        case 'bmc': return entity.dairy_farm_name || entity.location;\r\n        case 'society': return entity.bmc_name || entity.president_name;\r\n      }\r\n    };\r\n\r\n    return (\r\n      <motion.div\r\n        key={entity.id}\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow\"\r\n      >\r\n        <div className=\"flex items-start justify-between\">\r\n          <div className=\"flex-1\">\r\n            <div className=\"flex items-center space-x-3 mb-3\">\r\n              <div className={`p-2 rounded-lg ${\r\n                type === 'dairy' ? 'bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400' :\r\n                type === 'bmc' ? 'bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400' :\r\n                'bg-teal-100 dark:bg-teal-900/30 text-teal-600 dark:text-teal-400'\r\n              }`}>\r\n                {type === 'dairy' && <Building2 className=\"w-5 h-5\" />}\r\n                {type === 'bmc' && <Milk className=\"w-5 h-5\" />}\r\n                {type === 'society' && <Users className=\"w-5 h-5\" />}\r\n              </div>\r\n              <div>\r\n                <h3 className=\"font-semibold text-gray-900 dark:text-gray-100\">{entity.name}</h3>\r\n                <p className=\"text-sm text-gray-500 dark:text-gray-400\">ID: {getEntityId()}</p>\r\n              </div>\r\n            </div>\r\n            \r\n            {getSubtitle() && (\r\n              <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">{getSubtitle()}</p>\r\n            )}\r\n            \r\n            {entity.location && (\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-3\">üìç {entity.location}</p>\r\n            )}\r\n\r\n            {/* Additional info based on type */}\r\n            {type === 'dairy' && entity.phone && (\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">üìû {entity.phone}</p>\r\n            )}\r\n            {type === 'bmc' && entity.capacity && (\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">ü•õ Capacity: {entity.capacity.toLocaleString()} L</p>\r\n            )}\r\n            {type === 'society' && entity.contact_phone && (\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">üìû {entity.contact_phone}</p>\r\n            )}\r\n          </div>\r\n          \r\n          <div className=\"flex space-x-2\">\r\n            <button className=\"p-2 text-gray-400 dark:text-gray-500 hover:text-emerald-600 dark:hover:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 rounded-lg transition-colors\">\r\n              <Eye className=\"w-4 h-4\" />\r\n            </button>\r\n            <button className=\"p-2 text-gray-400 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors\">\r\n              <Trash2 className=\"w-4 h-4\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"mt-4 pt-4 border-t border-gray-100 dark:border-gray-700\">\r\n          <p className=\"text-xs text-gray-400 dark:text-gray-500\">\r\n            Added {new Date(entity.created_at).toLocaleDateString()}\r\n          </p>\r\n        </div>\r\n      </motion.div>\r\n    );\r\n  };\r\n\r\n  const renderTabContent = () => {\r\n    switch (activeTab) {\r\n      case 'overview':\r\n        return (\r\n          <div className=\"space-y-8\">\r\n            {/* Stats Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n              {statCards.map((card, index) => {\r\n                const Icon = card.icon;\r\n                return (\r\n                  <motion.div\r\n                    key={card.title}\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ delay: index * 0.1 }}\r\n                    className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow\"\r\n                  >\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div>\r\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{card.title}</p>\r\n                        <p className=\"text-3xl font-bold text-gray-900 dark:text-gray-100 mt-2\">{card.value}</p>\r\n                      </div>\r\n                      <div className={`p-3 rounded-xl ${card.color}`}>\r\n                        <Icon className=\"w-6 h-6 text-white\" />\r\n                      </div>\r\n                    </div>\r\n                    <button\r\n                      onClick={card.onClick}\r\n                      className=\"mt-4 w-full bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 px-4 rounded-lg transition-colors flex items-center justify-center space-x-2\"\r\n                    >\r\n                      <Plus className=\"w-4 h-4\" />\r\n                      <span>{card.actionLabel}</span>\r\n                    </button>\r\n                  </motion.div>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            {/* Quick Actions */}\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\">Quick Actions</h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <button\r\n                  onClick={() => setActiveModal('dairy')}\r\n                  className=\"flex items-center space-x-3 p-4 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg transition-colors\"\r\n                >\r\n                  <Building2 className=\"w-8 h-8 text-green-600 dark:text-green-400\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium text-green-900 dark:text-green-300\">Add Dairy Farm</p>\r\n                    <p className=\"text-sm text-green-600 dark:text-green-400\">Register new dairy</p>\r\n                  </div>\r\n                </button>\r\n                <button\r\n                  onClick={() => setActiveModal('bmc')}\r\n                  className=\"flex items-center space-x-3 p-4 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 rounded-lg transition-colors\"\r\n                >\r\n                  <Milk className=\"w-8 h-8 text-emerald-600 dark:text-emerald-400\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium text-emerald-900 dark:text-emerald-300\">Add BMC</p>\r\n                    <p className=\"text-sm text-emerald-600 dark:text-emerald-400\">Add collection center</p>\r\n                  </div>\r\n                </button>\r\n                <button\r\n                  onClick={() => setActiveModal('society')}\r\n                  className=\"flex items-center space-x-3 p-4 bg-teal-50 dark:bg-teal-900/20 hover:bg-teal-100 dark:hover:bg-teal-900/30 rounded-lg transition-colors\"\r\n                >\r\n                  <Users className=\"w-8 h-8 text-teal-600 dark:text-teal-400\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium text-teal-900 dark:text-teal-300\">Add Society</p>\r\n                    <p className=\"text-sm text-teal-600 dark:text-teal-400\">Register new society</p>\r\n                  </div>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'dairies':\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">Dairy Farms ({dairies.length})</h3>\r\n              <button\r\n                onClick={() => setActiveModal('dairy')}\r\n                className=\"bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-700 dark:hover:bg-emerald-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors\"\r\n              >\r\n                <Plus className=\"w-4 h-4\" />\r\n                <span>Add Dairy</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {dairies.map(dairy => renderEntityCard(dairy, 'dairy'))}\r\n            </div>\r\n            {dairies.length === 0 && (\r\n              <div className=\"text-center py-12\">\r\n                <Building2 className=\"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2\">No dairy farms yet</h3>\r\n                <p className=\"text-gray-500 dark:text-gray-400 mb-4\">Start by adding your first dairy farm</p>\r\n                <button\r\n                  onClick={() => setActiveModal('dairy')}\r\n                  className=\"bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-700 dark:hover:bg-emerald-600 text-white px-6 py-3 rounded-lg\"\r\n                >\r\n                  Add First Dairy\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case 'bmcs':\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">BMCs ({bmcs.length})</h3>\r\n              <button\r\n                onClick={() => setActiveModal('bmc')}\r\n                className=\"bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-700 dark:hover:bg-emerald-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors\"\r\n              >\r\n                <Plus className=\"w-4 h-4\" />\r\n                <span>Add BMC</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {bmcs.map(bmc => renderEntityCard(bmc, 'bmc'))}\r\n            </div>\r\n            {bmcs.length === 0 && (\r\n              <div className=\"text-center py-12\">\r\n                <Milk className=\"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2\">No BMCs yet</h3>\r\n                <p className=\"text-gray-500 dark:text-gray-400 mb-4\">Add bulk milk cooling centers</p>\r\n                <button\r\n                  onClick={() => setActiveModal('bmc')}\r\n                  className=\"bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-700 dark:hover:bg-emerald-600 text-white px-6 py-3 rounded-lg\"\r\n                >\r\n                  Add First BMC\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case 'societies':\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">Societies ({societies.length})</h3>\r\n              <button\r\n                onClick={() => setActiveModal('society')}\r\n                className=\"bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-700 dark:hover:bg-emerald-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors\"\r\n              >\r\n                <Plus className=\"w-4 h-4\" />\r\n                <span>Add Society</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {societies.map(society => renderEntityCard(society, 'society'))}\r\n            </div>\r\n            {societies.length === 0 && (\r\n              <div className=\"text-center py-12\">\r\n                <Users className=\"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2\">No societies yet</h3>\r\n                <p className=\"text-gray-500 dark:text-gray-400 mb-4\">Register farmer societies</p>\r\n                <button\r\n                  onClick={() => setActiveModal('society')}\r\n                  className=\"bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-700 dark:hover:bg-emerald-600 text-white px-6 py-3 rounded-lg\"\r\n                >\r\n                  Add First Society\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  // Don't render until user is loaded\r\n  if (!user || loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\r\n        <div className=\"flex flex-col items-center\">\r\n          <FlowerSpinner />\r\n          <span className=\"mt-4 text-gray-600 dark:text-gray-400\">\r\n            {loading ? 'Loading dashboard data...' : 'Loading user profile...'}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n        {/* Header */}\r\n        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-gray-100\">\r\n              {user?.companyName || user?.fullName || 'Admin'} Dashboard\r\n            </h1>\r\n            <p className=\"text-gray-600 dark:text-gray-400 mt-2\">\r\n              Welcome back, {user.fullName.split(' ')[0] || 'Admin'}! Manage your dairy operations\r\n            </p>\r\n          </div>\r\n          <div className=\"flex items-center space-x-4\">\r\n            <button\r\n              onClick={loadData}\r\n              className=\"bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors\"\r\n            >\r\n              <span>Load Data</span>\r\n            </button>\r\n            <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n              DB: {user?.dbKey || 'N/A'}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Information Banner */}\r\n        {stats.totalDairies === 0 && stats.totalBMCs === 0 && stats.totalSocieties === 0 && (\r\n          <div className=\"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-400 dark:border-green-600 p-4 rounded-lg\">\r\n            <div className=\"flex\">\r\n              <div className=\"flex-shrink-0\">\r\n                <Shield className=\"h-5 w-5 text-green-400 dark:text-green-500\" />\r\n              </div>\r\n              <div className=\"ml-3\">\r\n                <p className=\"text-sm text-green-700 dark:text-green-300\">\r\n                  <strong>Welcome to your admin dashboard!</strong> \r\n                  Your account is active and ready to use. Click the &quot;Load Data&quot; button above to fetch your entity data, \r\n                  or use the &quot;Add&quot; buttons to create new dairy farms, BMCs, and societies.\r\n                </p>\r\n                <p className=\"text-xs text-green-600 dark:text-green-400 mt-1\">\r\n                  User: {user?.fullName} | DB Key: {user?.dbKey} | Status: Active\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Tabs */}\r\n        <div className=\"border-b border-gray-200 dark:border-gray-700\">\r\n          <nav className=\"-mb-px flex space-x-8 overflow-x-auto\">\r\n            {tabs.map((tab) => {\r\n              const Icon = tab.icon;\r\n              return (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => setActiveTab(tab.id as 'overview' | 'dairies' | 'bmcs' | 'societies')}\r\n                  className={`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${\r\n                    activeTab === tab.id\r\n                      ? 'border-emerald-500 text-emerald-600 dark:text-emerald-400'\r\n                      : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\r\n                  }`}\r\n                >\r\n                  <Icon className=\"w-5 h-5\" />\r\n                  <span>{tab.label}</span>\r\n                </button>\r\n              );\r\n            })}\r\n          </nav>\r\n        </div>\r\n\r\n        {/* Tab Content */}\r\n        {renderTabContent()}\r\n\r\n        {/* Add Entity Modal */}\r\n        {activeModal && (\r\n          <AddEntityModal\r\n            isOpen={true}\r\n            onClose={() => setActiveModal(null)}\r\n            type={activeModal}\r\n            onSuccess={handleEntityAdded}\r\n          />\r\n        )}\r\n      </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAjBA;;;;;;;;;AA6Ce,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,0IAAO,KAAI,+BAA+B;IAE3D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAiB;QACjD,cAAc;QACd,WAAW;QACX,gBAAgB;QAChB,cAAc;IAChB;IAEA,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAW,EAAE;IACnD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAW,EAAE;IAC7C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAW,EAAE;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAqC;IACnF,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAgD;IAE1F,4EAA4E;IAC5E,MAAM,WAAW,IAAA,oNAAW,EAAC;QAC3B,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,CAAC,OAAO;YACV,QAAQ,KAAK,CAAC;YACd,WAAW;YACX;QACF;QAEA,IAAI;YACF,WAAW;YACX,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,qBAAqB,MAAM,SAAS,CAAC,GAAG,MAAM;YAE1D,MAAM,UAAU;gBACd,iBAAiB,CAAC,OAAO,EAAE,OAAO;gBAClC,gBAAgB;YAClB;YAEA,gDAAgD;YAChD,QAAQ,GAAG,CAAC;YACZ,MAAM,WAAW,MAAM,MAAM,mBAAmB;gBAAE;YAAQ;YAC1D,QAAQ,GAAG,CAAC,sBAAsB,SAAS,MAAM,EAAE,SAAS,UAAU;YAEtE,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,YAAY,MAAM,SAAS,IAAI;gBACrC,QAAQ,KAAK,CAAC,sBAAsB;gBAEpC,IAAI,SAAS,MAAM,KAAK,OAAO,SAAS,MAAM,KAAK,KAAK;oBACtD,QAAQ,GAAG,CAAC;oBACZ,aAAa,UAAU,CAAC;oBACxB,aAAa,UAAU,CAAC;oBACxB,OAAO,IAAI,CAAC;oBACZ;gBACF;gBAEA,IAAI,SAAS,MAAM,KAAK,KAAK;oBAC3B,QAAQ,KAAK,CAAC;oBACd,MAAM;oBACN,WAAW;oBACX;gBACF;gBAEA,MAAM,IAAI,MAAM,CAAC,kBAAkB,EAAE,SAAS,MAAM,CAAC,GAAG,EAAE,WAAW;YACvE;YAEA,2DAA2D;YAC3D,QAAQ,GAAG,CAAC;YACZ,MAAM,CAAC,QAAQ,WAAW,GAAG,MAAM,QAAQ,GAAG,CAAC;gBAC7C,MAAM,iBAAiB;oBAAE;gBAAQ;gBACjC,MAAM,qBAAqB;oBAAE;gBAAQ;aACtC;YAED,QAAQ,GAAG,CAAC,yBAAyB;gBACnC,OAAO,SAAS,MAAM;gBACtB,KAAK,OAAO,MAAM;gBAClB,SAAS,WAAW,MAAM;YAC5B;YAEA,MAAM,CAAC,WAAW,SAAS,YAAY,GAAG,MAAM,QAAQ,GAAG,CAAC;gBAC1D,SAAS,IAAI;gBACb,OAAO,IAAI;gBACX,WAAW,IAAI;aAChB;YAED,QAAQ,GAAG,CAAC,wBAAwB;gBAAE;gBAAW;gBAAS;YAAY;YAEtE,IAAI,UAAU,OAAO,EAAE,WAAW,UAAU,IAAI,IAAI,EAAE;YACtD,IAAI,QAAQ,OAAO,EAAE,QAAQ,QAAQ,IAAI,IAAI,EAAE;YAC/C,IAAI,YAAY,OAAO,EAAE,aAAa,YAAY,IAAI,IAAI,EAAE;YAE5D,eAAe;YACf,SAAS;gBACP,cAAc,UAAU,IAAI,EAAE,UAAU;gBACxC,WAAW,QAAQ,IAAI,EAAE,UAAU;gBACnC,gBAAgB,YAAY,IAAI,EAAE,UAAU;gBAC5C,cAAc,EAAE,wBAAwB;YAC1C;QAEF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;YAC/C,sDAAsD;YACtD,SAAS;gBACP,cAAc;gBACd,WAAW;gBACX,gBAAgB;gBAChB,cAAc;YAChB;QACF,SAAU;YACR,WAAW;QACb;IACF,GAAG;QAAC;KAAO;IAEX,mCAAmC;IACnC,IAAA,kNAAS,EAAC;QACR,IAAI,MAAM;YACR,QAAQ,GAAG,CAAC;YACZ;QACF;IACF,GAAG;QAAC;QAAM;KAAS;IAEnB,MAAM,oBAAoB;QACxB,YAAY,sCAAsC;IACpD;IAEA,MAAM,YAAY;QAChB;YACE,OAAO;YACP,OAAO,MAAM,YAAY,CAAC,QAAQ;YAClC,MAAM,6NAAS;YACf,OAAO;YACP,aAAa;YACb,SAAS,IAAM,eAAe;QAChC;QACA;YACE,OAAO;YACP,OAAO,MAAM,SAAS,CAAC,QAAQ;YAC/B,MAAM,0MAAI;YACV,OAAO;YACP,aAAa;YACb,SAAS,IAAM,eAAe;QAChC;QACA;YACE,OAAO;YACP,OAAO,MAAM,cAAc,CAAC,QAAQ;YACpC,MAAM,6MAAK;YACX,OAAO;YACP,aAAa;YACb,SAAS,IAAM,eAAe;QAChC;QACA;YACE,OAAO;YACP,OAAO,MAAM,YAAY,CAAC,QAAQ;YAClC,MAAM,gNAAM;YACZ,OAAO;YACP,aAAa;YACb,SAAS,KAAO,EAAE,4BAA4B;QAChD;KACD;IAED,MAAM,OAAO;QACX;YAAE,IAAI;YAAY,OAAO;YAAY,MAAM,+NAAS;QAAC;QACrD;YAAE,IAAI;YAAW,OAAO;YAAe,MAAM,6NAAS;QAAC;QACvD;YAAE,IAAI;YAAQ,OAAO;YAAQ,MAAM,0MAAI;QAAC;QACxC;YAAE,IAAI;YAAa,OAAO;YAAa,MAAM,6MAAK;QAAC;KACpD;IAED,MAAM,mBAAmB,CAAC,QAAgB;QACxC,MAAM,cAAc;YAClB,OAAQ;gBACN,KAAK;oBAAS,OAAO,OAAO,QAAQ;gBACpC,KAAK;oBAAO,OAAO,OAAO,MAAM;gBAChC,KAAK;oBAAW,OAAO,OAAO,UAAU;YAC1C;QACF;QAEA,MAAM,cAAc;YAClB,OAAQ;gBACN,KAAK;oBAAS,OAAO,OAAO,cAAc,IAAI,OAAO,QAAQ;gBAC7D,KAAK;oBAAO,OAAO,OAAO,eAAe,IAAI,OAAO,QAAQ;gBAC5D,KAAK;oBAAW,OAAO,OAAO,QAAQ,IAAI,OAAO,cAAc;YACjE;QACF;QAEA,qBACE,8OAAC,oMAAM,CAAC,GAAG;YAET,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAG;YAC7B,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAE;YAC5B,WAAU;;8BAEV,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAW,CAAC,eAAe,EAC9B,SAAS,UAAU,yEACnB,SAAS,QAAQ,iFACjB,oEACA;;gDACC,SAAS,yBAAW,8OAAC,6NAAS;oDAAC,WAAU;;;;;;gDACzC,SAAS,uBAAS,8OAAC,0MAAI;oDAAC,WAAU;;;;;;gDAClC,SAAS,2BAAa,8OAAC,6MAAK;oDAAC,WAAU;;;;;;;;;;;;sDAE1C,8OAAC;;8DACC,8OAAC;oDAAG,WAAU;8DAAkD,OAAO,IAAI;;;;;;8DAC3E,8OAAC;oDAAE,WAAU;;wDAA2C;wDAAK;;;;;;;;;;;;;;;;;;;gCAIhE,+BACC,8OAAC;oCAAE,WAAU;8CAAiD;;;;;;gCAG/D,OAAO,QAAQ,kBACd,8OAAC;oCAAE,WAAU;;wCAAgD;wCAAI,OAAO,QAAQ;;;;;;;gCAIjF,SAAS,WAAW,OAAO,KAAK,kBAC/B,8OAAC;oCAAE,WAAU;;wCAA2C;wCAAI,OAAO,KAAK;;;;;;;gCAEzE,SAAS,SAAS,OAAO,QAAQ,kBAChC,8OAAC;oCAAE,WAAU;;wCAA2C;wCAAc,OAAO,QAAQ,CAAC,cAAc;wCAAG;;;;;;;gCAExG,SAAS,aAAa,OAAO,aAAa,kBACzC,8OAAC;oCAAE,WAAU;;wCAA2C;wCAAI,OAAO,aAAa;;;;;;;;;;;;;sCAIpF,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAO,WAAU;8CAChB,cAAA,8OAAC,uMAAG;wCAAC,WAAU;;;;;;;;;;;8CAEjB,8OAAC;oCAAO,WAAU;8CAChB,cAAA,8OAAC,oNAAM;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;8BAKxB,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAE,WAAU;;4BAA2C;4BAC/C,IAAI,KAAK,OAAO,UAAU,EAAE,kBAAkB;;;;;;;;;;;;;WAvDpD,OAAO,EAAE;;;;;IA4DpB;IAEA,MAAM,mBAAmB;QACvB,OAAQ;YACN,KAAK;gBACH,qBACE,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;sCACZ,UAAU,GAAG,CAAC,CAAC,MAAM;gCACpB,MAAM,OAAO,KAAK,IAAI;gCACtB,qBACE,8OAAC,oMAAM,CAAC,GAAG;oCAET,SAAS;wCAAE,SAAS;wCAAG,GAAG;oCAAG;oCAC7B,SAAS;wCAAE,SAAS;wCAAG,GAAG;oCAAE;oCAC5B,YAAY;wCAAE,OAAO,QAAQ;oCAAI;oCACjC,WAAU;;sDAEV,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;;sEACC,8OAAC;4DAAE,WAAU;sEAAwD,KAAK,KAAK;;;;;;sEAC/E,8OAAC;4DAAE,WAAU;sEAA4D,KAAK,KAAK;;;;;;;;;;;;8DAErF,8OAAC;oDAAI,WAAW,CAAC,eAAe,EAAE,KAAK,KAAK,EAAE;8DAC5C,cAAA,8OAAC;wDAAK,WAAU;;;;;;;;;;;;;;;;;sDAGpB,8OAAC;4CACC,SAAS,KAAK,OAAO;4CACrB,WAAU;;8DAEV,8OAAC,0MAAI;oDAAC,WAAU;;;;;;8DAChB,8OAAC;8DAAM,KAAK,WAAW;;;;;;;;;;;;;mCApBpB,KAAK,KAAK;;;;;4BAwBrB;;;;;;sCAIF,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAA8D;;;;;;8CAC5E,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CACC,SAAS,IAAM,eAAe;4CAC9B,WAAU;;8DAEV,8OAAC,6NAAS;oDAAC,WAAU;;;;;;8DACrB,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAE,WAAU;sEAAiD;;;;;;sEAC9D,8OAAC;4DAAE,WAAU;sEAA6C;;;;;;;;;;;;;;;;;;sDAG9D,8OAAC;4CACC,SAAS,IAAM,eAAe;4CAC9B,WAAU;;8DAEV,8OAAC,0MAAI;oDAAC,WAAU;;;;;;8DAChB,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAE,WAAU;sEAAqD;;;;;;sEAClE,8OAAC;4DAAE,WAAU;sEAAiD;;;;;;;;;;;;;;;;;;sDAGlE,8OAAC;4CACC,SAAS,IAAM,eAAe;4CAC9B,WAAU;;8DAEV,8OAAC,6MAAK;oDAAC,WAAU;;;;;;8DACjB,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAE,WAAU;sEAA+C;;;;;;sEAC5D,8OAAC;4DAAE,WAAU;sEAA2C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAQtE,KAAK;gBACH,qBACE,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;;wCAAyD;wCAAc,QAAQ,MAAM;wCAAC;;;;;;;8CACpG,8OAAC;oCACC,SAAS,IAAM,eAAe;oCAC9B,WAAU;;sDAEV,8OAAC,0MAAI;4CAAC,WAAU;;;;;;sDAChB,8OAAC;sDAAK;;;;;;;;;;;;;;;;;;sCAGV,8OAAC;4BAAI,WAAU;sCACZ,QAAQ,GAAG,CAAC,CAAA,QAAS,iBAAiB,OAAO;;;;;;wBAE/C,QAAQ,MAAM,KAAK,mBAClB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,6NAAS;oCAAC,WAAU;;;;;;8CACrB,8OAAC;oCAAG,WAAU;8CAA4D;;;;;;8CAC1E,8OAAC;oCAAE,WAAU;8CAAwC;;;;;;8CACrD,8OAAC;oCACC,SAAS,IAAM,eAAe;oCAC9B,WAAU;8CACX;;;;;;;;;;;;;;;;;;YAQX,KAAK;gBACH,qBACE,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;;wCAAyD;wCAAO,KAAK,MAAM;wCAAC;;;;;;;8CAC1F,8OAAC;oCACC,SAAS,IAAM,eAAe;oCAC9B,WAAU;;sDAEV,8OAAC,0MAAI;4CAAC,WAAU;;;;;;sDAChB,8OAAC;sDAAK;;;;;;;;;;;;;;;;;;sCAGV,8OAAC;4BAAI,WAAU;sCACZ,KAAK,GAAG,CAAC,CAAA,MAAO,iBAAiB,KAAK;;;;;;wBAExC,KAAK,MAAM,KAAK,mBACf,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,0MAAI;oCAAC,WAAU;;;;;;8CAChB,8OAAC;oCAAG,WAAU;8CAA4D;;;;;;8CAC1E,8OAAC;oCAAE,WAAU;8CAAwC;;;;;;8CACrD,8OAAC;oCACC,SAAS,IAAM,eAAe;oCAC9B,WAAU;8CACX;;;;;;;;;;;;;;;;;;YAQX,KAAK;gBACH,qBACE,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;;wCAAyD;wCAAY,UAAU,MAAM;wCAAC;;;;;;;8CACpG,8OAAC;oCACC,SAAS,IAAM,eAAe;oCAC9B,WAAU;;sDAEV,8OAAC,0MAAI;4CAAC,WAAU;;;;;;sDAChB,8OAAC;sDAAK;;;;;;;;;;;;;;;;;;sCAGV,8OAAC;4BAAI,WAAU;sCACZ,UAAU,GAAG,CAAC,CAAA,UAAW,iBAAiB,SAAS;;;;;;wBAErD,UAAU,MAAM,KAAK,mBACpB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,6MAAK;oCAAC,WAAU;;;;;;8CACjB,8OAAC;oCAAG,WAAU;8CAA4D;;;;;;8CAC1E,8OAAC;oCAAE,WAAU;8CAAwC;;;;;;8CACrD,8OAAC;oCACC,SAAS,IAAM,eAAe;oCAC9B,WAAU;8CACX;;;;;;;;;;;;;;;;;;YAQX;gBACE,OAAO;QACX;IACF;IAEA,oCAAoC;IACpC,IAAI,CAAC,QAAQ,SAAS;QACpB,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,2MAAa;;;;;kCACd,8OAAC;wBAAK,WAAU;kCACb,UAAU,8BAA8B;;;;;;;;;;;;;;;;;IAKnD;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEX,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;;oCACX,MAAM,eAAe,MAAM,YAAY;oCAAQ;;;;;;;0CAElD,8OAAC;gCAAE,WAAU;;oCAAwC;oCACpC,KAAK,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI;oCAAQ;;;;;;;;;;;;;kCAG1D,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS;gCACT,WAAU;0CAEV,cAAA,8OAAC;8CAAK;;;;;;;;;;;0CAER,8OAAC;gCAAI,WAAU;;oCAA2C;oCACnD,MAAM,SAAS;;;;;;;;;;;;;;;;;;;YAMzB,MAAM,YAAY,KAAK,KAAK,MAAM,SAAS,KAAK,KAAK,MAAM,cAAc,KAAK,mBAC7E,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,gNAAM;gCAAC,WAAU;;;;;;;;;;;sCAEpB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAE,WAAU;;sDACX,8OAAC;sDAAO;;;;;;wCAAyC;;;;;;;8CAInD,8OAAC;oCAAE,WAAU;;wCAAkD;wCACtD,MAAM;wCAAS;wCAAY,MAAM;wCAAM;;;;;;;;;;;;;;;;;;;;;;;;0BAQxD,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACZ,KAAK,GAAG,CAAC,CAAC;wBACT,MAAM,OAAO,IAAI,IAAI;wBACrB,qBACE,8OAAC;4BAEC,SAAS,IAAM,aAAa,IAAI,EAAE;4BAClC,WAAW,CAAC,uFAAuF,EACjG,cAAc,IAAI,EAAE,GAChB,8DACA,qJACJ;;8CAEF,8OAAC;oCAAK,WAAU;;;;;;8CAChB,8OAAC;8CAAM,IAAI,KAAK;;;;;;;2BATX,IAAI,EAAE;;;;;oBAYjB;;;;;;;;;;;YAKH;YAGA,6BACC,8OAAC,wJAAc;gBACb,QAAQ;gBACR,SAAS,IAAM,eAAe;gBAC9B,MAAM;gBACN,WAAW;;;;;;;;;;;;AAKvB","debugId":null}}]
}