{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/components/dialogs/PasswordConfirmDialog.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { AlertTriangle, Eye, X } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ninterface PasswordConfirmDialogProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: (password: string) => Promise<void>;\r\n  title?: string;\r\n  message?: string;\r\n}\r\n\r\nexport default function PasswordConfirmDialog({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  title = 'Confirm Deletion',\r\n  message = 'Enter your admin password to confirm this action. This action will be logged for security purposes.'\r\n}: PasswordConfirmDialogProps) {\r\n  const [password, setPassword] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!password) {\r\n      setError('Password is required');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      await onConfirm(password);\r\n      setPassword('');\r\n      onClose();\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to verify password');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setPassword('');\r\n    setError('');\r\n    onClose();\r\n  };\r\n\r\n  // Render modal in a portal to escape parent overflow-hidden\r\n  const modalContent = (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <motion.div \r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          className=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-end sm:items-center justify-center z-[9999] p-0 sm:p-4\"\r\n          style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0 }}\r\n          onClick={(e) => {\r\n            if (e.target === e.currentTarget) handleClose();\r\n          }}\r\n        >\r\n          <motion.div\r\n            initial={{ y: '100%', opacity: 0 }}\r\n            animate={{ y: 0, opacity: 1 }}\r\n            exit={{ y: '100%', opacity: 0 }}\r\n            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n            className=\"bg-white dark:bg-gray-800 rounded-t-2xl sm:rounded-xl shadow-2xl w-full sm:max-w-md max-h-[90vh] overflow-y-auto\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            {/* Mobile drag handle */}\r\n            <div className=\"sm:hidden flex justify-center pt-3 pb-1\">\r\n              <div className=\"w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full\" />\r\n            </div>\r\n\r\n            {/* Modal Header */}\r\n            <div className=\"p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h2 className=\"text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100\">\r\n                  {title}\r\n                </h2>\r\n                <button\r\n                  onClick={handleClose}\r\n                  className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors\"\r\n                >\r\n                  <X className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Modal Content */}\r\n            <div className=\"p-4 sm:p-6\">\r\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                {/* Warning Box */}\r\n                <div className=\"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4\">\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <AlertTriangle className=\"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5\" />\r\n                    <div className=\"flex-1\">\r\n                      <h4 className=\"text-sm font-medium text-amber-800 dark:text-amber-200 mb-1\">\r\n                        Security Verification Required\r\n                      </h4>\r\n                      <p className=\"text-xs text-amber-700 dark:text-amber-300\">\r\n                        {message}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Password Input - Using FormInput style */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                    Admin Password <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    value={password}\r\n                    onChange={(e) => {\r\n                      setPassword(e.target.value);\r\n                      setError('');\r\n                    }}\r\n                    placeholder=\"Enter your admin password\"\r\n                    required\r\n                    disabled={loading}\r\n                    className={`form-input-custom w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 focus:border-emerald-500 dark:focus:border-emerald-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 focus:outline-none ${error ? 'border-red-300 bg-red-50 dark:border-red-700 dark:bg-red-900/20' : ''}`}\r\n                  />\r\n                  {error && (\r\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{error}</p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex gap-3 pt-2\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={handleClose}\r\n                    className=\"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={loading || !password}\r\n                    className=\"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-gradient-to-r from-red-600 to-red-700 rounded-lg hover:from-red-700 hover:to-red-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2\"\r\n                  >\r\n                    {loading ? (\r\n                      <>\r\n                        <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n                        Verifying...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Eye className=\"w-4 h-4\" />\r\n                        Confirm Delete\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </motion.div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n\r\n  // Only render portal on client side\r\n  if (typeof window === 'undefined') return null;\r\n  \r\n  return createPortal(modalContent, document.body);\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 391, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/components/dialogs/EmailReportModal.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { Mail, X, Send } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ninterface EmailReportModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSend: (email: string) => Promise<void>;\r\n  defaultEmail?: string;\r\n  recordCount?: number;\r\n  reportType?: string;\r\n}\r\n\r\nexport default function EmailReportModal({\r\n  isOpen,\r\n  onClose,\r\n  onSend,\r\n  defaultEmail = '',\r\n  recordCount = 0,\r\n  reportType = 'Report'\r\n}: EmailReportModalProps) {\r\n  const [email, setEmail] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  // Update email when defaultEmail changes\r\n  useEffect(() => {\r\n    if (isOpen && defaultEmail) {\r\n      setEmail(defaultEmail);\r\n    }\r\n  }, [isOpen, defaultEmail]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    // Validate email\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!email) {\r\n      setError('Email address is required');\r\n      return;\r\n    }\r\n    if (!emailRegex.test(email)) {\r\n      setError('Please enter a valid email address');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      await onSend(email);\r\n      setEmail('');\r\n      onClose();\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to send email');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setEmail('');\r\n    setError('');\r\n    onClose();\r\n  };\r\n\r\n  // Render modal in a portal to escape parent overflow-hidden\r\n  const modalContent = (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <motion.div \r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          className=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-end sm:items-center justify-center z-[9999] p-0 sm:p-4\"\r\n          style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0 }}\r\n          onClick={(e) => {\r\n            if (e.target === e.currentTarget) handleClose();\r\n          }}\r\n        >\r\n          <motion.div\r\n            initial={{ y: '100%', opacity: 0 }}\r\n            animate={{ y: 0, opacity: 1 }}\r\n            exit={{ y: '100%', opacity: 0 }}\r\n            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n            className=\"bg-white dark:bg-gray-800 rounded-t-2xl sm:rounded-xl shadow-2xl w-full sm:max-w-md max-h-[90vh] overflow-y-auto\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            {/* Mobile drag handle */}\r\n            <div className=\"sm:hidden flex justify-center pt-3 pb-1\">\r\n              <div className=\"w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full\" />\r\n            </div>\r\n\r\n            {/* Modal Header */}\r\n            <div className=\"p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"p-2 bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700 rounded-lg\">\r\n                    <Mail className=\"w-5 h-5 text-white\" />\r\n                  </div>\r\n                  <h2 className=\"text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100\">\r\n                    Send {reportType}\r\n                  </h2>\r\n                </div>\r\n                <button\r\n                  onClick={handleClose}\r\n                  className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors\"\r\n                >\r\n                  <X className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Modal Content */}\r\n            <div className=\"p-4 sm:p-6\">\r\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                {/* Info Box */}\r\n                <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <Mail className=\"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5\" />\r\n                    <div className=\"flex-1\">\r\n                      <h4 className=\"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1\">\r\n                        Email Report\r\n                      </h4>\r\n                      <p className=\"text-xs text-blue-700 dark:text-blue-300\">\r\n                        The filtered report ({recordCount} records) will be sent as both CSV and PDF attachments to the email address you specify below.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Email Input */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                    Email Address <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"email\"\r\n                    value={email}\r\n                    onChange={(e) => {\r\n                      setEmail(e.target.value);\r\n                      setError('');\r\n                    }}\r\n                    placeholder=\"Enter email address\"\r\n                    required\r\n                    disabled={loading}\r\n                    className={`form-input-custom w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 focus:outline-none ${error ? 'border-red-300 bg-red-50 dark:border-red-700 dark:bg-red-900/20' : ''}`}\r\n                  />\r\n                  {error && (\r\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{error}</p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex gap-3 pt-2\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={handleClose}\r\n                    disabled={loading}\r\n                    className=\"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={loading || !email}\r\n                    className=\"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2\"\r\n                  >\r\n                    {loading ? (\r\n                      <>\r\n                        <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n                        Sending...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Send className=\"w-4 h-4\" />\r\n                        Send Email\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </motion.div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n\r\n  // Only render portal on client side\r\n  if (typeof window === 'undefined') return null;\r\n  \r\n  return createPortal(modalContent, document.body);\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 770, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/components/reports/CollectionReports.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { \r\n  Download,\r\n  FileDown,\r\n  Droplet,\r\n  TrendingUp,\r\n  BarChart3,\r\n  RefreshCw,\r\n  Trash2,\r\n  Mail,\r\n  X\r\n} from 'lucide-react';\r\nimport jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\nimport StatsCard from '@/components/management/StatsCard';\r\nimport { FlowerSpinner } from '@/components';\r\nimport { FilterDropdown, LoadingSnackbar, StatusMessage, BulkActionsToolbar } from '@/components/management';\r\nimport PasswordConfirmDialog from '@/components/dialogs/PasswordConfirmDialog';\r\nimport EmailReportModal from '@/components/dialogs/EmailReportModal';\r\n\r\ninterface CollectionRecord {\r\n  id: number;\r\n  farmer_id: string;\r\n  farmer_name: string;\r\n  society_id: string;\r\n  society_name: string;\r\n  bmc_id?: number;\r\n  bmc_name?: string;\r\n  dairy_id?: number;\r\n  dairy_name?: string;\r\n  machine_id: string;\r\n  collection_date: string;\r\n  collection_time: string;\r\n  shift_type: string;\r\n  channel: string;\r\n  quantity: string;\r\n  fat_percentage: string;\r\n  snf_percentage: string;\r\n  clr_value: string;\r\n  protein_percentage: string;\r\n  lactose_percentage: string;\r\n  salt_percentage: string;\r\n  water_percentage: string;\r\n  temperature: string;\r\n  rate_per_liter: string;\r\n  total_amount: string;\r\n  bonus: string;\r\n  machine_type: string;\r\n  machine_version: string;\r\n}\r\n\r\ninterface CollectionStats {\r\n  totalCollections: number;\r\n  totalQuantity: number;\r\n  totalAmount: number;\r\n  averageRate: number;\r\n  weightedFat: number;\r\n  weightedSnf: number;\r\n  weightedClr: number;\r\n}\r\n\r\n// Helper function to highlight matching text in search results\r\nconst highlightText = (text: string | number | null | undefined, searchQuery: string) => {\r\n  if (!text && text !== 0) return text || '';\r\n  if (!searchQuery) return text;\r\n  \r\n  const textStr = text.toString();\r\n  const regex = new RegExp(`(${searchQuery.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\r\n  const parts = textStr.split(regex);\r\n  \r\n  return parts.map((part, index) => \r\n    regex.test(part) ? (\r\n      <span key={index} className=\"bg-yellow-200 dark:bg-yellow-800 px-0.5 rounded\">\r\n        {part}\r\n      </span>\r\n    ) : (\r\n      part\r\n    )\r\n  );\r\n};\r\n\r\n// Helper function to map channel codes to display names\r\nconst getChannelDisplay = (channel: string): string => {\r\n  const channelMap: { [key: string]: string } = {\r\n    'ch1': 'COW',\r\n    'ch2': 'BUFFALO',\r\n    'ch3': 'MIXED',\r\n    'CH1': 'COW',\r\n    'CH2': 'BUFFALO',\r\n    'CH3': 'MIXED',\r\n    'COW': 'COW',\r\n    'BUFFALO': 'BUFFALO',\r\n    'MIXED': 'MIXED',\r\n    'cow': 'COW',\r\n    'buffalo': 'BUFFALO',\r\n    'mixed': 'MIXED',\r\n    'BUF': 'BUFFALO',\r\n    'MIX': 'MIXED'\r\n  };\r\n  return channelMap[channel] || channel.toUpperCase();\r\n};\r\n\r\ninterface CollectionReportsProps {\r\n  globalSearch?: string;\r\n  initialSocietyId?: string | null;\r\n  initialSocietyName?: string | null;\r\n  initialFromDate?: string | null;\r\n  initialToDate?: string | null;\r\n  initialBmcFilter?: string | null;\r\n  initialMachineFilter?: string | null;\r\n}\r\n\r\nexport default function CollectionReports({ globalSearch = '', initialSocietyId = null, initialSocietyName = null, initialFromDate = null, initialToDate = null, initialBmcFilter = null, initialMachineFilter = null }: CollectionReportsProps) {\r\n  console.log('CollectionReports received props:', { initialSocietyId, initialSocietyName, initialFromDate, initialToDate, initialMachineFilter });\r\n  \r\n  const [records, setRecords] = useState<CollectionRecord[]>([]);\r\n  const [filteredRecords, setFilteredRecords] = useState<CollectionRecord[]>([]);\r\n  const [stats, setStats] = useState<CollectionStats>({\r\n    totalCollections: 0,\r\n    totalQuantity: 0,\r\n    totalAmount: 0,\r\n    averageRate: 0,\r\n    weightedFat: 0,\r\n    weightedSnf: 0,\r\n    weightedClr: 0\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  \r\n  // Sync global search with local search\r\n  useEffect(() => {\r\n    if (globalSearch !== undefined) {\r\n      setSearchQuery(globalSearch);\r\n    }\r\n  }, [globalSearch]);\r\n\r\n  // Combined search from global header and local search\r\n  const combinedSearch = useMemo(() => globalSearch || searchQuery, [globalSearch, searchQuery]);\r\n  \r\n  const [dateFilter, setDateFilter] = useState('');\r\n  const [dateFromFilter, setDateFromFilter] = useState('');\r\n  const [dateToFilter, setDateToFilter] = useState('');\r\n  const [shiftFilter, setShiftFilter] = useState('all');\r\n  const [channelFilter, setChannelFilter] = useState('all');\r\n  const [dairyFilter, setDairyFilter] = useState<string[]>([]);\r\n  const [bmcFilter, setBmcFilter] = useState<string[]>([]);\r\n  const [societyFilter, setSocietyFilter] = useState<string[]>([]);\r\n  const [machineFilter, setMachineFilter] = useState<string[]>([]);\r\n  const [farmerFilter, setFarmerFilter] = useState<string[]>([]);\r\n  \r\n  // Fetch dairies and BMCs\r\n  const [dairies, setDairies] = useState<Array<{ id: number; name: string; dairyId: string }>>([]);\r\n  const [bmcs, setBmcs] = useState<Array<{ id: number; name: string; bmcId: string; dairyFarmId?: number }>>([]);\r\n  const [societiesData, setSocietiesData] = useState<Array<{ id: number; name: string; society_id: string; bmc_id?: number }>>([]);\r\n  const [machinesData, setMachinesData] = useState<Array<{ id: number; machineId: string; machineType: string; societyId?: number; collectionCount?: number }>>([]);\r\n  const [farmersData, setFarmersData] = useState<Array<{ id: number; farmerId: string; farmerName: string; societyId?: number }>>([]);\r\n\r\n  // Delete functionality\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [recordToDelete, setRecordToDelete] = useState<number | null>(null);\r\n  const [deleting, setDeleting] = useState(false);\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  // Bulk selection and delete\r\n  const [selectedRecords, setSelectedRecords] = useState<Set<number>>(new Set());\r\n  const [selectAll, setSelectAll] = useState(false);\r\n  const [showBulkDeleteConfirm, setShowBulkDeleteConfirm] = useState(false);\r\n  const [isDeletingBulk, setIsDeletingBulk] = useState(false);\r\n  const [bulkDeletePassword, setBulkDeletePassword] = useState('');\r\n\r\n  // Email modal state\r\n  const [showEmailModal, setShowEmailModal] = useState(false);\r\n  const [adminEmail, setAdminEmail] = useState('');\r\n\r\n  // Initialize society filter from URL parameters\r\n  useEffect(() => {\r\n    if (initialSocietyId) {\r\n      // Find society by society_id string (e.g., \"S101\")\r\n      const society = societiesData.find(s => s.society_id === initialSocietyId);\r\n      \r\n      if (society && !societyFilter.includes(society.id.toString())) {\r\n        setSocietyFilter([society.id.toString()]);\r\n        \r\n        // Show success message with society name and date range if present\r\n        if (initialSocietyName) {\r\n          let message = `Filter Applied: ${decodeURIComponent(initialSocietyName)}`;\r\n          \r\n          if (initialFromDate && initialToDate) {\r\n            message += ` • Date: ${initialFromDate} to ${initialToDate}`;\r\n          }\r\n          \r\n          setSuccessMessage(message);\r\n          setTimeout(() => setSuccessMessage(''), 5000);\r\n        }\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [societiesData]); // Run when societies data loads\r\n\r\n  // Initialize machine filter from URL parameters\r\n  useEffect(() => {\r\n    if (initialMachineFilter && machinesData.length > 0) {\r\n      // Find machine by machineId string (e.g., \"m103\")\r\n      const machine = machinesData.find(m => m.machineId === initialMachineFilter);\r\n      \r\n      if (machine && !machineFilter.includes(machine.id.toString())) {\r\n        console.log('Setting machineFilter to machine:', machine.machineId, 'ID:', machine.id);\r\n        setMachineFilter([machine.id.toString()]);\r\n        \r\n        // Show success message\r\n        setSuccessMessage(`Filter Applied: Machine ${machine.machineId}`);\r\n        setTimeout(() => setSuccessMessage(''), 5000);\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [machinesData]); // Run when machines data loads\r\n\r\n  // Initialize date filters from URL parameters\r\n  useEffect(() => {\r\n    if (initialFromDate) {\r\n      console.log('Setting dateFromFilter to:', initialFromDate);\r\n      setDateFromFilter(initialFromDate);\r\n    }\r\n    \r\n    if (initialToDate) {\r\n      console.log('Setting dateToFilter to:', initialToDate);\r\n      setDateToFilter(initialToDate);\r\n    }\r\n    \r\n    if (initialBmcFilter) {\r\n      console.log('Setting bmcFilter to:', initialBmcFilter);\r\n      setBmcFilter([initialBmcFilter]);\r\n    }\r\n  }, [initialFromDate, initialToDate, initialBmcFilter]); // Re-run when props change\r\n\r\n  // Fetch admin email\r\n  useEffect(() => {\r\n    const fetchAdminEmail = async () => {\r\n      try {\r\n        const token = localStorage.getItem('authToken');\r\n        if (!token) return;\r\n\r\n        const response = await fetch('/api/user/profile', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          const email = data.email || '';\r\n          setAdminEmail(email);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching admin email:', error);\r\n      }\r\n    };\r\n\r\n    fetchAdminEmail();\r\n  }, []);\r\n\r\n  // Debug: Log filter states\r\n  useEffect(() => {\r\n    console.log('Current filter states:', {\r\n      dateFromFilter,\r\n      dateToFilter,\r\n      societyFilter,\r\n      recordsCount: records.length,\r\n      filteredCount: filteredRecords.length\r\n    });\r\n  }, [dateFromFilter, dateToFilter, societyFilter, records.length, filteredRecords.length]);\r\n\r\n  useEffect(() => {\r\n    const fetchDairiesAndBmcs = async () => {\r\n      try {\r\n        const token = localStorage.getItem('authToken');\r\n        if (!token) return;\r\n\r\n        // Fetch dairies\r\n        const dairyRes = await fetch('/api/user/dairy', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (dairyRes.ok) {\r\n          const dairyData = await dairyRes.json();\r\n          setDairies(dairyData.data || []);\r\n        }\r\n\r\n        // Fetch BMCs\r\n        const bmcRes = await fetch('/api/user/bmc', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (bmcRes.ok) {\r\n          const bmcData = await bmcRes.json();\r\n          setBmcs(bmcData.data || []);\r\n        }\r\n\r\n        // Fetch Societies\r\n        const societyRes = await fetch('/api/user/society', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (societyRes.ok) {\r\n          const societyData = await societyRes.json();\r\n          setSocietiesData(societyData.data || []);\r\n        }\r\n\r\n        // Fetch Machines\r\n        const machineRes = await fetch('/api/user/machine', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (machineRes.ok) {\r\n          const machineData = await machineRes.json();\r\n          setMachinesData(machineData.data || []);\r\n        }\r\n\r\n        // Fetch Farmers\r\n        const farmerRes = await fetch('/api/user/farmer', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (farmerRes.ok) {\r\n          const farmerData = await farmerRes.json();\r\n          setFarmersData(farmerData.data || []);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching dairies/BMCs/societies/machines/farmers:', error);\r\n      }\r\n    };\r\n\r\n    fetchDairiesAndBmcs();\r\n  }, []);\r\n  \r\n  // Filter dairies to only show those with collection records\r\n  const dairiesWithCollections = useMemo(() => {\r\n    if (!dairies.length || !records.length) return dairies;\r\n    \r\n    const dairyIdsInCollections = new Set(\r\n      records\r\n        .filter(r => r.dairy_id)\r\n        .map(r => r.dairy_id)\r\n    );\r\n    \r\n    return dairies.filter(dairy => dairyIdsInCollections.has(dairy.id));\r\n  }, [dairies, records]);\r\n  \r\n  // Filter BMCs to only show those with collection records\r\n  const bmcsWithCollections = useMemo(() => {\r\n    if (!bmcs.length || !records.length) return bmcs;\r\n    \r\n    const bmcIdsInCollections = new Set(\r\n      records\r\n        .filter(r => r.bmc_id)\r\n        .map(r => r.bmc_id)\r\n    );\r\n    \r\n    return bmcs.filter(bmc => bmcIdsInCollections.has(bmc.id));\r\n  }, [bmcs, records]);\r\n  \r\n  // Extract unique societies and machines from records (memoized)\r\n  const societies = useMemo(() => {\r\n    if (!records.length) return [];\r\n    \r\n    // Get unique society IDs from collection records\r\n    const societyIdsInCollections = new Set(\r\n      records\r\n        .filter(r => r.society_id)\r\n        .map(r => r.society_id)\r\n    );\r\n    \r\n    // If we have fetched society data, filter it to only show societies with collections\r\n    if (societiesData.length > 0) {\r\n      return societiesData.filter(society => \r\n        societyIdsInCollections.has(society.society_id)\r\n      );\r\n    }\r\n    \r\n    // Fallback to extracting from records if API data not available\r\n    const uniqueSocieties = new Map<string, { society_id: string; society_name: string }>();\r\n    records.forEach(r => {\r\n      if (r.society_id && !uniqueSocieties.has(r.society_id)) {\r\n        uniqueSocieties.set(r.society_id, {\r\n          society_id: r.society_id,\r\n          society_name: r.society_name || r.society_id\r\n        });\r\n      }\r\n    });\r\n    return Array.from(uniqueSocieties.values()).map((society, index) => ({\r\n      id: index + 1,\r\n      name: society.society_name,\r\n      society_id: society.society_id,\r\n      bmc_id: undefined\r\n    }));\r\n  }, [records, societiesData]);\r\n  \r\n  const machines = useMemo(() => {\r\n    if (!machinesData.length || !records.length) return machinesData;\r\n    \r\n    const machineIdsInCollections = new Set(\r\n      records\r\n        .filter(r => r.machine_id)\r\n        .map(r => r.machine_id)\r\n    );\r\n    \r\n    const filteredMachines = machinesData.filter(machine => machineIdsInCollections.has(machine.machineId));\r\n    \r\n    // Add collection counts to machines\r\n    return filteredMachines.map(machine => ({\r\n      ...machine,\r\n      collectionCount: records.filter(r => r.machine_id === machine.machineId).length\r\n    }));\r\n  }, [machinesData, records]);\r\n  \r\n  const farmers = useMemo(() => {\r\n    if (!farmersData.length || !records.length) return farmersData;\r\n    \r\n    const farmerIdsInCollections = new Set(\r\n      records\r\n        .filter(r => r.farmer_id)\r\n        .map(r => r.farmer_id)\r\n    );\r\n    \r\n    return farmersData.filter(farmer => farmerIdsInCollections.has(farmer.farmerId));\r\n  }, [farmersData, records]);\r\n\r\n  // Clear all filters\r\n  const clearFilters = () => {\r\n    setShiftFilter('all');\r\n    setDairyFilter([]);\r\n    setBmcFilter([]);\r\n    setSocietyFilter([]);\r\n    setMachineFilter([]);\r\n    setFarmerFilter([]);\r\n    setDateFilter('');\r\n    setDateFromFilter('');\r\n    setDateToFilter('');\r\n    setChannelFilter('all');\r\n    setSearchQuery('');\r\n    \r\n    // Clear header search\r\n    const event = new CustomEvent('globalSearch', {\r\n      detail: { query: '' }\r\n    });\r\n    window.dispatchEvent(event);\r\n  };\r\n\r\n  // Delete record handler\r\n  const handleDeleteClick = (recordId: number) => {\r\n    setRecordToDelete(recordId);\r\n    setDeleteDialogOpen(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = async (password: string) => {\r\n    if (!recordToDelete) return;\r\n\r\n    setDeleting(true);\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/reports/collections/delete', {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          recordId: recordToDelete,\r\n          password\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to delete record');\r\n      }\r\n\r\n      // Show success message\r\n      setSuccessMessage('Collection record deleted successfully');\r\n      setTimeout(() => setSuccessMessage(''), 5000);\r\n      \r\n      // Refresh the records\r\n      fetchData();\r\n    } catch (error) {\r\n      console.error('Delete error:', error);\r\n      setErrorMessage(error instanceof Error ? error.message : 'Failed to delete record');\r\n      setTimeout(() => setErrorMessage(''), 5000);\r\n      throw error; // Re-throw to be handled by the dialog\r\n    } finally {\r\n      setDeleting(false);\r\n      setRecordToDelete(null);\r\n    }\r\n  };\r\n\r\n  // Bulk selection handlers\r\n  const handleSelectAll = () => {\r\n    if (selectAll) {\r\n      setSelectedRecords(new Set());\r\n      setSelectAll(false);\r\n    } else {\r\n      setSelectedRecords(new Set(filteredRecords.map(r => r.id)));\r\n      setSelectAll(true);\r\n    }\r\n  };\r\n\r\n  const handleSelectOne = (recordId: number) => {\r\n    const newSelected = new Set(selectedRecords);\r\n    if (newSelected.has(recordId)) {\r\n      newSelected.delete(recordId);\r\n    } else {\r\n      newSelected.add(recordId);\r\n    }\r\n    setSelectedRecords(newSelected);\r\n    setSelectAll(newSelected.size === filteredRecords.length && filteredRecords.length > 0);\r\n  };\r\n\r\n  const handleClearSelection = () => {\r\n    setSelectedRecords(new Set());\r\n    setSelectAll(false);\r\n  };\r\n\r\n  const handleBulkDeleteClick = () => {\r\n    if (selectedRecords.size === 0) return;\r\n    setShowBulkDeleteConfirm(true);\r\n  };\r\n\r\n  const handleBulkDeleteConfirm = async (password: string) => {\r\n    setShowBulkDeleteConfirm(false);\r\n    setIsDeletingBulk(true);\r\n    \r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const recordIds = Array.from(selectedRecords);\r\n      \r\n      // Delete records in parallel with password verification\r\n      const deletePromises = recordIds.map(recordId =>\r\n        fetch('/api/user/reports/collections/delete', {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n          },\r\n          body: JSON.stringify({ recordId, password })\r\n        }).then(async (res) => {\r\n          if (!res.ok) {\r\n            const error = await res.json();\r\n            throw new Error(error.message || 'Delete failed');\r\n          }\r\n          return res.json();\r\n        })\r\n      );\r\n\r\n      const results = await Promise.allSettled(deletePromises);\r\n      const successful = results.filter(r => r.status === 'fulfilled').length;\r\n      const failed = results.filter(r => r.status === 'rejected').length;\r\n\r\n      if (successful > 0) {\r\n        setSuccessMessage(`Successfully deleted ${successful} record(s)${failed > 0 ? `. ${failed} failed.` : ''}`);\r\n        setTimeout(() => setSuccessMessage(''), 5000);\r\n        fetchData();\r\n        handleClearSelection();\r\n      } else {\r\n        // Get error message from first failed promise\r\n        const firstError = results.find(r => r.status === 'rejected') as PromiseRejectedResult;\r\n        const errorMsg = firstError?.reason?.message || 'Failed to delete selected records';\r\n        setErrorMessage(errorMsg);\r\n        setTimeout(() => setErrorMessage(''), 5000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Bulk delete error:', error);\r\n      setErrorMessage(error instanceof Error ? error.message : 'Failed to delete selected records');\r\n      setTimeout(() => setErrorMessage(''), 5000);\r\n    } finally {\r\n      setIsDeletingBulk(false);\r\n      setBulkDeletePassword('');\r\n    }\r\n  };\r\n\r\n  // Calculate statistics\r\n  const calculateStats = useCallback((data: CollectionRecord[]) => {\r\n    const totalQuantity = data.reduce((sum, record) => sum + parseFloat(record.quantity || '0'), 0);\r\n    const totalAmount = data.reduce((sum, record) => sum + parseFloat(record.total_amount || '0'), 0);\r\n    \r\n    // Calculate simple average rate from rate_per_liter column\r\n    const totalRate = data.reduce((sum, record) => sum + parseFloat(record.rate_per_liter || '0'), 0);\r\n    const averageRate = data.length > 0 ? totalRate / data.length : 0;\r\n    \r\n    // Calculate weighted averages: Σ(quantity × value) / Σquantity\r\n    const sumQuantityFat = data.reduce((sum, record) => {\r\n      const qty = parseFloat(record.quantity || '0');\r\n      const fat = parseFloat(record.fat_percentage || '0');\r\n      return sum + (qty * fat);\r\n    }, 0);\r\n    const sumQuantitySnf = data.reduce((sum, record) => {\r\n      const qty = parseFloat(record.quantity || '0');\r\n      const snf = parseFloat(record.snf_percentage || '0');\r\n      return sum + (qty * snf);\r\n    }, 0);\r\n    const sumQuantityClr = data.reduce((sum, record) => {\r\n      const qty = parseFloat(record.quantity || '0');\r\n      const clr = parseFloat(record.clr_value || '0');\r\n      return sum + (qty * clr);\r\n    }, 0);\r\n    \r\n    const weightedFat = totalQuantity > 0 ? sumQuantityFat / totalQuantity : 0;\r\n    const weightedSnf = totalQuantity > 0 ? sumQuantitySnf / totalQuantity : 0;\r\n    const weightedClr = totalQuantity > 0 ? sumQuantityClr / totalQuantity : 0;\r\n\r\n    setStats({\r\n      totalCollections: data.length,\r\n      totalQuantity: parseFloat(totalQuantity.toFixed(2)),\r\n      totalAmount: parseFloat(totalAmount.toFixed(2)),\r\n      averageRate: parseFloat(averageRate.toFixed(2)),\r\n      weightedFat: parseFloat(weightedFat.toFixed(2)),\r\n      weightedSnf: parseFloat(weightedSnf.toFixed(2)),\r\n      weightedClr: parseFloat(weightedClr.toFixed(2))\r\n    });\r\n  }, []);\r\n\r\n  // Fetch collection data\r\n  const fetchData = useCallback(async (showLoading = true) => {\r\n    const token = localStorage.getItem('authToken');\r\n    if (!token) return;\r\n\r\n    try {\r\n      if (showLoading) setLoading(true);\r\n      const response = await fetch('/api/user/reports/collections', {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        \r\n        // Only update state if data has changed to prevent unnecessary re-renders\r\n        setRecords(prevRecords => {\r\n          const hasChanged = JSON.stringify(prevRecords) !== JSON.stringify(data);\r\n          if (hasChanged) {\r\n            calculateStats(data);\r\n            return data;\r\n          }\r\n          return prevRecords;\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching collection data:', error);\r\n    } finally {\r\n      if (showLoading) setLoading(false);\r\n    }\r\n  }, [calculateStats]);\r\n\r\n  useEffect(() => {\r\n    fetchData(true);\r\n    \r\n    // Auto-refresh every 1 second without showing loading\r\n    const intervalId = setInterval(() => {\r\n      fetchData(false);\r\n    }, 1000);\r\n    \r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  // Filter records with multi-field search (matching machine management pattern)\r\n  useEffect(() => {\r\n    let filtered = records;\r\n\r\n    // Dairy filter (now array-based)\r\n    if (dairyFilter.length > 0) {\r\n      const selectedDairyIds = dairyFilter.map(id => {\r\n        const dairy = dairies.find(d => d.id.toString() === id);\r\n        return dairy?.id;\r\n      }).filter(Boolean) as number[];\r\n      if (selectedDairyIds.length > 0) {\r\n        filtered = filtered.filter(record => record.dairy_id !== undefined && selectedDairyIds.includes(record.dairy_id));\r\n      }\r\n    }\r\n\r\n    // BMC filter (now array-based)\r\n    if (bmcFilter.length > 0) {\r\n      const selectedBmcIds = bmcFilter.map(id => {\r\n        const bmc = bmcs.find(b => b.id.toString() === id);\r\n        return bmc?.id;\r\n      }).filter(Boolean) as number[];\r\n      if (selectedBmcIds.length > 0) {\r\n        filtered = filtered.filter(record => record.bmc_id !== undefined && selectedBmcIds.includes(record.bmc_id));\r\n      }\r\n    }\r\n\r\n    // Status/Shift filter\r\n    if (shiftFilter !== 'all') {\r\n      if (shiftFilter === 'morning') {\r\n        filtered = filtered.filter(record => ['MR', 'MX', 'morning'].includes(record.shift_type));\r\n      } else if (shiftFilter === 'evening') {\r\n        filtered = filtered.filter(record => ['EV', 'EX', 'evening'].includes(record.shift_type));\r\n      } else {\r\n        filtered = filtered.filter(record => record.shift_type === shiftFilter);\r\n      }\r\n    }\r\n\r\n    // Society filter\r\n    if (Array.isArray(societyFilter) && societyFilter.length > 0) {\r\n      const selectedSocietyIds = societyFilter.map(id => {\r\n        const society = societies.find(s => s.id.toString() === id);\r\n        return society?.society_id;\r\n      }).filter(Boolean);\r\n      if (selectedSocietyIds.length > 0) {\r\n        filtered = filtered.filter(record => selectedSocietyIds.includes(record.society_id));\r\n      }\r\n    }\r\n\r\n    // Machine filter\r\n    if (machineFilter.length > 0) {\r\n      const selectedMachineIds = machineFilter\r\n        .map(id => machines.find(m => m.id.toString() === id)?.machineId)\r\n        .filter(Boolean) as string[];\r\n      if (selectedMachineIds.length > 0) {\r\n        filtered = filtered.filter(record => selectedMachineIds.includes(record.machine_id));\r\n      }\r\n    }\r\n\r\n    // Farmer filter\r\n    if (farmerFilter.length > 0) {\r\n      const selectedFarmerIds = farmerFilter\r\n        .map(id => farmers.find(f => f.id.toString() === id)?.farmerId)\r\n        .filter(Boolean) as string[];\r\n      if (selectedFarmerIds.length > 0) {\r\n        filtered = filtered.filter(record => selectedFarmerIds.includes(record.farmer_id));\r\n      }\r\n    }\r\n\r\n    // Channel filter\r\n    if (channelFilter !== 'all') {\r\n      filtered = filtered.filter(record => {\r\n        const displayChannel = getChannelDisplay(record.channel);\r\n        return displayChannel === channelFilter;\r\n      });\r\n    }\r\n\r\n    // Date filter\r\n    if (dateFilter) {\r\n      filtered = filtered.filter(record => record.collection_date === dateFilter);\r\n    }\r\n\r\n    // Date range filter\r\n    if (dateFromFilter) {\r\n      filtered = filtered.filter(record => record.collection_date >= dateFromFilter);\r\n    }\r\n    if (dateToFilter) {\r\n      filtered = filtered.filter(record => record.collection_date <= dateToFilter);\r\n    }\r\n\r\n    // Multi-field search across collection details (matching machine management pattern)\r\n    if (combinedSearch) {\r\n      const searchLower = combinedSearch.toLowerCase();\r\n      filtered = filtered.filter(record => {\r\n        // Get display value for shift\r\n        const shiftDisplay = ['MR', 'MX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'morning'\r\n          ? 'Morning' \r\n          : ['EV', 'EX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'evening'\r\n          ? 'Evening' \r\n          : record.shift_type;\r\n        \r\n        return [\r\n          record.farmer_id,\r\n          record.farmer_name,\r\n          record.society_id,\r\n          record.society_name,\r\n          record.bmc_name,\r\n          record.dairy_name,\r\n          record.machine_id,\r\n          record.machine_type,\r\n          record.machine_version,\r\n          record.channel,\r\n          getChannelDisplay(record.channel),\r\n          record.collection_date,\r\n          record.collection_time,\r\n          record.shift_type,\r\n          shiftDisplay,\r\n          record.quantity,\r\n          record.fat_percentage,\r\n          record.snf_percentage,\r\n          record.clr_value,\r\n          record.protein_percentage,\r\n          record.lactose_percentage,\r\n          record.salt_percentage,\r\n          record.water_percentage,\r\n          record.temperature,\r\n          record.rate_per_liter,\r\n          record.total_amount,\r\n          record.bonus\r\n        ].some(field =>\r\n          field?.toString().toLowerCase().includes(searchLower)\r\n        );\r\n      });\r\n    }\r\n\r\n    setFilteredRecords(filtered);\r\n    calculateStats(filtered);\r\n  }, [globalSearch, searchQuery, dateFilter, dateFromFilter, dateToFilter, shiftFilter, channelFilter, societyFilter, machineFilter, farmerFilter, dairyFilter, bmcFilter, records, societies, machines, farmers, dairies, bmcs, calculateStats]);\r\n\r\n  // Export to CSV\r\n  const exportToCSV = () => {\r\n    if (filteredRecords.length === 0) return;\r\n\r\n    const dateRange = dateFromFilter && dateToFilter \r\n      ? `${dateFromFilter} To ${dateToFilter}`\r\n      : dateFilter || 'All Dates';\r\n    const currentDateTime = new Date().toLocaleString('en-IN', { \r\n      year: 'numeric', month: '2-digit', day: '2-digit', \r\n      hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false \r\n    });\r\n\r\n    // Detailed data rows\r\n    const dataRows = filteredRecords.map(record => [\r\n      record.collection_date,\r\n      record.collection_time,\r\n      record.channel,\r\n      record.shift_type,\r\n      `${record.machine_id} (${record.machine_type})`,\r\n      `${record.society_name} (${record.society_id})`,\r\n      record.farmer_id,\r\n      record.farmer_name,\r\n      record.fat_percentage,\r\n      record.snf_percentage,\r\n      record.clr_value,\r\n      record.water_percentage,\r\n      record.rate_per_liter,\r\n      record.quantity,\r\n      record.total_amount,\r\n      record.bonus\r\n    ]);\r\n\r\n    const csvContent = [\r\n      'Admin Report - LactoConnect Milk Collection System',\r\n      `Date From ${dateRange}`,\r\n      '',\r\n      'DETAILED COLLECTION DATA',\r\n      '',\r\n      'Date,Time,Channel,Shift,Machine,Society,Farmer ID,Farmer Name,Fat (%),SNF (%),CLR,Water (%),Rate,Quantity (L),Total Amount,Incentive',\r\n      ...dataRows.map(row => row.join(',')),\r\n      '',\r\n      '',\r\n      'OVERALL SUMMARY',\r\n      `Total Collections:,${stats.totalCollections}`,\r\n      `Total Quantity (L):,${stats.totalQuantity.toFixed(2)}`,\r\n      `Overall Weighted Fat (%):,${stats.weightedFat.toFixed(2)}`,\r\n      `Overall Weighted SNF (%):,${stats.weightedSnf.toFixed(2)}`,\r\n      `Overall Weighted CLR:,${stats.weightedClr.toFixed(2)}`,\r\n      `Total Amount (Rs):,${stats.totalAmount.toFixed(2)}`,\r\n      `Overall Average Rate (Rs/L):,${stats.averageRate.toFixed(2)}`,\r\n      '',\r\n      'Thank you',\r\n      'Poornasree Equipments',\r\n      `Generated on: ${currentDateTime}`\r\n    ].join('\\n');\r\n\r\n    const blob = new Blob([csvContent], { type: 'text/csv' });\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `collection-report-${new Date().toISOString().split('T')[0]}.csv`;\r\n    a.click();\r\n  };\r\n\r\n  // Export to PDF\r\n  const exportToPDF = () => {\r\n    if (filteredRecords.length === 0) return;\r\n\r\n    const doc = new jsPDF({ orientation: 'landscape', unit: 'mm', format: 'a4' });\r\n    const dateRange = dateFromFilter && dateToFilter \r\n      ? `${dateFromFilter} To ${dateToFilter}`\r\n      : dateFilter \r\n      ? `${dateFilter} To ${dateFilter}`\r\n      : 'All Dates';\r\n\r\n    // Add Logo\r\n    const logoPath = '/fulllogo.png';\r\n    doc.addImage(logoPath, 'PNG', 14, 8, 0, 12);\r\n\r\n    // Logo and Header\r\n    doc.setFontSize(14);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('Daily Collection Report - LactoConnect Milk Collection System', 148.5, 15, { align: 'center' });\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(`Date From ${dateRange}`, 148.5, 21, { align: 'center' });\r\n    \r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('DETAILED COLLECTION DATA', 148.5, 28, { align: 'center' });\r\n\r\n    // Detailed Data Table with SI No\r\n    const tableData = filteredRecords.map((record, index) => [\r\n      (index + 1).toString(),\r\n      record.collection_date,\r\n      record.collection_time,\r\n      getChannelDisplay(record.channel),\r\n      record.shift_type,\r\n      `${record.machine_id} (${record.machine_type})`,\r\n      `${record.society_name} (${record.society_id})`,\r\n      record.farmer_id,\r\n      record.farmer_name || '',\r\n      record.fat_percentage,\r\n      record.snf_percentage,\r\n      record.clr_value,\r\n      record.water_percentage,\r\n      record.rate_per_liter,\r\n      record.quantity,\r\n      record.total_amount,\r\n      record.bonus\r\n    ]);\r\n\r\n    autoTable(doc, {\r\n      startY: 32,\r\n      head: [['SI No', 'Date', 'Time', 'Channel', 'Shift', 'Machine', 'Society', 'Farmer ID', 'Farmer Name', 'Fat (%)', 'SNF (%)', 'CLR', 'Water (%)', 'Rate', 'Quantity (L)', 'Total Amount', 'Incentive']],\r\n      body: tableData,\r\n      theme: 'grid',\r\n      styles: { fontSize: 6, cellPadding: 1, halign: 'center' },\r\n      headStyles: { fillColor: [255, 255, 255], textColor: [0, 0, 0], fontStyle: 'bold', fontSize: 7, lineWidth: 0.5, lineColor: [0, 0, 0] },\r\n      bodyStyles: { lineWidth: 0.3, lineColor: [200, 200, 200] },\r\n      columnStyles: {\r\n        0: { cellWidth: 10 },\r\n        8: { halign: 'left' }\r\n      }\r\n    });\r\n\r\n    // Summary Section\r\n    const finalY = doc.lastAutoTable.finalY + 8;\r\n    \r\n    // Left side - Weighted Averages\r\n    doc.setFontSize(11);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('WEIGHTED AVERAGES', 14, finalY);\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    let leftY = finalY + 6;\r\n    doc.text(`Weighted Fat      : ${stats.weightedFat.toFixed(2)}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Weighted SNF      : ${stats.weightedSnf.toFixed(2)}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Weighted CLR      : ${stats.weightedClr.toFixed(2)}`, 14, leftY);\r\n    \r\n    leftY += 8;\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('OVERALL SUMMARY', 14, leftY);\r\n    doc.setFont('helvetica', 'normal');\r\n    leftY += 6;\r\n    doc.text(`Total Collections  : ${stats.totalCollections}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Total Quantity (L) : ${stats.totalQuantity.toFixed(2)}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Total Amount       : ${stats.totalAmount.toFixed(2)}`, 14, leftY);\r\n\r\n    // Right side - Report Notes\r\n    doc.setFontSize(11);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('REPORT NOTES', 283, finalY, { align: 'right' });\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    let rightY = finalY + 6;\r\n    doc.text('Prepared by: POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n    rightY += 5;\r\n    doc.text('Contact: marketing@poornasree.com', 283, rightY, { align: 'right' });\r\n    \r\n    rightY += 8;\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n    doc.setFont('helvetica', 'normal');\r\n    rightY += 5;\r\n    doc.text('Thank you for using LactoConnect', 283, rightY, { align: 'right' });\r\n    rightY += 5;\r\n    doc.text('For support, visit: www.poornasree.com', 283, rightY, { align: 'right' });\r\n\r\n    doc.save(`collection-report-${new Date().toISOString().split('T')[0]}.pdf`);\r\n  };\r\n\r\n  // Send email with CSV and PDF attachments\r\n  const handleSendEmail = async (email: string) => {\r\n    if (!email || !email.includes('@')) {\r\n      throw new Error('Please enter a valid email address');\r\n    }\r\n\r\n    try {\r\n      // Generate CSV content\r\n      const dateRange = dateFromFilter && dateToFilter \r\n        ? `${dateFromFilter} To ${dateToFilter}`\r\n        : dateFilter || 'All Dates';\r\n      const currentDateTime = new Date().toLocaleString('en-IN', { \r\n        year: 'numeric', month: '2-digit', day: '2-digit', \r\n        hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false \r\n      });\r\n\r\n      const dataRows = filteredRecords.map(record => [\r\n        record.collection_date,\r\n        record.collection_time,\r\n        record.channel,\r\n        record.shift_type,\r\n        `${record.machine_id} (${record.machine_type})`,\r\n        record.society_name || '',\r\n        record.farmer_id || '',\r\n        record.farmer_name || '',\r\n        record.fat_percentage,\r\n        record.snf_percentage,\r\n        record.clr_value,\r\n        record.water_percentage,\r\n        record.rate_per_liter,\r\n        record.quantity,\r\n        record.total_amount,\r\n        record.bonus\r\n      ]);\r\n\r\n      const csvContent = [\r\n        ['POORNASREE EQUIPMENTS MILK COLLECTION REPORT'],\r\n        ['Admin Report with Weighted Averages'],\r\n        [],\r\n        ['Report Generated:', currentDateTime],\r\n        ['Date Range:', dateRange],\r\n        ['Total Collections:', stats.totalCollections],\r\n        ['Total Quantity (L):', stats.totalQuantity.toFixed(2)],\r\n        ['Total Amount (₹):', stats.totalAmount.toFixed(2)],\r\n        ['Average Rate (₹/L):', stats.averageRate.toFixed(2)],\r\n        ['Weighted FAT (%):', stats.weightedFat.toFixed(2)],\r\n        ['Weighted SNF (%):', stats.weightedSnf.toFixed(2)],\r\n        ['Weighted CLR:', stats.weightedClr.toFixed(2)],\r\n        [],\r\n        ['Date', 'Time', 'Channel', 'Shift', 'Machine', 'Society', 'Farmer ID', 'Farmer Name', 'Fat (%)', 'SNF (%)', 'CLR', 'Water (%)', 'Rate (₹/L)', 'Quantity (L)', 'Total Amount (₹)', 'Incentive'],\r\n        ...dataRows\r\n      ].map(row => row.join(',')).join('\\n');\r\n\r\n      // Generate PDF as base64 - matching current PDF design exactly\r\n      const doc = new jsPDF({ orientation: 'landscape', unit: 'mm', format: 'a4' });\r\n      \r\n      // Add Logo (same as current PDF)\r\n      const logoPath = '/fulllogo.png';\r\n      doc.addImage(logoPath, 'PNG', 14, 8, 0, 12);\r\n\r\n      // Logo and Header (same as current PDF)\r\n      doc.setFontSize(14);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('Daily Collection Report - LactoConnect Milk Collection System', 148.5, 15, { align: 'center' });\r\n      doc.setFontSize(9);\r\n      doc.setFont('helvetica', 'normal');\r\n      doc.text(`Date From ${dateRange}`, 148.5, 21, { align: 'center' });\r\n      \r\n      doc.setFontSize(10);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('DETAILED COLLECTION DATA', 148.5, 28, { align: 'center' });\r\n\r\n      // Detailed Data Table with SI No (same as current PDF)\r\n      const tableData = filteredRecords.map((record, index) => [\r\n        (index + 1).toString(),\r\n        record.collection_date,\r\n        record.collection_time,\r\n        getChannelDisplay(record.channel),\r\n        record.shift_type,\r\n        `${record.machine_id} (${record.machine_type})`,\r\n        `${record.society_name} (${record.society_id})`,\r\n        record.farmer_id,\r\n        record.farmer_name || '',\r\n        record.fat_percentage,\r\n        record.snf_percentage,\r\n        record.clr_value,\r\n        record.water_percentage,\r\n        record.rate_per_liter,\r\n        record.quantity,\r\n        record.total_amount,\r\n        record.bonus\r\n      ]);\r\n\r\n      autoTable(doc, {\r\n        startY: 32,\r\n        head: [['SI No', 'Date', 'Time', 'Channel', 'Shift', 'Machine', 'Society', 'Farmer ID', 'Farmer Name', 'Fat (%)', 'SNF (%)', 'CLR', 'Water (%)', 'Rate', 'Quantity (L)', 'Total Amount', 'Incentive']],\r\n        body: tableData,\r\n        theme: 'grid',\r\n        styles: { fontSize: 6, cellPadding: 1, halign: 'center' },\r\n        headStyles: { fillColor: [255, 255, 255], textColor: [0, 0, 0], fontStyle: 'bold', fontSize: 7, lineWidth: 0.5, lineColor: [0, 0, 0] },\r\n        bodyStyles: { lineWidth: 0.3, lineColor: [200, 200, 200] },\r\n        columnStyles: {\r\n          0: { cellWidth: 10 },\r\n          8: { halign: 'left' }\r\n        }\r\n      });\r\n\r\n      // Summary Section (same as current PDF)\r\n      const finalY = doc.lastAutoTable.finalY + 8;\r\n      \r\n      // Left side - Weighted Averages\r\n      doc.setFontSize(11);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('WEIGHTED AVERAGES', 14, finalY);\r\n      doc.setFontSize(9);\r\n      doc.setFont('helvetica', 'normal');\r\n      let leftY = finalY + 6;\r\n      doc.text(`Weighted Fat      : ${stats.weightedFat.toFixed(2)}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Weighted SNF      : ${stats.weightedSnf.toFixed(2)}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Weighted CLR      : ${stats.weightedClr.toFixed(2)}`, 14, leftY);\r\n      \r\n      leftY += 8;\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('OVERALL SUMMARY', 14, leftY);\r\n      doc.setFont('helvetica', 'normal');\r\n      leftY += 6;\r\n      doc.text(`Total Collections  : ${stats.totalCollections}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Total Quantity (L) : ${stats.totalQuantity.toFixed(2)}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Total Amount       : ${stats.totalAmount.toFixed(2)}`, 14, leftY);\r\n\r\n      // Right side - Report Notes\r\n      doc.setFontSize(11);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('REPORT NOTES', 283, finalY, { align: 'right' });\r\n      doc.setFontSize(9);\r\n      doc.setFont('helvetica', 'normal');\r\n      let rightY = finalY + 6;\r\n      doc.text('Prepared by: POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n      rightY += 5;\r\n      doc.text('Contact: marketing@poornasree.com', 283, rightY, { align: 'right' });\r\n      \r\n      rightY += 8;\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n      doc.setFont('helvetica', 'normal');\r\n      rightY += 5;\r\n      doc.text('Thank you for using LactoConnect', 283, rightY, { align: 'right' });\r\n      rightY += 5;\r\n      doc.text('For support, visit: www.poornasree.com', 283, rightY, { align: 'right' });\r\n\r\n      const pdfBase64 = doc.output('datauristring').split(',')[1];\r\n\r\n      // Send email with attachments\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/reports/send-email', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          email: email,\r\n          csvContent,\r\n          pdfContent: pdfBase64,\r\n          reportType: 'Collection Report',\r\n          dateRange,\r\n          stats\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        throw new Error(errorData.error || 'Failed to send email');\r\n      }\r\n\r\n      setSuccessMessage(`Report sent successfully to ${email}`);\r\n      setTimeout(() => setSuccessMessage(''), 5000);\r\n    } catch (error) {\r\n      console.error('Error sending email:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <FlowerSpinner size={48} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Statistics Cards */}\r\n      <div className=\"grid grid-cols-7 gap-3\">\r\n        <StatsCard\r\n          title=\"Total Collections\"\r\n          value={stats.totalCollections}\r\n          icon={<Droplet className=\"w-full h-full\" />}\r\n          color=\"blue\"\r\n        />\r\n        <StatsCard\r\n          title=\"Total Quantity (L)\"\r\n          value={stats.totalQuantity}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"green\"\r\n        />\r\n        <StatsCard\r\n          title=\"Total Amount (₹)\"\r\n          value={`₹${stats.totalAmount.toFixed(2)}`}\r\n          icon={<TrendingUp className=\"w-full h-full\" />}\r\n          color=\"yellow\"\r\n        />\r\n        <StatsCard\r\n          title=\"Avg Rate (₹/L)\"\r\n          value={`₹${stats.averageRate.toFixed(2)}`}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"gray\"\r\n        />\r\n        <StatsCard\r\n          title=\"Weighted FAT (%)\"\r\n          value={stats.weightedFat.toFixed(2)}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"blue\"\r\n        />\r\n        <StatsCard\r\n          title=\"Weighted SNF (%)\"\r\n          value={stats.weightedSnf.toFixed(2)}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"green\"\r\n        />\r\n        <StatsCard\r\n          title=\"Weighted CLR\"\r\n          value={stats.weightedClr.toFixed(2)}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"red\"\r\n        />\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 sm:p-6\">\r\n        <div className=\"space-y-4\">\r\n          {/* Filter Info */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n              Showing {filteredRecords.length} of {records.length} records\r\n            </span>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={() => {\r\n                  clearFilters();\r\n                  fetchData();\r\n                }}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-psr-primary-600 text-white rounded-lg hover:bg-psr-primary-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <RefreshCw className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">Refresh</span>\r\n              </button>\r\n              <button\r\n                onClick={exportToCSV}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-psr-green-600 text-white rounded-lg hover:bg-psr-green-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <Download className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">CSV</span>\r\n              </button>\r\n              <button\r\n                onClick={exportToPDF}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <FileDown className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">PDF</span>\r\n              </button>\r\n              <button\r\n                onClick={() => setShowEmailModal(true)}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <Mail className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">Send Mail</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Filter Dropdown - All Filters Inside */}\r\n          <FilterDropdown\r\n            statusFilter={shiftFilter}\r\n            onStatusChange={setShiftFilter}\r\n            dairyFilter={dairyFilter}\r\n            onDairyChange={(value) => setDairyFilter(Array.isArray(value) ? value : [value])}\r\n            bmcFilter={bmcFilter}\r\n            onBmcChange={(value) => setBmcFilter(Array.isArray(value) ? value : [value])}\r\n            societyFilter={societyFilter}\r\n            onSocietyChange={(value) => setSocietyFilter(Array.isArray(value) ? value : [value])}\r\n            machineFilter={machineFilter}\r\n            onMachineChange={(value) => setMachineFilter(Array.isArray(value) ? value : [value])}\r\n            farmerFilter={farmerFilter}\r\n            onFarmerChange={(value) => setFarmerFilter(Array.isArray(value) ? value : [value])}\r\n            dairies={dairiesWithCollections}\r\n            bmcs={bmcsWithCollections}\r\n            societies={societies}\r\n            machines={machines}\r\n            farmers={farmers}\r\n            filteredCount={filteredRecords.length}\r\n            totalCount={records.length}\r\n            searchQuery={searchQuery}\r\n            onSearchChange={setSearchQuery}\r\n            icon={<Droplet className=\"w-5 h-5\" />}\r\n            dateFilter={dateFilter}\r\n            onDateChange={setDateFilter}\r\n            dateFromFilter={dateFromFilter}\r\n            onDateFromChange={setDateFromFilter}\r\n            dateToFilter={dateToFilter}\r\n            onDateToChange={setDateToFilter}\r\n            channelFilter={channelFilter}\r\n            onChannelChange={setChannelFilter}\r\n            showDateFilter\r\n            showChannelFilter\r\n            showShiftFilter\r\n            showMachineFilter\r\n            hideMainFilterButton={true}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Data Table */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden\">\r\n        <div className=\"overflow-auto max-h-[600px]\" tabIndex={0}>\r\n          <table className=\"w-auto min-w-full table-auto\">\r\n            <thead className=\"bg-gray-50 dark:bg-gray-700 sticky top-0 z-10\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectAll}\r\n                    onChange={handleSelectAll}\r\n                    className=\"w-4 h-4 text-emerald-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 cursor-pointer\"\r\n                  />\r\n                </th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Date & Time</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Farmer</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Society</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Machine</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Shift</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Channel</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Fat %</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">SNF %</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">CLR</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Protein %</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Lactose %</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Salt %</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Water %</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Temp (°C)</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Rate/L</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Bonus</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Qty (L)</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Amount</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n              {filteredRecords.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan={20} className=\"px-4 py-8 text-center text-gray-500 dark:text-gray-400\">\r\n                    No collection records found\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                filteredRecords.map((record) => (\r\n                  <tr key={record.id} className={`transition-colors ${\r\n                    selectedRecords.has(record.id)\r\n                      ? 'bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30'\r\n                      : 'hover:bg-gray-50 dark:hover:bg-gray-700'\r\n                  }`}>\r\n                    <td className=\"px-4 py-3 text-center\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedRecords.has(record.id)}\r\n                        onChange={() => handleSelectOne(record.id)}\r\n                        className=\"w-4 h-4 text-emerald-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 cursor-pointer\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                      <div>{highlightText(record.collection_date, combinedSearch)}</div>\r\n                      <div className=\"text-xs text-gray-500\">{record.collection_time}</div>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                      <div className=\"font-medium\">{highlightText(record.farmer_name, combinedSearch)}</div>\r\n                      <div className=\"text-xs text-gray-500\">ID: {highlightText(record.farmer_id, combinedSearch)}</div>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                      <div className=\"font-medium\">{highlightText(record.society_name, combinedSearch)}</div>\r\n                      <div className=\"text-xs text-gray-500\">ID: {highlightText(record.society_id, combinedSearch)}</div>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                      <div className=\"font-medium\">{highlightText(record.machine_id, combinedSearch)}</div>\r\n                      <div className=\"text-xs text-gray-500\">{highlightText(record.machine_type, combinedSearch)}</div>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center\">\r\n                      <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                        ['MR', 'MX', 'morning'].includes(record.shift_type?.toUpperCase() === 'MORNING' ? 'morning' : record.shift_type)\r\n                          ? 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400'\r\n                          : ['EV', 'EX', 'evening'].includes(record.shift_type?.toUpperCase() === 'EVENING' ? 'evening' : record.shift_type)\r\n                          ? 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400'\r\n                          : 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400'\r\n                      }`}>\r\n                        {highlightText(\r\n                          ['MR', 'MX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'morning'\r\n                            ? 'Morning' \r\n                            : ['EV', 'EX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'evening'\r\n                            ? 'Evening' \r\n                            : record.shift_type,\r\n                          combinedSearch\r\n                        )}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center\">\r\n                      <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                        getChannelDisplay(record.channel) === 'COW'\r\n                          ? 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400'\r\n                          : getChannelDisplay(record.channel) === 'BUFFALO'\r\n                          ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400'\r\n                          : 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400'\r\n                      }`}>\r\n                        {highlightText(getChannelDisplay(record.channel), combinedSearch)}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.fat_percentage).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.snf_percentage).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.clr_value).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.protein_percentage).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.lactose_percentage).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.salt_percentage).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.water_percentage).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.temperature).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">₹{highlightText(parseFloat(record.rate_per_liter).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">₹{highlightText(parseFloat(record.bonus).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center font-medium text-gray-900 dark:text-white\">{highlightText(parseFloat(record.quantity).toFixed(2), combinedSearch)}</td>\r\n                    <td className=\"px-4 py-3 text-sm text-center font-medium text-green-600 dark:text-green-400\">\r\n                      ₹{highlightText(parseFloat(record.total_amount).toFixed(2), combinedSearch)}\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center\">\r\n                      <button\r\n                        onClick={() => handleDeleteClick(record.id)}\r\n                        className=\"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors\"\r\n                        title=\"Delete record\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Password Confirmation Dialog */}\r\n      <PasswordConfirmDialog\r\n        isOpen={deleteDialogOpen}\r\n        onClose={() => setDeleteDialogOpen(false)}\r\n        onConfirm={handleDeleteConfirm}\r\n        title=\"Delete Collection Record\"\r\n        message=\"Enter your admin password to confirm deletion. This action cannot be undone and will be logged for security purposes.\"\r\n      />\r\n\r\n      {/* Bulk Delete Password Confirmation Modal */}\r\n      <PasswordConfirmDialog\r\n        isOpen={showBulkDeleteConfirm}\r\n        onClose={() => {\r\n          setShowBulkDeleteConfirm(false);\r\n          setBulkDeletePassword('');\r\n        }}\r\n        onConfirm={handleBulkDeleteConfirm}\r\n        title={`Delete ${selectedRecords.size} Collection Record${selectedRecords.size > 1 ? 's' : ''}`}\r\n        message={`Enter your admin password to confirm deletion of ${selectedRecords.size} selected record(s). This action cannot be undone and will be logged for security purposes.`}\r\n      />\r\n\r\n      {/* Bulk Actions Toolbar */}\r\n      <BulkActionsToolbar\r\n        selectedCount={selectedRecords.size}\r\n        totalCount={filteredRecords.length}\r\n        onBulkDelete={handleBulkDeleteClick}\r\n        onClearSelection={handleClearSelection}\r\n        itemType=\"record\"\r\n        showStatusUpdate={false}\r\n      />\r\n\r\n      {/* Loading Snackbar */}\r\n      <LoadingSnackbar\r\n        isVisible={deleting || isDeletingBulk}\r\n        message={isDeletingBulk ? `Deleting ${selectedRecords.size} Records` : \"Deleting Record\"}\r\n        submessage=\"Verifying credentials and removing data...\"\r\n        showProgress={false}\r\n      />\r\n\r\n      {/* Email Modal */}\r\n      <EmailReportModal\r\n        isOpen={showEmailModal}\r\n        onClose={() => setShowEmailModal(false)}\r\n        onSend={handleSendEmail}\r\n        defaultEmail={adminEmail}\r\n        recordCount={filteredRecords.length}\r\n        reportType=\"Collection Report\"\r\n      />\r\n\r\n      {/* Status Messages */}\r\n      <StatusMessage\r\n        success={successMessage}\r\n        error={errorMessage}\r\n        onClose={() => {\r\n          setSuccessMessage('');\r\n          setErrorMessage('');\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2996, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/components/reports/DispatchReports.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { \r\n  Download,\r\n  FileDown,\r\n  Truck,\r\n  Package,\r\n  TrendingUp,\r\n  BarChart3,\r\n  RefreshCw,\r\n  Trash2,\r\n  Mail\r\n} from 'lucide-react';\r\nimport jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\nimport StatsCard from '@/components/management/StatsCard';\r\nimport { FlowerSpinner } from '@/components';\r\nimport { FilterDropdown, LoadingSnackbar, StatusMessage, BulkActionsToolbar } from '@/components/management';\r\nimport PasswordConfirmDialog from '@/components/dialogs/PasswordConfirmDialog';\r\nimport EmailReportModal from '@/components/dialogs/EmailReportModal';\r\n\r\ninterface DispatchRecord {\r\n  id: number;\r\n  dispatch_id: string;\r\n  society_id: string;\r\n  society_name: string;\r\n  bmc_id?: number;\r\n  bmc_name?: string;\r\n  dairy_id?: number;\r\n  dairy_name?: string;\r\n  machine_id: string;\r\n  dispatch_date: string;\r\n  dispatch_time: string;\r\n  shift_type: string;\r\n  channel: string;\r\n  quantity: string;\r\n  fat_percentage: string;\r\n  snf_percentage: string;\r\n  clr_value: string;\r\n  rate_per_liter: string;\r\n  total_amount: string;\r\n  machine_type: string;\r\n  machine_version: string;\r\n}\r\n\r\ninterface DispatchStats {\r\n  totalDispatches: number;\r\n  totalQuantity: number;\r\n  totalAmount: number;\r\n  averageRate: number;\r\n  weightedFat: number;\r\n  weightedSnf: number;\r\n  weightedClr: number;\r\n}\r\n\r\n// Helper function to highlight matching text in search results\r\nconst highlightText = (text: string | number | null | undefined, searchQuery: string) => {\r\n  if (!text && text !== 0) return text || '';\r\n  if (!searchQuery) return text;\r\n  \r\n  const textStr = text.toString();\r\n  const regex = new RegExp(`(${searchQuery.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\r\n  const parts = textStr.split(regex);\r\n  \r\n  return parts.map((part, index) => \r\n    regex.test(part) ? (\r\n      <span key={index} className=\"bg-yellow-200 dark:bg-yellow-800 px-0.5 rounded\">\r\n        {part}\r\n      </span>\r\n    ) : (\r\n      part\r\n    )\r\n  );\r\n};\r\n\r\n// Helper function to map channel codes to display names\r\nconst getChannelDisplay = (channel: string): string => {\r\n  const channelMap: { [key: string]: string } = {\r\n    'ch1': 'COW',\r\n    'ch2': 'BUFFALO',\r\n    'ch3': 'MIXED',\r\n    'CH1': 'COW',\r\n    'CH2': 'BUFFALO',\r\n    'CH3': 'MIXED',\r\n    'COW': 'COW',\r\n    'BUFFALO': 'BUFFALO',\r\n    'MIXED': 'MIXED',\r\n    'cow': 'COW',\r\n    'buffalo': 'BUFFALO',\r\n    'mixed': 'MIXED',\r\n    'BUF': 'BUFFALO',\r\n    'MIX': 'MIXED'\r\n  };\r\n  return channelMap[channel] || channel.toUpperCase();\r\n};\r\n\r\ninterface DispatchReportsProps {\r\n  globalSearch?: string;\r\n}\r\n\r\nexport default function DispatchReports({ globalSearch = '' }: DispatchReportsProps) {\r\n  const [records, setRecords] = useState<DispatchRecord[]>([]);\r\n  const [filteredRecords, setFilteredRecords] = useState<DispatchRecord[]>([]);\r\n  const [stats, setStats] = useState<DispatchStats>({\r\n    totalDispatches: 0,\r\n    totalQuantity: 0,\r\n    totalAmount: 0,\r\n    averageRate: 0,\r\n    weightedFat: 0,\r\n    weightedSnf: 0,\r\n    weightedClr: 0\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  \r\n  // Sync global search with local search\r\n  useEffect(() => {\r\n    if (globalSearch !== undefined) {\r\n      setSearchQuery(globalSearch);\r\n    }\r\n  }, [globalSearch]);\r\n\r\n  // Combined search from global header and local search\r\n  const combinedSearch = useMemo(() => globalSearch || searchQuery, [globalSearch, searchQuery]);\r\n  \r\n  const [dateFilter, setDateFilter] = useState('');\r\n  const [dateFromFilter, setDateFromFilter] = useState('');\r\n  const [dateToFilter, setDateToFilter] = useState('');\r\n  const [shiftFilter, setShiftFilter] = useState('all');\r\n  const [channelFilter, setChannelFilter] = useState('all');\r\n  const [dairyFilter, setDairyFilter] = useState<string[]>([]);\r\n  const [bmcFilter, setBmcFilter] = useState<string[]>([]);\r\n  const [societyFilter, setSocietyFilter] = useState<string[]>([]);\r\n  const [machineFilter, setMachineFilter] = useState<string[]>([]);\r\n\r\n  // Fetch dairies and BMCs\r\n  const [dairies, setDairies] = useState<Array<{ id: number; name: string; dairyId: string }>>([]);\r\n  const [bmcs, setBmcs] = useState<Array<{ id: number; name: string; bmcId: string; dairyFarmId?: number }>>([]);\r\n\r\n  // Delete functionality\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [recordToDelete, setRecordToDelete] = useState<number | null>(null);\r\n  const [deleting, setDeleting] = useState(false);\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  // Bulk selection and delete\r\n  const [selectedRecords, setSelectedRecords] = useState<Set<number>>(new Set());\r\n  const [selectAll, setSelectAll] = useState(false);\r\n  const [showBulkDeleteConfirm, setShowBulkDeleteConfirm] = useState(false);\r\n  const [isDeletingBulk, setIsDeletingBulk] = useState(false);\r\n  const [bulkDeletePassword, setBulkDeletePassword] = useState('');\r\n\r\n  // Email modal state\r\n  const [showEmailModal, setShowEmailModal] = useState(false);\r\n  const [adminEmail, setAdminEmail] = useState('');\r\n  \r\n  // Fetch dairies, BMCs, societies, and machines\r\n  const [societiesData, setSocietiesData] = useState<Array<{ id: number; name: string; society_id: string; bmc_id?: number }>>([]);\r\n  const [machinesData, setMachinesData] = useState<Array<{ id: number; machineId: string; machineType: string; societyId?: number }>>([]);\r\n\r\n  useEffect(() => {\r\n    const fetchDairiesAndBmcs = async () => {\r\n      try {\r\n        const token = localStorage.getItem('authToken');\r\n        if (!token) return;\r\n\r\n        const dairyRes = await fetch('/api/user/dairy', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (dairyRes.ok) {\r\n          const dairyData = await dairyRes.json();\r\n          setDairies(dairyData.data || []);\r\n        }\r\n\r\n        const bmcRes = await fetch('/api/user/bmc', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (bmcRes.ok) {\r\n          const bmcData = await bmcRes.json();\r\n          setBmcs(bmcData.data || []);\r\n        }\r\n\r\n        const societyRes = await fetch('/api/user/society', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (societyRes.ok) {\r\n          const societyData = await societyRes.json();\r\n          setSocietiesData(societyData.data || []);\r\n        }\r\n\r\n        const machineRes = await fetch('/api/user/machine', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (machineRes.ok) {\r\n          const machineData = await machineRes.json();\r\n          setMachinesData(machineData.data || []);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching dairies/BMCs/Societies/Machines:', error);\r\n      }\r\n    };\r\n\r\n    fetchDairiesAndBmcs();\r\n  }, []);\r\n\r\n  // Filter dairies to only show those with dispatch records\r\n  const dairiesWithDispatches = useMemo(() => {\r\n    if (!dairies.length || !records.length) return dairies;\r\n    \r\n    const dairyIdsInDispatches = new Set(\r\n      records\r\n        .filter(r => r.dairy_id)\r\n        .map(r => r.dairy_id)\r\n    );\r\n    \r\n    return dairies.filter(dairy => dairyIdsInDispatches.has(dairy.id));\r\n  }, [dairies, records]);\r\n\r\n  // Clear all filters\r\n  const clearFilters = () => {\r\n    setShiftFilter('all');\r\n    setDairyFilter([]);\r\n    setBmcFilter([]);\r\n    setSocietyFilter([]);\r\n    setMachineFilter([]);\r\n    setDateFilter('');\r\n    setDateFromFilter('');\r\n    setDateToFilter('');\r\n    setChannelFilter('all');\r\n    setSearchQuery('');\r\n    \r\n    // Clear header search\r\n    const event = new CustomEvent('globalSearch', {\r\n      detail: { query: '' }\r\n    });\r\n    window.dispatchEvent(event);\r\n  };\r\n\r\n  // Delete record handler\r\n  const handleDeleteClick = (recordId: number) => {\r\n    setRecordToDelete(recordId);\r\n    setDeleteDialogOpen(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = async (password: string) => {\r\n    if (!recordToDelete) return;\r\n\r\n    setDeleting(true);\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/reports/dispatches/delete', {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          recordId: recordToDelete,\r\n          password\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to delete record');\r\n      }\r\n\r\n      // Show success message\r\n      setSuccessMessage('Dispatch record deleted successfully');\r\n      setTimeout(() => setSuccessMessage(''), 5000);\r\n      \r\n      // Refresh the records\r\n      fetchData();\r\n    } catch (error) {\r\n      console.error('Delete error:', error);\r\n      setErrorMessage(error instanceof Error ? error.message : 'Failed to delete record');\r\n      setTimeout(() => setErrorMessage(''), 5000);\r\n      throw error; // Re-throw to be handled by the dialog\r\n    } finally {\r\n      setDeleting(false);\r\n      setRecordToDelete(null);\r\n    }\r\n  };\r\n\r\n  // Bulk selection handlers\r\n  const handleSelectAll = () => {\r\n    if (selectAll) {\r\n      setSelectedRecords(new Set());\r\n      setSelectAll(false);\r\n    } else {\r\n      setSelectedRecords(new Set(filteredRecords.map(r => r.id)));\r\n      setSelectAll(true);\r\n    }\r\n  };\r\n\r\n  const handleSelectOne = (recordId: number) => {\r\n    const newSelected = new Set(selectedRecords);\r\n    if (newSelected.has(recordId)) {\r\n      newSelected.delete(recordId);\r\n    } else {\r\n      newSelected.add(recordId);\r\n    }\r\n    setSelectedRecords(newSelected);\r\n    setSelectAll(newSelected.size === filteredRecords.length && filteredRecords.length > 0);\r\n  };\r\n\r\n  const handleClearSelection = () => {\r\n    setSelectedRecords(new Set());\r\n    setSelectAll(false);\r\n  };\r\n\r\n  const handleBulkDeleteClick = () => {\r\n    if (selectedRecords.size === 0) return;\r\n    setShowBulkDeleteConfirm(true);\r\n  };\r\n\r\n  const handleBulkDeleteConfirm = async (password: string) => {\r\n    setShowBulkDeleteConfirm(false);\r\n    setIsDeletingBulk(true);\r\n    \r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const recordIds = Array.from(selectedRecords);\r\n      \r\n      const deletePromises = recordIds.map(recordId =>\r\n        fetch('/api/user/reports/dispatches/delete', {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n          },\r\n          body: JSON.stringify({ recordId, password })\r\n        }).then(async (res) => {\r\n          if (!res.ok) {\r\n            const error = await res.json();\r\n            throw new Error(error.message || 'Delete failed');\r\n          }\r\n          return res.json();\r\n        })\r\n      );\r\n\r\n      const results = await Promise.allSettled(deletePromises);\r\n      const successful = results.filter(r => r.status === 'fulfilled').length;\r\n      const failed = results.filter(r => r.status === 'rejected').length;\r\n\r\n      if (successful > 0) {\r\n        setSuccessMessage(`Successfully deleted ${successful} record(s)${failed > 0 ? `. ${failed} failed.` : ''}`);\r\n        setTimeout(() => setSuccessMessage(''), 5000);\r\n        fetchData();\r\n        handleClearSelection();\r\n      } else {\r\n        const firstError = results.find(r => r.status === 'rejected') as PromiseRejectedResult;\r\n        const errorMsg = firstError?.reason?.message || 'Failed to delete selected records';\r\n        setErrorMessage(errorMsg);\r\n        setTimeout(() => setErrorMessage(''), 5000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Bulk delete error:', error);\r\n      setErrorMessage(error instanceof Error ? error.message : 'Failed to delete selected records');\r\n      setTimeout(() => setErrorMessage(''), 5000);\r\n    } finally {\r\n      setIsDeletingBulk(false);\r\n      setBulkDeletePassword('');\r\n    }\r\n  };\r\n  \r\n  // Filter societies to only show those with dispatch records\r\n  const societies = useMemo(() => {\r\n    if (!societiesData.length || !records.length) return societiesData;\r\n    \r\n    const societyIdsInDispatches = new Set(\r\n      records\r\n        .filter(r => r.society_id)\r\n        .map(r => r.society_id)\r\n    );\r\n    \r\n    return societiesData.filter(society => societyIdsInDispatches.has(society.society_id));\r\n  }, [societiesData, records]);\r\n  \r\n  // Filter machines to only show those with dispatch records\r\n  const machines = useMemo(() => {\r\n    if (!machinesData.length || !records.length) return machinesData;\r\n    \r\n    const machineIdsInDispatches = new Set(\r\n      records\r\n        .filter(r => r.machine_id)\r\n        .map(r => r.machine_id)\r\n    );\r\n    \r\n    const filteredMachines = machinesData.filter(machine => machineIdsInDispatches.has(machine.machineId));\r\n    \r\n    // Add dispatch counts to machines\r\n    return filteredMachines.map(machine => ({\r\n      ...machine,\r\n      collectionCount: records.filter(r => r.machine_id === machine.machineId).length\r\n    }));\r\n  }, [machinesData, records]);\r\n\r\n  // Calculate statistics\r\n  const calculateStats = useCallback((data: DispatchRecord[]) => {\r\n    const totalQuantity = data.reduce((sum, record) => sum + parseFloat(record.quantity || '0'), 0);\r\n    const totalAmount = data.reduce((sum, record) => sum + parseFloat(record.total_amount || '0'), 0);\r\n    \r\n    // Calculate simple average rate from rate_per_liter column\r\n    const totalRate = data.reduce((sum, record) => sum + parseFloat(record.rate_per_liter || '0'), 0);\r\n    const averageRate = data.length > 0 ? totalRate / data.length : 0;\r\n    \r\n    // Calculate weighted averages\r\n    const sumQuantityFat = data.reduce((sum, record) => {\r\n      const qty = parseFloat(record.quantity || '0');\r\n      const fat = parseFloat(record.fat_percentage || '0');\r\n      return sum + (qty * fat);\r\n    }, 0);\r\n    const sumQuantitySnf = data.reduce((sum, record) => {\r\n      const qty = parseFloat(record.quantity || '0');\r\n      const snf = parseFloat(record.snf_percentage || '0');\r\n      return sum + (qty * snf);\r\n    }, 0);\r\n    const sumQuantityClr = data.reduce((sum, record) => {\r\n      const qty = parseFloat(record.quantity || '0');\r\n      const clr = parseFloat(record.clr_value || '0');\r\n      return sum + (qty * clr);\r\n    }, 0);\r\n    \r\n    const weightedFat = totalQuantity > 0 ? sumQuantityFat / totalQuantity : 0;\r\n    const weightedSnf = totalQuantity > 0 ? sumQuantitySnf / totalQuantity : 0;\r\n    const weightedClr = totalQuantity > 0 ? sumQuantityClr / totalQuantity : 0;\r\n\r\n    setStats({\r\n      totalDispatches: data.length,\r\n      totalQuantity: parseFloat(totalQuantity.toFixed(2)),\r\n      totalAmount: parseFloat(totalAmount.toFixed(2)),\r\n      averageRate: parseFloat(averageRate.toFixed(2)),\r\n      weightedFat: parseFloat(weightedFat.toFixed(2)),\r\n      weightedSnf: parseFloat(weightedSnf.toFixed(2)),\r\n      weightedClr: parseFloat(weightedClr.toFixed(2))\r\n    });\r\n  }, []);\r\n\r\n  // Fetch dispatch data\r\n  const fetchData = useCallback(async (showLoading = true) => {\r\n    const token = localStorage.getItem('authToken');\r\n    if (!token) return;\r\n\r\n    try {\r\n      if (showLoading) setLoading(true);\r\n      const response = await fetch('/api/user/reports/dispatches', {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        \r\n        // Only update state if data has changed to prevent unnecessary re-renders\r\n        setRecords(prevRecords => {\r\n          const hasChanged = JSON.stringify(prevRecords) !== JSON.stringify(data);\r\n          if (hasChanged) {\r\n            calculateStats(data);\r\n            return data;\r\n          }\r\n          return prevRecords;\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching dispatch data:', error);\r\n    } finally {\r\n      if (showLoading) setLoading(false);\r\n    }\r\n  }, [calculateStats]);\r\n\r\n  useEffect(() => {\r\n    fetchData(true);\r\n    \r\n    // Auto-refresh every 1 second without showing loading\r\n    const intervalId = setInterval(() => {\r\n      fetchData(false);\r\n    }, 1000);\r\n    \r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  // Fetch admin email for email functionality\r\n  useEffect(() => {\r\n    const fetchAdminEmail = async () => {\r\n      try {\r\n        const token = localStorage.getItem('authToken');\r\n        if (!token) return;\r\n\r\n        const response = await fetch('/api/user/profile', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          const email = data.email || '';\r\n          setAdminEmail(email);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching admin email:', error);\r\n      }\r\n    };\r\n\r\n    fetchAdminEmail();\r\n  }, []);\r\n\r\n  // Filter records with multi-field search (matching machine management pattern)\r\n  useEffect(() => {\r\n    let filtered = records;\r\n\r\n    // Dairy filter\r\n    if (dairyFilter.length > 0) {\r\n      const selectedDairyIds = dairyFilter\r\n        .map(id => dairies.find(d => d.id.toString() === id)?.id)\r\n        .filter(Boolean) as number[];\r\n      if (selectedDairyIds.length > 0) {\r\n        filtered = filtered.filter(record => record.dairy_id && selectedDairyIds.includes(record.dairy_id));\r\n      }\r\n    }\r\n\r\n    // BMC filter\r\n    if (bmcFilter.length > 0) {\r\n      const selectedBmcIds = bmcFilter\r\n        .map(id => bmcs.find(b => b.id.toString() === id)?.id)\r\n        .filter(Boolean) as number[];\r\n      if (selectedBmcIds.length > 0) {\r\n        filtered = filtered.filter(record => record.bmc_id && selectedBmcIds.includes(record.bmc_id));\r\n      }\r\n    }\r\n\r\n    // Status/Shift filter\r\n    if (shiftFilter !== 'all') {\r\n      if (shiftFilter === 'morning') {\r\n        filtered = filtered.filter(record => ['MR', 'MX', 'morning'].includes(record.shift_type));\r\n      } else if (shiftFilter === 'evening') {\r\n        filtered = filtered.filter(record => ['EV', 'EX', 'evening'].includes(record.shift_type));\r\n      } else {\r\n        filtered = filtered.filter(record => record.shift_type === shiftFilter);\r\n      }\r\n    }\r\n\r\n    // Society filter\r\n    if (Array.isArray(societyFilter) && societyFilter.length > 0) {\r\n      const selectedSocietyIds = societyFilter.map(id => {\r\n        const society = societies.find(s => s.id.toString() === id);\r\n        return society?.society_id;\r\n      }).filter(Boolean);\r\n      if (selectedSocietyIds.length > 0) {\r\n        filtered = filtered.filter(record => selectedSocietyIds.includes(record.society_id));\r\n      }\r\n    }\r\n\r\n    // Machine filter\r\n    if (machineFilter.length > 0) {\r\n      const selectedMachineIds = machineFilter\r\n        .map(id => machines.find(m => m.id.toString() === id)?.machineId)\r\n        .filter(Boolean) as string[];\r\n      if (selectedMachineIds.length > 0) {\r\n        filtered = filtered.filter(record => selectedMachineIds.includes(record.machine_id));\r\n      }\r\n    }\r\n\r\n    // Channel filter\r\n    if (channelFilter !== 'all') {\r\n      filtered = filtered.filter(record => {\r\n        const displayChannel = getChannelDisplay(record.channel);\r\n        return displayChannel === channelFilter;\r\n      });\r\n    }\r\n\r\n    // Date filter\r\n    if (dateFilter) {\r\n      filtered = filtered.filter(record => record.dispatch_date === dateFilter);\r\n    }\r\n\r\n    // Date range filter\r\n    if (dateFromFilter) {\r\n      filtered = filtered.filter(record => record.dispatch_date >= dateFromFilter);\r\n    }\r\n    if (dateToFilter) {\r\n      filtered = filtered.filter(record => record.dispatch_date <= dateToFilter);\r\n    }\r\n\r\n    // Multi-field search across dispatch details (matching machine management pattern)\r\n    if (combinedSearch) {\r\n      const searchLower = combinedSearch.toLowerCase();\r\n      filtered = filtered.filter(record => {\r\n        // Get display value for shift\r\n        const shiftDisplay = ['MR', 'MX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'morning'\r\n          ? 'Morning' \r\n          : ['EV', 'EX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'evening'\r\n          ? 'Evening' \r\n          : record.shift_type;\r\n        \r\n        return [\r\n          record.dispatch_id,\r\n          record.society_id,\r\n          record.society_name,\r\n          record.bmc_name,\r\n          record.dairy_name,\r\n          record.machine_id,\r\n          record.machine_type,\r\n          record.machine_version,\r\n          record.channel,\r\n          getChannelDisplay(record.channel),\r\n          record.dispatch_date,\r\n          record.dispatch_time,\r\n          record.shift_type,\r\n          shiftDisplay,\r\n          record.quantity,\r\n          record.fat_percentage,\r\n          record.snf_percentage,\r\n          record.clr_value,\r\n          record.rate_per_liter,\r\n          record.total_amount\r\n        ].some(field =>\r\n          field?.toString().toLowerCase().includes(searchLower)\r\n        );\r\n      });\r\n    }\r\n\r\n    setFilteredRecords(filtered);\r\n    calculateStats(filtered);\r\n  }, [globalSearch, searchQuery, dateFilter, dateFromFilter, dateToFilter, shiftFilter, channelFilter, societyFilter, machineFilter, dairyFilter, bmcFilter, records, societies, machines, dairies, bmcs, calculateStats]);\r\n\r\n  // Export to CSV\r\n  const exportToCSV = () => {\r\n    if (filteredRecords.length === 0) return;\r\n\r\n    const dateRange = dateFromFilter && dateToFilter \r\n      ? `${dateFromFilter} To ${dateToFilter}`\r\n      : dateFilter || 'All Dates';\r\n    const currentDateTime = new Date().toLocaleString('en-IN', { \r\n      year: 'numeric', month: '2-digit', day: '2-digit', \r\n      hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false \r\n    });\r\n\r\n    // Detailed data rows\r\n    const dataRows = filteredRecords.map(record => [\r\n      record.dispatch_date,\r\n      record.dispatch_time,\r\n      record.channel,\r\n      record.shift_type,\r\n      `${record.machine_id} (${record.machine_type})`,\r\n      `${record.society_name} (${record.society_id})`,\r\n      record.fat_percentage,\r\n      record.snf_percentage,\r\n      record.clr_value,\r\n      record.rate_per_liter,\r\n      record.quantity,\r\n      record.total_amount\r\n    ]);\r\n\r\n    const csvContent = [\r\n      'Admin Report - LactoConnect Milk Dispatch System',\r\n      `Date From ${dateRange}`,\r\n      '',\r\n      'DETAILED DISPATCH DATA',\r\n      '',\r\n      'Date,Time,Channel,Shift,Machine,Society,Fat (%),SNF (%),CLR,Rate,Quantity (L),Total Amount',\r\n      ...dataRows.map(row => row.join(',')),\r\n      '',\r\n      '',\r\n      'OVERALL SUMMARY',\r\n      `Total Dispatches:,${stats.totalDispatches}`,\r\n      `Total Quantity (L):,${stats.totalQuantity.toFixed(2)}`,\r\n      `Overall Weighted Fat (%):,${stats.weightedFat.toFixed(2)}`,\r\n      `Overall Weighted SNF (%):,${stats.weightedSnf.toFixed(2)}`,\r\n      `Overall Weighted CLR:,${stats.weightedClr.toFixed(2)}`,\r\n      `Total Amount (Rs):,${stats.totalAmount.toFixed(2)}`,\r\n      `Overall Average Rate (Rs/L):,${stats.averageRate.toFixed(2)}`,\r\n      '',\r\n      'Thank you',\r\n      'Poornasree Equipments',\r\n      `Generated on: ${currentDateTime}`\r\n    ].join('\\n');\r\n\r\n    const blob = new Blob([csvContent], { type: 'text/csv' });\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `dispatch-report-${new Date().toISOString().split('T')[0]}.csv`;\r\n    a.click();\r\n  };\r\n\r\n  // Export to PDF\r\n  const exportToPDF = () => {\r\n    if (filteredRecords.length === 0) return;\r\n\r\n    const doc = new jsPDF({ orientation: 'landscape', unit: 'mm', format: 'a4' });\r\n    const dateRange = dateFromFilter && dateToFilter \r\n      ? `${dateFromFilter} To ${dateToFilter}`\r\n      : dateFilter \r\n      ? `${dateFilter} To ${dateFilter}`\r\n      : 'All Dates';\r\n\r\n    // Add Logo\r\n    const logoPath = '/fulllogo.png';\r\n    doc.addImage(logoPath, 'PNG', 14, 8, 0, 12);\r\n\r\n    // Header\r\n    doc.setFontSize(14);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('Daily Dispatch Report - LactoConnect Milk Dispatch System', 148.5, 15, { align: 'center' });\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(`Date From ${dateRange}`, 148.5, 21, { align: 'center' });\r\n    \r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('DETAILED DISPATCH DATA', 148.5, 28, { align: 'center' });\r\n\r\n    // Detailed Data Table with SI No\r\n    const tableData = filteredRecords.map((record, index) => [\r\n      (index + 1).toString(),\r\n      record.dispatch_date,\r\n      record.dispatch_time,\r\n      getChannelDisplay(record.channel),\r\n      record.shift_type,\r\n      `${record.machine_id} (${record.machine_type})`,\r\n      `${record.society_name} (${record.society_id})`,\r\n      record.fat_percentage,\r\n      record.snf_percentage,\r\n      record.clr_value,\r\n      record.rate_per_liter,\r\n      record.quantity,\r\n      record.total_amount\r\n    ]);\r\n\r\n    autoTable(doc, {\r\n      startY: 32,\r\n      head: [['SI No', 'Date', 'Time', 'Channel', 'Shift', 'Machine', 'Society', 'Fat (%)', 'SNF (%)', 'CLR', 'Rate', 'Quantity (L)', 'Total Amount']],\r\n      body: tableData,\r\n      theme: 'grid',\r\n      styles: { fontSize: 7, cellPadding: 1.5, halign: 'center' },\r\n      headStyles: { fillColor: [255, 255, 255], textColor: [0, 0, 0], fontStyle: 'bold', fontSize: 8, lineWidth: 0.5, lineColor: [0, 0, 0] },\r\n      bodyStyles: { lineWidth: 0.3, lineColor: [200, 200, 200] },\r\n      columnStyles: {\r\n        0: { cellWidth: 12 }\r\n      }\r\n    });\r\n\r\n    // Summary Section\r\n    const finalY = doc.lastAutoTable.finalY + 8;\r\n    \r\n    // Left side - Weighted Averages\r\n    doc.setFontSize(11);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('WEIGHTED AVERAGES', 14, finalY);\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    let leftY = finalY + 6;\r\n    doc.text(`Weighted Fat      : ${stats.weightedFat.toFixed(2)}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Weighted SNF      : ${stats.weightedSnf.toFixed(2)}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Weighted CLR      : ${stats.weightedClr.toFixed(2)}`, 14, leftY);\r\n    \r\n    leftY += 8;\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('OVERALL SUMMARY', 14, leftY);\r\n    doc.setFont('helvetica', 'normal');\r\n    leftY += 6;\r\n    doc.text(`Total Dispatches   : ${stats.totalDispatches}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Total Quantity (L) : ${stats.totalQuantity.toFixed(2)}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Total Amount       : ${stats.totalAmount.toFixed(2)}`, 14, leftY);\r\n\r\n    // Right side - Report Notes\r\n    doc.setFontSize(11);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('REPORT NOTES', 283, finalY, { align: 'right' });\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    let rightY = finalY + 6;\r\n    doc.text('Prepared by: POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n    rightY += 5;\r\n    doc.text('Contact: marketing@poornasree.com', 283, rightY, { align: 'right' });\r\n    \r\n    rightY += 8;\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n    doc.setFont('helvetica', 'normal');\r\n    rightY += 5;\r\n    doc.text('Thank you for using LactoConnect', 283, rightY, { align: 'right' });\r\n    rightY += 5;\r\n    doc.text('For support, visit: www.poornasree.com', 283, rightY, { align: 'right' });\r\n\r\n    doc.save(`dispatch-report-${new Date().toISOString().split('T')[0]}.pdf`);\r\n  };\r\n\r\n  // Send email with CSV and PDF attachments\r\n  const handleSendEmail = async (email: string) => {\r\n    if (!email || !email.includes('@')) {\r\n      throw new Error('Please enter a valid email address');\r\n    }\r\n\r\n    try {\r\n      // Generate CSV content\r\n      const dateRange = dateFromFilter && dateToFilter \r\n        ? `${dateFromFilter} To ${dateToFilter}`\r\n        : dateFilter || 'All Dates';\r\n      const currentDateTime = new Date().toLocaleString('en-IN', { \r\n        year: 'numeric', month: '2-digit', day: '2-digit', \r\n        hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false \r\n      });\r\n\r\n      const dataRows = filteredRecords.map(record => [\r\n        record.dispatch_date,\r\n        record.dispatch_time,\r\n        record.channel,\r\n        record.shift_type,\r\n        `${record.machine_id} (${record.machine_type})`,\r\n        record.society_name || '',\r\n        record.fat_percentage,\r\n        record.snf_percentage,\r\n        record.clr_value,\r\n        record.rate_per_liter,\r\n        record.quantity,\r\n        record.total_amount\r\n      ]);\r\n\r\n      const csvContent = [\r\n        ['POORNASREE EQUIPMENTS MILK DISPATCH REPORT'],\r\n        ['Admin Report with Weighted Averages'],\r\n        [],\r\n        ['Report Generated:', currentDateTime],\r\n        ['Date Range:', dateRange],\r\n        ['Total Dispatches:', stats.totalDispatches],\r\n        ['Total Quantity (L):', stats.totalQuantity.toFixed(2)],\r\n        ['Total Amount (₹):', stats.totalAmount.toFixed(2)],\r\n        ['Average Rate (₹/L):', stats.averageRate.toFixed(2)],\r\n        ['Weighted FAT (%):', stats.weightedFat.toFixed(2)],\r\n        ['Weighted SNF (%):', stats.weightedSnf.toFixed(2)],\r\n        ['Weighted CLR:', stats.weightedClr.toFixed(2)],\r\n        [],\r\n        ['Date', 'Time', 'Channel', 'Shift', 'Machine', 'Society', 'Fat (%)', 'SNF (%)', 'CLR', 'Rate (₹/L)', 'Quantity (L)', 'Total Amount (₹)'],\r\n        ...dataRows\r\n      ].map(row => row.join(',')).join('\\n');\r\n\r\n      // Generate PDF as base64 - matching current PDF design exactly\r\n      const doc = new jsPDF({ orientation: 'landscape', unit: 'mm', format: 'a4' });\r\n      \r\n      // Add Logo (same as current PDF)\r\n      const logoPath = '/fulllogo.png';\r\n      doc.addImage(logoPath, 'PNG', 14, 8, 0, 12);\r\n\r\n      // Header (same as current PDF)\r\n      doc.setFontSize(14);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('Daily Dispatch Report - LactoConnect Milk Dispatch System', 148.5, 15, { align: 'center' });\r\n      doc.setFontSize(9);\r\n      doc.setFont('helvetica', 'normal');\r\n      doc.text(`Date From ${dateRange}`, 148.5, 21, { align: 'center' });\r\n      \r\n      doc.setFontSize(10);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('DETAILED DISPATCH DATA', 148.5, 28, { align: 'center' });\r\n\r\n      // Detailed Data Table with SI No (same as current PDF)\r\n      const tableData = filteredRecords.map((record, index) => [\r\n        (index + 1).toString(),\r\n        record.dispatch_date,\r\n        record.dispatch_time,\r\n        getChannelDisplay(record.channel),\r\n        record.shift_type,\r\n        `${record.machine_id} (${record.machine_type})`,\r\n        `${record.society_name} (${record.society_id})`,\r\n        record.fat_percentage,\r\n        record.snf_percentage,\r\n        record.clr_value,\r\n        record.rate_per_liter,\r\n        record.quantity,\r\n        record.total_amount\r\n      ]);\r\n\r\n      autoTable(doc, {\r\n        startY: 32,\r\n        head: [['SI No', 'Date', 'Time', 'Channel', 'Shift', 'Machine', 'Society', 'Fat (%)', 'SNF (%)', 'CLR', 'Rate', 'Quantity (L)', 'Total Amount']],\r\n        body: tableData,\r\n        theme: 'grid',\r\n        styles: { fontSize: 7, cellPadding: 1.5, halign: 'center' },\r\n        headStyles: { fillColor: [255, 255, 255], textColor: [0, 0, 0], fontStyle: 'bold', fontSize: 8, lineWidth: 0.5, lineColor: [0, 0, 0] },\r\n        bodyStyles: { lineWidth: 0.3, lineColor: [200, 200, 200] },\r\n        columnStyles: {\r\n          0: { cellWidth: 12 }\r\n        }\r\n      });\r\n\r\n      // Summary Section (same as current PDF)\r\n      const finalY = doc.lastAutoTable.finalY + 8;\r\n      \r\n      // Left side - Weighted Averages\r\n      doc.setFontSize(11);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('WEIGHTED AVERAGES', 14, finalY);\r\n      doc.setFontSize(9);\r\n      doc.setFont('helvetica', 'normal');\r\n      let leftY = finalY + 6;\r\n      doc.text(`Weighted Fat      : ${stats.weightedFat.toFixed(2)}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Weighted SNF      : ${stats.weightedSnf.toFixed(2)}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Weighted CLR      : ${stats.weightedClr.toFixed(2)}`, 14, leftY);\r\n      \r\n      leftY += 8;\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('OVERALL SUMMARY', 14, leftY);\r\n      doc.setFont('helvetica', 'normal');\r\n      leftY += 6;\r\n      doc.text(`Total Dispatches   : ${stats.totalDispatches}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Total Quantity (L) : ${stats.totalQuantity.toFixed(2)}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Total Amount       : ${stats.totalAmount.toFixed(2)}`, 14, leftY);\r\n\r\n      // Right side - Report Notes\r\n      doc.setFontSize(11);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('REPORT NOTES', 283, finalY, { align: 'right' });\r\n      doc.setFontSize(9);\r\n      doc.setFont('helvetica', 'normal');\r\n      let rightY = finalY + 6;\r\n      doc.text('Prepared by: POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n      rightY += 5;\r\n      doc.text('Contact: marketing@poornasree.com', 283, rightY, { align: 'right' });\r\n      \r\n      rightY += 8;\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n      doc.setFont('helvetica', 'normal');\r\n      rightY += 5;\r\n      doc.text('Thank you for using LactoConnect', 283, rightY, { align: 'right' });\r\n      rightY += 5;\r\n      doc.text('For support, visit: www.poornasree.com', 283, rightY, { align: 'right' });\r\n\r\n      const pdfBase64 = doc.output('datauristring').split(',')[1];\r\n\r\n      // Send email with attachments\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/reports/send-email', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          email: email,\r\n          csvContent,\r\n          pdfContent: pdfBase64,\r\n          reportType: 'Dispatch Report',\r\n          dateRange,\r\n          stats\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        throw new Error(errorData.error || 'Failed to send email');\r\n      }\r\n\r\n      setSuccessMessage(`Report sent successfully to ${email}`);\r\n      setTimeout(() => setSuccessMessage(''), 5000);\r\n    } catch (error) {\r\n      console.error('Error sending email:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <FlowerSpinner size={48} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Statistics Cards */}\r\n      <div className=\"grid grid-cols-7 gap-3\">\r\n        <StatsCard\r\n          title=\"Total Dispatches\"\r\n          value={stats.totalDispatches}\r\n          icon={<Truck className=\"w-full h-full\" />}\r\n          color=\"green\"\r\n        />\r\n        <StatsCard\r\n          title=\"Total Quantity (L)\"\r\n          value={stats.totalQuantity}\r\n          icon={<Package className=\"w-full h-full\" />}\r\n          color=\"blue\"\r\n        />\r\n        <StatsCard\r\n          title=\"Total Amount (₹)\"\r\n          value={`₹${stats.totalAmount.toFixed(2)}`}\r\n          icon={<TrendingUp className=\"w-full h-full\" />}\r\n          color=\"yellow\"\r\n        />\r\n        <StatsCard\r\n          title=\"Avg Rate (₹/L)\"\r\n          value={`₹${stats.averageRate.toFixed(2)}`}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"gray\"\r\n        />\r\n        <StatsCard\r\n          title=\"Weighted FAT (%)\"\r\n          value={stats.weightedFat.toFixed(2)}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"blue\"\r\n        />\r\n        <StatsCard\r\n          title=\"Weighted SNF (%)\"\r\n          value={stats.weightedSnf.toFixed(2)}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"green\"\r\n        />\r\n        <StatsCard\r\n          title=\"Weighted CLR\"\r\n          value={stats.weightedClr.toFixed(2)}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"red\"\r\n        />\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 sm:p-6\">\r\n        <div className=\"space-y-4\">\r\n          {/* Filter Info */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n              Showing {filteredRecords.length} of {records.length} records\r\n            </span>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={() => {\r\n                  clearFilters();\r\n                  fetchData();\r\n                }}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-psr-primary-600 text-white rounded-lg hover:bg-psr-primary-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <RefreshCw className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">Refresh</span>\r\n              </button>\r\n              <button\r\n                onClick={exportToCSV}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-psr-green-600 text-white rounded-lg hover:bg-psr-green-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <Download className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">CSV</span>\r\n              </button>\r\n              <button\r\n                onClick={exportToPDF}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <FileDown className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">PDF</span>\r\n              </button>\r\n              <button\r\n                onClick={() => setShowEmailModal(true)}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <Mail className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">Send Mail</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Filter Dropdown - All Filters Inside */}\r\n          <FilterDropdown\r\n            statusFilter={shiftFilter}\r\n            onStatusChange={setShiftFilter}\r\n            dairyFilter={dairyFilter}\r\n            onDairyChange={(value) => setDairyFilter(Array.isArray(value) ? value : [value])}\r\n            bmcFilter={bmcFilter}\r\n            onBmcChange={(value) => setBmcFilter(Array.isArray(value) ? value : [value])}\r\n            societyFilter={societyFilter}\r\n            onSocietyChange={(value) => setSocietyFilter(Array.isArray(value) ? value : [value])}\r\n            machineFilter={machineFilter}\r\n            onMachineChange={(value) => setMachineFilter(Array.isArray(value) ? value : [value])}\r\n            dairies={dairiesWithDispatches}\r\n            bmcs={bmcs}\r\n            societies={societies}\r\n            machines={machines}\r\n            filteredCount={filteredRecords.length}\r\n            totalCount={records.length}\r\n            searchQuery={searchQuery}\r\n            onSearchChange={setSearchQuery}\r\n            icon={<Truck className=\"w-5 h-5\" />}\r\n            dateFilter={dateFilter}\r\n            onDateChange={setDateFilter}\r\n            dateFromFilter={dateFromFilter}\r\n            onDateFromChange={setDateFromFilter}\r\n            dateToFilter={dateToFilter}\r\n            onDateToChange={setDateToFilter}\r\n            channelFilter={channelFilter}\r\n            onChannelChange={setChannelFilter}\r\n            showDateFilter\r\n            showChannelFilter\r\n            showShiftFilter\r\n            showMachineFilter\r\n            hideMainFilterButton={true}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Data Table */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden\">\r\n        <div className=\"overflow-auto max-h-[600px]\" tabIndex={0}>\r\n          <table className=\"w-auto min-w-full table-auto\">\r\n            <thead className=\"bg-gray-50 dark:bg-gray-700 sticky top-0 z-10\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectAll}\r\n                    onChange={handleSelectAll}\r\n                    className=\"w-4 h-4 text-emerald-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 cursor-pointer\"\r\n                  />\r\n                </th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Date & Time</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Dispatch ID</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Society</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Shift</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Channel</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Machine</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Fat %</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">SNF %</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">CLR</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Rate/L</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Qty (L)</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Amount</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n              {filteredRecords.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan={14} className=\"px-4 py-8 text-center text-gray-500 dark:text-gray-400\">\r\n                    No dispatch records found\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                filteredRecords.map((record) => (\r\n                  <React.Fragment key={record.id}>\r\n                    <tr className={`transition-colors ${\r\n                      selectedRecords.has(record.id)\r\n                        ? 'bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30'\r\n                        : 'hover:bg-gray-50 dark:hover:bg-gray-700'\r\n                    }`}>\r\n                      <td className=\"px-4 py-3 text-center\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={selectedRecords.has(record.id)}\r\n                          onChange={() => handleSelectOne(record.id)}\r\n                          className=\"w-4 h-4 text-emerald-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 cursor-pointer\"\r\n                        />\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                        <div>{highlightText(record.dispatch_date, combinedSearch)}</div>\r\n                        <div className=\"text-xs text-gray-500\">{record.dispatch_time}</div>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center font-medium text-gray-900 dark:text-white\">\r\n                        {highlightText(record.dispatch_id, combinedSearch)}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                        <div className=\"font-medium\">{highlightText(record.society_name, combinedSearch)}</div>\r\n                        <div className=\"text-xs text-gray-500\">ID: {highlightText(record.society_id, combinedSearch)}</div>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center\">\r\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                          ['MR', 'MX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'morning'\r\n                            ? 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400'\r\n                            : ['EV', 'EX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'evening'\r\n                            ? 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400'\r\n                            : 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400'\r\n                        }`}>\r\n                          {highlightText(\r\n                            ['MR', 'MX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'morning'\r\n                              ? 'Morning' \r\n                              : ['EV', 'EX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'evening'\r\n                              ? 'Evening' \r\n                              : record.shift_type,\r\n                            combinedSearch\r\n                          )}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center\">\r\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                          getChannelDisplay(record.channel) === 'COW'\r\n                            ? 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400'\r\n                            : getChannelDisplay(record.channel) === 'BUFFALO'\r\n                            ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400'\r\n                            : 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400'\r\n                        }`}>\r\n                          {highlightText(getChannelDisplay(record.channel), combinedSearch)}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                        <div className=\"font-medium\">{highlightText(record.machine_id || 'N/A', combinedSearch)}</div>\r\n                        <div className=\"text-xs text-gray-500\">{highlightText(record.machine_type, combinedSearch)}</div>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.fat_percentage).toFixed(2), combinedSearch)}</td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.snf_percentage).toFixed(2), combinedSearch)}</td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">{highlightText(parseFloat(record.clr_value).toFixed(2), combinedSearch)}</td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">₹{highlightText(parseFloat(record.rate_per_liter).toFixed(2), combinedSearch)}</td>\r\n                      <td className=\"px-4 py-3 text-sm text-center font-medium text-gray-900 dark:text-white\">{highlightText(parseFloat(record.quantity).toFixed(2), combinedSearch)}</td>\r\n                      <td className=\"px-4 py-3 text-sm text-center font-medium text-green-600 dark:text-green-400\">\r\n                        ₹{highlightText(parseFloat(record.total_amount).toFixed(2), combinedSearch)}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center\">\r\n                        <button\r\n                          onClick={() => handleDeleteClick(record.id)}\r\n                          className=\"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors\"\r\n                          title=\"Delete record\"\r\n                        >\r\n                          <Trash2 className=\"w-4 h-4\" />\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  </React.Fragment>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Password Confirmation Dialog */}\r\n      <PasswordConfirmDialog\r\n        isOpen={deleteDialogOpen}\r\n        onClose={() => setDeleteDialogOpen(false)}\r\n        onConfirm={handleDeleteConfirm}\r\n        title=\"Delete Dispatch Record\"\r\n        message=\"Enter your admin password to confirm deletion. This action cannot be undone and will be logged for security purposes.\"\r\n      />\r\n\r\n      {/* Bulk Delete Password Confirmation Modal */}\r\n      <PasswordConfirmDialog\r\n        isOpen={showBulkDeleteConfirm}\r\n        onClose={() => {\r\n          setShowBulkDeleteConfirm(false);\r\n          setBulkDeletePassword('');\r\n        }}\r\n        onConfirm={handleBulkDeleteConfirm}\r\n        title={`Delete ${selectedRecords.size} Dispatch Record${selectedRecords.size > 1 ? 's' : ''}`}\r\n        message={`Enter your admin password to confirm deletion of ${selectedRecords.size} selected record(s). This action cannot be undone and will be logged for security purposes.`}\r\n      />\r\n\r\n      {/* Bulk Actions Toolbar */}\r\n      <BulkActionsToolbar\r\n        selectedCount={selectedRecords.size}\r\n        totalCount={filteredRecords.length}\r\n        onBulkDelete={handleBulkDeleteClick}\r\n        onClearSelection={handleClearSelection}\r\n        itemType=\"record\"\r\n        showStatusUpdate={false}\r\n      />\r\n\r\n      {/* Loading Snackbar */}\r\n      <LoadingSnackbar\r\n        isVisible={deleting || isDeletingBulk}\r\n        message={isDeletingBulk ? `Deleting ${selectedRecords.size} Records` : \"Deleting Record\"}\r\n        submessage=\"Verifying credentials and removing data...\"\r\n        showProgress={false}\r\n      />\r\n\r\n      {/* Email Modal */}\r\n      <EmailReportModal\r\n        isOpen={showEmailModal}\r\n        onClose={() => setShowEmailModal(false)}\r\n        onSend={handleSendEmail}\r\n        defaultEmail={adminEmail}\r\n        recordCount={filteredRecords.length}\r\n        reportType=\"Dispatch Report\"\r\n      />\r\n\r\n      {/* Status Messages */}\r\n      <StatusMessage\r\n        success={successMessage}\r\n        error={errorMessage}\r\n        onClose={() => {\r\n          setSuccessMessage('');\r\n          setErrorMessage('');\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4906, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/components/reports/SalesReports.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { \r\n  Download,\r\n  FileDown,\r\n  DollarSign,\r\n  ShoppingCart,\r\n  TrendingUp,\r\n  BarChart3,\r\n  RefreshCw,\r\n  Trash2,\r\n  Mail\r\n} from 'lucide-react';\r\nimport jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\nimport StatsCard from '@/components/management/StatsCard';\r\nimport { FlowerSpinner } from '@/components';\r\nimport { FilterDropdown, LoadingSnackbar, StatusMessage, BulkActionsToolbar } from '@/components/management';\r\nimport PasswordConfirmDialog from '@/components/dialogs/PasswordConfirmDialog';\r\nimport EmailReportModal from '@/components/dialogs/EmailReportModal';\r\n\r\ninterface SalesRecord {\r\n  id: number;\r\n  count: string;\r\n  society_id: string;\r\n  society_name: string;\r\n  bmc_id?: number;\r\n  bmc_name?: string;\r\n  dairy_id?: number;\r\n  dairy_name?: string;\r\n  machine_id: string;\r\n  sales_date: string;\r\n  sales_time: string;\r\n  shift_type: string;\r\n  channel: string;\r\n  quantity: string;\r\n  rate_per_liter: string;\r\n  total_amount: string;\r\n  machine_type: string;\r\n  machine_version: string;\r\n}\r\n\r\ninterface SalesStats {\r\n  totalSales: number;\r\n  totalQuantity: number;\r\n  totalAmount: number;\r\n  averageRate: number;\r\n}\r\n\r\n// Helper function to highlight matching text in search results\r\nconst highlightText = (text: string | number | null | undefined, searchQuery: string) => {\r\n  if (!text && text !== 0) return text || '';\r\n  if (!searchQuery) return text;\r\n  \r\n  const textStr = text.toString();\r\n  const regex = new RegExp(`(${searchQuery.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\r\n  const parts = textStr.split(regex);\r\n  \r\n  return parts.map((part, index) => \r\n    regex.test(part) ? (\r\n      <span key={index} className=\"bg-yellow-200 dark:bg-yellow-800 px-0.5 rounded\">\r\n        {part}\r\n      </span>\r\n    ) : (\r\n      part\r\n    )\r\n  );\r\n};\r\n\r\n// Helper function to map channel codes to display names\r\nconst getChannelDisplay = (channel: string): string => {\r\n  const channelMap: { [key: string]: string } = {\r\n    'ch1': 'COW',\r\n    'ch2': 'BUFFALO',\r\n    'ch3': 'MIXED',\r\n    'CH1': 'COW',\r\n    'CH2': 'BUFFALO',\r\n    'CH3': 'MIXED',\r\n    'COW': 'COW',\r\n    'BUFFALO': 'BUFFALO',\r\n    'MIXED': 'MIXED',\r\n    'cow': 'COW',\r\n    'buffalo': 'BUFFALO',\r\n    'mixed': 'MIXED',\r\n    'BUF': 'BUFFALO',\r\n    'MIX': 'MIXED'\r\n  };\r\n  return channelMap[channel] || channel.toUpperCase();\r\n};\r\n\r\ninterface SalesReportsProps {\r\n  globalSearch?: string;\r\n}\r\n\r\nexport default function SalesReports({ globalSearch = '' }: SalesReportsProps) {\r\n  const [records, setRecords] = useState<SalesRecord[]>([]);\r\n  const [filteredRecords, setFilteredRecords] = useState<SalesRecord[]>([]);\r\n  const [stats, setStats] = useState<SalesStats>({\r\n    totalSales: 0,\r\n    totalQuantity: 0,\r\n    totalAmount: 0,\r\n    averageRate: 0\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  \r\n  // Sync global search with local search\r\n  useEffect(() => {\r\n    if (globalSearch !== undefined) {\r\n      setSearchQuery(globalSearch);\r\n    }\r\n  }, [globalSearch]);\r\n\r\n  // Combined search from global header and local search\r\n  const combinedSearch = useMemo(() => globalSearch || searchQuery, [globalSearch, searchQuery]);\r\n  \r\n  const [dateFilter, setDateFilter] = useState('');\r\n  const [dateFromFilter, setDateFromFilter] = useState('');\r\n  const [dateToFilter, setDateToFilter] = useState('');\r\n  const [shiftFilter, setShiftFilter] = useState('all');\r\n  const [channelFilter, setChannelFilter] = useState('all');\r\n  const [dairyFilter, setDairyFilter] = useState<string[]>([]);\r\n  const [bmcFilter, setBmcFilter] = useState<string[]>([]);\r\n  const [societyFilter, setSocietyFilter] = useState<string[]>([]);\r\n  const [machineFilter, setMachineFilter] = useState<string[]>([]);\r\n\r\n  // Fetch dairies and BMCs\r\n  const [dairies, setDairies] = useState<Array<{ id: number; name: string; dairyId: string }>>([]);\r\n  const [bmcs, setBmcs] = useState<Array<{ id: number; name: string; bmcId: string; dairyFarmId?: number }>>([]);\r\n\r\n  // Delete functionality\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [recordToDelete, setRecordToDelete] = useState<number | null>(null);\r\n  const [deleting, setDeleting] = useState(false);\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  // Bulk selection and delete\r\n  const [selectedRecords, setSelectedRecords] = useState<Set<number>>(new Set());\r\n  const [selectAll, setSelectAll] = useState(false);\r\n  const [showBulkDeleteConfirm, setShowBulkDeleteConfirm] = useState(false);\r\n  const [isDeletingBulk, setIsDeletingBulk] = useState(false);\r\n  const [bulkDeletePassword, setBulkDeletePassword] = useState('');\r\n\r\n  // Email modal state\r\n  const [showEmailModal, setShowEmailModal] = useState(false);\r\n  const [adminEmail, setAdminEmail] = useState('');\r\n  \r\n  // Fetch dairies, BMCs, societies, and machines\r\n  const [societiesData, setSocietiesData] = useState<Array<{ id: number; name: string; society_id: string; bmc_id?: number }>>([]);\r\n  const [machinesData, setMachinesData] = useState<Array<{ id: number; machineId: string; machineType: string; societyId?: number }>>([]);\r\n\r\n  useEffect(() => {\r\n    const fetchDairiesAndBmcs = async () => {\r\n      try {\r\n        const token = localStorage.getItem('authToken');\r\n        if (!token) return;\r\n\r\n        const dairyRes = await fetch('/api/user/dairy', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (dairyRes.ok) {\r\n          const dairyData = await dairyRes.json();\r\n          setDairies(dairyData.data || []);\r\n        }\r\n\r\n        const bmcRes = await fetch('/api/user/bmc', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (bmcRes.ok) {\r\n          const bmcData = await bmcRes.json();\r\n          setBmcs(bmcData.data || []);\r\n        }\r\n\r\n        const societyRes = await fetch('/api/user/society', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (societyRes.ok) {\r\n          const societyData = await societyRes.json();\r\n          setSocietiesData(societyData.data || []);\r\n        }\r\n\r\n        const machineRes = await fetch('/api/user/machine', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (machineRes.ok) {\r\n          const machineData = await machineRes.json();\r\n          setMachinesData(machineData.data || []);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching dairies/BMCs/Societies/Machines:', error);\r\n      }\r\n    };\r\n\r\n    fetchDairiesAndBmcs();\r\n  }, []);\r\n\r\n  // Filter dairies to only show those with sales records\r\n  const dairiesWithSales = useMemo(() => {\r\n    if (!dairies.length || !records.length) return dairies;\r\n    \r\n    const dairyIdsInSales = new Set(\r\n      records\r\n        .filter(r => r.dairy_id)\r\n        .map(r => r.dairy_id)\r\n    );\r\n    \r\n    return dairies.filter(dairy => dairyIdsInSales.has(dairy.id));\r\n  }, [dairies, records]);\r\n\r\n  // Clear all filters\r\n  const clearFilters = () => {\r\n    setShiftFilter('all');\r\n    setDairyFilter([]);\r\n    setBmcFilter([]);\r\n    setSocietyFilter([]);\r\n    setMachineFilter([]);\r\n    setDateFilter('');\r\n    setDateFromFilter('');\r\n    setDateToFilter('');\r\n    setChannelFilter('all');\r\n    setSearchQuery('');\r\n    \r\n    // Clear header search\r\n    const event = new CustomEvent('globalSearch', {\r\n      detail: { query: '' }\r\n    });\r\n    window.dispatchEvent(event);\r\n  };\r\n\r\n  // Delete record handler\r\n  const handleDeleteClick = (recordId: number) => {\r\n    setRecordToDelete(recordId);\r\n    setDeleteDialogOpen(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = async (password: string) => {\r\n    if (!recordToDelete) return;\r\n\r\n    setDeleting(true);\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/reports/sales/delete', {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          recordId: recordToDelete,\r\n          password\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to delete record');\r\n      }\r\n\r\n      // Show success message\r\n      setSuccessMessage('Sales record deleted successfully');\r\n      setTimeout(() => setSuccessMessage(''), 5000);\r\n      \r\n      // Refresh the records\r\n      fetchData();\r\n    } catch (error) {\r\n      console.error('Delete error:', error);\r\n      setErrorMessage(error instanceof Error ? error.message : 'Failed to delete record');\r\n      setTimeout(() => setErrorMessage(''), 5000);\r\n      throw error; // Re-throw to be handled by the dialog\r\n    } finally {\r\n      setDeleting(false);\r\n      setRecordToDelete(null);\r\n    }\r\n  };\r\n\r\n  // Bulk selection handlers\r\n  const handleSelectAll = () => {\r\n    if (selectAll) {\r\n      setSelectedRecords(new Set());\r\n      setSelectAll(false);\r\n    } else {\r\n      setSelectedRecords(new Set(filteredRecords.map(r => r.id)));\r\n      setSelectAll(true);\r\n    }\r\n  };\r\n\r\n  const handleSelectOne = (recordId: number) => {\r\n    const newSelected = new Set(selectedRecords);\r\n    if (newSelected.has(recordId)) {\r\n      newSelected.delete(recordId);\r\n    } else {\r\n      newSelected.add(recordId);\r\n    }\r\n    setSelectedRecords(newSelected);\r\n    setSelectAll(newSelected.size === filteredRecords.length && filteredRecords.length > 0);\r\n  };\r\n\r\n  const handleClearSelection = () => {\r\n    setSelectedRecords(new Set());\r\n    setSelectAll(false);\r\n  };\r\n\r\n  const handleBulkDeleteClick = () => {\r\n    if (selectedRecords.size === 0) return;\r\n    setShowBulkDeleteConfirm(true);\r\n  };\r\n\r\n  const handleBulkDeleteConfirm = async (password: string) => {\r\n    setShowBulkDeleteConfirm(false);\r\n    setIsDeletingBulk(true);\r\n    \r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const recordIds = Array.from(selectedRecords);\r\n      \r\n      const deletePromises = recordIds.map(recordId =>\r\n        fetch('/api/user/reports/sales/delete', {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n          },\r\n          body: JSON.stringify({ recordId, password })\r\n        }).then(async (res) => {\r\n          if (!res.ok) {\r\n            const error = await res.json();\r\n            throw new Error(error.message || 'Delete failed');\r\n          }\r\n          return res.json();\r\n        })\r\n      );\r\n\r\n      const results = await Promise.allSettled(deletePromises);\r\n      const successful = results.filter(r => r.status === 'fulfilled').length;\r\n      const failed = results.filter(r => r.status === 'rejected').length;\r\n\r\n      if (successful > 0) {\r\n        setSuccessMessage(`Successfully deleted ${successful} record(s)${failed > 0 ? `. ${failed} failed.` : ''}`);\r\n        setTimeout(() => setSuccessMessage(''), 5000);\r\n        fetchData();\r\n        handleClearSelection();\r\n      } else {\r\n        const firstError = results.find(r => r.status === 'rejected') as PromiseRejectedResult;\r\n        const errorMsg = firstError?.reason?.message || 'Failed to delete selected records';\r\n        setErrorMessage(errorMsg);\r\n        setTimeout(() => setErrorMessage(''), 5000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Bulk delete error:', error);\r\n      setErrorMessage(error instanceof Error ? error.message : 'Failed to delete selected records');\r\n      setTimeout(() => setErrorMessage(''), 5000);\r\n    } finally {\r\n      setIsDeletingBulk(false);\r\n      setBulkDeletePassword('');\r\n    }\r\n  };\r\n  \r\n  // Filter societies to only show those with sales records\r\n  const societies = useMemo(() => {\r\n    if (!societiesData.length || !records.length) return societiesData;\r\n    \r\n    const societyIdsInSales = new Set(\r\n      records\r\n        .filter(r => r.society_id)\r\n        .map(r => r.society_id)\r\n    );\r\n    \r\n    return societiesData.filter(society => societyIdsInSales.has(society.society_id));\r\n  }, [societiesData, records]);\r\n  \r\n  // Filter machines to only show those with sales records\r\n  const machines = useMemo(() => {\r\n    if (!machinesData.length || !records.length) return machinesData;\r\n    \r\n    const machineIdsInSales = new Set(\r\n      records\r\n        .filter(r => r.machine_id)\r\n        .map(r => r.machine_id)\r\n    );\r\n    \r\n    const filteredMachines = machinesData.filter(machine => machineIdsInSales.has(machine.machineId));\r\n    \r\n    // Add sales counts to machines\r\n    return filteredMachines.map(machine => ({\r\n      ...machine,\r\n      collectionCount: records.filter(r => r.machine_id === machine.machineId).length\r\n    }));\r\n  }, [machinesData, records]);\r\n\r\n  // Calculate statistics\r\n  const calculateStats = useCallback((data: SalesRecord[]) => {\r\n    const totalQuantity = data.reduce((sum, record) => sum + parseFloat(record.quantity || '0'), 0);\r\n    const totalAmount = data.reduce((sum, record) => sum + parseFloat(record.total_amount || '0'), 0);\r\n    \r\n    // Calculate simple average rate from rate_per_liter column\r\n    const totalRate = data.reduce((sum, record) => sum + parseFloat(record.rate_per_liter || '0'), 0);\r\n    const averageRate = data.length > 0 ? totalRate / data.length : 0;\r\n\r\n    setStats({\r\n      totalSales: data.length,\r\n      totalQuantity: parseFloat(totalQuantity.toFixed(2)),\r\n      totalAmount: parseFloat(totalAmount.toFixed(2)),\r\n      averageRate: parseFloat(averageRate.toFixed(2))\r\n    });\r\n  }, []);\r\n\r\n  // Fetch sales data\r\n  const fetchData = useCallback(async (showLoading = true) => {\r\n    const token = localStorage.getItem('authToken');\r\n    if (!token) return;\r\n\r\n    try {\r\n      if (showLoading) setLoading(true);\r\n      const response = await fetch('/api/user/reports/sales', {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        \r\n        // Only update state if data has changed to prevent unnecessary re-renders\r\n        setRecords(prevRecords => {\r\n          const hasChanged = JSON.stringify(prevRecords) !== JSON.stringify(data);\r\n          if (hasChanged) {\r\n            calculateStats(data);\r\n            return data;\r\n          }\r\n          return prevRecords;\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching sales data:', error);\r\n    } finally {\r\n      if (showLoading) setLoading(false);\r\n    }\r\n  }, [calculateStats]);\r\n\r\n  useEffect(() => {\r\n    fetchData(true);\r\n    \r\n    // Auto-refresh every 1 second without showing loading\r\n    const intervalId = setInterval(() => {\r\n      fetchData(false);\r\n    }, 1000);\r\n    \r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  // Fetch admin email for email functionality\r\n  useEffect(() => {\r\n    const fetchAdminEmail = async () => {\r\n      try {\r\n        const token = localStorage.getItem('authToken');\r\n        if (!token) return;\r\n\r\n        const response = await fetch('/api/user/profile', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          const email = data.email || '';\r\n          setAdminEmail(email);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching admin email:', error);\r\n      }\r\n    };\r\n\r\n    fetchAdminEmail();\r\n  }, []);\r\n\r\n  // Filter records with multi-field search (matching machine management pattern)\r\n  useEffect(() => {\r\n    let filtered = records;\r\n\r\n    // Dairy filter\r\n    if (dairyFilter.length > 0) {\r\n      const selectedDairyIds = dairyFilter\r\n        .map(id => dairies.find(d => d.id.toString() === id)?.id)\r\n        .filter(Boolean) as number[];\r\n      if (selectedDairyIds.length > 0) {\r\n        filtered = filtered.filter(record => record.dairy_id && selectedDairyIds.includes(record.dairy_id));\r\n      }\r\n    }\r\n\r\n    // BMC filter\r\n    if (bmcFilter.length > 0) {\r\n      const selectedBmcIds = bmcFilter\r\n        .map(id => bmcs.find(b => b.id.toString() === id)?.id)\r\n        .filter(Boolean) as number[];\r\n      if (selectedBmcIds.length > 0) {\r\n        filtered = filtered.filter(record => record.bmc_id && selectedBmcIds.includes(record.bmc_id));\r\n      }\r\n    }\r\n\r\n    // Status/Shift filter\r\n    if (shiftFilter !== 'all') {\r\n      if (shiftFilter === 'morning') {\r\n        filtered = filtered.filter(record => ['MR', 'MX'].includes(record.shift_type));\r\n      } else if (shiftFilter === 'evening') {\r\n        filtered = filtered.filter(record => ['EV', 'EX'].includes(record.shift_type));\r\n      } else {\r\n        filtered = filtered.filter(record => record.shift_type === shiftFilter);\r\n      }\r\n    }\r\n\r\n    // Society filter\r\n    if (Array.isArray(societyFilter) && societyFilter.length > 0) {\r\n      const selectedSocietyIds = societyFilter.map(id => {\r\n        const society = societies.find(s => s.id.toString() === id);\r\n        return society?.society_id;\r\n      }).filter(Boolean);\r\n      if (selectedSocietyIds.length > 0) {\r\n        filtered = filtered.filter(record => selectedSocietyIds.includes(record.society_id));\r\n      }\r\n    }\r\n\r\n    // Machine filter\r\n    if (machineFilter.length > 0) {\r\n      const selectedMachineIds = machineFilter\r\n        .map(id => machines.find(m => m.id.toString() === id)?.machineId)\r\n        .filter(Boolean) as string[];\r\n      if (selectedMachineIds.length > 0) {\r\n        filtered = filtered.filter(record => selectedMachineIds.includes(record.machine_id));\r\n      }\r\n    }\r\n\r\n    // Channel filter\r\n    if (channelFilter !== 'all') {\r\n      filtered = filtered.filter(record => {\r\n        const displayChannel = getChannelDisplay(record.channel);\r\n        return displayChannel === channelFilter;\r\n      });\r\n    }\r\n\r\n    // Date filter\r\n    if (dateFilter) {\r\n      filtered = filtered.filter(record => record.sales_date === dateFilter);\r\n    }\r\n\r\n    // Date range filter\r\n    if (dateFromFilter) {\r\n      filtered = filtered.filter(record => record.sales_date >= dateFromFilter);\r\n    }\r\n    if (dateToFilter) {\r\n      filtered = filtered.filter(record => record.sales_date <= dateToFilter);\r\n    }\r\n\r\n    // Multi-field search across sales details (matching machine management pattern)\r\n    if (combinedSearch) {\r\n      const searchLower = combinedSearch.toLowerCase();\r\n      filtered = filtered.filter(record => {\r\n        // Get display value for shift\r\n        const shiftDisplay = ['MR', 'MX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'morning'\r\n          ? 'Morning' \r\n          : ['EV', 'EX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'evening'\r\n          ? 'Evening' \r\n          : record.shift_type;\r\n        \r\n        return [\r\n          record.count,\r\n          record.society_id,\r\n          record.society_name,\r\n          record.bmc_name,\r\n          record.dairy_name,\r\n          record.machine_id,\r\n          record.machine_type,\r\n          record.machine_version,\r\n          record.channel,\r\n          getChannelDisplay(record.channel),\r\n          record.sales_date,\r\n          record.sales_time,\r\n          record.shift_type,\r\n          shiftDisplay,\r\n          record.quantity,\r\n          record.rate_per_liter,\r\n          record.total_amount\r\n        ].some(field =>\r\n          field?.toString().toLowerCase().includes(searchLower)\r\n        );\r\n      });\r\n    }\r\n\r\n    setFilteredRecords(filtered);\r\n    calculateStats(filtered);\r\n  }, [globalSearch, searchQuery, dateFilter, dateFromFilter, dateToFilter, shiftFilter, channelFilter, societyFilter, machineFilter, dairyFilter, bmcFilter, records, societies, machines, dairies, bmcs, calculateStats]);\r\n\r\n  // Export to CSV\r\n  const exportToCSV = () => {\r\n    if (filteredRecords.length === 0) return;\r\n\r\n    const dateRange = dateFromFilter && dateToFilter \r\n      ? `${dateFromFilter} To ${dateToFilter}`\r\n      : dateFilter || 'All Dates';\r\n    const currentDateTime = new Date().toLocaleString('en-IN', { \r\n      year: 'numeric', month: '2-digit', day: '2-digit', \r\n      hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false \r\n    });\r\n\r\n    // Detailed data rows\r\n    const dataRows = filteredRecords.map(record => [\r\n      record.sales_date,\r\n      record.sales_time,\r\n      record.channel,\r\n      `${record.machine_id} (${record.machine_type})`,\r\n      `${record.society_name} (${record.society_id})`,\r\n      record.rate_per_liter,\r\n      record.quantity,\r\n      record.total_amount\r\n    ]);\r\n\r\n    const csvContent = [\r\n      'Admin Report - LactoConnect Milk Sales System',\r\n      `Date From ${dateRange}`,\r\n      '',\r\n      'DETAILED SALES DATA',\r\n      '',\r\n      'Date,Time,Channel,Machine,Society,Rate,Quantity (L),Total Amount',\r\n      ...dataRows.map(row => row.join(',')),\r\n      '',\r\n      '',\r\n      'OVERALL SUMMARY',\r\n      `Total Sales:,${stats.totalSales}`,\r\n      `Total Quantity (L):,${stats.totalQuantity.toFixed(2)}`,\r\n      `Total Amount (Rs):,${stats.totalAmount.toFixed(2)}`,\r\n      `Overall Average Rate (Rs/L):,${stats.averageRate.toFixed(2)}`,\r\n      '',\r\n      'Thank you',\r\n      'Poornasree Equipments',\r\n      `Generated on: ${currentDateTime}`\r\n    ].join('\\n');\r\n\r\n    const blob = new Blob([csvContent], { type: 'text/csv' });\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `sales-report-${new Date().toISOString().split('T')[0]}.csv`;\r\n    a.click();\r\n  };\r\n\r\n  // Export to PDF\r\n  const exportToPDF = () => {\r\n    if (filteredRecords.length === 0) return;\r\n\r\n    const doc = new jsPDF({ orientation: 'landscape', unit: 'mm', format: 'a4' });\r\n    const dateRange = dateFromFilter && dateToFilter \r\n      ? `${dateFromFilter} To ${dateToFilter}`\r\n      : dateFilter \r\n      ? `${dateFilter} To ${dateFilter}`\r\n      : 'All Dates';\r\n\r\n    // Add Logo\r\n    const logoPath = '/fulllogo.png';\r\n    doc.addImage(logoPath, 'PNG', 14, 8, 0, 12);\r\n\r\n    // Header\r\n    doc.setFontSize(14);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('Daily Sales Report - LactoConnect Milk Sales System', 148.5, 15, { align: 'center' });\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(`Date From ${dateRange}`, 148.5, 21, { align: 'center' });\r\n    \r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('DETAILED SALES DATA', 148.5, 28, { align: 'center' });\r\n\r\n    // Detailed Data Table with SI No\r\n    const tableData = filteredRecords.map((record, index) => [\r\n      (index + 1).toString(),\r\n      record.sales_date,\r\n      record.sales_time,\r\n      getChannelDisplay(record.channel),\r\n      `${record.machine_id} (${record.machine_type})`,\r\n      `${record.society_name} (${record.society_id})`,\r\n      record.rate_per_liter,\r\n      record.quantity,\r\n      record.total_amount\r\n    ]);\r\n\r\n    autoTable(doc, {\r\n      startY: 32,\r\n      head: [['SI No', 'Date', 'Time', 'Channel', 'Machine', 'Society', 'Rate', 'Quantity (L)', 'Total Amount']],\r\n      body: tableData,\r\n      theme: 'grid',\r\n      styles: { fontSize: 8, cellPadding: 2, halign: 'center' },\r\n      headStyles: { fillColor: [255, 255, 255], textColor: [0, 0, 0], fontStyle: 'bold', fontSize: 9, lineWidth: 0.5, lineColor: [0, 0, 0] },\r\n      bodyStyles: { lineWidth: 0.3, lineColor: [200, 200, 200] },\r\n      columnStyles: {\r\n        0: { cellWidth: 15 }\r\n      }\r\n    });\r\n\r\n    // Summary Section\r\n    const finalY = doc.lastAutoTable.finalY + 8;\r\n    \r\n    // Left side - Overall Summary\r\n    doc.setFontSize(11);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('OVERALL SUMMARY', 14, finalY);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setFontSize(9);\r\n    let leftY = finalY + 6;\r\n    doc.text(`Total Sales        : ${stats.totalSales}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Total Quantity (L) : ${stats.totalQuantity.toFixed(2)}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Total Amount       : ${stats.totalAmount.toFixed(2)}`, 14, leftY);\r\n    leftY += 5;\r\n    doc.text(`Avg Rate (Rs/L)    : ${stats.averageRate.toFixed(2)}`, 14, leftY);\r\n\r\n    // Right side - Report Notes\r\n    doc.setFontSize(11);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('REPORT NOTES', 283, finalY, { align: 'right' });\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    let rightY = finalY + 6;\r\n    doc.text('Prepared by: POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n    rightY += 5;\r\n    doc.text('Contact: marketing@poornasree.com', 283, rightY, { align: 'right' });\r\n    \r\n    rightY += 8;\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n    doc.setFont('helvetica', 'normal');\r\n    rightY += 5;\r\n    doc.text('Thank you for using LactoConnect', 283, rightY, { align: 'right' });\r\n    rightY += 5;\r\n    doc.text('For support, visit: www.poornasree.com', 283, rightY, { align: 'right' });\r\n\r\n    doc.save(`sales-report-${new Date().toISOString().split('T')[0]}.pdf`);\r\n  };\r\n\r\n  // Send email with CSV and PDF attachments\r\n  const handleSendEmail = async (email: string) => {\r\n    if (!email || !email.includes('@')) {\r\n      throw new Error('Please enter a valid email address');\r\n    }\r\n\r\n    try {\r\n      // Generate CSV content\r\n      const dateRange = dateFromFilter && dateToFilter \r\n        ? `${dateFromFilter} To ${dateToFilter}`\r\n        : dateFilter || 'All Dates';\r\n      const currentDateTime = new Date().toLocaleString('en-IN', { \r\n        year: 'numeric', month: '2-digit', day: '2-digit', \r\n        hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false \r\n      });\r\n\r\n      const dataRows = filteredRecords.map(record => [\r\n        record.count,\r\n        record.sales_date,\r\n        record.sales_time,\r\n        record.channel,\r\n        record.shift_type,\r\n        `${record.machine_id} (${record.machine_type})`,\r\n        record.society_name || '',\r\n        record.quantity,\r\n        record.rate_per_liter,\r\n        record.total_amount\r\n      ]);\r\n\r\n      const csvContent = [\r\n        ['POORNASREE EQUIPMENTS MILK SALES REPORT'],\r\n        ['Admin Report with Sales Summary'],\r\n        [],\r\n        ['Report Generated:', currentDateTime],\r\n        ['Date Range:', dateRange],\r\n        ['Total Sales:', stats.totalSales],\r\n        ['Total Quantity (L):', stats.totalQuantity.toFixed(2)],\r\n        ['Total Amount (₹):', stats.totalAmount.toFixed(2)],\r\n        ['Average Rate (₹/L):', stats.averageRate.toFixed(2)],\r\n        [],\r\n        ['Count', 'Date', 'Time', 'Channel', 'Shift', 'Machine', 'Society', 'Quantity (L)', 'Rate (₹/L)', 'Total Amount (₹)'],\r\n        ...dataRows\r\n      ].map(row => row.join(',')).join('\\n');\r\n\r\n      // Generate PDF as base64 - matching current PDF design exactly\r\n      const doc = new jsPDF({ orientation: 'landscape', unit: 'mm', format: 'a4' });\r\n      \r\n      // Add Logo (same as current PDF)\r\n      const logoPath = '/fulllogo.png';\r\n      doc.addImage(logoPath, 'PNG', 14, 8, 0, 12);\r\n\r\n      // Header (same as current PDF)\r\n      doc.setFontSize(14);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('Daily Sales Report - LactoConnect Milk Sales System', 148.5, 15, { align: 'center' });\r\n      doc.setFontSize(9);\r\n      doc.setFont('helvetica', 'normal');\r\n      doc.text(`Date From ${dateRange}`, 148.5, 21, { align: 'center' });\r\n      \r\n      doc.setFontSize(10);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('DETAILED SALES DATA', 148.5, 28, { align: 'center' });\r\n\r\n      // Detailed Data Table with SI No (same as current PDF)\r\n      const tableData = filteredRecords.map((record, index) => [\r\n        (index + 1).toString(),\r\n        record.count,\r\n        record.sales_date,\r\n        record.sales_time,\r\n        getChannelDisplay(record.channel),\r\n        record.shift_type,\r\n        `${record.machine_id} (${record.machine_type})`,\r\n        `${record.society_name} (${record.society_id})`,\r\n        record.quantity,\r\n        record.rate_per_liter,\r\n        record.total_amount\r\n      ]);\r\n\r\n      autoTable(doc, {\r\n        startY: 32,\r\n        head: [['SI No', 'Count', 'Date', 'Time', 'Channel', 'Shift', 'Machine', 'Society', 'Quantity (L)', 'Rate', 'Total Amount']],\r\n        body: tableData,\r\n        theme: 'grid',\r\n        styles: { fontSize: 7, cellPadding: 1.5, halign: 'center' },\r\n        headStyles: { fillColor: [255, 255, 255], textColor: [0, 0, 0], fontStyle: 'bold', fontSize: 8, lineWidth: 0.5, lineColor: [0, 0, 0] },\r\n        bodyStyles: { lineWidth: 0.3, lineColor: [200, 200, 200] },\r\n        columnStyles: {\r\n          0: { cellWidth: 12 }\r\n        }\r\n      });\r\n\r\n      // Summary Section (same as current PDF)\r\n      const finalY = doc.lastAutoTable.finalY + 8;\r\n      \r\n      // Left side - Overall Summary\r\n      doc.setFontSize(11);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('OVERALL SUMMARY', 14, finalY);\r\n      doc.setFont('helvetica', 'normal');\r\n      let leftY = finalY + 6;\r\n      doc.text(`Total Sales        : ${stats.totalSales}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Total Quantity (L) : ${stats.totalQuantity.toFixed(2)}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Total Amount       : ${stats.totalAmount.toFixed(2)}`, 14, leftY);\r\n      leftY += 5;\r\n      doc.text(`Average Rate       : ${stats.averageRate.toFixed(2)}`, 14, leftY);\r\n\r\n      // Right side - Report Notes\r\n      doc.setFontSize(11);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('REPORT NOTES', 283, finalY, { align: 'right' });\r\n      doc.setFontSize(9);\r\n      doc.setFont('helvetica', 'normal');\r\n      let rightY = finalY + 6;\r\n      doc.text('Prepared by: POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n      rightY += 5;\r\n      doc.text('Contact: marketing@poornasree.com', 283, rightY, { align: 'right' });\r\n      \r\n      rightY += 8;\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('POORNASREE EQUIPMENTS', 283, rightY, { align: 'right' });\r\n      doc.setFont('helvetica', 'normal');\r\n      rightY += 5;\r\n      doc.text('Thank you for using LactoConnect', 283, rightY, { align: 'right' });\r\n      rightY += 5;\r\n      doc.text('For support, visit: www.poornasree.com', 283, rightY, { align: 'right' });\r\n\r\n      const pdfBase64 = doc.output('datauristring').split(',')[1];\r\n\r\n      // Send email with attachments\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/reports/send-email', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          email: email,\r\n          csvContent,\r\n          pdfContent: pdfBase64,\r\n          reportType: 'Sales Report',\r\n          dateRange,\r\n          stats\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        throw new Error(errorData.error || 'Failed to send email');\r\n      }\r\n\r\n      setSuccessMessage(`Report sent successfully to ${email}`);\r\n      setTimeout(() => setSuccessMessage(''), 5000);\r\n    } catch (error) {\r\n      console.error('Error sending email:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <FlowerSpinner size={48} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Statistics Cards */}\r\n      <div className=\"grid grid-cols-4 gap-3\">\r\n        <StatsCard\r\n          title=\"Total Sales\"\r\n          value={stats.totalSales}\r\n          icon={<ShoppingCart className=\"w-full h-full\" />}\r\n          color=\"blue\"\r\n        />\r\n        <StatsCard\r\n          title=\"Total Quantity (L)\"\r\n          value={stats.totalQuantity}\r\n          icon={<BarChart3 className=\"w-full h-full\" />}\r\n          color=\"green\"\r\n        />\r\n        <StatsCard\r\n          title=\"Total Amount (₹)\"\r\n          value={`₹${stats.totalAmount.toFixed(2)}`}\r\n          icon={<DollarSign className=\"w-full h-full\" />}\r\n          color=\"yellow\"\r\n        />\r\n        <StatsCard\r\n          title=\"Avg Rate (₹/L)\"\r\n          value={`₹${stats.averageRate.toFixed(2)}`}\r\n          icon={<TrendingUp className=\"w-full h-full\" />}\r\n          color=\"gray\"\r\n        />\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 sm:p-6\">\r\n        <div className=\"space-y-4\">\r\n          {/* Filter Info */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n              Showing {filteredRecords.length} of {records.length} records\r\n            </span>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={() => {\r\n                  clearFilters();\r\n                  fetchData();\r\n                }}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-psr-primary-600 text-white rounded-lg hover:bg-psr-primary-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <RefreshCw className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">Refresh</span>\r\n              </button>\r\n              <button\r\n                onClick={exportToCSV}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-psr-green-600 text-white rounded-lg hover:bg-psr-green-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <Download className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">CSV</span>\r\n              </button>\r\n              <button\r\n                onClick={exportToPDF}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <FileDown className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">PDF</span>\r\n              </button>\r\n              <button\r\n                onClick={() => setShowEmailModal(true)}\r\n                className=\"flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm shadow-sm hover:shadow-md\"\r\n              >\r\n                <Mail className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">Send Mail</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Filter Dropdown - All Filters Inside */}\r\n          <FilterDropdown\r\n            statusFilter={shiftFilter}\r\n            onStatusChange={setShiftFilter}\r\n            dairyFilter={dairyFilter}\r\n            onDairyChange={(value) => setDairyFilter(Array.isArray(value) ? value : [value])}\r\n            bmcFilter={bmcFilter}\r\n            onBmcChange={(value) => setBmcFilter(Array.isArray(value) ? value : [value])}\r\n            societyFilter={societyFilter}\r\n            onSocietyChange={(value) => setSocietyFilter(Array.isArray(value) ? value : [value])}\r\n            machineFilter={machineFilter}\r\n            onMachineChange={(value) => setMachineFilter(Array.isArray(value) ? value : [value])}\r\n            dairies={dairiesWithSales}\r\n            bmcs={bmcs}\r\n            societies={societies}\r\n            machines={machines}\r\n            filteredCount={filteredRecords.length}\r\n            totalCount={records.length}\r\n            searchQuery={searchQuery}\r\n            onSearchChange={setSearchQuery}\r\n            icon={<DollarSign className=\"w-5 h-5\" />}\r\n            dateFilter={dateFilter}\r\n            onDateChange={setDateFilter}\r\n            dateFromFilter={dateFromFilter}\r\n            onDateFromChange={setDateFromFilter}\r\n            dateToFilter={dateToFilter}\r\n            onDateToChange={setDateToFilter}\r\n            channelFilter={channelFilter}\r\n            onChannelChange={setChannelFilter}\r\n            showDateFilter\r\n            showChannelFilter\r\n            showShiftFilter\r\n            showMachineFilter\r\n            hideMainFilterButton={true}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Data Table */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden\">\r\n        <div className=\"overflow-auto max-h-[600px]\" tabIndex={0}>\r\n          <table className=\"w-auto min-w-full table-auto\">\r\n            <thead className=\"bg-gray-50 dark:bg-gray-700 sticky top-0 z-10\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectAll}\r\n                    onChange={handleSelectAll}\r\n                    className=\"w-4 h-4 text-emerald-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 cursor-pointer\"\r\n                  />\r\n                </th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Date & Time</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Count</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Society</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Shift</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Channel</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Machine</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Rate/L</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Qty (L)</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Amount</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider whitespace-nowrap\">Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n              {filteredRecords.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan={11} className=\"px-4 py-8 text-center text-gray-500 dark:text-gray-400\">\r\n                    No sales records found\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                filteredRecords.map((record) => (\r\n                  <React.Fragment key={record.id}>\r\n                    <tr className={`transition-colors ${\r\n                      selectedRecords.has(record.id)\r\n                        ? 'bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30'\r\n                        : 'hover:bg-gray-50 dark:hover:bg-gray-700'\r\n                    }`}>\r\n                      <td className=\"px-4 py-3 text-center\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={selectedRecords.has(record.id)}\r\n                          onChange={() => handleSelectOne(record.id)}\r\n                          className=\"w-4 h-4 text-emerald-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 cursor-pointer\"\r\n                        />\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                        <div>{highlightText(record.sales_date, combinedSearch)}</div>\r\n                        <div className=\"text-xs text-gray-500\">{record.sales_time}</div>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center font-medium text-gray-900 dark:text-white\">\r\n                        #{highlightText(record.count, combinedSearch)}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                        <div className=\"font-medium\">{highlightText(record.society_name, combinedSearch)}</div>\r\n                        <div className=\"text-xs text-gray-500\">ID: {highlightText(record.society_id, combinedSearch)}</div>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-center\">\r\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                          ['MR', 'MX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'morning'\r\n                            ? 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400'\r\n                            : ['EV', 'EX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'evening'\r\n                            ? 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400'\r\n                            : 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400'\r\n                        }`}>\r\n                          {highlightText(\r\n                            ['MR', 'MX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'morning'\r\n                              ? 'Morning' \r\n                              : ['EV', 'EX'].includes(record.shift_type) || record.shift_type?.toLowerCase() === 'evening'\r\n                              ? 'Evening' \r\n                              : record.shift_type,\r\n                            combinedSearch\r\n                          )}\r\n                        </span>\r\n                      </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center\">\r\n                      <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                        getChannelDisplay(record.channel) === 'COW'\r\n                          ? 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400'\r\n                          : getChannelDisplay(record.channel) === 'BUFFALO'\r\n                          ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400'\r\n                          : 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400'\r\n                      }`}>\r\n                        {highlightText(getChannelDisplay(record.channel), combinedSearch)}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white whitespace-nowrap\">\r\n                      <div className=\"font-medium\">{highlightText(record.machine_id || 'N/A', combinedSearch)}</div>\r\n                      <div className=\"text-xs text-gray-500\">{highlightText(record.machine_type, combinedSearch)}</div>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center text-gray-900 dark:text-white\">\r\n                      ₹{highlightText(parseFloat(record.rate_per_liter).toFixed(2), combinedSearch)}\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center font-medium text-gray-900 dark:text-white\">\r\n                      {highlightText(parseFloat(record.quantity).toFixed(2), combinedSearch)}\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center font-medium text-green-600 dark:text-green-400\">\r\n                      ₹{highlightText(parseFloat(record.total_amount).toFixed(2), combinedSearch)}\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm text-center\">\r\n                      <button\r\n                        onClick={() => handleDeleteClick(record.id)}\r\n                        className=\"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors\"\r\n                        title=\"Delete record\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                </React.Fragment>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Password Confirmation Dialog */}\r\n      <PasswordConfirmDialog\r\n        isOpen={deleteDialogOpen}\r\n        onClose={() => setDeleteDialogOpen(false)}\r\n        onConfirm={handleDeleteConfirm}\r\n        title=\"Delete Sales Record\"\r\n        message=\"Enter your admin password to confirm deletion. This action cannot be undone and will be logged for security purposes.\"\r\n      />\r\n\r\n      {/* Bulk Delete Password Confirmation Modal */}\r\n      <PasswordConfirmDialog\r\n        isOpen={showBulkDeleteConfirm}\r\n        onClose={() => {\r\n          setShowBulkDeleteConfirm(false);\r\n          setBulkDeletePassword('');\r\n        }}\r\n        onConfirm={handleBulkDeleteConfirm}\r\n        title={`Delete ${selectedRecords.size} Sales Record${selectedRecords.size > 1 ? 's' : ''}`}\r\n        message={`Enter your admin password to confirm deletion of ${selectedRecords.size} selected record(s). This action cannot be undone and will be logged for security purposes.`}\r\n      />\r\n\r\n      {/* Bulk Actions Toolbar */}\r\n      <BulkActionsToolbar\r\n        selectedCount={selectedRecords.size}\r\n        totalCount={filteredRecords.length}\r\n        onBulkDelete={handleBulkDeleteClick}\r\n        onClearSelection={handleClearSelection}\r\n        itemType=\"record\"\r\n        showStatusUpdate={false}\r\n      />\r\n\r\n      {/* Loading Snackbar */}\r\n      <LoadingSnackbar\r\n        isVisible={deleting || isDeletingBulk}\r\n        message={isDeletingBulk ? `Deleting ${selectedRecords.size} Records` : \"Deleting Record\"}\r\n        submessage=\"Verifying credentials and removing data...\"\r\n        showProgress={false}\r\n      />\r\n\r\n      {/* Email Modal */}\r\n      <EmailReportModal\r\n        isOpen={showEmailModal}\r\n        onClose={() => setShowEmailModal(false)}\r\n        onSend={handleSendEmail}\r\n        defaultEmail={adminEmail}\r\n        recordCount={filteredRecords.length}\r\n        reportType=\"Sales Report\"\r\n      />\r\n\r\n      {/* Status Messages */}\r\n      <StatusMessage\r\n        success={successMessage}\r\n        error={errorMessage}\r\n        onClose={() => {\r\n          setSuccessMessage('');\r\n          setErrorMessage('');\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6641, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/app/admin/reports/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, Suspense } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { FileText, Droplet, Truck, DollarSign } from 'lucide-react';\r\nimport CollectionReports from '@/components/reports/CollectionReports';\r\nimport DispatchReports from '@/components/reports/DispatchReports';\r\nimport SalesReports from '@/components/reports/SalesReports';\r\n\r\nexport const dynamic = 'force-dynamic';\r\n\r\ntype ReportType = 'collection' | 'dispatch' | 'sales';\r\n\r\ninterface TabConfig {\r\n  id: ReportType;\r\n  label: string;\r\n  icon: typeof Droplet;\r\n  color: string;\r\n  gradient: string;\r\n}\r\n\r\nconst tabs: TabConfig[] = [\r\n  {\r\n    id: 'collection',\r\n    label: 'Collection',\r\n    icon: Droplet,\r\n    color: 'text-blue-600 dark:text-blue-400',\r\n    gradient: 'from-blue-600 to-cyan-600'\r\n  },\r\n  {\r\n    id: 'dispatch',\r\n    label: 'Dispatch',\r\n    icon: Truck,\r\n    color: 'text-green-600 dark:text-green-400',\r\n    gradient: 'from-green-600 to-emerald-600'\r\n  },\r\n  {\r\n    id: 'sales',\r\n    label: 'Sales',\r\n    icon: DollarSign,\r\n    color: 'text-purple-600 dark:text-purple-400',\r\n    gradient: 'from-purple-600 to-pink-600'\r\n  }\r\n];\r\n\r\nfunction ReportsPage() {\r\n  const searchParams = useSearchParams();\r\n  const [activeTab, setActiveTab] = useState<ReportType>('collection');\r\n  const [globalSearch, setGlobalSearch] = useState('');\r\n  const [initialSocietyId, setInitialSocietyId] = useState<string | null>(null);\r\n  const [initialSocietyName, setInitialSocietyName] = useState<string | null>(null);\r\n  const [initialFromDate, setInitialFromDate] = useState<string | null>(null);\r\n  const [initialToDate, setInitialToDate] = useState<string | null>(null);\r\n  const [initialBmcFilter, setInitialBmcFilter] = useState<string | null>(null);\r\n  const [initialMachineFilter, setInitialMachineFilter] = useState<string | null>(null);\r\n\r\n  // Read URL parameters on mount\r\n  useEffect(() => {\r\n    const societyId = searchParams.get('societyId');\r\n    const societyName = searchParams.get('societyName');\r\n    const fromDate = searchParams.get('fromDate');\r\n    const toDate = searchParams.get('toDate');\r\n    const bmcFilter = searchParams.get('bmcFilter');\r\n    const machineFilter = searchParams.get('machineFilter');\r\n    \r\n    console.log('Reports Page - URL Params:', { societyId, societyName, fromDate, toDate, machineFilter });\r\n    \r\n    if (societyId) {\r\n      setInitialSocietyId(societyId);\r\n      setInitialSocietyName(societyName);\r\n    }\r\n    \r\n    if (fromDate) {\r\n      console.log('Setting initialFromDate:', fromDate);\r\n      setInitialFromDate(fromDate);\r\n    }\r\n    \r\n    if (toDate) {\r\n      console.log('Setting initialToDate:', toDate);\r\n      setInitialToDate(toDate);\r\n    }\r\n    \r\n    if (bmcFilter) {\r\n      console.log('Setting initialBmcFilter:', bmcFilter);\r\n      setInitialBmcFilter(bmcFilter);\r\n    }\r\n    \r\n    if (machineFilter) {\r\n      console.log('Setting initialMachineFilter:', machineFilter);\r\n      setInitialMachineFilter(machineFilter);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // Run once on mount\r\n\r\n  // Listen to global search event from header\r\n  useEffect(() => {\r\n    const handleGlobalSearch = (event: CustomEvent<{ query: string }>) => {\r\n      setGlobalSearch(event.detail.query);\r\n    };\r\n\r\n    window.addEventListener('globalSearch', handleGlobalSearch as EventListener);\r\n    return () => {\r\n      window.removeEventListener('globalSearch', handleGlobalSearch as EventListener);\r\n    };\r\n  }, []);\r\n\r\n  const renderContent = () => {\r\n    console.log('Rendering with date filters:', { initialFromDate, initialToDate, initialBmcFilter, initialMachineFilter });\r\n    switch (activeTab) {\r\n      case 'collection':\r\n        return <CollectionReports key=\"collection\" globalSearch={globalSearch} initialSocietyId={initialSocietyId} initialSocietyName={initialSocietyName} initialFromDate={initialFromDate} initialToDate={initialToDate} initialBmcFilter={initialBmcFilter} initialMachineFilter={initialMachineFilter} />;\r\n      case 'dispatch':\r\n        return <DispatchReports key=\"dispatch\" globalSearch={globalSearch} />;\r\n      case 'sales':\r\n        return <SalesReports key=\"sales\" globalSearch={globalSearch} />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\r\n      {/* Header */}\r\n      <div className=\"border-b border-gray-200 dark:border-gray-700\">\r\n        <div className=\"px-4 sm:px-6 lg:px-8 py-4 sm:py-6\">\r\n          <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\">\r\n            {/* Reports Title - Left Side */}\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 sm:p-3 bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl shadow-lg\">\r\n                <FileText className=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" />\r\n              </div>\r\n              <div>\r\n                <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white\">\r\n                  Reports\r\n                </h1>\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1 hidden sm:block\">\r\n                  View and analyze data\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Toggle Button - Right Side */}\r\n            <div className=\"inline-flex bg-psr-green-50 dark:bg-gray-800 rounded-xl p-1 shadow-inner\">\r\n              {tabs.map((tab) => {\r\n                const Icon = tab.icon;\r\n                const isActive = activeTab === tab.id;\r\n\r\n                return (\r\n                  <button\r\n                    key={tab.id}\r\n                    onClick={() => setActiveTab(tab.id)}\r\n                    className={`\r\n                      relative flex items-center gap-2 px-4 sm:px-6 py-2 sm:py-2.5 rounded-lg font-medium\r\n                      transition-all duration-200\r\n                      ${\r\n                        isActive\r\n                          ? 'bg-psr-green-600 dark:bg-psr-green-700 text-white shadow-md'\r\n                          : 'text-gray-600 dark:text-gray-400 hover:text-psr-green-600 dark:hover:text-psr-green-400'\r\n                      }\r\n                    `}\r\n                  >\r\n                    <Icon className=\"w-4 h-4 sm:w-5 sm:h-5\" />\r\n                    <span className=\"hidden sm:inline\">{tab.label}</span>\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content Area */}\r\n      <div className=\"px-4 sm:px-6 lg:px-8 py-6\">\r\n        <AnimatePresence mode=\"wait\">\r\n          <motion.div\r\n            key={activeTab}\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -20 }}\r\n            transition={{ duration: 0.2 }}\r\n          >\r\n            {renderContent()}\r\n          </motion.div>\r\n        </AnimatePresence>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Wrapper component with Suspense boundary for useSearchParams\r\nexport default function ReportsPageWrapper() {\r\n  return (\r\n    <Suspense fallback={\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500\"></div>\r\n      </div>\r\n    }>\r\n      <ReportsPage />\r\n    </Suspense>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}