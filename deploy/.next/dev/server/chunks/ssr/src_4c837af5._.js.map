{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/lib/validation/phoneValidation.ts"],"sourcesContent":["/**\r\n * Mobile Number Validation Utilities\r\n * \r\n * Validates and formats Indian mobile numbers\r\n * Indian mobile numbers: 10 digits starting with 6-9\r\n */\r\n\r\nexport interface PhoneValidationResult {\r\n  isValid: boolean;\r\n  error?: string;\r\n  formatted?: string;\r\n}\r\n\r\n/**\r\n * Validates Indian mobile number\r\n * @param phone - Phone number to validate\r\n * @returns Validation result with error message if invalid\r\n */\r\nexport function validateIndianPhone(phone: string): PhoneValidationResult {\r\n  if (!phone || phone.trim() === '') {\r\n    return {\r\n      isValid: false,\r\n      error: 'Phone number is required'\r\n    };\r\n  }\r\n\r\n  // Remove all non-digit characters\r\n  const cleaned = phone.replace(/\\D/g, '');\r\n\r\n  // Check length\r\n  if (cleaned.length !== 10) {\r\n    return {\r\n      isValid: false,\r\n      error: 'Phone number must be exactly 10 digits'\r\n    };\r\n  }\r\n\r\n  // Check if starts with valid digit (6-9)\r\n  if (!/^[6-9]/.test(cleaned)) {\r\n    return {\r\n      isValid: false,\r\n      error: 'Phone number must start with 6, 7, 8, or 9'\r\n    };\r\n  }\r\n\r\n  return {\r\n    isValid: true,\r\n    formatted: cleaned\r\n  };\r\n}\r\n\r\n/**\r\n * Formats phone number input - allows only digits and limits to 10\r\n * @param value - Input value\r\n * @returns Formatted phone number (digits only, max 10)\r\n */\r\nexport function formatPhoneInput(value: string): string {\r\n  // Remove all non-digit characters\r\n  const cleaned = value.replace(/\\D/g, '');\r\n  \r\n  // Limit to 10 digits\r\n  return cleaned.slice(0, 10);\r\n}\r\n\r\n/**\r\n * Checks if phone number is complete (10 digits)\r\n * @param phone - Phone number to check\r\n * @returns True if phone has 10 digits\r\n */\r\nexport function isPhoneComplete(phone: string): boolean {\r\n  const cleaned = phone.replace(/\\D/g, '');\r\n  return cleaned.length === 10;\r\n}\r\n\r\n/**\r\n * Display formatted phone number with spacing\r\n * @param phone - Phone number to format\r\n * @returns Formatted as: XXXXX XXXXX\r\n */\r\nexport function displayPhoneNumber(phone: string): string {\r\n  const cleaned = phone.replace(/\\D/g, '');\r\n  \r\n  if (cleaned.length <= 5) {\r\n    return cleaned;\r\n  }\r\n  \r\n  return `${cleaned.slice(0, 5)} ${cleaned.slice(5)}`;\r\n}\r\n\r\n/**\r\n * Validates phone on blur - provides detailed error\r\n * @param phone - Phone number to validate\r\n * @returns Error message or empty string if valid\r\n */\r\nexport function validatePhoneOnBlur(phone: string): string {\r\n  if (!phone || phone.trim() === '') {\r\n    return ''; // Don't show error for empty field (let required handle it)\r\n  }\r\n\r\n  const result = validateIndianPhone(phone);\r\n  return result.error || '';\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;;;;;;;;;AAaM,SAAS,oBAAoB,KAAa;IAC/C,IAAI,CAAC,SAAS,MAAM,IAAI,OAAO,IAAI;QACjC,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,kCAAkC;IAClC,MAAM,UAAU,MAAM,OAAO,CAAC,OAAO;IAErC,eAAe;IACf,IAAI,QAAQ,MAAM,KAAK,IAAI;QACzB,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,yCAAyC;IACzC,IAAI,CAAC,SAAS,IAAI,CAAC,UAAU;QAC3B,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,OAAO;QACL,SAAS;QACT,WAAW;IACb;AACF;AAOO,SAAS,iBAAiB,KAAa;IAC5C,kCAAkC;IAClC,MAAM,UAAU,MAAM,OAAO,CAAC,OAAO;IAErC,qBAAqB;IACrB,OAAO,QAAQ,KAAK,CAAC,GAAG;AAC1B;AAOO,SAAS,gBAAgB,KAAa;IAC3C,MAAM,UAAU,MAAM,OAAO,CAAC,OAAO;IACrC,OAAO,QAAQ,MAAM,KAAK;AAC5B;AAOO,SAAS,mBAAmB,KAAa;IAC9C,MAAM,UAAU,MAAM,OAAO,CAAC,OAAO;IAErC,IAAI,QAAQ,MAAM,IAAI,GAAG;QACvB,OAAO;IACT;IAEA,OAAO,GAAG,QAAQ,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE,QAAQ,KAAK,CAAC,IAAI;AACrD;AAOO,SAAS,oBAAoB,KAAa;IAC/C,IAAI,CAAC,SAAS,MAAM,IAAI,OAAO,IAAI;QACjC,OAAO,IAAI,4DAA4D;IACzE;IAEA,MAAM,SAAS,oBAAoB;IACnC,OAAO,OAAO,KAAK,IAAI;AACzB","debugId":null}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/lib/validation/emailValidation.ts"],"sourcesContent":["/**\r\n * Email validation utilities for farmer email fields\r\n */\r\n\r\nexport interface EmailValidationResult {\r\n  isValid: boolean;\r\n  error?: string;\r\n  formatted?: string;\r\n}\r\n\r\n/**\r\n * Validates an email address format\r\n * Returns validation result with isValid flag and optional error message\r\n */\r\nexport function validateEmail(email: string): EmailValidationResult {\r\n  // Empty email is valid (optional field)\r\n  if (!email || email.trim() === '') {\r\n    return { isValid: true, formatted: '' };\r\n  }\r\n\r\n  const trimmedEmail = email.trim();\r\n\r\n  // Basic email format validation\r\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  \r\n  if (!emailRegex.test(trimmedEmail)) {\r\n    return {\r\n      isValid: false,\r\n      error: 'Please enter a valid email address (e.g., farmer@example.com)'\r\n    };\r\n  }\r\n\r\n  // Check email length\r\n  if (trimmedEmail.length > 255) {\r\n    return {\r\n      isValid: false,\r\n      error: 'Email address is too long (max 255 characters)'\r\n    };\r\n  }\r\n\r\n  // Valid email\r\n  return {\r\n    isValid: true,\r\n    formatted: trimmedEmail\r\n  };\r\n}\r\n\r\n/**\r\n * Validates email on blur event for form fields\r\n * Returns error message string (empty if valid)\r\n */\r\nexport function validateEmailOnBlur(email: string): string {\r\n  const result = validateEmail(email);\r\n  return result.error || '';\r\n}\r\n\r\n/**\r\n * Formats email input by trimming whitespace\r\n * Use this on input change to clean the value\r\n */\r\nexport function formatEmailInput(value: string): string {\r\n  // Remove leading/trailing spaces and convert to lowercase for consistency\r\n  return value.trim().toLowerCase();\r\n}\r\n\r\n/**\r\n * Checks if email is required and validates accordingly\r\n * Use this when email is a required field\r\n */\r\nexport function validateRequiredEmail(email: string): EmailValidationResult {\r\n  if (!email || email.trim() === '') {\r\n    return {\r\n      isValid: false,\r\n      error: 'Email address is required'\r\n    };\r\n  }\r\n\r\n  return validateEmail(email);\r\n}\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;AAYM,SAAS,cAAc,KAAa;IACzC,wCAAwC;IACxC,IAAI,CAAC,SAAS,MAAM,IAAI,OAAO,IAAI;QACjC,OAAO;YAAE,SAAS;YAAM,WAAW;QAAG;IACxC;IAEA,MAAM,eAAe,MAAM,IAAI;IAE/B,gCAAgC;IAChC,MAAM,aAAa;IAEnB,IAAI,CAAC,WAAW,IAAI,CAAC,eAAe;QAClC,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,qBAAqB;IACrB,IAAI,aAAa,MAAM,GAAG,KAAK;QAC7B,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,cAAc;IACd,OAAO;QACL,SAAS;QACT,WAAW;IACb;AACF;AAMO,SAAS,oBAAoB,KAAa;IAC/C,MAAM,SAAS,cAAc;IAC7B,OAAO,OAAO,KAAK,IAAI;AACzB;AAMO,SAAS,iBAAiB,KAAa;IAC5C,0EAA0E;IAC1E,OAAO,MAAM,IAAI,GAAG,WAAW;AACjC;AAMO,SAAS,sBAAsB,KAAa;IACjD,IAAI,CAAC,SAAS,MAAM,IAAI,OAAO,IAAI;QACjC,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,OAAO,cAAc;AACvB","debugId":null}},
    {"offset": {"line": 230, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/components/dialogs/PasswordConfirmDialog.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { AlertTriangle, Eye, X } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ninterface PasswordConfirmDialogProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: (password: string) => Promise<void>;\r\n  title?: string;\r\n  message?: string;\r\n}\r\n\r\nexport default function PasswordConfirmDialog({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  title = 'Confirm Deletion',\r\n  message = 'Enter your admin password to confirm this action. This action will be logged for security purposes.'\r\n}: PasswordConfirmDialogProps) {\r\n  const [password, setPassword] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!password) {\r\n      setError('Password is required');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      await onConfirm(password);\r\n      setPassword('');\r\n      onClose();\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to verify password');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setPassword('');\r\n    setError('');\r\n    onClose();\r\n  };\r\n\r\n  // Render modal in a portal to escape parent overflow-hidden\r\n  const modalContent = (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <motion.div \r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          className=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-end sm:items-center justify-center z-[9999] p-0 sm:p-4\"\r\n          style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0 }}\r\n          onClick={(e) => {\r\n            if (e.target === e.currentTarget) handleClose();\r\n          }}\r\n        >\r\n          <motion.div\r\n            initial={{ y: '100%', opacity: 0 }}\r\n            animate={{ y: 0, opacity: 1 }}\r\n            exit={{ y: '100%', opacity: 0 }}\r\n            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n            className=\"bg-white dark:bg-gray-800 rounded-t-2xl sm:rounded-xl shadow-2xl w-full sm:max-w-md max-h-[90vh] overflow-y-auto\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            {/* Mobile drag handle */}\r\n            <div className=\"sm:hidden flex justify-center pt-3 pb-1\">\r\n              <div className=\"w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full\" />\r\n            </div>\r\n\r\n            {/* Modal Header */}\r\n            <div className=\"p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h2 className=\"text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100\">\r\n                  {title}\r\n                </h2>\r\n                <button\r\n                  onClick={handleClose}\r\n                  className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors\"\r\n                >\r\n                  <X className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Modal Content */}\r\n            <div className=\"p-4 sm:p-6\">\r\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                {/* Warning Box */}\r\n                <div className=\"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4\">\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <AlertTriangle className=\"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5\" />\r\n                    <div className=\"flex-1\">\r\n                      <h4 className=\"text-sm font-medium text-amber-800 dark:text-amber-200 mb-1\">\r\n                        Security Verification Required\r\n                      </h4>\r\n                      <p className=\"text-xs text-amber-700 dark:text-amber-300\">\r\n                        {message}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Password Input - Using FormInput style */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                    Admin Password <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    value={password}\r\n                    onChange={(e) => {\r\n                      setPassword(e.target.value);\r\n                      setError('');\r\n                    }}\r\n                    placeholder=\"Enter your admin password\"\r\n                    required\r\n                    disabled={loading}\r\n                    className={`form-input-custom w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 focus:border-emerald-500 dark:focus:border-emerald-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 focus:outline-none ${error ? 'border-red-300 bg-red-50 dark:border-red-700 dark:bg-red-900/20' : ''}`}\r\n                  />\r\n                  {error && (\r\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{error}</p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex gap-3 pt-2\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={handleClose}\r\n                    className=\"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={loading || !password}\r\n                    className=\"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-gradient-to-r from-red-600 to-red-700 rounded-lg hover:from-red-700 hover:to-red-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2\"\r\n                  >\r\n                    {loading ? (\r\n                      <>\r\n                        <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n                        Verifying...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Eye className=\"w-4 h-4\" />\r\n                        Confirm Delete\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </motion.div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n\r\n  // Only render portal on client side\r\n  if (typeof window === 'undefined') return null;\r\n  \r\n  return createPortal(modalContent, document.body);\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 563, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/components/modals/DeleteSocietyModal.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { AlertTriangle, X, Mail, Trash2 } from 'lucide-react';\r\n\r\ninterface DeleteSocietyModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: (otp: string) => void;\r\n  societyName: string;\r\n  loading?: boolean;\r\n}\r\n\r\nexport default function DeleteSocietyModal({\r\n  isOpen,\r\n  onClose,\r\n  societyName,\r\n  onConfirm,\r\n  loading = false\r\n}: DeleteSocietyModalProps) {\r\n  const [otp, setOtp] = useState<string[]>(Array(6).fill(''));\r\n  const [otpSent, setOtpSent] = useState(false);\r\n  const [sendingOtp, setSendingOtp] = useState(false);\r\n  const [otpError, setOtpError] = useState('');\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const handleOtpChange = (index: number, value: string) => {\r\n    if (!/^\\d*$/.test(value)) return;\r\n\r\n    const newOtp = [...otp];\r\n    newOtp[index] = value.slice(-1);\r\n    setOtp(newOtp);\r\n    setOtpError('');\r\n\r\n    // Auto-focus next input\r\n    if (value && index < 5) {\r\n      const nextInput = document.getElementById(`otp-${index + 1}`);\r\n      nextInput?.focus();\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (index: number, e: React.KeyboardEvent) => {\r\n    if (e.key === 'Backspace' && !otp[index] && index > 0) {\r\n      const prevInput = document.getElementById(`otp-${index - 1}`);\r\n      prevInput?.focus();\r\n    }\r\n  };\r\n\r\n  const handlePaste = (e: React.ClipboardEvent) => {\r\n    e.preventDefault();\r\n    const pastedData = e.clipboardData.getData('text').slice(0, 6);\r\n    if (!/^\\d+$/.test(pastedData)) return;\r\n\r\n    const newOtp = Array(6).fill('');\r\n    pastedData.split('').forEach((char, i) => {\r\n      newOtp[i] = char;\r\n    });\r\n    setOtp(newOtp);\r\n  };\r\n\r\n  const handleSendOtp = async () => {\r\n    setSendingOtp(true);\r\n    setOtpError('');\r\n    \r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const societyId = (window as { selectedSocietyId?: number }).selectedSocietyId;\r\n      \r\n      const response = await fetch('/api/user/society/send-delete-otp', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ societyId })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to send OTP');\r\n      }\r\n\r\n      setOtpSent(true);\r\n    } catch (error) {\r\n      setOtpError(error instanceof Error ? error.message : 'Failed to send OTP');\r\n    } finally {\r\n      setSendingOtp(false);\r\n    }\r\n  };\r\n\r\n  const handleConfirm = () => {\r\n    const otpString = otp.join('');\r\n    if (otpString.length !== 6) {\r\n      setOtpError('Please enter complete 6-digit OTP');\r\n      return;\r\n    }\r\n    onConfirm(otpString);\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg\">\r\n              <AlertTriangle className=\"w-6 h-6 text-red-600 dark:text-red-400\" />\r\n            </div>\r\n            <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n              Delete Society\r\n            </h2>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors\"\r\n            disabled={loading}\r\n          >\r\n            <X className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6\">\r\n          {/* Warning Message */}\r\n          <div className=\"mb-6 p-4 bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-500 rounded-r\">\r\n            <p className=\"text-sm text-amber-800 dark:text-amber-200 font-semibold mb-2\">\r\n              ‚ö†Ô∏è THIS ACTION CANNOT BE UNDONE!\r\n            </p>\r\n            <p className=\"text-sm text-amber-700 dark:text-amber-300\">\r\n              Deleting <strong className=\"font-bold\">{societyName}</strong> will permanently remove:\r\n            </p>\r\n          </div>\r\n\r\n          {/* Data to be deleted */}\r\n          <div className=\"mb-6 space-y-2 text-sm text-gray-600 dark:text-gray-400\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-1.5 h-1.5 rounded-full bg-red-500\"></div>\r\n              <span>All farmers under this society</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-1.5 h-1.5 rounded-full bg-red-500\"></div>\r\n              <span>All machines linked to this society</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-1.5 h-1.5 rounded-full bg-red-500\"></div>\r\n              <span>All machine statistics</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-1.5 h-1.5 rounded-full bg-red-500\"></div>\r\n              <span>All machine corrections</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-1.5 h-1.5 rounded-full bg-red-500\"></div>\r\n              <span>All rate charts and rate chart data</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-1.5 h-1.5 rounded-full bg-red-500\"></div>\r\n              <span>All milk collections</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-1.5 h-1.5 rounded-full bg-red-500\"></div>\r\n              <span>All sales records</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-1.5 h-1.5 rounded-full bg-red-500\"></div>\r\n              <span>All dispatch records</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-1.5 h-1.5 rounded-full bg-red-500\"></div>\r\n              <span>All section pulse tracking data</span>\r\n            </div>\r\n          </div>\r\n\r\n          {!otpSent ? (\r\n            // Send OTP Button\r\n            <button\r\n              onClick={handleSendOtp}\r\n              disabled={sendingOtp}\r\n              className=\"w-full py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2\"\r\n            >\r\n              {sendingOtp ? (\r\n                <>\r\n                  <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\"></div>\r\n                  Sending OTP...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Mail className=\"w-5 h-5\" />\r\n                  Send OTP to Email\r\n                </>\r\n              )}\r\n            </button>\r\n          ) : (\r\n            <>\r\n              {/* OTP Input */}\r\n              <div className=\"mb-4\">\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 text-center\">\r\n                  Enter 6-digit OTP sent to your email\r\n                </label>\r\n                <div className=\"flex justify-center gap-2 mb-2\">\r\n                  {otp.map((digit, index) => (\r\n                    <input\r\n                      key={index}\r\n                      id={`otp-${index}`}\r\n                      type=\"text\"\r\n                      inputMode=\"numeric\"\r\n                      maxLength={1}\r\n                      value={digit}\r\n                      onChange={(e) => handleOtpChange(index, e.target.value)}\r\n                      onKeyDown={(e) => handleKeyDown(index, e)}\r\n                      onPaste={index === 0 ? handlePaste : undefined}\r\n                      className=\"w-12 h-12 text-center text-xl font-bold border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-900/50 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:bg-white dark:focus:bg-gray-700 active:bg-white dark:active:bg-gray-700 focus:text-gray-900 dark:focus:text-white focus:outline-none transition-colors\"\r\n                    />\r\n                  ))}\r\n                </div>\r\n                {otpError && (\r\n                  <p className=\"text-sm text-red-600 dark:text-red-400 text-center\">{otpError}</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Resend OTP */}\r\n              <button\r\n                onClick={handleSendOtp}\r\n                disabled={sendingOtp}\r\n                className=\"text-sm text-blue-600 dark:text-blue-400 hover:underline mb-4 w-full text-center\"\r\n              >\r\n                {sendingOtp ? 'Resending...' : 'Resend OTP'}\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        {otpSent && (\r\n          <div className=\"flex gap-3 p-6 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700\">\r\n            <button\r\n              onClick={onClose}\r\n              disabled={loading}\r\n              className=\"flex-1 py-3 px-4 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-medium transition-colors disabled:opacity-50\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              onClick={handleConfirm}\r\n              disabled={loading || otp.join('').length !== 6}\r\n              className=\"flex-1 py-3 px-4 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2\"\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\"></div>\r\n                  Deleting...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Trash2 className=\"w-5 h-5\" />\r\n                  Delete All\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1130, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/app/admin/society/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { formatPhoneInput, validatePhoneOnBlur } from '@/lib/validation/phoneValidation';\r\nimport { validateEmailOnBlur, formatEmailInput } from '@/lib/validation/emailValidation';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { useUser } from '@/contexts/UserContext';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer\r\n} from 'recharts';\r\nimport { \r\n  Users, \r\n  Edit3, \r\n  MapPin,\r\n  Phone,\r\n  User,\r\n  Calendar,\r\n  Building2,\r\n  Eye,\r\n  EyeOff,\r\n  Trash2,\r\n  TrendingUp,\r\n  Award,\r\n  Droplets,\r\n  Plus,\r\n  BarChart3,\r\n  X\r\n} from 'lucide-react';\r\nimport { \r\n  FlowerSpinner, \r\n  LoadingSpinner,\r\n  FormModal, \r\n  FormInput, \r\n  FormSelect, \r\n  FormActions, \r\n  FormGrid,\r\n  PageHeader,\r\n  StatusMessage,\r\n  FilterControls,\r\n  FilterDropdown,\r\n  EmptyState,\r\n  StatusDropdown,\r\n  LoadingSnackbar\r\n} from '@/components';\r\nimport { PulseStatus } from '@/components/SectionPulseIndicator';\r\nimport BulkActionsToolbar from '@/components/management/BulkActionsToolbar';\r\nimport FloatingActionButton from '@/components/management/FloatingActionButton';\r\nimport PasswordConfirmDialog from '@/components/dialogs/PasswordConfirmDialog';\r\nimport DeleteSocietyModal from '@/components/modals/DeleteSocietyModal';\r\n\r\ninterface Society {\r\n  id: number;\r\n  name: string;\r\n  societyId: string;\r\n  location?: string;\r\n  presidentName?: string;\r\n  contactPhone?: string;\r\n  email: string;\r\n  bmcId: number;\r\n  bmcName?: string;\r\n  status: 'active' | 'inactive' | 'maintenance' | 'suspended';\r\n  createdAt: string;\r\n  lastActivity?: string;\r\n  memberCount?: number;\r\n  totalCollections30d?: number;\r\n  totalQuantity30d?: number;\r\n  totalAmount30d?: number;\r\n  weightedFat30d?: number;\r\n  weightedSnf30d?: number;\r\n  weightedClr30d?: number;\r\n  weightedWater30d?: number;\r\n}\r\n\r\ninterface SocietyFormData {\r\n  name: string;\r\n  societyId: string;\r\n  password: string;\r\n  location: string;\r\n  presidentName: string;\r\n  contactPhone: string;\r\n  email: string;\r\n  bmcId: string;\r\n  status: 'active' | 'inactive' | 'maintenance' | 'suspended';\r\n}\r\n\r\nconst initialFormData: SocietyFormData = {\r\n  name: '',\r\n  societyId: '',\r\n  password: '',\r\n  location: '',\r\n  presidentName: '',\r\n  contactPhone: '',\r\n  email: '',\r\n  bmcId: '',\r\n  status: 'active'\r\n};\r\n\r\n// Helper function to highlight matching text in search results\r\nconst highlightText = (text: string | number | null | undefined, searchQuery: string) => {\r\n  if (!text && text !== 0) return text || '';\r\n  if (!searchQuery) return text;\r\n  \r\n  const textStr = text.toString();\r\n  const regex = new RegExp(`(${searchQuery.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\r\n  const parts = textStr.split(regex);\r\n  \r\n  return parts.map((part, index) => \r\n    regex.test(part) ? (\r\n      <span key={index} className=\"bg-yellow-200 dark:bg-yellow-800 px-0.5 rounded\">\r\n        {part}\r\n      </span>\r\n    ) : (\r\n      part\r\n    )\r\n  );\r\n};\r\n\r\nexport default function SocietyManagement() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const { user } = useUser();\r\n  const { t } = useLanguage();\r\n  \r\n  // State management\r\n  const [societies, setSocieties] = useState<Society[]>([]);\r\n  const [bmcs, setBmcs] = useState<Array<{ id: number; name: string; bmcId: string; dairyFarmId?: number }>>([]);\r\n  const [dairies, setDairies] = useState<Array<{ id: number; name: string; dairyId: string }>>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [bmcsLoading, setBmcsLoading] = useState(false);\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [showEditForm, setShowEditForm] = useState(false);\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [selectedSociety, setSelectedSociety] = useState<Society | null>(null);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [formData, setFormData] = useState<SocietyFormData>(initialFormData);\r\n  const [formLoading, setFormLoading] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'inactive' | 'maintenance' | 'suspended'>('all');\r\n  const [dairyFilter, setDairyFilter] = useState<string[]>([]);\r\n  const [bmcFilter, setBmcFilter] = useState<string[]>([]);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [fieldErrors, setFieldErrors] = useState<{\r\n    societyId?: string;\r\n    name?: string;\r\n    bmcId?: string;\r\n    contactPhone?: string;\r\n  }>({});\r\n  const [openMenuId, setOpenMenuId] = useState<number | null>(null);\r\n  const [selectedSocieties, setSelectedSocieties] = useState<Set<number>>(new Set());\r\n  const [bulkStatus, setBulkStatus] = useState<'active' | 'inactive' | 'maintenance' | 'suspended'>('active');\r\n  const [showBulkDeleteConfirm, setShowBulkDeleteConfirm] = useState(false);\r\n  const [showGraphModal, setShowGraphModal] = useState(false);\r\n  const [graphMetric, setGraphMetric] = useState<'quantity' | 'revenue' | 'fat' | 'snf' | 'collections' | 'water'>('quantity');\r\n  const [isDeletingBulk, setIsDeletingBulk] = useState(false);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [currentPassword, setCurrentPassword] = useState('');\r\n  const [showAddPassword, setShowAddPassword] = useState(false);\r\n  \r\n  // Pulse tracking state\r\n  const [pulseData, setPulseData] = useState<{\r\n    totalSocieties: number;\r\n    active: number;\r\n    ended: number;\r\n    notStarted: number;\r\n    inactive: number;\r\n    pulses: (PulseStatus & { societyName?: string })[];\r\n  } | null>(null);\r\n\r\n  // Fetch societies\r\n  const fetchSocieties = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) {\r\n        router.push('/login');\r\n        return;\r\n      }\r\n\r\n      const response = await fetch('/api/user/society', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (!response.ok) {\r\n        if (response.status === 401 || response.status === 403) {\r\n          localStorage.removeItem('authToken');\r\n          router.push('/login');\r\n          return;\r\n        }\r\n        throw new Error('Failed to fetch societies');\r\n      }\r\n\r\n      const result = await response.json();\r\n      // Transform snake_case to camelCase for consistent frontend usage\r\n      const transformedSocieties = (result.data || []).map((society: {\r\n        id: number;\r\n        name: string;\r\n        society_id: string;\r\n        location?: string;\r\n        president_name?: string;\r\n        contact_phone?: string;\r\n        email?: string;\r\n        bmc_id: number;\r\n        bmc_name?: string;\r\n        status: string;\r\n        created_at: string;\r\n        updated_at: string;\r\n        total_collections_30d?: number;\r\n        total_quantity_30d?: number;\r\n        total_amount_30d?: number;\r\n        weighted_fat_30d?: number;\r\n        weighted_snf_30d?: number;\r\n        weighted_clr_30d?: number;\r\n        weighted_water_30d?: number;\r\n      }) => ({\r\n        id: society.id,\r\n        name: society.name,\r\n        societyId: society.society_id,\r\n        location: society.location,\r\n        presidentName: society.president_name,\r\n        contactPhone: society.contact_phone,\r\n        email: society.email || '',\r\n        bmcId: society.bmc_id,\r\n        bmcName: society.bmc_name,\r\n        status: society.status as 'active' | 'inactive' | 'maintenance',\r\n        createdAt: society.created_at,\r\n        updatedAt: society.updated_at,\r\n        totalCollections30d: Number(society.total_collections_30d) || 0,\r\n        totalQuantity30d: Number(society.total_quantity_30d) || 0,\r\n        totalAmount30d: Number(society.total_amount_30d) || 0,\r\n        weightedFat30d: Number(society.weighted_fat_30d) || 0,\r\n        weightedSnf30d: Number(society.weighted_snf_30d) || 0,\r\n        weightedClr30d: Number(society.weighted_clr_30d) || 0,\r\n        weightedWater30d: Number(society.weighted_water_30d) || 0\r\n      }));\r\n      setSocieties(transformedSocieties);\r\n    } catch (error) {\r\n      console.error('Error fetching societies:', error);\r\n      setError('Failed to load society data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [router]);\r\n\r\n  // Fetch dairies for filtering\r\n  const fetchDairies = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch('/api/user/dairy', {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setDairies(data.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching dairies:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch BMCs for the dropdown\r\n  const fetchBmcs = useCallback(async () => {\r\n    try {\r\n      setBmcsLoading(true);\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch('/api/user/bmc', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        setBmcs(result.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching BMCs:', error);\r\n    } finally {\r\n      setBmcsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch pulse data for ECG indicators\r\n  const fetchPulseData = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) {\r\n        return;\r\n      }\r\n\r\n      const response = await fetch('/api/user/pulse', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user?.id?.toString() || ''\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        setPulseData(result.data || null);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching pulse data:', error);\r\n    }\r\n  }, [user?.id]);\r\n\r\n  // Close menu when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (openMenuId !== null) {\r\n        const target = event.target as HTMLElement;\r\n        if (!target.closest('.relative')) {\r\n          setOpenMenuId(null);\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, [openMenuId]);\r\n\r\n  // Handle society selection\r\n  const handleSelectSociety = (societyId: number) => {\r\n    setSelectedSocieties(prev => {\r\n      const newSelected = new Set(prev);\r\n      if (newSelected.has(societyId)) {\r\n        newSelected.delete(societyId);\r\n      } else {\r\n        newSelected.add(societyId);\r\n      }\r\n      return newSelected;\r\n    });\r\n  };\r\n\r\n  // Handle bulk status update\r\n  const handleBulkStatusUpdate = async (newStatus?: string) => {\r\n    if (selectedSocieties.size === 0) return;\r\n\r\n    const statusToUpdate = newStatus || bulkStatus;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('authToken');\r\n      const societyIds = Array.from(selectedSocieties);\r\n\r\n      console.log(`üîÑ Bulk updating ${societyIds.length} societies to status: ${statusToUpdate}`);\r\n\r\n      const updatePromises = societyIds.map(id => {\r\n        const society = societies.find(s => s.id === id);\r\n        if (!society) return Promise.resolve();\r\n\r\n        return fetch('/api/user/society', {\r\n          method: 'PUT',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            id: society.id,\r\n            name: society.name,\r\n            societyId: society.societyId,\r\n            location: society.location || '',\r\n            presidentName: society.presidentName || '',\r\n            contactPhone: society.contactPhone || '',\r\n            bmcId: society.bmcId,\r\n            status: statusToUpdate\r\n          })\r\n        });\r\n      });\r\n\r\n      await Promise.all(updatePromises);\r\n      \r\n      console.log(`‚úÖ Successfully updated ${societyIds.length} societies to ${statusToUpdate}`);\r\n      \r\n      setSuccess(`Updated ${societyIds.length} ${societyIds.length === 1 ? 'society' : 'societies'} to ${statusToUpdate}!`);\r\n      await fetchSocieties();\r\n      setSelectedSocieties(new Set());\r\n      setTimeout(() => setSuccess(''), 3000);\r\n    } catch (error) {\r\n      console.error('Bulk update error:', error);\r\n      setError('Failed to update societies');\r\n      setTimeout(() => setError(''), 5000);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Handle bulk delete - show confirmation dialog\r\n  const handleBulkDeleteClick = () => {\r\n    if (selectedSocieties.size === 0) return;\r\n    setShowBulkDeleteConfirm(true);\r\n  };\r\n\r\n  // Handle select all societies\r\n  const handleSelectAll = () => {\r\n    const allSocietyIds = new Set(filteredSocieties.map(society => society.id));\r\n    setSelectedSocieties(allSocietyIds);\r\n  };\r\n\r\n  // Handle bulk delete with password confirmation\r\n  const handleBulkDeleteConfirm = async (password: string) => {\r\n    setShowBulkDeleteConfirm(false);\r\n    setIsDeletingBulk(true);\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const societyIds = Array.from(selectedSocieties);\r\n\r\n      console.log(`üóëÔ∏è Bulk deleting ${societyIds.length} societies with password verification:`, societyIds);\r\n\r\n      // Delete societies in parallel with password verification\r\n      const deletePromises = societyIds.map(id => \r\n        fetch('/api/user/society/delete', {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({ id, password })\r\n        }).then(async (res) => {\r\n          if (!res.ok) {\r\n            const error = await res.json();\r\n            throw new Error(error.error || 'Delete failed');\r\n          }\r\n          return res.json();\r\n        })\r\n      );\r\n\r\n      const results = await Promise.allSettled(deletePromises);\r\n      const successful = results.filter(r => r.status === 'fulfilled').length;\r\n      const failed = results.filter(r => r.status === 'rejected').length;\r\n      \r\n      if (successful > 0) {\r\n        console.log(`‚úÖ Successfully deleted ${successful} societies`);\r\n        setSuccess(`Successfully deleted ${successful} ${successful === 1 ? 'society' : 'societies'}${failed > 0 ? `. ${failed} failed.` : ''}`);\r\n        await fetchSocieties();\r\n        setSelectedSocieties(new Set());\r\n        setTimeout(() => setSuccess(''), 5000);\r\n      } else {\r\n        console.error(`‚ùå Failed to delete all ${societyIds.length} societies`);\r\n        setError('Failed to delete societies. Please check your password and try again.');\r\n        setTimeout(() => setError(''), 5000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Bulk delete error:', error);\r\n      setError(error instanceof Error ? error.message : 'Failed to delete societies');\r\n      setTimeout(() => setError(''), 5000);\r\n    } finally {\r\n      setIsDeletingBulk(false);\r\n    }\r\n  };\r\n\r\n  // Add new society\r\n  const handleAddSociety = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setFormLoading(true);\r\n    setError('');\r\n\r\n    // Validate required fields\r\n    if (!formData.bmcId) {\r\n      setError('Please select a BMC');\r\n      setFormLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/society', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          ...formData,\r\n          bmcId: parseInt(formData.bmcId)\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSuccess('Society added successfully!');\r\n        setShowAddForm(false);\r\n        setFormData(initialFormData);\r\n        await fetchSocieties();\r\n        \r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        const errorResponse = await response.json();\r\n        const errorMessage = errorResponse.error || 'Failed to add society';\r\n        \r\n        // Clear previous field errors\r\n        setFieldErrors({});\r\n        \r\n        // Check for specific field errors\r\n        if (errorMessage.toLowerCase().includes('society id') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ societyId: 'This Society ID already exists' });\r\n        } else if (errorMessage.toLowerCase().includes('society name') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ name: 'This Society name already exists' });\r\n        } else {\r\n          setError(errorMessage);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding society:', error);\r\n      setError('Failed to add society');\r\n    } finally {\r\n      setFormLoading(false);\r\n    }\r\n  };\r\n\r\n  // Edit society\r\n  const handleEditSociety = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!selectedSociety) return;\r\n\r\n    setFormLoading(true);\r\n    setError('');\r\n\r\n    // Validate required fields\r\n    if (!formData.bmcId) {\r\n      setError('Please select a BMC');\r\n      setFormLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const updateData: {\r\n        id: number;\r\n        name: string;\r\n        location: string;\r\n        presidentName: string;\r\n        contactPhone: string;\r\n        email: string;\r\n        bmcId?: number;\r\n        status?: 'active' | 'inactive' | 'maintenance' | 'suspended';\r\n        password?: string;\r\n      } = {\r\n        id: selectedSociety.id,\r\n        name: formData.name,\r\n        location: formData.location,\r\n        presidentName: formData.presidentName,\r\n        contactPhone: formData.contactPhone,\r\n        email: formData.email,\r\n        bmcId: parseInt(formData.bmcId),\r\n        status: formData.status\r\n      };\r\n\r\n      // Only include password if it was changed from the original\r\n      if (formData.password && formData.password !== currentPassword) {\r\n        updateData.password = formData.password;\r\n      }\r\n\r\n      const response = await fetch('/api/user/society', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(updateData)\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSuccess('Society updated successfully!');\r\n        setShowEditForm(false);\r\n        setSelectedSociety(null);\r\n        setFormData(initialFormData);\r\n        await fetchSocieties();\r\n        \r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        const errorResponse = await response.json();\r\n        const errorMessage = errorResponse.error || 'Failed to update society';\r\n        \r\n        // Clear previous field errors\r\n        setFieldErrors({});\r\n        \r\n        // Check for specific field errors\r\n        if (errorMessage.toLowerCase().includes('society id') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ societyId: 'This Society ID already exists' });\r\n        } else if (errorMessage.toLowerCase().includes('society name') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ name: 'This Society name already exists' });\r\n        } else {\r\n          setError(errorMessage);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating society:', error);\r\n      setError('Failed to update society');\r\n    } finally {\r\n      setFormLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n\r\n  // Delete society with OTP confirmation\r\n  const handleConfirmDelete = async (otp: string) => {\r\n    if (!selectedSociety) return;\r\n\r\n    setIsDeleting(true);\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch(`/api/user/society/delete?id=${selectedSociety.id}&otp=${otp}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to delete society');\r\n      }\r\n\r\n      setSuccess('Society and all related data deleted successfully!');\r\n      setShowDeleteModal(false);\r\n      setSelectedSociety(null);\r\n      await fetchSocieties();\r\n      setTimeout(() => setSuccess(''), 3000);\r\n    } catch (error) {\r\n      console.error('Error deleting society:', error);\r\n      setError(error instanceof Error ? error.message : 'Failed to delete society');\r\n      setTimeout(() => setError(''), 5000);\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  // Handle form input changes\r\n  const handleInputChange = (field: keyof SocietyFormData, value: string) => {\r\n    // Auto-prefix society ID with \"S-\" only for new societies (add form)\r\n    if (field === 'societyId' && showAddForm && !value.startsWith('S-') && value.length > 0) {\r\n      value = `S-${value.replace(/^S-/, '')}`;\r\n    }\r\n    \r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n    \r\n    // Clear field-specific errors when user types\r\n    if (fieldErrors[field as keyof typeof fieldErrors]) {\r\n      setFieldErrors(prev => ({\r\n        ...prev,\r\n        [field]: undefined\r\n      }));\r\n    }\r\n  };\r\n\r\n  // Open edit modal\r\n  const handleEditClick = async (society: Society) => {\r\n    setSelectedSociety(society);\r\n    setFieldErrors({}); // Clear field errors\r\n    setError(''); // Clear general errors\r\n    setShowPassword(false); // Reset password visibility\r\n    fetchBmcs(); // Load BMCs when opening edit form\r\n    \r\n    // Fetch current password from database\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch(`/api/user/society/password?id=${society.id}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      console.log('Password fetch response status:', response.status);\r\n      \r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        console.log('Password fetch result:', result);\r\n        // Handle both wrapped (result.data.password) and direct (result.password) responses\r\n        const fetchedPassword = result.data?.password || result.password || '';\r\n        console.log('Fetched password:', fetchedPassword);\r\n        setCurrentPassword(fetchedPassword);\r\n        \r\n        // Set form data with fetched password\r\n        setFormData({\r\n          name: society.name,\r\n          societyId: society.societyId,\r\n          password: fetchedPassword,\r\n          location: society.location || '',\r\n          presidentName: society.presidentName || '',\r\n          contactPhone: society.contactPhone || '',\r\n          email: society.email || '',\r\n          bmcId: society.bmcId?.toString() || '',\r\n          status: society.status\r\n        });\r\n      } else {\r\n        const errorData = await response.json();\r\n        console.error('Password fetch failed:', errorData);\r\n        // Fallback if password fetch fails\r\n        setCurrentPassword('');\r\n        setFormData({\r\n          name: society.name,\r\n          societyId: society.societyId,\r\n          password: '',\r\n          location: society.location || '',\r\n          presidentName: society.presidentName || '',\r\n          contactPhone: society.contactPhone || '',\r\n          email: society.email || '',\r\n          bmcId: society.bmcId?.toString() || '',\r\n          status: society.status\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching password:', error);\r\n      setCurrentPassword('');\r\n      setFormData({\r\n        name: society.name,\r\n        societyId: society.societyId,\r\n        password: '',\r\n        location: society.location || '',\r\n        presidentName: society.presidentName || '',\r\n        contactPhone: society.contactPhone || '',\r\n        email: society.email || '',\r\n        bmcId: society.bmcId?.toString() || '',\r\n        status: society.status\r\n      });\r\n    }\r\n    \r\n    setShowEditForm(true);\r\n  };\r\n\r\n  // Open delete modal\r\n  const handleDeleteClick = (society: Society) => {\r\n    setSelectedSociety(society);\r\n    // Store society ID for OTP modal\r\n    (window as { selectedSocietyId?: number }).selectedSocietyId = society.id;\r\n    setShowDeleteModal(true);\r\n  };\r\n\r\n  // Handle status change\r\n  const handleStatusChange = async (society: Society, newStatus: 'active' | 'inactive' | 'maintenance' | 'suspended') => {\r\n    console.log('Status change triggered:', { societyId: society.id, currentStatus: society.status, newStatus });\r\n    \r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('authToken');\r\n      \r\n      const payload = {\r\n        id: society.id,\r\n        name: society.name,\r\n        societyId: society.societyId,\r\n        location: society.location || '',\r\n        presidentName: society.presidentName || '',\r\n        contactPhone: society.contactPhone || '',\r\n        bmcId: society.bmcId,\r\n        status: newStatus\r\n      };\r\n      \r\n      console.log('Sending update request:', payload);\r\n      \r\n      const response = await fetch('/api/user/society', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(payload)\r\n      });\r\n\r\n      const result = await response.json();\r\n      console.log('API response:', { status: response.status, data: result });\r\n\r\n      if (response.ok) {\r\n        setSuccess(`Status updated to ${newStatus}!`);\r\n        await fetchSocieties();\r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        const errorMessage = result.error || 'Failed to update status';\r\n        console.error('Update failed:', errorMessage);\r\n        setError(errorMessage);\r\n        setTimeout(() => setError(''), 5000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating status:', error);\r\n      setError('Failed to update status');\r\n      setTimeout(() => setError(''), 5000);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Filter societies based on search term and status\r\n  const filteredSocieties = societies.filter(society => {\r\n    const matchesSearch = searchQuery === '' ||\r\n                         society.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         society.societyId.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         society.presidentName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         society.location?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         society.contactPhone?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         society.bmcName?.toLowerCase().includes(searchQuery.toLowerCase());\r\n    \r\n    const matchesStatus = statusFilter === 'all' || society.status === statusFilter;\r\n    \r\n    // Find the BMC for this society\r\n    const societyBmc = bmcs.find(b => b.id === society.bmcId);\r\n    \r\n    // Filter by BMC if bmcFilter is set\r\n    const matchesBmc = bmcFilter.length === 0 || bmcFilter.includes(societyBmc?.id.toString() || '');\r\n    \r\n    // Filter by Dairy - if dairy is selected, check if the society's BMC belongs to that dairy\r\n    const matchesDairy = dairyFilter.length === 0 || \r\n                        (societyBmc?.dairyFarmId ? dairyFilter.includes(societyBmc.dairyFarmId.toString()) : false);\r\n    \r\n    return matchesSearch && matchesStatus && matchesBmc && matchesDairy;\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchSocieties();\r\n    fetchDairies();\r\n    fetchBmcs();\r\n    fetchPulseData();\r\n    \r\n    // Apply BMC filter from URL if present\r\n    const bmcFilterParam = searchParams.get('bmcFilter');\r\n    if (bmcFilterParam) {\r\n      setBmcFilter([bmcFilterParam]);\r\n    }\r\n    \r\n    // Apply Dairy filter from URL if present\r\n    const dairyFilterParam = searchParams.get('dairyFilter');\r\n    if (dairyFilterParam) {\r\n      setDairyFilter([dairyFilterParam]);\r\n    }\r\n    \r\n    // Poll pulse data every 30 seconds for live updates\r\n    const pulseInterval = setInterval(() => {\r\n      fetchPulseData();\r\n    }, 30000); // 30 seconds\r\n    \r\n    return () => clearInterval(pulseInterval);\r\n  }, [fetchSocieties, fetchDairies, fetchBmcs, fetchPulseData, searchParams]);\r\n\r\n  // Listen for global search events from header\r\n  useEffect(() => {\r\n    const handleGlobalSearch = (event: Event) => {\r\n      const customEvent = event as CustomEvent;\r\n      const query = customEvent.detail?.query || '';\r\n      setSearchQuery(query);\r\n    };\r\n    window.addEventListener('globalSearch', handleGlobalSearch);\r\n    return () => window.removeEventListener('globalSearch', handleGlobalSearch);\r\n  }, []);\r\n\r\n  // Don't render until user is loaded from context\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\r\n        <FlowerSpinner size={48} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <div className=\"p-4 sm:p-6 lg:p-8 space-y-4 sm:space-y-6 lg:pb-8\">\r\n      {/* Page Header */}\r\n      <PageHeader\r\n        title=\"Society Management\"\r\n        subtitle=\"Manage societies and their operations\"\r\n        icon={<Users className=\"w-5 h-5 sm:w-6 sm:h-6\" />}\r\n        onRefresh={fetchSocieties}\r\n      />\r\n\r\n      {/* Success/Error Messages */}\r\n      <StatusMessage \r\n        success={success} \r\n        error={error}\r\n      />\r\n\r\n      {/* Top Performers Section */}\r\n      {societies.length > 0 && (() => {\r\n        const societiesWithStats = societies.filter(s => s.totalQuantity30d && s.totalQuantity30d > 0);\r\n        \r\n        const topCollection = [...societiesWithStats].sort((a, b) => \r\n          (b.totalQuantity30d || 0) - (a.totalQuantity30d || 0)\r\n        )[0];\r\n        \r\n        const topRevenue = [...societiesWithStats].sort((a, b) => \r\n          (b.totalAmount30d || 0) - (a.totalAmount30d || 0)\r\n        )[0];\r\n        \r\n        const topFat = [...societiesWithStats].sort((a, b) => \r\n          (b.weightedFat30d || 0) - (a.weightedFat30d || 0)\r\n        )[0];\r\n        \r\n        const topSnf = [...societiesWithStats].sort((a, b) => \r\n          (b.weightedSnf30d || 0) - (a.weightedSnf30d || 0)\r\n        )[0];\r\n        \r\n        const mostCollections = [...societiesWithStats].sort((a, b) => \r\n          (b.totalCollections30d || 0) - (a.totalCollections30d || 0)\r\n        )[0];\r\n        \r\n        const mostWater = [...societiesWithStats].sort((a, b) => \r\n          (b.weightedWater30d || 0) - (a.weightedWater30d || 0)\r\n        )[0];\r\n\r\n        return (\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3 sm:gap-4\">\r\n            {topCollection && (\r\n              <div \r\n                className=\"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-4 rounded-lg border border-green-200 dark:border-green-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                onClick={() => {\r\n                  setGraphMetric('quantity');\r\n                  setShowGraphModal(true);\r\n                }}\r\n              >\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <h3 className=\"text-sm font-semibold text-green-900 dark:text-green-100\">Top Collection (30d)</h3>\r\n                  <Users className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\r\n                </div>\r\n                <p className=\"text-lg font-bold text-green-800 dark:text-green-200\">{topCollection.name}</p>\r\n                <p className=\"text-sm text-green-600 dark:text-green-400\">{topCollection.totalQuantity30d?.toFixed(2)} L</p>\r\n              </div>\r\n            )}\r\n            \r\n            {topRevenue && (\r\n              <div \r\n                className=\"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                onClick={() => {\r\n                  setGraphMetric('revenue');\r\n                  setShowGraphModal(true);\r\n                }}\r\n              >\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <h3 className=\"text-sm font-semibold text-blue-900 dark:text-blue-100\">Top Revenue (30d)</h3>\r\n                  <Building2 className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\r\n                </div>\r\n                <p className=\"text-lg font-bold text-blue-800 dark:text-blue-200\">{topRevenue.name}</p>\r\n                <p className=\"text-sm text-blue-600 dark:text-blue-400\">‚Çπ{topRevenue.totalAmount30d?.toFixed(2)}</p>\r\n              </div>\r\n            )}\r\n            \r\n            {topFat && (\r\n              <div \r\n                className=\"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-4 rounded-lg border border-purple-200 dark:border-purple-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                onClick={() => {\r\n                  setGraphMetric('fat');\r\n                  setShowGraphModal(true);\r\n                }}\r\n              >\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <h3 className=\"text-sm font-semibold text-purple-900 dark:text-purple-100\">Best Quality (30d)</h3>\r\n                  <Eye className=\"w-5 h-5 text-purple-600 dark:text-purple-400\" />\r\n                </div>\r\n                <p className=\"text-lg font-bold text-purple-800 dark:text-purple-200\">{topFat.name}</p>\r\n                <p className=\"text-sm text-purple-600 dark:text-purple-400\">{topFat.weightedFat30d?.toFixed(2)}% Fat</p>\r\n              </div>\r\n            )}\r\n            \r\n            {topSnf && (\r\n              <div \r\n                className=\"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 p-4 rounded-lg border border-orange-200 dark:border-orange-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                onClick={() => {\r\n                  setGraphMetric('snf');\r\n                  setShowGraphModal(true);\r\n                }}\r\n              >\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <h3 className=\"text-sm font-semibold text-orange-900 dark:text-orange-100\">Best SNF (30d)</h3>\r\n                  <TrendingUp className=\"w-5 h-5 text-orange-600 dark:text-orange-400\" />\r\n                </div>\r\n                <p className=\"text-lg font-bold text-orange-800 dark:text-orange-200\">{topSnf.name}</p>\r\n                <p className=\"text-sm text-orange-600 dark:text-orange-400\">{topSnf.weightedSnf30d?.toFixed(2)}% SNF</p>\r\n              </div>\r\n            )}\r\n            \r\n            {mostCollections && (\r\n              <div \r\n                className=\"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 p-4 rounded-lg border border-pink-200 dark:border-pink-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                onClick={() => {\r\n                  setGraphMetric('collections');\r\n                  setShowGraphModal(true);\r\n                }}\r\n              >\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <h3 className=\"text-sm font-semibold text-pink-900 dark:text-pink-100\">Most Active (30d)</h3>\r\n                  <Award className=\"w-5 h-5 text-pink-600 dark:text-pink-400\" />\r\n                </div>\r\n                <p className=\"text-lg font-bold text-pink-800 dark:text-pink-200\">{mostCollections.name}</p>\r\n                <p className=\"text-sm text-pink-600 dark:text-pink-400\">{mostCollections.totalCollections30d} Collections</p>\r\n              </div>\r\n            )}\r\n            \r\n            {mostWater && (\r\n              <div \r\n                className=\"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 p-4 rounded-lg border border-red-200 dark:border-red-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                onClick={() => {\r\n                  setGraphMetric('water');\r\n                  setShowGraphModal(true);\r\n                }}\r\n              >\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <h3 className=\"text-sm font-semibold text-red-900 dark:text-red-100\">Most Water (30d)</h3>\r\n                  <Droplets className=\"w-5 h-5 text-red-600 dark:text-red-400\" />\r\n                </div>\r\n                <p className=\"text-lg font-bold text-red-800 dark:text-red-200\">{mostWater.name}</p>\r\n                <p className=\"text-sm text-red-600 dark:text-red-400\">{mostWater.weightedWater30d?.toFixed(2)}% Water</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n      })()}\r\n\r\n      {/* Filter Controls */}\r\n      {/* FilterDropdown for Dairy and BMC */}\r\n      <FilterDropdown\r\n        statusFilter={statusFilter}\r\n        onStatusChange={(value) => setStatusFilter(value as typeof statusFilter)}\r\n        dairyFilter={dairyFilter}\r\n        onDairyChange={(value) => setDairyFilter(Array.isArray(value) ? value : [value])}\r\n        bmcFilter={bmcFilter}\r\n        onBmcChange={(value) => setBmcFilter(Array.isArray(value) ? value : [value])}\r\n        societyFilter={[]}\r\n        onSocietyChange={() => {}}\r\n        machineFilter={[]}\r\n        onMachineChange={() => {}}\r\n        dairies={dairies}\r\n        bmcs={bmcs}\r\n        societies={societies.map(s => ({ ...s, bmc_id: s.bmcId, society_id: s.societyId }))}\r\n        machines={[]}\r\n        filteredCount={filteredSocieties.length}\r\n        totalCount={societies.length}\r\n        searchQuery={searchQuery}\r\n        hideMainFilterButton={true}\r\n        hideSocietyFilter={true}\r\n      />\r\n\r\n      <FilterControls\r\n        icon={<Users className=\"w-4 h-4\" />}\r\n        showingText={`Showing ${filteredSocieties.length} of ${societies.length} societies`}\r\n        filterValue={statusFilter}\r\n        filterOptions={[\r\n          { value: 'all', label: 'All Status' },\r\n          { value: 'active', label: 'Active' },\r\n          { value: 'inactive', label: 'Inactive' },\r\n          { value: 'maintenance', label: 'Maintenance' },\r\n          { value: 'suspended', label: 'Suspended' }\r\n        ]}\r\n        onFilterChange={(value) => setStatusFilter(value as typeof statusFilter)}\r\n      />\r\n\r\n      {/* Main Content */}\r\n      {loading ? (\r\n        <LoadingSpinner />\r\n      ) : filteredSocieties.length > 0 ? (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6\">\r\n          {filteredSocieties.map((society) => (\r\n            <div key={society.id} className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-lg transition-all duration-200 overflow-visible border border-gray-200 dark:border-gray-700 hover:border-green-200 dark:hover:border-green-700 relative z-10 hover:z-20\">\r\n              {/* Header */}\r\n              <div className=\"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 border-b border-gray-200 dark:border-gray-700 rounded-t-lg\">\r\n                <div className=\"flex items-start justify-between gap-3\">\r\n                  <div className=\"flex items-center gap-3 flex-1 min-w-0\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedSocieties.has(society.id)}\r\n                      onChange={() => handleSelectSociety(society.id)}\r\n                      onClick={(e) => e.stopPropagation()}\r\n                      className=\"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 flex-shrink-0\"\r\n                    />\r\n                    <div className=\"p-2 bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30 rounded-lg flex-shrink-0\">\r\n                      <Building2 className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\r\n                    </div>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white truncate\">{highlightText(society.name, searchQuery)}</h3>\r\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400\">{highlightText(society.societyId, searchQuery)}</p>\r\n                    </div>\r\n                  </div>\r\n                  <StatusDropdown\r\n                    currentStatus={society.status}\r\n                    onStatusChange={(status) => handleStatusChange(society, status as 'active' | 'inactive' | 'maintenance' | 'suspended')}\r\n                    options={[\r\n                      {\r\n                        status: 'active',\r\n                        label: 'Active',\r\n                        color: 'bg-green-500',\r\n                        bgColor: 'hover:bg-green-50 dark:hover:bg-green-900/30'\r\n                      },\r\n                      {\r\n                        status: 'inactive',\r\n                        label: 'Inactive',\r\n                        color: 'bg-red-500',\r\n                        bgColor: 'hover:bg-red-50 dark:hover:bg-red-900/30'\r\n                      },\r\n                      {\r\n                        status: 'maintenance',\r\n                        label: 'Maintenance',\r\n                        color: 'bg-yellow-500',\r\n                        bgColor: 'hover:bg-yellow-50 dark:hover:bg-yellow-900/30'\r\n                      },\r\n                      {\r\n                        status: 'suspended',\r\n                        label: 'Suspended',\r\n                        color: 'bg-orange-500',\r\n                        bgColor: 'hover:bg-orange-50 dark:hover:bg-orange-900/30'\r\n                      }\r\n                    ]}\r\n                    compact={true}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Content */}\r\n              <div className=\"p-4 space-y-3\">\r\n                {/* Basic Info - Two Columns */}\r\n                <div className=\"grid grid-cols-2 gap-3\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <User className=\"w-4 h-4 text-gray-500 flex-shrink-0\" />\r\n                    <span className=\"text-sm text-gray-700 dark:text-gray-300 truncate\">{highlightText(society.presidentName || 'No President', searchQuery)}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Phone className=\"w-4 h-4 text-gray-500 flex-shrink-0\" />\r\n                    <span className=\"text-sm text-gray-700 dark:text-gray-300 truncate\">{highlightText(society.contactPhone || 'No Phone', searchQuery)}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Location & BMC - Two Columns */}\r\n                <div className=\"grid grid-cols-2 gap-3\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <MapPin className=\"w-4 h-4 text-gray-500 flex-shrink-0\" />\r\n                    <span className=\"text-sm text-gray-700 dark:text-gray-300 truncate\">{highlightText(society.location || 'No Location', searchQuery)}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Building2 className=\"w-4 h-4 text-blue-500 flex-shrink-0\" />\r\n                    <span className=\"text-sm text-blue-600 dark:text-blue-400 font-medium truncate\">{highlightText(society.bmcName || 'No BMC', searchQuery)}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Divider */}\r\n                <div className=\"border-t border-gray-200 dark:border-gray-700 my-3\"></div>\r\n\r\n                {/* 30-Day Statistics Header */}\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide\">Last 30 Days</span>\r\n                  <Calendar className=\"w-4 h-4 text-gray-400\" />\r\n                </div>\r\n\r\n                {/* Collections & Quantity */}\r\n                <div className=\"flex items-center justify-between bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-blue-500\"></div>\r\n                    <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Collections</span>\r\n                  </div>\r\n                  <div className=\"text-right\">\r\n                    <div className=\"text-lg font-bold text-blue-600 dark:text-blue-400\">{society.totalCollections30d || 0}</div>\r\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400\">{(society.totalQuantity30d || 0).toFixed(2)} Liters</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Quality Metrics - Three Columns */}\r\n                <div className=\"grid grid-cols-3 gap-2\">\r\n                  <div className=\"bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-2 text-center\">\r\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">Fat</div>\r\n                    <div className=\"text-sm font-bold text-indigo-600 dark:text-indigo-400\">{(society.weightedFat30d || 0).toFixed(2)}%</div>\r\n                  </div>\r\n                  <div className=\"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-2 text-center\">\r\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">SNF</div>\r\n                    <div className=\"text-sm font-bold text-purple-600 dark:text-purple-400\">{(society.weightedSnf30d || 0).toFixed(2)}%</div>\r\n                  </div>\r\n                  <div className=\"bg-pink-50 dark:bg-pink-900/20 rounded-lg p-2 text-center\">\r\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">CLR</div>\r\n                    <div className=\"text-sm font-bold text-pink-600 dark:text-pink-400\">{(society.weightedClr30d || 0).toFixed(1)}</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Revenue */}\r\n                <div className=\"flex items-center justify-between bg-emerald-50 dark:bg-emerald-900/20 rounded-lg p-3\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-emerald-500\"></div>\r\n                    <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Total Revenue</span>\r\n                  </div>\r\n                  <div className=\"text-lg font-bold text-emerald-600 dark:text-emerald-400\">\r\n                    ‚Çπ{(society.totalAmount30d || 0).toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Footer Actions */}\r\n              <div className=\"bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-100 dark:border-gray-700 flex items-center justify-between gap-2 rounded-b-lg\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <button\r\n                    onClick={() => handleEditClick(society)}\r\n                    className=\"p-2 text-gray-400 dark:text-gray-500 hover:text-green-600 dark:hover:text-green-400 transition-colors rounded-lg hover:bg-green-50 dark:hover:bg-green-900/30\"\r\n                    title=\"Edit\"\r\n                  >\r\n                    <Edit3 className=\"w-4 h-4\" />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDeleteClick(society)}\r\n                    className=\"p-2 text-gray-400 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 transition-colors rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30\"\r\n                    title=\"Delete\"\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4\" />\r\n                  </button>\r\n                  \r\n                  {/* Pulse Indicator - ECG Style */}\r\n                  {(() => {\r\n                    const societyPulse = pulseData?.pulses?.find(p => p.societyId === society.id);\r\n                    const hasActivePulse = societyPulse?.pulseStatus === 'active';\r\n                    const hasPausedPulse = societyPulse?.pulseStatus === 'paused';\r\n                    const hasEndedPulse = societyPulse?.pulseStatus === 'ended';\r\n                    const isInactive = societyPulse?.pulseStatus === 'inactive';\r\n                    \r\n                    // Determine color based on status\r\n                    const getColor = () => {\r\n                      if (hasActivePulse) return 'text-green-500';\r\n                      if (hasPausedPulse) return 'text-orange-500';\r\n                      if (hasEndedPulse) return 'text-red-500';\r\n                      if (isInactive) return 'text-gray-400';\r\n                      return 'text-gray-300';\r\n                    };\r\n                    \r\n                    // Determine status text\r\n                    const getStatusText = () => {\r\n                      if (hasActivePulse) return 'Active';\r\n                      if (hasPausedPulse) return 'Paused';\r\n                      if (hasEndedPulse) return 'Ended';\r\n                      if (isInactive) return `${societyPulse.inactiveDays}d`;\r\n                      return 'No Pulse';\r\n                    };\r\n                    \r\n                    // Generate tooltip with section start time from database\r\n                    const getTooltip = () => {\r\n                      if (!societyPulse) return 'No Pulse';\r\n                      \r\n                      const formatDateTime = (dateTime: Date | string | null | undefined, addOffset = false) => {\r\n                        if (!dateTime) return 'N/A';\r\n                        const str = dateTime.toString();\r\n                        const dateMatch = str.match(/(\\d{4})-(\\d{2})-(\\d{2})/);\r\n                        const timeMatch = str.match(/(\\d{2}):(\\d{2}):(\\d{2})/);\r\n                        if (dateMatch && timeMatch) {\r\n                          let hours = parseInt(timeMatch[1]);\r\n                          let minutes = parseInt(timeMatch[2]);\r\n                          const seconds = timeMatch[3];\r\n\r\n                          if (addOffset) {\r\n                            // Add 5 hours 30 minutes\r\n                            minutes += 30;\r\n                            hours += 5;\r\n                            if (minutes >= 60) {\r\n                              hours += 1;\r\n                              minutes -= 60;\r\n                            }\r\n                            if (hours >= 24) {\r\n                              hours -= 24;\r\n                            }\r\n                          }\r\n\r\n                          const formattedHours = hours.toString().padStart(2, '0');\r\n                          const formattedMinutes = minutes.toString().padStart(2, '0');\r\n                          return `${dateMatch[1]}-${dateMatch[2]}-${dateMatch[3]} ${formattedHours}:${formattedMinutes}:${seconds}`;\r\n                        }\r\n                        return 'N/A';\r\n                      };\r\n\r\n                      const startTime = formatDateTime(societyPulse.createdAt);\r\n                      const lastCollection = formatDateTime(societyPulse.lastCollectionTime, true); // Add +5:30 for pause time\r\n                      const endTime = formatDateTime(societyPulse.sectionEndTime);\r\n\r\n                      // Active: Show only start time\r\n                      if (societyPulse.pulseStatus === 'active') {\r\n                        return `Section Start: ${startTime}`;\r\n                      }\r\n\r\n                      // Paused: Show start time and paused time (last collection time + 5:30)\r\n                      if (societyPulse.pulseStatus === 'paused') {\r\n                        return `Start: ${startTime}\\nPaused: ${lastCollection}`;\r\n                      }\r\n\r\n                      // Ended: Show start time and end time\r\n                      if (societyPulse.pulseStatus === 'ended') {\r\n                        return `Start: ${startTime}\\nEnd: ${endTime}`;\r\n                      }\r\n\r\n                      // Inactive or other statuses\r\n                      if (societyPulse.createdAt) {\r\n                        return `Section Start: ${startTime}`;\r\n                      }\r\n                      \r\n                      return societyPulse.statusMessage || getStatusText();\r\n                    };\r\n                    \r\n                    return (\r\n                      <div \r\n                        className=\"flex items-center gap-1.5 ml-2 pl-2 border-l border-gray-200 dark:border-gray-700\" \r\n                        title={getTooltip()}\r\n                      >\r\n                        {/* ECG Wave or Flatline */}\r\n                        <svg \r\n                          className={`w-6 h-4 ${getColor()}`} \r\n                          viewBox=\"0 0 24 16\" \r\n                          fill=\"none\" \r\n                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                        >\r\n                          {hasActivePulse ? (\r\n                            // ECG waveform for active pulse\r\n                            <path\r\n                              d=\"M0 8 L5 8 L6 3 L7 13 L8 8 L10 8 L11 5 L12 11 L13 8 L24 8\"\r\n                              stroke=\"currentColor\"\r\n                              strokeWidth=\"1.5\"\r\n                              strokeLinecap=\"round\"\r\n                              strokeLinejoin=\"round\"\r\n                              className=\"animate-pulse\"\r\n                            />\r\n                          ) : (\r\n                            // Flatline for no pulse/ended/inactive\r\n                            <path\r\n                              d=\"M0 8 L24 8\"\r\n                              stroke=\"currentColor\"\r\n                              strokeWidth=\"1.5\"\r\n                              strokeLinecap=\"round\"\r\n                            />\r\n                          )}\r\n                        </svg>\r\n                        <span className={`text-xs ${getColor()}`}>\r\n                          {getStatusText()}\r\n                        </span>\r\n                      </div>\r\n                    );\r\n                  })()}\r\n                </div>\r\n                <button\r\n                  onClick={() => router.push(`/admin/society/${society.id}`)}\r\n                  className=\"flex items-center px-3 py-1.5 text-sm text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg transition-colors\"\r\n                >\r\n                  <Eye className=\"w-4 h-4 mr-1\" />\r\n                  <span>View</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <EmptyState\r\n          icon={<Users className=\"w-12 h-12 sm:w-16 sm:h-16 text-gray-400\" />}\r\n          title={societies.length === 0 ? 'No societies found' : 'No matching societies'}\r\n          message={societies.length === 0 \r\n            ? 'Get started by adding your first society to the system.'\r\n            : 'Try changing your search or filter criteria.'\r\n          }\r\n          actionText={societies.length === 0 ? 'Add First Society' : undefined}\r\n          onAction={societies.length === 0 ? () => {\r\n            setFieldErrors({}); // Clear field errors\r\n            setError(''); // Clear general errors\r\n            setShowAddForm(true);\r\n            fetchBmcs();\r\n          } : undefined}\r\n          showAction={societies.length === 0}\r\n        />\r\n      )}\r\n      </div>\r\n\r\n      {/* Bulk Actions Toolbar */}\r\n      <BulkActionsToolbar\r\n        selectedCount={selectedSocieties.size}\r\n        totalCount={filteredSocieties.length}\r\n        onBulkDelete={handleBulkDeleteClick}\r\n        onBulkStatusUpdate={handleBulkStatusUpdate}\r\n        onSelectAll={handleSelectAll}\r\n        onClearSelection={() => {\r\n          setSelectedSocieties(new Set());\r\n        }}\r\n        itemType=\"society\"\r\n        showStatusUpdate={true}\r\n        currentBulkStatus={bulkStatus}\r\n        onBulkStatusChange={(status) => setBulkStatus(status as typeof bulkStatus)}\r\n      />\r\n\r\n      {/* Floating Action Button */}\r\n      <FloatingActionButton\r\n        actions={[\r\n          {\r\n            icon: <Plus className=\"w-6 h-6 text-white\" />,\r\n            label: 'Add Society',\r\n            onClick: () => {\r\n              setFieldErrors({});\r\n              setError('');\r\n              setShowAddForm(true);\r\n              fetchBmcs();\r\n            },\r\n            color: 'bg-gradient-to-br from-blue-500 to-blue-600'\r\n          }\r\n        ]}\r\n        directClick={true}\r\n      />\r\n\r\n      {/* Add Society Modal - Positioned outside main container */}\r\n      <FormModal\r\n        isOpen={showAddForm}\r\n        onClose={() => setShowAddForm(false)}\r\n        title=\"Add New Society\"\r\n        maxWidth=\"lg\"\r\n      >\r\n        <form onSubmit={handleAddSociety} className=\"space-y-4 sm:space-y-6\">\r\n          <FormGrid>\r\n            {/* Mandatory Fields First */}\r\n            <FormInput\r\n              label=\"Society Name\"\r\n              value={formData.name}\r\n              onChange={(value) => handleInputChange('name', value)}\r\n              placeholder=\"Enter society name\"\r\n              required\r\n              error={fieldErrors.name}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Society ID\"\r\n              value={formData.societyId}\r\n              onChange={(value) => handleInputChange('societyId', value)}\r\n              placeholder=\"S-001\"\r\n              required\r\n              error={fieldErrors.societyId}\r\n              colSpan={1}\r\n            />\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Password <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type={showAddPassword ? 'text' : 'password'}\r\n                  value={formData.password}\r\n                  onChange={(e) => handleInputChange('password', e.target.value)}\r\n                  placeholder=\"Enter password\"\r\n                  required\r\n                  className=\"form-input-custom w-full px-3 sm:px-4 py-2 sm:py-2.5 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-200 focus:outline-none\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowAddPassword(!showAddPassword)}\r\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors\"\r\n                  title={showAddPassword ? 'Hide password' : 'Show password'}\r\n                >\r\n                  {showAddPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <FormSelect\r\n              label=\"Associated BMC\"\r\n              value={formData.bmcId}\r\n              onChange={(value) => handleInputChange('bmcId', value)}\r\n              options={bmcs.map(bmc => ({ \r\n                value: bmc.id, \r\n                label: `${bmc.name} (${bmc.bmcId})` \r\n              }))}\r\n              placeholder=\"Select BMC\"\r\n              required\r\n              disabled={bmcsLoading}\r\n              colSpan={1}\r\n            />\r\n\r\n            {/* Optional Fields */}\r\n            <FormInput\r\n              label=\"President Name\"\r\n              value={formData.presidentName}\r\n              onChange={(value) => handleInputChange('presidentName', value)}\r\n              placeholder=\"Enter president name\"\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Location\"\r\n              value={formData.location}\r\n              onChange={(value) => handleInputChange('location', value)}\r\n              placeholder=\"Enter location\"\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Contact Phone\"\r\n              type=\"tel\"\r\n              value={formData.contactPhone}\r\n              onChange={(value) => {\r\n                const formatted = formatPhoneInput(value);\r\n                handleInputChange('contactPhone', formatted);\r\n              }}\r\n              onBlur={() => {\r\n                const error = validatePhoneOnBlur(formData.contactPhone);\r\n                if (error) {\r\n                  setFieldErrors(prev => ({ ...prev, contactPhone: error }));\r\n                } else {\r\n                  setFieldErrors(prev => ({ ...prev, contactPhone: undefined }));\r\n                }\r\n              }}\r\n              placeholder=\"Enter phone number\"\r\n              error={fieldErrors.contactPhone}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Email Address\"\r\n              type=\"email\"\r\n              value={formData.email}\r\n              onChange={(value) => {\r\n                const formatted = formatEmailInput(value);\r\n                handleInputChange('email', formatted);\r\n              }}\r\n              onBlur={() => {\r\n                const error = validateEmailOnBlur(formData.email);\r\n                if (error) {\r\n                  setFieldErrors(prev => ({ ...prev, email: error }));\r\n                } else {\r\n                  setFieldErrors(prev => ({ ...prev, email: undefined }));\r\n                }\r\n              }}\r\n              placeholder=\"Enter email address\"\r\n              error={fieldErrors.email}\r\n              required\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormSelect\r\n              label=\"Status\"\r\n              value={formData.status}\r\n              onChange={(value) => handleInputChange('status', value)}\r\n              options={[\r\n                { value: 'active', label: 'Active' },\r\n                { value: 'inactive', label: 'Inactive' },\r\n                { value: 'maintenance', label: 'Maintenance' },\r\n                { value: 'suspended', label: 'Suspended' }\r\n              ]}\r\n              colSpan={1}\r\n            />\r\n          </FormGrid>\r\n\r\n          <FormActions\r\n            onCancel={() => setShowAddForm(false)}\r\n            submitText=\"Add Society\"\r\n            isLoading={formLoading}\r\n          />\r\n        </form>\r\n      </FormModal>\r\n\r\n      {/* Edit Society Modal */}\r\n      <FormModal\r\n        isOpen={showEditForm && !!selectedSociety}\r\n        onClose={() => {\r\n          setShowEditForm(false);\r\n          setSelectedSociety(null);\r\n          setFormData(initialFormData);\r\n        }}\r\n        title={selectedSociety ? `${t.common?.edit || 'Edit'} ${selectedSociety.name}` : (t.common?.edit || 'Edit')}\r\n        maxWidth=\"lg\"\r\n      >\r\n        <form onSubmit={handleEditSociety} className=\"space-y-4 sm:space-y-6\">\r\n          <FormGrid>\r\n            {/* Mandatory Fields First */}\r\n            <FormInput\r\n              label=\"Society Name\"\r\n              value={formData.name}\r\n              onChange={(value) => handleInputChange('name', value)}\r\n              placeholder=\"Enter society name\"\r\n              required\r\n              error={fieldErrors.name}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Society ID\"\r\n              value={formData.societyId}\r\n              onChange={() => {}}\r\n              readOnly\r\n              disabled\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormSelect\r\n              label=\"Associated BMC\"\r\n              value={formData.bmcId}\r\n              onChange={(value) => handleInputChange('bmcId', value)}\r\n              options={bmcs.map(bmc => ({ \r\n                value: bmc.id, \r\n                label: `${bmc.name} (${bmc.bmcId})` \r\n              }))}\r\n              placeholder=\"Select BMC\"\r\n              required\r\n              disabled={true}\r\n              colSpan={2}\r\n            />\r\n\r\n            {/* Optional Fields */}\r\n            <div className=\"sm:col-span-2\">\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Password\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  value={formData.password}\r\n                  onChange={(e) => handleInputChange('password', e.target.value)}\r\n                  placeholder=\"Enter password\"\r\n                  className=\"form-input-custom w-full px-3 sm:px-4 py-2 sm:py-2.5 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 focus:border-emerald-500 dark:focus:border-emerald-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-200 focus:outline-none\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors\"\r\n                  title={showPassword ? 'Hide password' : 'Show password'}\r\n                >\r\n                  {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                </button>\r\n              </div>\r\n              <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\r\n                Current password is pre-filled. Click eye icon to view or edit to change.\r\n              </p>\r\n            </div>\r\n\r\n            <FormInput\r\n              label=\"President Name\"\r\n              value={formData.presidentName}\r\n              onChange={(value) => handleInputChange('presidentName', value)}\r\n              placeholder=\"Enter president name\"\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Location\"\r\n              value={formData.location}\r\n              onChange={(value) => handleInputChange('location', value)}\r\n              placeholder=\"Enter location\"\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Contact Phone\"\r\n              type=\"tel\"\r\n              value={formData.contactPhone}\r\n              onChange={(value) => {\r\n                const formatted = formatPhoneInput(value);\r\n                handleInputChange('contactPhone', formatted);\r\n              }}\r\n              onBlur={() => {\r\n                const error = validatePhoneOnBlur(formData.contactPhone);\r\n                if (error) {\r\n                  setFieldErrors(prev => ({ ...prev, contactPhone: error }));\r\n                } else {\r\n                  setFieldErrors(prev => ({ ...prev, contactPhone: undefined }));\r\n                }\r\n              }}\r\n              placeholder=\"Enter contact phone\"\r\n              error={fieldErrors.contactPhone}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Email Address\"\r\n              type=\"email\"\r\n              value={formData.email}\r\n              onChange={(value) => {\r\n                const formatted = formatEmailInput(value);\r\n                handleInputChange('email', formatted);\r\n              }}\r\n              onBlur={() => {\r\n                const error = validateEmailOnBlur(formData.email);\r\n                if (error) {\r\n                  setFieldErrors(prev => ({ ...prev, email: error }));\r\n                } else {\r\n                  setFieldErrors(prev => ({ ...prev, email: undefined }));\r\n                }\r\n              }}\r\n              placeholder={selectedSociety?.email ? `Current: ${selectedSociety.email}` : \"Enter email address\"}\r\n              error={fieldErrors.email}\r\n              required\r\n              colSpan={1}\r\n              helperText=\"Current email address is pre-filled. Edit to change.\"\r\n            />\r\n\r\n            <FormSelect\r\n              label=\"Status\"\r\n              value={formData.status}\r\n              onChange={(value) => handleInputChange('status', value)}\r\n              options={[\r\n                { value: 'active', label: 'Active' },\r\n                { value: 'inactive', label: 'Inactive' },\r\n                { value: 'maintenance', label: 'Maintenance' },\r\n                { value: 'suspended', label: 'Suspended' }\r\n              ]}\r\n              colSpan={1}\r\n            />\r\n          </FormGrid>\r\n\r\n          <FormActions\r\n            onCancel={() => {\r\n              setShowEditForm(false);\r\n              setSelectedSociety(null);\r\n              setFormData(initialFormData);\r\n            }}\r\n            submitText=\"Update Society\"\r\n            isLoading={formLoading}\r\n            cancelText=\"Cancel\"\r\n            loadingText=\"Updating...\"\r\n            submitIcon={<Edit3 className=\"w-4 h-4\" />}\r\n          />\r\n        </form>\r\n      </FormModal>\r\n\r\n      {/* Delete Confirmation Modal - Individual Delete with OTP */}\r\n      <DeleteSocietyModal\r\n        isOpen={showDeleteModal && !!selectedSociety}\r\n        onClose={() => {\r\n          setShowDeleteModal(false);\r\n          setSelectedSociety(null);\r\n        }}\r\n        onConfirm={handleConfirmDelete}\r\n        societyName={selectedSociety?.name || ''}\r\n        loading={isDeleting}\r\n      />\r\n\r\n      {/* Bulk Delete Password Confirmation Dialog */}\r\n      <PasswordConfirmDialog\r\n        isOpen={showBulkDeleteConfirm}\r\n        onClose={() => setShowBulkDeleteConfirm(false)}\r\n        onConfirm={handleBulkDeleteConfirm}\r\n        title={`Delete ${selectedSocieties.size} ${selectedSocieties.size === 1 ? 'Society' : 'Societies'}`}\r\n        message={`Enter your admin password to confirm deletion of ${selectedSocieties.size} selected ${selectedSocieties.size === 1 ? 'society' : 'societies'}. This action cannot be undone and will be logged for security purposes.`}\r\n      />\r\n\r\n      {/* Loading Snackbar */}\r\n      <LoadingSnackbar\r\n        isVisible={loading || isDeletingBulk || isDeleting}\r\n        message={\r\n          isDeletingBulk \r\n            ? `Deleting ${selectedSocieties.size} ${selectedSocieties.size === 1 ? 'Society' : 'Societies'}` \r\n            : isDeleting \r\n            ? \"Deleting Society\" \r\n            : \"Processing\"\r\n        }\r\n        submessage={\r\n          isDeletingBulk || isDeleting \r\n            ? \"Verifying credentials and removing data...\" \r\n            : \"Please wait...\"\r\n        }\r\n        showProgress={false}\r\n      />\r\n\r\n      {/* Graph Modal */}\r\n      {showGraphModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <BarChart3 className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\r\n                <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n                  {graphMetric === 'quantity' && 'Collection Volume - Last 30 Days'}\r\n                  {graphMetric === 'revenue' && 'Revenue - Last 30 Days'}\r\n                  {graphMetric === 'fat' && 'Average Fat % - Last 30 Days'}\r\n                  {graphMetric === 'snf' && 'Average SNF % - Last 30 Days'}\r\n                  {graphMetric === 'collections' && 'Number of Collections - Last 30 Days'}\r\n                  {graphMetric === 'water' && 'Average Water % - Last 30 Days'}\r\n                </h2>\r\n              </div>\r\n              <button\r\n                onClick={() => setShowGraphModal(false)}\r\n                className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\r\n              >\r\n                <X className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Graph Content */}\r\n            <div className=\"flex-1 overflow-y-auto p-6\">\r\n              {(() => {\r\n                const societiesWithStats = societies.filter(s => s.totalQuantity30d && s.totalQuantity30d > 0);\r\n                \r\n                // Prepare data for line chart (all societies)\r\n                const chartData = societiesWithStats.map(society => ({\r\n                  name: society.name,\r\n                  societyId: society.societyId,\r\n                  value: graphMetric === 'quantity' ? (society.totalQuantity30d || 0) :\r\n                         graphMetric === 'revenue' ? (society.totalAmount30d || 0) :\r\n                         graphMetric === 'fat' ? (society.weightedFat30d || 0) :\r\n                         graphMetric === 'snf' ? (society.weightedSnf30d || 0) :\r\n                         graphMetric === 'collections' ? (society.totalCollections30d || 0) :\r\n                         (society.weightedWater30d || 0)\r\n                })).sort((a, b) => b.value - a.value);\r\n\r\n                // Get color and settings\r\n                const getLineColor = () => {\r\n                  switch (graphMetric) {\r\n                    case 'quantity': return '#10b981';\r\n                    case 'revenue': return '#3b82f6';\r\n                    case 'fat': return '#8b5cf6';\r\n                    case 'snf': return '#f59e0b';\r\n                    case 'collections': return '#ec4899';\r\n                    case 'water': return '#ef4444';\r\n                    default: return '#6b7280';\r\n                  }\r\n                };\r\n\r\n                const getYAxisLabel = () => {\r\n                  switch (graphMetric) {\r\n                    case 'quantity': return 'Quantity (L)';\r\n                    case 'revenue': return 'Revenue (‚Çπ)';\r\n                    case 'fat': return 'Fat %';\r\n                    case 'snf': return 'SNF %';\r\n                    case 'collections': return 'Collections';\r\n                    case 'water': return 'Water %';\r\n                    default: return 'Value';\r\n                  }\r\n                };\r\n\r\n                const CustomTooltip = ({ active, payload }: {\r\n                  active?: boolean;\r\n                  payload?: Array<{\r\n                    payload: { name: string; societyId: string; value: number };\r\n                  }>;\r\n                }) => {\r\n                  if (active && payload && payload.length) {\r\n                    const data = payload[0].payload;\r\n                    return (\r\n                      <div className=\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700\">\r\n                        <p className=\"font-bold text-gray-900 dark:text-white mb-1\">{data.name}</p>\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">({data.societyId})</p>\r\n                        <p className=\"font-semibold\" style={{ color: getLineColor() }}>\r\n                          {graphMetric === 'revenue' && '‚Çπ'}\r\n                          {data.value.toFixed(2)}\r\n                          {graphMetric === 'fat' || graphMetric === 'snf' || graphMetric === 'water' ? '%' : ''}\r\n                          {graphMetric === 'quantity' ? ' L' : ''}\r\n                        </p>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  return null;\r\n                };\r\n\r\n                return chartData.length > 0 ? (\r\n                  <div className=\"w-full h-[500px]\">\r\n                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                      <LineChart data={chartData} margin={{ top: 5, right: 30, left: 20, bottom: 80 }}>\r\n                        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" className=\"dark:stroke-gray-700\" />\r\n                        <XAxis \r\n                          dataKey=\"name\" \r\n                          angle={-45}\r\n                          textAnchor=\"end\"\r\n                          height={100}\r\n                          interval={0}\r\n                          tick={{ fontSize: 11 }}\r\n                          stroke=\"#6b7280\"\r\n                          label={{ \r\n                            value: 'Society Name', \r\n                            position: 'insideBottom', \r\n                            offset: -5,\r\n                            style: { fontSize: 13, fontWeight: 500, fill: '#9ca3af' }\r\n                          }}\r\n                        />\r\n                        <YAxis \r\n                          label={{ \r\n                            value: getYAxisLabel(), \r\n                            angle: -90, \r\n                            position: 'insideLeft',\r\n                            style: { fontSize: 14, fontWeight: 600 }\r\n                          }}\r\n                          tick={{ fontSize: 12 }}\r\n                          stroke=\"#6b7280\"\r\n                        />\r\n                        <Tooltip content={<CustomTooltip />} />\r\n                        <Line \r\n                          type=\"monotone\" \r\n                          dataKey=\"value\" \r\n                          stroke={getLineColor()} \r\n                          strokeWidth={3}\r\n                          dot={{ fill: getLineColor(), r: 5 }}\r\n                          activeDot={{ r: 7 }}\r\n                          name={getYAxisLabel()}\r\n                        />\r\n                      </LineChart>\r\n                    </ResponsiveContainer>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-12\">\r\n                    <BarChart3 className=\"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4\" />\r\n                    <p className=\"text-gray-500 dark:text-gray-400\">No data available for the last 30 days</p>\r\n                  </div>\r\n                );\r\n              })()}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBA;AACA;AACA;AACA;AAvDA;;;;;;;;;;;;;;;AA4FA,MAAM,kBAAmC;IACvC,MAAM;IACN,WAAW;IACX,UAAU;IACV,UAAU;IACV,eAAe;IACf,cAAc;IACd,OAAO;IACP,OAAO;IACP,QAAQ;AACV;AAEA,+DAA+D;AAC/D,MAAM,gBAAgB,CAAC,MAA0C;IAC/D,IAAI,CAAC,QAAQ,SAAS,GAAG,OAAO,QAAQ;IACxC,IAAI,CAAC,aAAa,OAAO;IAEzB,MAAM,UAAU,KAAK,QAAQ;IAC7B,MAAM,QAAQ,IAAI,OAAO,CAAC,CAAC,EAAE,YAAY,OAAO,CAAC,uBAAuB,QAAQ,CAAC,CAAC,EAAE;IACpF,MAAM,QAAQ,QAAQ,KAAK,CAAC;IAE5B,OAAO,MAAM,GAAG,CAAC,CAAC,MAAM,QACtB,MAAM,IAAI,CAAC,sBACT,8OAAC;YAAiB,WAAU;sBACzB;WADQ;;;;uDAIX;AAGN;AAEe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,eAAe,IAAA,qJAAe;IACpC,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,0IAAO;IACxB,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,kJAAW;IAEzB,mBAAmB;IACnB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAY,EAAE;IACxD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAA2E,EAAE;IAC7G,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAuD,EAAE;IAC/F,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAiB;IACvE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAkB;IAC1D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAA8D;IAC9G,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAW,EAAE;IAC3D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAW,EAAE;IACvD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAK3C,CAAC;IACJ,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAgB;IAC5D,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAc,IAAI;IAC5E,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAsD;IAClG,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,iNAAQ,EAAC;IACnE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAmE;IACjH,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IAEvD,uBAAuB;IACvB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAOhC;IAEV,kBAAkB;IAClB,MAAM,iBAAiB,IAAA,oNAAW,EAAC;QACjC,IAAI;YACF,WAAW;YACX,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,CAAC,OAAO;gBACV,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,MAAM,WAAW,MAAM,MAAM,qBAAqB;gBAChD,SAAS;oBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;oBAClC,gBAAgB;gBAClB;YACF;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,IAAI,SAAS,MAAM,KAAK,OAAO,SAAS,MAAM,KAAK,KAAK;oBACtD,aAAa,UAAU,CAAC;oBACxB,OAAO,IAAI,CAAC;oBACZ;gBACF;gBACA,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,SAAS,MAAM,SAAS,IAAI;YAClC,kEAAkE;YAClE,MAAM,uBAAuB,CAAC,OAAO,IAAI,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,UAoBhD,CAAC;oBACL,IAAI,QAAQ,EAAE;oBACd,MAAM,QAAQ,IAAI;oBAClB,WAAW,QAAQ,UAAU;oBAC7B,UAAU,QAAQ,QAAQ;oBAC1B,eAAe,QAAQ,cAAc;oBACrC,cAAc,QAAQ,aAAa;oBACnC,OAAO,QAAQ,KAAK,IAAI;oBACxB,OAAO,QAAQ,MAAM;oBACrB,SAAS,QAAQ,QAAQ;oBACzB,QAAQ,QAAQ,MAAM;oBACtB,WAAW,QAAQ,UAAU;oBAC7B,WAAW,QAAQ,UAAU;oBAC7B,qBAAqB,OAAO,QAAQ,qBAAqB,KAAK;oBAC9D,kBAAkB,OAAO,QAAQ,kBAAkB,KAAK;oBACxD,gBAAgB,OAAO,QAAQ,gBAAgB,KAAK;oBACpD,gBAAgB,OAAO,QAAQ,gBAAgB,KAAK;oBACpD,gBAAgB,OAAO,QAAQ,gBAAgB,KAAK;oBACpD,gBAAgB,OAAO,QAAQ,gBAAgB,KAAK;oBACpD,kBAAkB,OAAO,QAAQ,kBAAkB,KAAK;gBAC1D,CAAC;YACD,aAAa;QACf,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,6BAA6B;YAC3C,SAAS;QACX,SAAU;YACR,WAAW;QACb;IACF,GAAG;QAAC;KAAO;IAEX,8BAA8B;IAC9B,MAAM,eAAe,IAAA,oNAAW,EAAC;QAC/B,IAAI;YACF,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,CAAC,OAAO;YAEZ,MAAM,WAAW,MAAM,MAAM,mBAAmB;gBAC9C,SAAS;oBAAE,iBAAiB,CAAC,OAAO,EAAE,OAAO;gBAAC;YAChD;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,WAAW,KAAK,IAAI,IAAI,EAAE;YAC5B;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;QAC3C;IACF,GAAG,EAAE;IAEL,8BAA8B;IAC9B,MAAM,YAAY,IAAA,oNAAW,EAAC;QAC5B,IAAI;YACF,eAAe;YACf,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,CAAC,OAAO;YAEZ,MAAM,WAAW,MAAM,MAAM,iBAAiB;gBAC5C,SAAS;oBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;oBAClC,gBAAgB;gBAClB;YACF;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM,SAAS,MAAM,SAAS,IAAI;gBAClC,QAAQ,OAAO,IAAI,IAAI,EAAE;YAC3B;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wBAAwB;QACxC,SAAU;YACR,eAAe;QACjB;IACF,GAAG,EAAE;IAEL,sCAAsC;IACtC,MAAM,iBAAiB,IAAA,oNAAW,EAAC;QACjC,IAAI;YACF,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,CAAC,OAAO;gBACV;YACF;YAEA,MAAM,WAAW,MAAM,MAAM,mBAAmB;gBAC9C,SAAS;oBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;oBAClC,gBAAgB;oBAChB,aAAa,MAAM,IAAI,cAAc;gBACvC;YACF;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM,SAAS,MAAM,SAAS,IAAI;gBAClC,aAAa,OAAO,IAAI,IAAI;YAC9B;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,8BAA8B;QAC9C;IACF,GAAG;QAAC,MAAM;KAAG;IAEb,mCAAmC;IACnC,IAAA,kNAAS,EAAC;QACR,MAAM,qBAAqB,CAAC;YAC1B,IAAI,eAAe,MAAM;gBACvB,MAAM,SAAS,MAAM,MAAM;gBAC3B,IAAI,CAAC,OAAO,OAAO,CAAC,cAAc;oBAChC,cAAc;gBAChB;YACF;QACF;QAEA,SAAS,gBAAgB,CAAC,aAAa;QACvC,OAAO;YACL,SAAS,mBAAmB,CAAC,aAAa;QAC5C;IACF,GAAG;QAAC;KAAW;IAEf,2BAA2B;IAC3B,MAAM,sBAAsB,CAAC;QAC3B,qBAAqB,CAAA;YACnB,MAAM,cAAc,IAAI,IAAI;YAC5B,IAAI,YAAY,GAAG,CAAC,YAAY;gBAC9B,YAAY,MAAM,CAAC;YACrB,OAAO;gBACL,YAAY,GAAG,CAAC;YAClB;YACA,OAAO;QACT;IACF;IAEA,4BAA4B;IAC5B,MAAM,yBAAyB,OAAO;QACpC,IAAI,kBAAkB,IAAI,KAAK,GAAG;QAElC,MAAM,iBAAiB,aAAa;QAEpC,IAAI;YACF,WAAW;YACX,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,MAAM,aAAa,MAAM,IAAI,CAAC;YAE9B,QAAQ,GAAG,CAAC,CAAC,iBAAiB,EAAE,WAAW,MAAM,CAAC,sBAAsB,EAAE,gBAAgB;YAE1F,MAAM,iBAAiB,WAAW,GAAG,CAAC,CAAA;gBACpC,MAAM,UAAU,UAAU,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;gBAC7C,IAAI,CAAC,SAAS,OAAO,QAAQ,OAAO;gBAEpC,OAAO,MAAM,qBAAqB;oBAChC,QAAQ;oBACR,SAAS;wBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;wBAClC,gBAAgB;oBAClB;oBACA,MAAM,KAAK,SAAS,CAAC;wBACnB,IAAI,QAAQ,EAAE;wBACd,MAAM,QAAQ,IAAI;wBAClB,WAAW,QAAQ,SAAS;wBAC5B,UAAU,QAAQ,QAAQ,IAAI;wBAC9B,eAAe,QAAQ,aAAa,IAAI;wBACxC,cAAc,QAAQ,YAAY,IAAI;wBACtC,OAAO,QAAQ,KAAK;wBACpB,QAAQ;oBACV;gBACF;YACF;YAEA,MAAM,QAAQ,GAAG,CAAC;YAElB,QAAQ,GAAG,CAAC,CAAC,uBAAuB,EAAE,WAAW,MAAM,CAAC,cAAc,EAAE,gBAAgB;YAExF,WAAW,CAAC,QAAQ,EAAE,WAAW,MAAM,CAAC,CAAC,EAAE,WAAW,MAAM,KAAK,IAAI,YAAY,YAAY,IAAI,EAAE,eAAe,CAAC,CAAC;YACpH,MAAM;YACN,qBAAqB,IAAI;YACzB,WAAW,IAAM,WAAW,KAAK;QACnC,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,sBAAsB;YACpC,SAAS;YACT,WAAW,IAAM,SAAS,KAAK;QACjC,SAAU;YACR,WAAW;QACb;IACF;IAEA,gDAAgD;IAChD,MAAM,wBAAwB;QAC5B,IAAI,kBAAkB,IAAI,KAAK,GAAG;QAClC,yBAAyB;IAC3B;IAEA,8BAA8B;IAC9B,MAAM,kBAAkB;QACtB,MAAM,gBAAgB,IAAI,IAAI,kBAAkB,GAAG,CAAC,CAAA,UAAW,QAAQ,EAAE;QACzE,qBAAqB;IACvB;IAEA,gDAAgD;IAChD,MAAM,0BAA0B,OAAO;QACrC,yBAAyB;QACzB,kBAAkB;QAElB,IAAI;YACF,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,MAAM,aAAa,MAAM,IAAI,CAAC;YAE9B,QAAQ,GAAG,CAAC,CAAC,kBAAkB,EAAE,WAAW,MAAM,CAAC,sCAAsC,CAAC,EAAE;YAE5F,0DAA0D;YAC1D,MAAM,iBAAiB,WAAW,GAAG,CAAC,CAAA,KACpC,MAAM,4BAA4B;oBAChC,QAAQ;oBACR,SAAS;wBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;wBAClC,gBAAgB;oBAClB;oBACA,MAAM,KAAK,SAAS,CAAC;wBAAE;wBAAI;oBAAS;gBACtC,GAAG,IAAI,CAAC,OAAO;oBACb,IAAI,CAAC,IAAI,EAAE,EAAE;wBACX,MAAM,QAAQ,MAAM,IAAI,IAAI;wBAC5B,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;oBACjC;oBACA,OAAO,IAAI,IAAI;gBACjB;YAGF,MAAM,UAAU,MAAM,QAAQ,UAAU,CAAC;YACzC,MAAM,aAAa,QAAQ,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK,aAAa,MAAM;YACvE,MAAM,SAAS,QAAQ,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK,YAAY,MAAM;YAElE,IAAI,aAAa,GAAG;gBAClB,QAAQ,GAAG,CAAC,CAAC,uBAAuB,EAAE,WAAW,UAAU,CAAC;gBAC5D,WAAW,CAAC,qBAAqB,EAAE,WAAW,CAAC,EAAE,eAAe,IAAI,YAAY,cAAc,SAAS,IAAI,CAAC,EAAE,EAAE,OAAO,QAAQ,CAAC,GAAG,IAAI;gBACvI,MAAM;gBACN,qBAAqB,IAAI;gBACzB,WAAW,IAAM,WAAW,KAAK;YACnC,OAAO;gBACL,QAAQ,KAAK,CAAC,CAAC,uBAAuB,EAAE,WAAW,MAAM,CAAC,UAAU,CAAC;gBACrE,SAAS;gBACT,WAAW,IAAM,SAAS,KAAK;YACjC;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,sBAAsB;YACpC,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YAClD,WAAW,IAAM,SAAS,KAAK;QACjC,SAAU;YACR,kBAAkB;QACpB;IACF;IAEA,kBAAkB;IAClB,MAAM,mBAAmB,OAAO;QAC9B,EAAE,cAAc;QAChB,eAAe;QACf,SAAS;QAET,2BAA2B;QAC3B,IAAI,CAAC,SAAS,KAAK,EAAE;YACnB,SAAS;YACT,eAAe;YACf;QACF;QAEA,IAAI;YACF,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,MAAM,WAAW,MAAM,MAAM,qBAAqB;gBAChD,QAAQ;gBACR,SAAS;oBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;oBAClC,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;oBACnB,GAAG,QAAQ;oBACX,OAAO,SAAS,SAAS,KAAK;gBAChC;YACF;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,WAAW;gBACX,eAAe;gBACf,YAAY;gBACZ,MAAM;gBAEN,WAAW,IAAM,WAAW,KAAK;YACnC,OAAO;gBACL,MAAM,gBAAgB,MAAM,SAAS,IAAI;gBACzC,MAAM,eAAe,cAAc,KAAK,IAAI;gBAE5C,8BAA8B;gBAC9B,eAAe,CAAC;gBAEhB,kCAAkC;gBAClC,IAAI,aAAa,WAAW,GAAG,QAAQ,CAAC,iBAAiB,aAAa,WAAW,GAAG,QAAQ,CAAC,mBAAmB;oBAC9G,eAAe;wBAAE,WAAW;oBAAiC;gBAC/D,OAAO,IAAI,aAAa,WAAW,GAAG,QAAQ,CAAC,mBAAmB,aAAa,WAAW,GAAG,QAAQ,CAAC,mBAAmB;oBACvH,eAAe;wBAAE,MAAM;oBAAmC;gBAC5D,OAAO;oBACL,SAAS;gBACX;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;YACvC,SAAS;QACX,SAAU;YACR,eAAe;QACjB;IACF;IAEA,eAAe;IACf,MAAM,oBAAoB,OAAO;QAC/B,EAAE,cAAc;QAChB,IAAI,CAAC,iBAAiB;QAEtB,eAAe;QACf,SAAS;QAET,2BAA2B;QAC3B,IAAI,CAAC,SAAS,KAAK,EAAE;YACnB,SAAS;YACT,eAAe;YACf;QACF;QAEA,IAAI;YACF,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,MAAM,aAUF;gBACF,IAAI,gBAAgB,EAAE;gBACtB,MAAM,SAAS,IAAI;gBACnB,UAAU,SAAS,QAAQ;gBAC3B,eAAe,SAAS,aAAa;gBACrC,cAAc,SAAS,YAAY;gBACnC,OAAO,SAAS,KAAK;gBACrB,OAAO,SAAS,SAAS,KAAK;gBAC9B,QAAQ,SAAS,MAAM;YACzB;YAEA,4DAA4D;YAC5D,IAAI,SAAS,QAAQ,IAAI,SAAS,QAAQ,KAAK,iBAAiB;gBAC9D,WAAW,QAAQ,GAAG,SAAS,QAAQ;YACzC;YAEA,MAAM,WAAW,MAAM,MAAM,qBAAqB;gBAChD,QAAQ;gBACR,SAAS;oBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;oBAClC,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,WAAW;gBACX,gBAAgB;gBAChB,mBAAmB;gBACnB,YAAY;gBACZ,MAAM;gBAEN,WAAW,IAAM,WAAW,KAAK;YACnC,OAAO;gBACL,MAAM,gBAAgB,MAAM,SAAS,IAAI;gBACzC,MAAM,eAAe,cAAc,KAAK,IAAI;gBAE5C,8BAA8B;gBAC9B,eAAe,CAAC;gBAEhB,kCAAkC;gBAClC,IAAI,aAAa,WAAW,GAAG,QAAQ,CAAC,iBAAiB,aAAa,WAAW,GAAG,QAAQ,CAAC,mBAAmB;oBAC9G,eAAe;wBAAE,WAAW;oBAAiC;gBAC/D,OAAO,IAAI,aAAa,WAAW,GAAG,QAAQ,CAAC,mBAAmB,aAAa,WAAW,GAAG,QAAQ,CAAC,mBAAmB;oBACvH,eAAe;wBAAE,MAAM;oBAAmC;gBAC5D,OAAO;oBACL,SAAS;gBACX;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;YACzC,SAAS;QACX,SAAU;YACR,eAAe;QACjB;IACF;IAIA,uCAAuC;IACvC,MAAM,sBAAsB,OAAO;QACjC,IAAI,CAAC,iBAAiB;QAEtB,cAAc;QACd,IAAI;YACF,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,MAAM,WAAW,MAAM,MAAM,CAAC,4BAA4B,EAAE,gBAAgB,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE;gBAC3F,QAAQ;gBACR,SAAS;oBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;oBAClC,gBAAgB;gBAClB;YACF;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAChC;YAEA,WAAW;YACX,mBAAmB;YACnB,mBAAmB;YACnB,MAAM;YACN,WAAW,IAAM,WAAW,KAAK;QACnC,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;YACzC,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YAClD,WAAW,IAAM,SAAS,KAAK;QACjC,SAAU;YACR,cAAc;QAChB;IACF;IAEA,4BAA4B;IAC5B,MAAM,oBAAoB,CAAC,OAA8B;QACvD,qEAAqE;QACrE,IAAI,UAAU,eAAe,eAAe,CAAC,MAAM,UAAU,CAAC,SAAS,MAAM,MAAM,GAAG,GAAG;YACvF,QAAQ,CAAC,EAAE,EAAE,MAAM,OAAO,CAAC,OAAO,KAAK;QACzC;QAEA,YAAY,CAAA,OAAQ,CAAC;gBAAE,GAAG,IAAI;gBAAE,CAAC,MAAM,EAAE;YAAM,CAAC;QAEhD,8CAA8C;QAC9C,IAAI,WAAW,CAAC,MAAkC,EAAE;YAClD,eAAe,CAAA,OAAQ,CAAC;oBACtB,GAAG,IAAI;oBACP,CAAC,MAAM,EAAE;gBACX,CAAC;QACH;IACF;IAEA,kBAAkB;IAClB,MAAM,kBAAkB,OAAO;QAC7B,mBAAmB;QACnB,eAAe,CAAC,IAAI,qBAAqB;QACzC,SAAS,KAAK,uBAAuB;QACrC,gBAAgB,QAAQ,4BAA4B;QACpD,aAAa,mCAAmC;QAEhD,uCAAuC;QACvC,IAAI;YACF,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,MAAM,WAAW,MAAM,MAAM,CAAC,8BAA8B,EAAE,QAAQ,EAAE,EAAE,EAAE;gBAC1E,SAAS;oBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;gBACpC;YACF;YAEA,QAAQ,GAAG,CAAC,mCAAmC,SAAS,MAAM;YAE9D,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM,SAAS,MAAM,SAAS,IAAI;gBAClC,QAAQ,GAAG,CAAC,0BAA0B;gBACtC,oFAAoF;gBACpF,MAAM,kBAAkB,OAAO,IAAI,EAAE,YAAY,OAAO,QAAQ,IAAI;gBACpE,QAAQ,GAAG,CAAC,qBAAqB;gBACjC,mBAAmB;gBAEnB,sCAAsC;gBACtC,YAAY;oBACV,MAAM,QAAQ,IAAI;oBAClB,WAAW,QAAQ,SAAS;oBAC5B,UAAU;oBACV,UAAU,QAAQ,QAAQ,IAAI;oBAC9B,eAAe,QAAQ,aAAa,IAAI;oBACxC,cAAc,QAAQ,YAAY,IAAI;oBACtC,OAAO,QAAQ,KAAK,IAAI;oBACxB,OAAO,QAAQ,KAAK,EAAE,cAAc;oBACpC,QAAQ,QAAQ,MAAM;gBACxB;YACF,OAAO;gBACL,MAAM,YAAY,MAAM,SAAS,IAAI;gBACrC,QAAQ,KAAK,CAAC,0BAA0B;gBACxC,mCAAmC;gBACnC,mBAAmB;gBACnB,YAAY;oBACV,MAAM,QAAQ,IAAI;oBAClB,WAAW,QAAQ,SAAS;oBAC5B,UAAU;oBACV,UAAU,QAAQ,QAAQ,IAAI;oBAC9B,eAAe,QAAQ,aAAa,IAAI;oBACxC,cAAc,QAAQ,YAAY,IAAI;oBACtC,OAAO,QAAQ,KAAK,IAAI;oBACxB,OAAO,QAAQ,KAAK,EAAE,cAAc;oBACpC,QAAQ,QAAQ,MAAM;gBACxB;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,mBAAmB;YACnB,YAAY;gBACV,MAAM,QAAQ,IAAI;gBAClB,WAAW,QAAQ,SAAS;gBAC5B,UAAU;gBACV,UAAU,QAAQ,QAAQ,IAAI;gBAC9B,eAAe,QAAQ,aAAa,IAAI;gBACxC,cAAc,QAAQ,YAAY,IAAI;gBACtC,OAAO,QAAQ,KAAK,IAAI;gBACxB,OAAO,QAAQ,KAAK,EAAE,cAAc;gBACpC,QAAQ,QAAQ,MAAM;YACxB;QACF;QAEA,gBAAgB;IAClB;IAEA,oBAAoB;IACpB,MAAM,oBAAoB,CAAC;QACzB,mBAAmB;QACnB,iCAAiC;QAChC,OAA0C,iBAAiB,GAAG,QAAQ,EAAE;QACzE,mBAAmB;IACrB;IAEA,uBAAuB;IACvB,MAAM,qBAAqB,OAAO,SAAkB;QAClD,QAAQ,GAAG,CAAC,4BAA4B;YAAE,WAAW,QAAQ,EAAE;YAAE,eAAe,QAAQ,MAAM;YAAE;QAAU;QAE1G,IAAI;YACF,WAAW;YACX,MAAM,QAAQ,aAAa,OAAO,CAAC;YAEnC,MAAM,UAAU;gBACd,IAAI,QAAQ,EAAE;gBACd,MAAM,QAAQ,IAAI;gBAClB,WAAW,QAAQ,SAAS;gBAC5B,UAAU,QAAQ,QAAQ,IAAI;gBAC9B,eAAe,QAAQ,aAAa,IAAI;gBACxC,cAAc,QAAQ,YAAY,IAAI;gBACtC,OAAO,QAAQ,KAAK;gBACpB,QAAQ;YACV;YAEA,QAAQ,GAAG,CAAC,2BAA2B;YAEvC,MAAM,WAAW,MAAM,MAAM,qBAAqB;gBAChD,QAAQ;gBACR,SAAS;oBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;oBAClC,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,MAAM,SAAS,MAAM,SAAS,IAAI;YAClC,QAAQ,GAAG,CAAC,iBAAiB;gBAAE,QAAQ,SAAS,MAAM;gBAAE,MAAM;YAAO;YAErE,IAAI,SAAS,EAAE,EAAE;gBACf,WAAW,CAAC,kBAAkB,EAAE,UAAU,CAAC,CAAC;gBAC5C,MAAM;gBACN,WAAW,IAAM,WAAW,KAAK;YACnC,OAAO;gBACL,MAAM,eAAe,OAAO,KAAK,IAAI;gBACrC,QAAQ,KAAK,CAAC,kBAAkB;gBAChC,SAAS;gBACT,WAAW,IAAM,SAAS,KAAK;YACjC;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;YACxC,SAAS;YACT,WAAW,IAAM,SAAS,KAAK;QACjC,SAAU;YACR,WAAW;QACb;IACF;IAEA,mDAAmD;IACnD,MAAM,oBAAoB,UAAU,MAAM,CAAC,CAAA;QACzC,MAAM,gBAAgB,gBAAgB,MACjB,QAAQ,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW,OAC3D,QAAQ,SAAS,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW,OAChE,QAAQ,aAAa,EAAE,cAAc,SAAS,YAAY,WAAW,OACrE,QAAQ,QAAQ,EAAE,cAAc,SAAS,YAAY,WAAW,OAChE,QAAQ,YAAY,EAAE,cAAc,SAAS,YAAY,WAAW,OACpE,QAAQ,OAAO,EAAE,cAAc,SAAS,YAAY,WAAW;QAEpF,MAAM,gBAAgB,iBAAiB,SAAS,QAAQ,MAAM,KAAK;QAEnE,gCAAgC;QAChC,MAAM,aAAa,KAAK,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,QAAQ,KAAK;QAExD,oCAAoC;QACpC,MAAM,aAAa,UAAU,MAAM,KAAK,KAAK,UAAU,QAAQ,CAAC,YAAY,GAAG,cAAc;QAE7F,2FAA2F;QAC3F,MAAM,eAAe,YAAY,MAAM,KAAK,KACxB,CAAC,YAAY,cAAc,YAAY,QAAQ,CAAC,WAAW,WAAW,CAAC,QAAQ,MAAM,KAAK;QAE9G,OAAO,iBAAiB,iBAAiB,cAAc;IACzD;IAEA,IAAA,kNAAS,EAAC;QACR;QACA;QACA;QACA;QAEA,uCAAuC;QACvC,MAAM,iBAAiB,aAAa,GAAG,CAAC;QACxC,IAAI,gBAAgB;YAClB,aAAa;gBAAC;aAAe;QAC/B;QAEA,yCAAyC;QACzC,MAAM,mBAAmB,aAAa,GAAG,CAAC;QAC1C,IAAI,kBAAkB;YACpB,eAAe;gBAAC;aAAiB;QACnC;QAEA,oDAAoD;QACpD,MAAM,gBAAgB,YAAY;YAChC;QACF,GAAG,QAAQ,aAAa;QAExB,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC;QAAgB;QAAc;QAAW;QAAgB;KAAa;IAE1E,8CAA8C;IAC9C,IAAA,kNAAS,EAAC;QACR,MAAM,qBAAqB,CAAC;YAC1B,MAAM,cAAc;YACpB,MAAM,QAAQ,YAAY,MAAM,EAAE,SAAS;YAC3C,eAAe;QACjB;QACA,OAAO,gBAAgB,CAAC,gBAAgB;QACxC,OAAO,IAAM,OAAO,mBAAmB,CAAC,gBAAgB;IAC1D,GAAG,EAAE;IAEL,iDAAiD;IACjD,IAAI,CAAC,MAAM;QACT,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,2MAAa;gBAAC,MAAM;;;;;;;;;;;IAG3B;IAEA,qBACE;;0BACA,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC,qMAAU;wBACT,OAAM;wBACN,UAAS;wBACT,oBAAM,8OAAC,6MAAK;4BAAC,WAAU;;;;;;wBACvB,WAAW;;;;;;kCAIb,8OAAC,8MAAa;wBACZ,SAAS;wBACT,OAAO;;;;;;oBAIR,UAAU,MAAM,GAAG,KAAK,CAAC;wBACxB,MAAM,qBAAqB,UAAU,MAAM,CAAC,CAAA,IAAK,EAAE,gBAAgB,IAAI,EAAE,gBAAgB,GAAG;wBAE5F,MAAM,gBAAgB;+BAAI;yBAAmB,CAAC,IAAI,CAAC,CAAC,GAAG,IACrD,CAAC,EAAE,gBAAgB,IAAI,CAAC,IAAI,CAAC,EAAE,gBAAgB,IAAI,CAAC,EACrD,CAAC,EAAE;wBAEJ,MAAM,aAAa;+BAAI;yBAAmB,CAAC,IAAI,CAAC,CAAC,GAAG,IAClD,CAAC,EAAE,cAAc,IAAI,CAAC,IAAI,CAAC,EAAE,cAAc,IAAI,CAAC,EACjD,CAAC,EAAE;wBAEJ,MAAM,SAAS;+BAAI;yBAAmB,CAAC,IAAI,CAAC,CAAC,GAAG,IAC9C,CAAC,EAAE,cAAc,IAAI,CAAC,IAAI,CAAC,EAAE,cAAc,IAAI,CAAC,EACjD,CAAC,EAAE;wBAEJ,MAAM,SAAS;+BAAI;yBAAmB,CAAC,IAAI,CAAC,CAAC,GAAG,IAC9C,CAAC,EAAE,cAAc,IAAI,CAAC,IAAI,CAAC,EAAE,cAAc,IAAI,CAAC,EACjD,CAAC,EAAE;wBAEJ,MAAM,kBAAkB;+BAAI;yBAAmB,CAAC,IAAI,CAAC,CAAC,GAAG,IACvD,CAAC,EAAE,mBAAmB,IAAI,CAAC,IAAI,CAAC,EAAE,mBAAmB,IAAI,CAAC,EAC3D,CAAC,EAAE;wBAEJ,MAAM,YAAY;+BAAI;yBAAmB,CAAC,IAAI,CAAC,CAAC,GAAG,IACjD,CAAC,EAAE,gBAAgB,IAAI,CAAC,IAAI,CAAC,EAAE,gBAAgB,IAAI,CAAC,EACrD,CAAC,EAAE;wBAEJ,qBACE,8OAAC;4BAAI,WAAU;;gCACZ,+BACC,8OAAC;oCACC,WAAU;oCACV,SAAS;wCACP,eAAe;wCACf,kBAAkB;oCACpB;;sDAEA,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAG,WAAU;8DAA2D;;;;;;8DACzE,8OAAC,6MAAK;oDAAC,WAAU;;;;;;;;;;;;sDAEnB,8OAAC;4CAAE,WAAU;sDAAwD,cAAc,IAAI;;;;;;sDACvF,8OAAC;4CAAE,WAAU;;gDAA8C,cAAc,gBAAgB,EAAE,QAAQ;gDAAG;;;;;;;;;;;;;gCAIzG,4BACC,8OAAC;oCACC,WAAU;oCACV,SAAS;wCACP,eAAe;wCACf,kBAAkB;oCACpB;;sDAEA,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAG,WAAU;8DAAyD;;;;;;8DACvE,8OAAC,6NAAS;oDAAC,WAAU;;;;;;;;;;;;sDAEvB,8OAAC;4CAAE,WAAU;sDAAsD,WAAW,IAAI;;;;;;sDAClF,8OAAC;4CAAE,WAAU;;gDAA2C;gDAAE,WAAW,cAAc,EAAE,QAAQ;;;;;;;;;;;;;gCAIhG,wBACC,8OAAC;oCACC,WAAU;oCACV,SAAS;wCACP,eAAe;wCACf,kBAAkB;oCACpB;;sDAEA,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAG,WAAU;8DAA6D;;;;;;8DAC3E,8OAAC,uMAAG;oDAAC,WAAU;;;;;;;;;;;;sDAEjB,8OAAC;4CAAE,WAAU;sDAA0D,OAAO,IAAI;;;;;;sDAClF,8OAAC;4CAAE,WAAU;;gDAAgD,OAAO,cAAc,EAAE,QAAQ;gDAAG;;;;;;;;;;;;;gCAIlG,wBACC,8OAAC;oCACC,WAAU;oCACV,SAAS;wCACP,eAAe;wCACf,kBAAkB;oCACpB;;sDAEA,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAG,WAAU;8DAA6D;;;;;;8DAC3E,8OAAC,gOAAU;oDAAC,WAAU;;;;;;;;;;;;sDAExB,8OAAC;4CAAE,WAAU;sDAA0D,OAAO,IAAI;;;;;;sDAClF,8OAAC;4CAAE,WAAU;;gDAAgD,OAAO,cAAc,EAAE,QAAQ;gDAAG;;;;;;;;;;;;;gCAIlG,iCACC,8OAAC;oCACC,WAAU;oCACV,SAAS;wCACP,eAAe;wCACf,kBAAkB;oCACpB;;sDAEA,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAG,WAAU;8DAAyD;;;;;;8DACvE,8OAAC,6MAAK;oDAAC,WAAU;;;;;;;;;;;;sDAEnB,8OAAC;4CAAE,WAAU;sDAAsD,gBAAgB,IAAI;;;;;;sDACvF,8OAAC;4CAAE,WAAU;;gDAA4C,gBAAgB,mBAAmB;gDAAC;;;;;;;;;;;;;gCAIhG,2BACC,8OAAC;oCACC,WAAU;oCACV,SAAS;wCACP,eAAe;wCACf,kBAAkB;oCACpB;;sDAEA,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAG,WAAU;8DAAuD;;;;;;8DACrE,8OAAC,sNAAQ;oDAAC,WAAU;;;;;;;;;;;;sDAEtB,8OAAC;4CAAE,WAAU;sDAAoD,UAAU,IAAI;;;;;;sDAC/E,8OAAC;4CAAE,WAAU;;gDAA0C,UAAU,gBAAgB,EAAE,QAAQ;gDAAG;;;;;;;;;;;;;;;;;;;oBAKxG,CAAC;kCAID,8OAAC,iNAAc;wBACb,cAAc;wBACd,gBAAgB,CAAC,QAAU,gBAAgB;wBAC3C,aAAa;wBACb,eAAe,CAAC,QAAU,eAAe,MAAM,OAAO,CAAC,SAAS,QAAQ;gCAAC;6BAAM;wBAC/E,WAAW;wBACX,aAAa,CAAC,QAAU,aAAa,MAAM,OAAO,CAAC,SAAS,QAAQ;gCAAC;6BAAM;wBAC3E,eAAe,EAAE;wBACjB,iBAAiB,KAAO;wBACxB,eAAe,EAAE;wBACjB,iBAAiB,KAAO;wBACxB,SAAS;wBACT,MAAM;wBACN,WAAW,UAAU,GAAG,CAAC,CAAA,IAAK,CAAC;gCAAE,GAAG,CAAC;gCAAE,QAAQ,EAAE,KAAK;gCAAE,YAAY,EAAE,SAAS;4BAAC,CAAC;wBACjF,UAAU,EAAE;wBACZ,eAAe,kBAAkB,MAAM;wBACvC,YAAY,UAAU,MAAM;wBAC5B,aAAa;wBACb,sBAAsB;wBACtB,mBAAmB;;;;;;kCAGrB,8OAAC,iNAAc;wBACb,oBAAM,8OAAC,6MAAK;4BAAC,WAAU;;;;;;wBACvB,aAAa,CAAC,QAAQ,EAAE,kBAAkB,MAAM,CAAC,IAAI,EAAE,UAAU,MAAM,CAAC,UAAU,CAAC;wBACnF,aAAa;wBACb,eAAe;4BACb;gCAAE,OAAO;gCAAO,OAAO;4BAAa;4BACpC;gCAAE,OAAO;gCAAU,OAAO;4BAAS;4BACnC;gCAAE,OAAO;gCAAY,OAAO;4BAAW;4BACvC;gCAAE,OAAO;gCAAe,OAAO;4BAAc;4BAC7C;gCAAE,OAAO;gCAAa,OAAO;4BAAY;yBAC1C;wBACD,gBAAgB,CAAC,QAAU,gBAAgB;;;;;;oBAI5C,wBACC,8OAAC,8MAAc;;;;+BACb,kBAAkB,MAAM,GAAG,kBAC7B,8OAAC;wBAAI,WAAU;kCACZ,kBAAkB,GAAG,CAAC,CAAC,wBACtB,8OAAC;gCAAqB,WAAU;;kDAE9B,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DACC,MAAK;4DACL,SAAS,kBAAkB,GAAG,CAAC,QAAQ,EAAE;4DACzC,UAAU,IAAM,oBAAoB,QAAQ,EAAE;4DAC9C,SAAS,CAAC,IAAM,EAAE,eAAe;4DACjC,WAAU;;;;;;sEAEZ,8OAAC;4DAAI,WAAU;sEACb,cAAA,8OAAC,6NAAS;gEAAC,WAAU;;;;;;;;;;;sEAEvB,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;oEAAG,WAAU;8EAAgE,cAAc,QAAQ,IAAI,EAAE;;;;;;8EAC1G,8OAAC;oEAAE,WAAU;8EAA4C,cAAc,QAAQ,SAAS,EAAE;;;;;;;;;;;;;;;;;;8DAG9F,8OAAC,iNAAc;oDACb,eAAe,QAAQ,MAAM;oDAC7B,gBAAgB,CAAC,SAAW,mBAAmB,SAAS;oDACxD,SAAS;wDACP;4DACE,QAAQ;4DACR,OAAO;4DACP,OAAO;4DACP,SAAS;wDACX;wDACA;4DACE,QAAQ;4DACR,OAAO;4DACP,OAAO;4DACP,SAAS;wDACX;wDACA;4DACE,QAAQ;4DACR,OAAO;4DACP,OAAO;4DACP,SAAS;wDACX;wDACA;4DACE,QAAQ;4DACR,OAAO;4DACP,OAAO;4DACP,SAAS;wDACX;qDACD;oDACD,SAAS;;;;;;;;;;;;;;;;;kDAMf,8OAAC;wCAAI,WAAU;;0DAEb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;;0EACb,8OAAC,0MAAI;gEAAC,WAAU;;;;;;0EAChB,8OAAC;gEAAK,WAAU;0EAAqD,cAAc,QAAQ,aAAa,IAAI,gBAAgB;;;;;;;;;;;;kEAE9H,8OAAC;wDAAI,WAAU;;0EACb,8OAAC,6MAAK;gEAAC,WAAU;;;;;;0EACjB,8OAAC;gEAAK,WAAU;0EAAqD,cAAc,QAAQ,YAAY,IAAI,YAAY;;;;;;;;;;;;;;;;;;0DAK3H,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;;0EACb,8OAAC,oNAAM;gEAAC,WAAU;;;;;;0EAClB,8OAAC;gEAAK,WAAU;0EAAqD,cAAc,QAAQ,QAAQ,IAAI,eAAe;;;;;;;;;;;;kEAExH,8OAAC;wDAAI,WAAU;;0EACb,8OAAC,6NAAS;gEAAC,WAAU;;;;;;0EACrB,8OAAC;gEAAK,WAAU;0EAAiE,cAAc,QAAQ,OAAO,IAAI,UAAU;;;;;;;;;;;;;;;;;;0DAKhI,8OAAC;gDAAI,WAAU;;;;;;0DAGf,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;kEAAiF;;;;;;kEACjG,8OAAC,sNAAQ;wDAAC,WAAU;;;;;;;;;;;;0DAItB,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEAAI,WAAU;;;;;;0EACf,8OAAC;gEAAK,WAAU;0EAAuD;;;;;;;;;;;;kEAEzE,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEAAI,WAAU;0EAAsD,QAAQ,mBAAmB,IAAI;;;;;;0EACpG,8OAAC;gEAAI,WAAU;;oEAA4C,CAAC,QAAQ,gBAAgB,IAAI,CAAC,EAAE,OAAO,CAAC;oEAAG;;;;;;;;;;;;;;;;;;;0DAK1G,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEAAI,WAAU;0EAAgD;;;;;;0EAC/D,8OAAC;gEAAI,WAAU;;oEAA0D,CAAC,QAAQ,cAAc,IAAI,CAAC,EAAE,OAAO,CAAC;oEAAG;;;;;;;;;;;;;kEAEpH,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEAAI,WAAU;0EAAgD;;;;;;0EAC/D,8OAAC;gEAAI,WAAU;;oEAA0D,CAAC,QAAQ,cAAc,IAAI,CAAC,EAAE,OAAO,CAAC;oEAAG;;;;;;;;;;;;;kEAEpH,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEAAI,WAAU;0EAAgD;;;;;;0EAC/D,8OAAC;gEAAI,WAAU;0EAAsD,CAAC,QAAQ,cAAc,IAAI,CAAC,EAAE,OAAO,CAAC;;;;;;;;;;;;;;;;;;0DAK/G,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEAAI,WAAU;;;;;;0EACf,8OAAC;gEAAK,WAAU;0EAAuD;;;;;;;;;;;;kEAEzE,8OAAC;wDAAI,WAAU;;4DAA2D;4DACtE,CAAC,QAAQ,cAAc,IAAI,CAAC,EAAE,cAAc,CAAC,SAAS;gEAAE,uBAAuB;gEAAG,uBAAuB;4DAAE;;;;;;;;;;;;;;;;;;;kDAMnH,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDACC,SAAS,IAAM,gBAAgB;wDAC/B,WAAU;wDACV,OAAM;kEAEN,cAAA,8OAAC,mNAAK;4DAAC,WAAU;;;;;;;;;;;kEAEnB,8OAAC;wDACC,SAAS,IAAM,kBAAkB;wDACjC,WAAU;wDACV,OAAM;kEAEN,cAAA,8OAAC,oNAAM;4DAAC,WAAU;;;;;;;;;;;oDAInB,CAAC;wDACA,MAAM,eAAe,WAAW,QAAQ,KAAK,CAAA,IAAK,EAAE,SAAS,KAAK,QAAQ,EAAE;wDAC5E,MAAM,iBAAiB,cAAc,gBAAgB;wDACrD,MAAM,iBAAiB,cAAc,gBAAgB;wDACrD,MAAM,gBAAgB,cAAc,gBAAgB;wDACpD,MAAM,aAAa,cAAc,gBAAgB;wDAEjD,kCAAkC;wDAClC,MAAM,WAAW;4DACf,IAAI,gBAAgB,OAAO;4DAC3B,IAAI,gBAAgB,OAAO;4DAC3B,IAAI,eAAe,OAAO;4DAC1B,IAAI,YAAY,OAAO;4DACvB,OAAO;wDACT;wDAEA,wBAAwB;wDACxB,MAAM,gBAAgB;4DACpB,IAAI,gBAAgB,OAAO;4DAC3B,IAAI,gBAAgB,OAAO;4DAC3B,IAAI,eAAe,OAAO;4DAC1B,IAAI,YAAY,OAAO,GAAG,aAAa,YAAY,CAAC,CAAC,CAAC;4DACtD,OAAO;wDACT;wDAEA,yDAAyD;wDACzD,MAAM,aAAa;4DACjB,IAAI,CAAC,cAAc,OAAO;4DAE1B,MAAM,iBAAiB,CAAC,UAA4C,YAAY,KAAK;gEACnF,IAAI,CAAC,UAAU,OAAO;gEACtB,MAAM,MAAM,SAAS,QAAQ;gEAC7B,MAAM,YAAY,IAAI,KAAK,CAAC;gEAC5B,MAAM,YAAY,IAAI,KAAK,CAAC;gEAC5B,IAAI,aAAa,WAAW;oEAC1B,IAAI,QAAQ,SAAS,SAAS,CAAC,EAAE;oEACjC,IAAI,UAAU,SAAS,SAAS,CAAC,EAAE;oEACnC,MAAM,UAAU,SAAS,CAAC,EAAE;oEAE5B,IAAI,WAAW;wEACb,yBAAyB;wEACzB,WAAW;wEACX,SAAS;wEACT,IAAI,WAAW,IAAI;4EACjB,SAAS;4EACT,WAAW;wEACb;wEACA,IAAI,SAAS,IAAI;4EACf,SAAS;wEACX;oEACF;oEAEA,MAAM,iBAAiB,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG;oEACpD,MAAM,mBAAmB,QAAQ,QAAQ,GAAG,QAAQ,CAAC,GAAG;oEACxD,OAAO,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE,eAAe,CAAC,EAAE,iBAAiB,CAAC,EAAE,SAAS;gEAC3G;gEACA,OAAO;4DACT;4DAEA,MAAM,YAAY,eAAe,aAAa,SAAS;4DACvD,MAAM,iBAAiB,eAAe,aAAa,kBAAkB,EAAE,OAAO,2BAA2B;4DACzG,MAAM,UAAU,eAAe,aAAa,cAAc;4DAE1D,+BAA+B;4DAC/B,IAAI,aAAa,WAAW,KAAK,UAAU;gEACzC,OAAO,CAAC,eAAe,EAAE,WAAW;4DACtC;4DAEA,wEAAwE;4DACxE,IAAI,aAAa,WAAW,KAAK,UAAU;gEACzC,OAAO,CAAC,OAAO,EAAE,UAAU,UAAU,EAAE,gBAAgB;4DACzD;4DAEA,sCAAsC;4DACtC,IAAI,aAAa,WAAW,KAAK,SAAS;gEACxC,OAAO,CAAC,OAAO,EAAE,UAAU,OAAO,EAAE,SAAS;4DAC/C;4DAEA,6BAA6B;4DAC7B,IAAI,aAAa,SAAS,EAAE;gEAC1B,OAAO,CAAC,eAAe,EAAE,WAAW;4DACtC;4DAEA,OAAO,aAAa,aAAa,IAAI;wDACvC;wDAEA,qBACE,8OAAC;4DACC,WAAU;4DACV,OAAO;;8EAGP,8OAAC;oEACC,WAAW,CAAC,QAAQ,EAAE,YAAY;oEAClC,SAAQ;oEACR,MAAK;oEACL,OAAM;8EAEL,iBACC,gCAAgC;kFAChC,8OAAC;wEACC,GAAE;wEACF,QAAO;wEACP,aAAY;wEACZ,eAAc;wEACd,gBAAe;wEACf,WAAU;;;;;+EAGZ,uCAAuC;kFACvC,8OAAC;wEACC,GAAE;wEACF,QAAO;wEACP,aAAY;wEACZ,eAAc;;;;;;;;;;;8EAIpB,8OAAC;oEAAK,WAAW,CAAC,QAAQ,EAAE,YAAY;8EACrC;;;;;;;;;;;;oDAIT,CAAC;;;;;;;0DAEH,8OAAC;gDACC,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,eAAe,EAAE,QAAQ,EAAE,EAAE;gDACzD,WAAU;;kEAEV,8OAAC,uMAAG;wDAAC,WAAU;;;;;;kEACf,8OAAC;kEAAK;;;;;;;;;;;;;;;;;;;+BAtRF,QAAQ,EAAE;;;;;;;;;6CA6RxB,8OAAC,qMAAU;wBACT,oBAAM,8OAAC,6MAAK;4BAAC,WAAU;;;;;;wBACvB,OAAO,UAAU,MAAM,KAAK,IAAI,uBAAuB;wBACvD,SAAS,UAAU,MAAM,KAAK,IAC1B,4DACA;wBAEJ,YAAY,UAAU,MAAM,KAAK,IAAI,sBAAsB;wBAC3D,UAAU,UAAU,MAAM,KAAK,IAAI;4BACjC,eAAe,CAAC,IAAI,qBAAqB;4BACzC,SAAS,KAAK,uBAAuB;4BACrC,eAAe;4BACf;wBACF,IAAI;wBACJ,YAAY,UAAU,MAAM,KAAK;;;;;;;;;;;;0BAMrC,8OAAC,iKAAkB;gBACjB,eAAe,kBAAkB,IAAI;gBACrC,YAAY,kBAAkB,MAAM;gBACpC,cAAc;gBACd,oBAAoB;gBACpB,aAAa;gBACb,kBAAkB;oBAChB,qBAAqB,IAAI;gBAC3B;gBACA,UAAS;gBACT,kBAAkB;gBAClB,mBAAmB;gBACnB,oBAAoB,CAAC,SAAW,cAAc;;;;;;0BAIhD,8OAAC,mKAAoB;gBACnB,SAAS;oBACP;wBACE,oBAAM,8OAAC,0MAAI;4BAAC,WAAU;;;;;;wBACtB,OAAO;wBACP,SAAS;4BACP,eAAe,CAAC;4BAChB,SAAS;4BACT,eAAe;4BACf;wBACF;wBACA,OAAO;oBACT;iBACD;gBACD,aAAa;;;;;;0BAIf,8OAAC,6LAAS;gBACR,QAAQ;gBACR,SAAS,IAAM,eAAe;gBAC9B,OAAM;gBACN,UAAS;0BAET,cAAA,8OAAC;oBAAK,UAAU;oBAAkB,WAAU;;sCAC1C,8OAAC,0LAAQ;;8CAEP,8OAAC,6LAAS;oCACR,OAAM;oCACN,OAAO,SAAS,IAAI;oCACpB,UAAU,CAAC,QAAU,kBAAkB,QAAQ;oCAC/C,aAAY;oCACZ,QAAQ;oCACR,OAAO,YAAY,IAAI;oCACvB,SAAS;;;;;;8CAGX,8OAAC,6LAAS;oCACR,OAAM;oCACN,OAAO,SAAS,SAAS;oCACzB,UAAU,CAAC,QAAU,kBAAkB,aAAa;oCACpD,aAAY;oCACZ,QAAQ;oCACR,OAAO,YAAY,SAAS;oCAC5B,SAAS;;;;;;8CAGX,8OAAC;;sDACC,8OAAC;4CAAM,WAAU;;gDAAkE;8DACxE,8OAAC;oDAAK,WAAU;8DAAe;;;;;;;;;;;;sDAE1C,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDACC,MAAM,kBAAkB,SAAS;oDACjC,OAAO,SAAS,QAAQ;oDACxB,UAAU,CAAC,IAAM,kBAAkB,YAAY,EAAE,MAAM,CAAC,KAAK;oDAC7D,aAAY;oDACZ,QAAQ;oDACR,WAAU;;;;;;8DAEZ,8OAAC;oDACC,MAAK;oDACL,SAAS,IAAM,mBAAmB,CAAC;oDACnC,WAAU;oDACV,OAAO,kBAAkB,kBAAkB;8DAE1C,gCAAkB,8OAAC,oNAAM;wDAAC,WAAU;;;;;6EAAe,8OAAC,uMAAG;wDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;8CAKzE,8OAAC,gMAAU;oCACT,OAAM;oCACN,OAAO,SAAS,KAAK;oCACrB,UAAU,CAAC,QAAU,kBAAkB,SAAS;oCAChD,SAAS,KAAK,GAAG,CAAC,CAAA,MAAO,CAAC;4CACxB,OAAO,IAAI,EAAE;4CACb,OAAO,GAAG,IAAI,IAAI,CAAC,EAAE,EAAE,IAAI,KAAK,CAAC,CAAC,CAAC;wCACrC,CAAC;oCACD,aAAY;oCACZ,QAAQ;oCACR,UAAU;oCACV,SAAS;;;;;;8CAIX,8OAAC,6LAAS;oCACR,OAAM;oCACN,OAAO,SAAS,aAAa;oCAC7B,UAAU,CAAC,QAAU,kBAAkB,iBAAiB;oCACxD,aAAY;oCACZ,SAAS;;;;;;8CAGX,8OAAC,6LAAS;oCACR,OAAM;oCACN,OAAO,SAAS,QAAQ;oCACxB,UAAU,CAAC,QAAU,kBAAkB,YAAY;oCACnD,aAAY;oCACZ,SAAS;;;;;;8CAGX,8OAAC,6LAAS;oCACR,OAAM;oCACN,MAAK;oCACL,OAAO,SAAS,YAAY;oCAC5B,UAAU,CAAC;wCACT,MAAM,YAAY,IAAA,+JAAgB,EAAC;wCACnC,kBAAkB,gBAAgB;oCACpC;oCACA,QAAQ;wCACN,MAAM,QAAQ,IAAA,kKAAmB,EAAC,SAAS,YAAY;wCACvD,IAAI,OAAO;4CACT,eAAe,CAAA,OAAQ,CAAC;oDAAE,GAAG,IAAI;oDAAE,cAAc;gDAAM,CAAC;wCAC1D,OAAO;4CACL,eAAe,CAAA,OAAQ,CAAC;oDAAE,GAAG,IAAI;oDAAE,cAAc;gDAAU,CAAC;wCAC9D;oCACF;oCACA,aAAY;oCACZ,OAAO,YAAY,YAAY;oCAC/B,SAAS;;;;;;8CAGX,8OAAC,6LAAS;oCACR,OAAM;oCACN,MAAK;oCACL,OAAO,SAAS,KAAK;oCACrB,UAAU,CAAC;wCACT,MAAM,YAAY,IAAA,+JAAgB,EAAC;wCACnC,kBAAkB,SAAS;oCAC7B;oCACA,QAAQ;wCACN,MAAM,QAAQ,IAAA,kKAAmB,EAAC,SAAS,KAAK;wCAChD,IAAI,OAAO;4CACT,eAAe,CAAA,OAAQ,CAAC;oDAAE,GAAG,IAAI;oDAAE,OAAO;gDAAM,CAAC;wCACnD,OAAO;4CACL,eAAe,CAAA,OAAQ,CAAC;oDAAE,GAAG,IAAI;oDAAE,OAAO;gDAAU,CAAC;wCACvD;oCACF;oCACA,aAAY;oCACZ,OAAO,YAAY,KAAK;oCACxB,QAAQ;oCACR,SAAS;;;;;;8CAGX,8OAAC,gMAAU;oCACT,OAAM;oCACN,OAAO,SAAS,MAAM;oCACtB,UAAU,CAAC,QAAU,kBAAkB,UAAU;oCACjD,SAAS;wCACP;4CAAE,OAAO;4CAAU,OAAO;wCAAS;wCACnC;4CAAE,OAAO;4CAAY,OAAO;wCAAW;wCACvC;4CAAE,OAAO;4CAAe,OAAO;wCAAc;wCAC7C;4CAAE,OAAO;4CAAa,OAAO;wCAAY;qCAC1C;oCACD,SAAS;;;;;;;;;;;;sCAIb,8OAAC,mMAAW;4BACV,UAAU,IAAM,eAAe;4BAC/B,YAAW;4BACX,WAAW;;;;;;;;;;;;;;;;;0BAMjB,8OAAC,6LAAS;gBACR,QAAQ,gBAAgB,CAAC,CAAC;gBAC1B,SAAS;oBACP,gBAAgB;oBAChB,mBAAmB;oBACnB,YAAY;gBACd;gBACA,OAAO,kBAAkB,GAAG,EAAE,MAAM,EAAE,QAAQ,OAAO,CAAC,EAAE,gBAAgB,IAAI,EAAE,GAAI,EAAE,MAAM,EAAE,QAAQ;gBACpG,UAAS;0BAET,cAAA,8OAAC;oBAAK,UAAU;oBAAmB,WAAU;;sCAC3C,8OAAC,0LAAQ;;8CAEP,8OAAC,6LAAS;oCACR,OAAM;oCACN,OAAO,SAAS,IAAI;oCACpB,UAAU,CAAC,QAAU,kBAAkB,QAAQ;oCAC/C,aAAY;oCACZ,QAAQ;oCACR,OAAO,YAAY,IAAI;oCACvB,SAAS;;;;;;8CAGX,8OAAC,6LAAS;oCACR,OAAM;oCACN,OAAO,SAAS,SAAS;oCACzB,UAAU,KAAO;oCACjB,QAAQ;oCACR,QAAQ;oCACR,SAAS;;;;;;8CAGX,8OAAC,gMAAU;oCACT,OAAM;oCACN,OAAO,SAAS,KAAK;oCACrB,UAAU,CAAC,QAAU,kBAAkB,SAAS;oCAChD,SAAS,KAAK,GAAG,CAAC,CAAA,MAAO,CAAC;4CACxB,OAAO,IAAI,EAAE;4CACb,OAAO,GAAG,IAAI,IAAI,CAAC,EAAE,EAAE,IAAI,KAAK,CAAC,CAAC,CAAC;wCACrC,CAAC;oCACD,aAAY;oCACZ,QAAQ;oCACR,UAAU;oCACV,SAAS;;;;;;8CAIX,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAM,WAAU;sDAAkE;;;;;;sDAGnF,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDACC,MAAM,eAAe,SAAS;oDAC9B,OAAO,SAAS,QAAQ;oDACxB,UAAU,CAAC,IAAM,kBAAkB,YAAY,EAAE,MAAM,CAAC,KAAK;oDAC7D,aAAY;oDACZ,WAAU;;;;;;8DAEZ,8OAAC;oDACC,MAAK;oDACL,SAAS,IAAM,gBAAgB,CAAC;oDAChC,WAAU;oDACV,OAAO,eAAe,kBAAkB;8DAEvC,6BAAe,8OAAC,oNAAM;wDAAC,WAAU;;;;;6EAAe,8OAAC,uMAAG;wDAAC,WAAU;;;;;;;;;;;;;;;;;sDAGpE,8OAAC;4CAAE,WAAU;sDAAgD;;;;;;;;;;;;8CAK/D,8OAAC,6LAAS;oCACR,OAAM;oCACN,OAAO,SAAS,aAAa;oCAC7B,UAAU,CAAC,QAAU,kBAAkB,iBAAiB;oCACxD,aAAY;oCACZ,SAAS;;;;;;8CAGX,8OAAC,6LAAS;oCACR,OAAM;oCACN,OAAO,SAAS,QAAQ;oCACxB,UAAU,CAAC,QAAU,kBAAkB,YAAY;oCACnD,aAAY;oCACZ,SAAS;;;;;;8CAGX,8OAAC,6LAAS;oCACR,OAAM;oCACN,MAAK;oCACL,OAAO,SAAS,YAAY;oCAC5B,UAAU,CAAC;wCACT,MAAM,YAAY,IAAA,+JAAgB,EAAC;wCACnC,kBAAkB,gBAAgB;oCACpC;oCACA,QAAQ;wCACN,MAAM,QAAQ,IAAA,kKAAmB,EAAC,SAAS,YAAY;wCACvD,IAAI,OAAO;4CACT,eAAe,CAAA,OAAQ,CAAC;oDAAE,GAAG,IAAI;oDAAE,cAAc;gDAAM,CAAC;wCAC1D,OAAO;4CACL,eAAe,CAAA,OAAQ,CAAC;oDAAE,GAAG,IAAI;oDAAE,cAAc;gDAAU,CAAC;wCAC9D;oCACF;oCACA,aAAY;oCACZ,OAAO,YAAY,YAAY;oCAC/B,SAAS;;;;;;8CAGX,8OAAC,6LAAS;oCACR,OAAM;oCACN,MAAK;oCACL,OAAO,SAAS,KAAK;oCACrB,UAAU,CAAC;wCACT,MAAM,YAAY,IAAA,+JAAgB,EAAC;wCACnC,kBAAkB,SAAS;oCAC7B;oCACA,QAAQ;wCACN,MAAM,QAAQ,IAAA,kKAAmB,EAAC,SAAS,KAAK;wCAChD,IAAI,OAAO;4CACT,eAAe,CAAA,OAAQ,CAAC;oDAAE,GAAG,IAAI;oDAAE,OAAO;gDAAM,CAAC;wCACnD,OAAO;4CACL,eAAe,CAAA,OAAQ,CAAC;oDAAE,GAAG,IAAI;oDAAE,OAAO;gDAAU,CAAC;wCACvD;oCACF;oCACA,aAAa,iBAAiB,QAAQ,CAAC,SAAS,EAAE,gBAAgB,KAAK,EAAE,GAAG;oCAC5E,OAAO,YAAY,KAAK;oCACxB,QAAQ;oCACR,SAAS;oCACT,YAAW;;;;;;8CAGb,8OAAC,gMAAU;oCACT,OAAM;oCACN,OAAO,SAAS,MAAM;oCACtB,UAAU,CAAC,QAAU,kBAAkB,UAAU;oCACjD,SAAS;wCACP;4CAAE,OAAO;4CAAU,OAAO;wCAAS;wCACnC;4CAAE,OAAO;4CAAY,OAAO;wCAAW;wCACvC;4CAAE,OAAO;4CAAe,OAAO;wCAAc;wCAC7C;4CAAE,OAAO;4CAAa,OAAO;wCAAY;qCAC1C;oCACD,SAAS;;;;;;;;;;;;sCAIb,8OAAC,mMAAW;4BACV,UAAU;gCACR,gBAAgB;gCAChB,mBAAmB;gCACnB,YAAY;4BACd;4BACA,YAAW;4BACX,WAAW;4BACX,YAAW;4BACX,aAAY;4BACZ,0BAAY,8OAAC,mNAAK;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;0BAMnC,8OAAC,6JAAkB;gBACjB,QAAQ,mBAAmB,CAAC,CAAC;gBAC7B,SAAS;oBACP,mBAAmB;oBACnB,mBAAmB;gBACrB;gBACA,WAAW;gBACX,aAAa,iBAAiB,QAAQ;gBACtC,SAAS;;;;;;0BAIX,8OAAC,iKAAqB;gBACpB,QAAQ;gBACR,SAAS,IAAM,yBAAyB;gBACxC,WAAW;gBACX,OAAO,CAAC,OAAO,EAAE,kBAAkB,IAAI,CAAC,CAAC,EAAE,kBAAkB,IAAI,KAAK,IAAI,YAAY,aAAa;gBACnG,SAAS,CAAC,iDAAiD,EAAE,kBAAkB,IAAI,CAAC,UAAU,EAAE,kBAAkB,IAAI,KAAK,IAAI,YAAY,YAAY,wEAAwE,CAAC;;;;;;0BAIlO,8OAAC,oNAAe;gBACd,WAAW,WAAW,kBAAkB;gBACxC,SACE,iBACI,CAAC,SAAS,EAAE,kBAAkB,IAAI,CAAC,CAAC,EAAE,kBAAkB,IAAI,KAAK,IAAI,YAAY,aAAa,GAC9F,aACA,qBACA;gBAEN,YACE,kBAAkB,aACd,+CACA;gBAEN,cAAc;;;;;;YAIf,gCACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,+NAAS;4CAAC,WAAU;;;;;;sDACrB,8OAAC;4CAAG,WAAU;;gDACX,gBAAgB,cAAc;gDAC9B,gBAAgB,aAAa;gDAC7B,gBAAgB,SAAS;gDACzB,gBAAgB,SAAS;gDACzB,gBAAgB,iBAAiB;gDACjC,gBAAgB,WAAW;;;;;;;;;;;;;8CAGhC,8OAAC;oCACC,SAAS,IAAM,kBAAkB;oCACjC,WAAU;8CAEV,cAAA,8OAAC,iMAAC;wCAAC,WAAU;;;;;;;;;;;;;;;;;sCAKjB,8OAAC;4BAAI,WAAU;sCACZ,CAAC;gCACA,MAAM,qBAAqB,UAAU,MAAM,CAAC,CAAA,IAAK,EAAE,gBAAgB,IAAI,EAAE,gBAAgB,GAAG;gCAE5F,8CAA8C;gCAC9C,MAAM,YAAY,mBAAmB,GAAG,CAAC,CAAA,UAAW,CAAC;wCACnD,MAAM,QAAQ,IAAI;wCAClB,WAAW,QAAQ,SAAS;wCAC5B,OAAO,gBAAgB,aAAc,QAAQ,gBAAgB,IAAI,IAC1D,gBAAgB,YAAa,QAAQ,cAAc,IAAI,IACvD,gBAAgB,QAAS,QAAQ,cAAc,IAAI,IACnD,gBAAgB,QAAS,QAAQ,cAAc,IAAI,IACnD,gBAAgB,gBAAiB,QAAQ,mBAAmB,IAAI,IAC/D,QAAQ,gBAAgB,IAAI;oCACtC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,KAAK,GAAG,EAAE,KAAK;gCAEpC,yBAAyB;gCACzB,MAAM,eAAe;oCACnB,OAAQ;wCACN,KAAK;4CAAY,OAAO;wCACxB,KAAK;4CAAW,OAAO;wCACvB,KAAK;4CAAO,OAAO;wCACnB,KAAK;4CAAO,OAAO;wCACnB,KAAK;4CAAe,OAAO;wCAC3B,KAAK;4CAAS,OAAO;wCACrB;4CAAS,OAAO;oCAClB;gCACF;gCAEA,MAAM,gBAAgB;oCACpB,OAAQ;wCACN,KAAK;4CAAY,OAAO;wCACxB,KAAK;4CAAW,OAAO;wCACvB,KAAK;4CAAO,OAAO;wCACnB,KAAK;4CAAO,OAAO;wCACnB,KAAK;4CAAe,OAAO;wCAC3B,KAAK;4CAAS,OAAO;wCACrB;4CAAS,OAAO;oCAClB;gCACF;gCAEA,MAAM,gBAAgB,CAAC,EAAE,MAAM,EAAE,OAAO,EAKvC;oCACC,IAAI,UAAU,WAAW,QAAQ,MAAM,EAAE;wCACvC,MAAM,OAAO,OAAO,CAAC,EAAE,CAAC,OAAO;wCAC/B,qBACE,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAE,WAAU;8DAAgD,KAAK,IAAI;;;;;;8DACtE,8OAAC;oDAAE,WAAU;;wDAAgD;wDAAE,KAAK,SAAS;wDAAC;;;;;;;8DAC9E,8OAAC;oDAAE,WAAU;oDAAgB,OAAO;wDAAE,OAAO;oDAAe;;wDACzD,gBAAgB,aAAa;wDAC7B,KAAK,KAAK,CAAC,OAAO,CAAC;wDACnB,gBAAgB,SAAS,gBAAgB,SAAS,gBAAgB,UAAU,MAAM;wDAClF,gBAAgB,aAAa,OAAO;;;;;;;;;;;;;oCAI7C;oCACA,OAAO;gCACT;gCAEA,OAAO,UAAU,MAAM,GAAG,kBACxB,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,0LAAmB;wCAAC,OAAM;wCAAO,QAAO;kDACvC,cAAA,8OAAC,kKAAS;4CAAC,MAAM;4CAAW,QAAQ;gDAAE,KAAK;gDAAG,OAAO;gDAAI,MAAM;gDAAI,QAAQ;4CAAG;;8DAC5E,8OAAC,8KAAa;oDAAC,iBAAgB;oDAAM,QAAO;oDAAU,WAAU;;;;;;8DAChE,8OAAC,8JAAK;oDACJ,SAAQ;oDACR,OAAO,CAAC;oDACR,YAAW;oDACX,QAAQ;oDACR,UAAU;oDACV,MAAM;wDAAE,UAAU;oDAAG;oDACrB,QAAO;oDACP,OAAO;wDACL,OAAO;wDACP,UAAU;wDACV,QAAQ,CAAC;wDACT,OAAO;4DAAE,UAAU;4DAAI,YAAY;4DAAK,MAAM;wDAAU;oDAC1D;;;;;;8DAEF,8OAAC,8JAAK;oDACJ,OAAO;wDACL,OAAO;wDACP,OAAO,CAAC;wDACR,UAAU;wDACV,OAAO;4DAAE,UAAU;4DAAI,YAAY;wDAAI;oDACzC;oDACA,MAAM;wDAAE,UAAU;oDAAG;oDACrB,QAAO;;;;;;8DAET,8OAAC,kKAAO;oDAAC,uBAAS,8OAAC;;;;;;;;;;8DACnB,8OAAC,4JAAI;oDACH,MAAK;oDACL,SAAQ;oDACR,QAAQ;oDACR,aAAa;oDACb,KAAK;wDAAE,MAAM;wDAAgB,GAAG;oDAAE;oDAClC,WAAW;wDAAE,GAAG;oDAAE;oDAClB,MAAM;;;;;;;;;;;;;;;;;;;;;yDAMd,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,+NAAS;4CAAC,WAAU;;;;;;sDACrB,8OAAC;4CAAE,WAAU;sDAAmC;;;;;;;;;;;;4BAGtD,CAAC;;;;;;;;;;;;;;;;;;;AAOf","debugId":null}}]
}