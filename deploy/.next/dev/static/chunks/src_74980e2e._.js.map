{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/lib/validation/phoneValidation.ts"],"sourcesContent":["/**\r\n * Mobile Number Validation Utilities\r\n * \r\n * Validates and formats Indian mobile numbers\r\n * Indian mobile numbers: 10 digits starting with 6-9\r\n */\r\n\r\nexport interface PhoneValidationResult {\r\n  isValid: boolean;\r\n  error?: string;\r\n  formatted?: string;\r\n}\r\n\r\n/**\r\n * Validates Indian mobile number\r\n * @param phone - Phone number to validate\r\n * @returns Validation result with error message if invalid\r\n */\r\nexport function validateIndianPhone(phone: string): PhoneValidationResult {\r\n  if (!phone || phone.trim() === '') {\r\n    return {\r\n      isValid: false,\r\n      error: 'Phone number is required'\r\n    };\r\n  }\r\n\r\n  // Remove all non-digit characters\r\n  const cleaned = phone.replace(/\\D/g, '');\r\n\r\n  // Check length\r\n  if (cleaned.length !== 10) {\r\n    return {\r\n      isValid: false,\r\n      error: 'Phone number must be exactly 10 digits'\r\n    };\r\n  }\r\n\r\n  // Check if starts with valid digit (6-9)\r\n  if (!/^[6-9]/.test(cleaned)) {\r\n    return {\r\n      isValid: false,\r\n      error: 'Phone number must start with 6, 7, 8, or 9'\r\n    };\r\n  }\r\n\r\n  return {\r\n    isValid: true,\r\n    formatted: cleaned\r\n  };\r\n}\r\n\r\n/**\r\n * Formats phone number input - allows only digits and limits to 10\r\n * @param value - Input value\r\n * @returns Formatted phone number (digits only, max 10)\r\n */\r\nexport function formatPhoneInput(value: string): string {\r\n  // Remove all non-digit characters\r\n  const cleaned = value.replace(/\\D/g, '');\r\n  \r\n  // Limit to 10 digits\r\n  return cleaned.slice(0, 10);\r\n}\r\n\r\n/**\r\n * Checks if phone number is complete (10 digits)\r\n * @param phone - Phone number to check\r\n * @returns True if phone has 10 digits\r\n */\r\nexport function isPhoneComplete(phone: string): boolean {\r\n  const cleaned = phone.replace(/\\D/g, '');\r\n  return cleaned.length === 10;\r\n}\r\n\r\n/**\r\n * Display formatted phone number with spacing\r\n * @param phone - Phone number to format\r\n * @returns Formatted as: XXXXX XXXXX\r\n */\r\nexport function displayPhoneNumber(phone: string): string {\r\n  const cleaned = phone.replace(/\\D/g, '');\r\n  \r\n  if (cleaned.length <= 5) {\r\n    return cleaned;\r\n  }\r\n  \r\n  return `${cleaned.slice(0, 5)} ${cleaned.slice(5)}`;\r\n}\r\n\r\n/**\r\n * Validates phone on blur - provides detailed error\r\n * @param phone - Phone number to validate\r\n * @returns Error message or empty string if valid\r\n */\r\nexport function validatePhoneOnBlur(phone: string): string {\r\n  if (!phone || phone.trim() === '') {\r\n    return ''; // Don't show error for empty field (let required handle it)\r\n  }\r\n\r\n  const result = validateIndianPhone(phone);\r\n  return result.error || '';\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;;;;;;;;;AAaM,SAAS,oBAAoB,KAAa;IAC/C,IAAI,CAAC,SAAS,MAAM,IAAI,OAAO,IAAI;QACjC,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,kCAAkC;IAClC,MAAM,UAAU,MAAM,OAAO,CAAC,OAAO;IAErC,eAAe;IACf,IAAI,QAAQ,MAAM,KAAK,IAAI;QACzB,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,yCAAyC;IACzC,IAAI,CAAC,SAAS,IAAI,CAAC,UAAU;QAC3B,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,OAAO;QACL,SAAS;QACT,WAAW;IACb;AACF;AAOO,SAAS,iBAAiB,KAAa;IAC5C,kCAAkC;IAClC,MAAM,UAAU,MAAM,OAAO,CAAC,OAAO;IAErC,qBAAqB;IACrB,OAAO,QAAQ,KAAK,CAAC,GAAG;AAC1B;AAOO,SAAS,gBAAgB,KAAa;IAC3C,MAAM,UAAU,MAAM,OAAO,CAAC,OAAO;IACrC,OAAO,QAAQ,MAAM,KAAK;AAC5B;AAOO,SAAS,mBAAmB,KAAa;IAC9C,MAAM,UAAU,MAAM,OAAO,CAAC,OAAO;IAErC,IAAI,QAAQ,MAAM,IAAI,GAAG;QACvB,OAAO;IACT;IAEA,OAAO,GAAG,QAAQ,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE,QAAQ,KAAK,CAAC,IAAI;AACrD;AAOO,SAAS,oBAAoB,KAAa;IAC/C,IAAI,CAAC,SAAS,MAAM,IAAI,OAAO,IAAI;QACjC,OAAO,IAAI,4DAA4D;IACzE;IAEA,MAAM,SAAS,oBAAoB;IACnC,OAAO,OAAO,KAAK,IAAI;AACzB","debugId":null}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/components/NavigationConfirmModal.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { ExternalLink } from 'lucide-react';\r\n\r\ninterface NavigationConfirmModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: () => void;\r\n  title: string;\r\n  message: string;\r\n  confirmText?: string;\r\n  cancelText?: string;\r\n}\r\n\r\nexport default function NavigationConfirmModal({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  title,\r\n  message,\r\n  confirmText = 'Continue',\r\n  cancelText = 'Cancel'\r\n}: NavigationConfirmModalProps) {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\" onClick={onClose}>\r\n          <motion.div\r\n            initial={{ opacity: 0, scale: 0.9 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            exit={{ opacity: 0, scale: 0.9 }}\r\n            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n            onClick={(e) => e.stopPropagation()}\r\n            className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full p-6\"\r\n          >\r\n            {/* Icon */}\r\n            <div className=\"flex justify-center mb-4\">\r\n              <div className=\"w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center\">\r\n                <ExternalLink className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"text-center mb-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\r\n                {title}\r\n              </h3>\r\n              <p className=\"text-gray-600 dark:text-gray-400\">\r\n                {message}\r\n              </p>\r\n            </div>\r\n\r\n            {/* Actions */}\r\n            <div className=\"flex justify-end gap-3\">\r\n              <button\r\n                onClick={onClose}\r\n                className=\"px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\r\n              >\r\n                {cancelText}\r\n              </button>\r\n              <button\r\n                onClick={onConfirm}\r\n                className=\"px-4 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors\"\r\n              >\r\n                {confirmText}\r\n              </button>\r\n            </div>\r\n          </motion.div>\r\n        </div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AAHA;;;;AAee,SAAS,uBAAuB,EAC7C,MAAM,EACN,OAAO,EACP,SAAS,EACT,KAAK,EACL,OAAO,EACP,cAAc,UAAU,EACxB,aAAa,QAAQ,EACO;IAC5B,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,6LAAC,+MAAe;kBACb,wBACC,6LAAC;YAAI,WAAU;YAAsE,SAAS;sBAC5F,cAAA,6LAAC,uMAAM,CAAC,GAAG;gBACT,SAAS;oBAAE,SAAS;oBAAG,OAAO;gBAAI;gBAClC,SAAS;oBAAE,SAAS;oBAAG,OAAO;gBAAE;gBAChC,MAAM;oBAAE,SAAS;oBAAG,OAAO;gBAAI;gBAC/B,YAAY;oBAAE,MAAM;oBAAU,SAAS;oBAAI,WAAW;gBAAI;gBAC1D,SAAS,CAAC,IAAM,EAAE,eAAe;gBACjC,WAAU;;kCAGV,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,yOAAY;gCAAC,WAAU;;;;;;;;;;;;;;;;kCAK5B,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CACX;;;;;;0CAEH,6LAAC;gCAAE,WAAU;0CACV;;;;;;;;;;;;kCAKL,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,SAAS;gCACT,WAAU;0CAET;;;;;;0CAEH,6LAAC;gCACC,SAAS;gCACT,WAAU;0CAET;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQjB;KA5DwB","debugId":null}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/components/modals/TransferSocietiesModal.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { X, AlertTriangle, Building2, ArrowRight, Users, CheckCircle, Mail, RefreshCw } from 'lucide-react';\r\n\r\ninterface Society {\r\n  id: number;\r\n  name: string;\r\n  society_id: string;\r\n}\r\n\r\ninterface BMC {\r\n  id: number;\r\n  name: string;\r\n  bmcId: string;\r\n}\r\n\r\ninterface TransferSocietiesModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: (newBmcId: number | null, deleteAll: boolean, otp?: string) => void;\r\n  bmcName: string;\r\n  bmcId: number;\r\n  societies: Society[];\r\n  availableBMCs: BMC[];\r\n}\r\n\r\nexport default function TransferSocietiesModal({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  bmcName,\r\n  bmcId,\r\n  societies,\r\n  availableBMCs\r\n}: TransferSocietiesModalProps) {\r\n  const [selectedBmcId, setSelectedBmcId] = useState<number | null>(null);\r\n  const [isTransferring, setIsTransferring] = useState(false);\r\n  const [deleteAll, setDeleteAll] = useState(false);\r\n  const [showOtpInput, setShowOtpInput] = useState(false);\r\n  const [otp, setOtp] = useState(['', '', '', '', '', '']);\r\n  const [otpSent, setOtpSent] = useState(false);\r\n  const [otpError, setOtpError] = useState('');\r\n  const [isSendingOtp, setIsSendingOtp] = useState(false);\r\n  const inputRefs = useRef<(HTMLInputElement | null)[]>([]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setSelectedBmcId(null);\r\n      setDeleteAll(false);\r\n      setShowOtpInput(false);\r\n      setOtp(['', '', '', '', '', '']);\r\n      setOtpSent(false);\r\n      setOtpError('');\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const sendOTP = async () => {\r\n    setIsSendingOtp(true);\r\n    setOtpError('');\r\n    \r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/bmc/send-delete-otp', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ bmcId, bmcName })\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (response.ok) {\r\n        setOtpSent(true);\r\n        setShowOtpInput(true);\r\n        setTimeout(() => inputRefs.current[0]?.focus(), 100);\r\n      } else {\r\n        setOtpError(result.error || 'Failed to send OTP');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error sending OTP:', error);\r\n      setOtpError('Failed to send OTP. Please try again.');\r\n    } finally {\r\n      setIsSendingOtp(false);\r\n    }\r\n  };\r\n\r\n  const handleOtpChange = (index: number, value: string) => {\r\n    if (value.length > 1) return;\r\n    if (!/^\\d*$/.test(value)) return;\r\n\r\n    const newOtp = [...otp];\r\n    newOtp[index] = value;\r\n    setOtp(newOtp);\r\n\r\n    if (value && index < 5) {\r\n      inputRefs.current[index + 1]?.focus();\r\n    }\r\n  };\r\n\r\n  const handleOtpKeyDown = (index: number, e: React.KeyboardEvent) => {\r\n    if (e.key === 'Backspace' && !otp[index] && index > 0) {\r\n      inputRefs.current[index - 1]?.focus();\r\n    }\r\n  };\r\n\r\n  const handleOtpPaste = (e: React.ClipboardEvent) => {\r\n    e.preventDefault();\r\n    const pastedData = e.clipboardData.getData('text').replace(/\\D/g, '').slice(0, 6);\r\n    \r\n    if (pastedData.length === 6) {\r\n      const newOtp = pastedData.split('');\r\n      setOtp(newOtp);\r\n    }\r\n  };\r\n\r\n  const handleTransfer = async () => {\r\n    if (!deleteAll && !selectedBmcId) return;\r\n    \r\n    // Always require OTP for both transfer and delete-all\r\n    if (!otpSent) {\r\n      await sendOTP();\r\n      return;\r\n    }\r\n    \r\n    const otpCode = otp.join('');\r\n    if (otpCode.length !== 6) {\r\n      setOtpError('Please enter the 6-digit OTP');\r\n      return;\r\n    }\r\n\r\n    setIsTransferring(true);\r\n    try {\r\n      await onConfirm(selectedBmcId, deleteAll, otpCode);\r\n    } catch {\r\n      setOtpError('Invalid OTP. Please try again.');\r\n      setOtp(['', '', '', '', '', '']);\r\n      inputRefs.current[0]?.focus();\r\n    } finally {\r\n      setIsTransferring(false);\r\n    }\r\n  };\r\n\r\n  const selectedBmc = availableBMCs.find(bmc => bmc.id === selectedBmcId);\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n          {/* Backdrop */}\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            onClick={onClose}\r\n            className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\r\n          />\r\n\r\n          {/* Modal */}\r\n          <motion.div\r\n            initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n            exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n            className=\"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden\"\r\n          >\r\n            {/* Header */}\r\n            <div className=\"sticky top-0 bg-gradient-to-r from-orange-500 to-red-500 px-6 py-4\">\r\n              <div className=\"flex items-start justify-between\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  <div className=\"p-2 bg-white/20 rounded-lg\">\r\n                    <AlertTriangle className=\"w-6 h-6 text-white\" />\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"text-xl font-bold text-white\">Transfer Societies Required</h3>\r\n                    <p className=\"text-sm text-white/90 mt-1\">Cannot delete BMC with active societies</p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={onClose}\r\n                  className=\"p-2 hover:bg-white/20 rounded-lg transition-colors\"\r\n                >\r\n                  <X className=\"w-5 h-5 text-white\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-200px)]\">\r\n              {/* Warning Message */}\r\n              <div className=\"mb-6 p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg\">\r\n                <div className=\"flex gap-3\">\r\n                  <AlertTriangle className=\"w-5 h-5 text-orange-600 dark:text-orange-400 flex-shrink-0 mt-0.5\" />\r\n                  <div>\r\n                    <h4 className=\"font-semibold text-orange-900 dark:text-orange-100\">\r\n                      {societies.length} {societies.length === 1 ? 'Society' : 'Societies'} Under This BMC\r\n                    </h4>\r\n                    <p className=\"text-sm text-orange-800 dark:text-orange-200 mt-1\">\r\n                      Before deleting <strong>{bmcName}</strong>, you must either transfer all societies to another BMC or delete everything.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Delete All Option */}\r\n              <div className=\"mb-6\">\r\n                <label className=\"flex items-start gap-3 p-4 bg-red-50 dark:bg-red-900/20 border-2 border-red-200 dark:border-red-800 rounded-lg cursor-pointer hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={deleteAll}\r\n                    onChange={(e) => {\r\n                      setDeleteAll(e.target.checked);\r\n                      if (e.target.checked) {\r\n                        setSelectedBmcId(null);\r\n                      }\r\n                    }}\r\n                    className=\"mt-0.5 w-5 h-5 text-red-600 bg-white dark:bg-gray-700 border-red-300 dark:border-red-700 rounded focus:ring-2 focus:ring-red-500 cursor-pointer\"\r\n                  />\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <AlertTriangle className=\"w-5 h-5 text-red-600 dark:text-red-400\" />\r\n                      <span className=\"font-semibold text-red-900 dark:text-red-100\">\r\n                        Delete All Data (Permanent)\r\n                      </span>\r\n                    </div>\r\n                    <p className=\"text-sm text-red-800 dark:text-red-200 mt-1\">\r\n                      Delete all societies, farmers, machines, machine statistics, machine corrections, rate charts, collections, sales, dispatches, and section pulse data under this BMC. \r\n                      <strong className=\"block mt-1\">This action cannot be undone!</strong>\r\n                    </p>\r\n                  </div>\r\n                </label>\r\n              </div>\r\n\r\n              {/* Societies List */}\r\n              <div className=\"mb-6\">\r\n                <h4 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2\">\r\n                  <Users className=\"w-4 h-4\" />\r\n                  Societies to Transfer ({societies.length})\r\n                </h4>\r\n                <div className=\"space-y-2 max-h-40 overflow-y-auto p-3 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700\">\r\n                  {societies.map((society) => (\r\n                    <div\r\n                      key={society.id}\r\n                      className=\"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700\"\r\n                    >\r\n                      <div>\r\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{society.name}</p>\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">ID: {society.society_id}</p>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* BMC Selection */}\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3\">\r\n                  Select Target BMC {!deleteAll && <span className=\"text-red-500\">*</span>}\r\n                </label>\r\n                {deleteAll && (\r\n                  <div className=\"mb-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg\">\r\n                    <p className=\"text-sm text-yellow-800 dark:text-yellow-200\">\r\n                      <strong>Delete All</strong> is enabled. BMC selection is disabled.\r\n                    </p>\r\n                  </div>\r\n                )}\r\n                <div className={`space-y-2 ${deleteAll ? 'opacity-50 pointer-events-none' : ''}`}>\r\n                  {availableBMCs.length === 0 ? (\r\n                    <div className=\"p-4 text-center bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700\">\r\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                        No other BMCs available. {!deleteAll && 'Please create a new BMC first or use Delete All option.'}\r\n                      </p>\r\n                    </div>\r\n                  ) : (\r\n                    availableBMCs.map((bmc) => (\r\n                      <button\r\n                        key={bmc.id}\r\n                        onClick={() => setSelectedBmcId(bmc.id)}\r\n                        disabled={deleteAll}\r\n                        className={`w-full p-4 rounded-lg border-2 transition-all text-left ${\r\n                          selectedBmcId === bmc.id\r\n                            ? 'border-green-500 bg-green-50 dark:bg-green-900/20'\r\n                            : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 bg-white dark:bg-gray-800'\r\n                        }`}\r\n                      >\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div className=\"flex items-center gap-3\">\r\n                            <div className={`p-2 rounded-lg ${\r\n                              selectedBmcId === bmc.id\r\n                                ? 'bg-green-500'\r\n                                : 'bg-gray-100 dark:bg-gray-700'\r\n                            }`}>\r\n                              <Building2 className={`w-5 h-5 ${\r\n                                selectedBmcId === bmc.id\r\n                                  ? 'text-white'\r\n                                  : 'text-gray-600 dark:text-gray-400'\r\n                              }`} />\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"font-medium text-gray-900 dark:text-gray-100\">{bmc.name}</p>\r\n                              <p className=\"text-sm text-gray-500 dark:text-gray-400\">ID: {bmc.bmcId}</p>\r\n                            </div>\r\n                          </div>\r\n                          {selectedBmcId === bmc.id && (\r\n                            <CheckCircle className=\"w-5 h-5 text-green-500\" />\r\n                          )}\r\n                        </div>\r\n                      </button>\r\n                    ))\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Transfer Preview */}\r\n              {selectedBmc && !deleteAll && (\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: 10 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  className=\"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\"\r\n                >\r\n                  <div className=\"flex items-center justify-center gap-3 text-sm\">\r\n                    <div className=\"text-center\">\r\n                      <p className=\"font-medium text-gray-900 dark:text-gray-100\">{bmcName}</p>\r\n                      <p className=\"text-xs text-gray-500 dark:text-gray-400\">Current BMC</p>\r\n                    </div>\r\n                    <ArrowRight className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\r\n                    <div className=\"text-center\">\r\n                      <p className=\"font-medium text-gray-900 dark:text-gray-100\">{selectedBmc.name}</p>\r\n                      <p className=\"text-xs text-gray-500 dark:text-gray-400\">New BMC</p>\r\n                    </div>\r\n                  </div>\r\n                  <p className=\"text-xs text-center text-blue-800 dark:text-blue-200 mt-2\">\r\n                    All {societies.length} {societies.length === 1 ? 'society' : 'societies'} will be transferred\r\n                  </p>\r\n                </motion.div>\r\n              )}\r\n\r\n              {/* Delete All Preview */}\r\n              {deleteAll && (\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: 10 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  className=\"mt-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\"\r\n                >\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <AlertTriangle className=\"w-8 h-8 text-red-600 dark:text-red-400 flex-shrink-0\" />\r\n                    <div className=\"flex-1\">\r\n                      <h5 className=\"font-semibold text-red-900 dark:text-red-100 mb-1\">\r\n                        Complete Data Deletion\r\n                      </h5>\r\n                      <p className=\"text-sm text-red-800 dark:text-red-200\">\r\n                        The following will be permanently deleted:\r\n                      </p>\r\n                      <ul className=\"text-sm text-red-800 dark:text-red-200 mt-2 space-y-1 list-disc list-inside\">\r\n                        <li>{societies.length} {societies.length === 1 ? 'Society' : 'Societies'}</li>\r\n                        <li>All farmers under these societies</li>\r\n                        <li>All machines linked to these societies</li>\r\n                        <li>All machine statistics</li>\r\n                        <li>All machine corrections (admin & device saved)</li>\r\n                        <li>All rate charts and rate chart data</li>\r\n                        <li>All milk collection records</li>\r\n                        <li>All milk sales records</li>\r\n                        <li>All milk dispatch records</li>\r\n                        <li>All section pulse tracking data</li>\r\n                        <li>BMC: <strong>{bmcName}</strong></li>\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n                </motion.div>\r\n              )}\r\n\r\n              {/* OTP Input Section */}\r\n              {otpSent && showOtpInput && (\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: 10 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  className=\"mt-6 p-4 bg-orange-50 dark:bg-orange-900/20 border-2 border-orange-300 dark:border-orange-700 rounded-lg\"\r\n                >\r\n                  <div className=\"text-center\">\r\n                    <h4 className=\"font-semibold text-orange-900 dark:text-orange-100 mb-2 flex items-center justify-center gap-2\">\r\n                      <Mail className=\"w-5 h-5\" />\r\n                      OTP Verification Required\r\n                    </h4>\r\n                    <p className=\"text-sm text-orange-800 dark:text-orange-200 mb-4\">\r\n                      We&apos;ve sent a 6-digit OTP to your registered email. Please enter it below to confirm {deleteAll ? 'deletion' : 'transfer'}.\r\n                    </p>\r\n                    \r\n                    {/* OTP Input Boxes */}\r\n                    <div className=\"flex justify-center gap-2 mb-4\">\r\n                      {otp.map((digit, index) => (\r\n                        <input\r\n                          key={index}\r\n                          ref={el => { inputRefs.current[index] = el; }}\r\n                          type=\"text\"\r\n                          inputMode=\"numeric\"\r\n                          maxLength={1}\r\n                          value={digit}\r\n                          onChange={(e) => handleOtpChange(index, e.target.value)}\r\n                          onKeyDown={(e) => handleOtpKeyDown(index, e)}\r\n                          onPaste={handleOtpPaste}\r\n                          className=\"w-12 h-14 text-center text-2xl font-bold border-2 border-orange-300 dark:border-orange-700 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100\"\r\n                          disabled={isTransferring}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n\r\n                    {otpError && (\r\n                      <p className=\"text-sm text-red-600 dark:text-red-400 mb-2\">{otpError}</p>\r\n                    )}\r\n\r\n                    <button\r\n                      onClick={sendOTP}\r\n                      disabled={isSendingOtp}\r\n                      className=\"text-sm text-orange-700 dark:text-orange-300 hover:text-orange-900 dark:hover:text-orange-100 flex items-center justify-center gap-1 mx-auto transition-colors disabled:opacity-50\"\r\n                    >\r\n                      <RefreshCw className=\"w-4 h-4\" />\r\n                      Resend OTP\r\n                    </button>\r\n                  </div>\r\n                </motion.div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div className=\"sticky bottom-0 bg-gray-50 dark:bg-gray-900/50 px-6 py-4 border-t border-gray-200 dark:border-gray-700\">\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  onClick={onClose}\r\n                  disabled={isTransferring}\r\n                  className=\"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={handleTransfer}\r\n                  disabled={(!selectedBmcId && !deleteAll) || isTransferring || (otpSent && otp.join('').length !== 6)}\r\n                  className={`flex-1 px-4 py-2.5 text-sm font-medium text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 ${\r\n                    deleteAll \r\n                      ? 'bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700' \r\n                      : 'bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600'\r\n                  }`}\r\n                >\r\n                  {isTransferring ? (\r\n                    <>\r\n                      <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                      {deleteAll ? 'Deleting All...' : 'Transferring...'}\r\n                    </>\r\n                  ) : !otpSent ? (\r\n                    <>\r\n                      <Mail className=\"w-4 h-4\" />\r\n                      Send OTP to Confirm\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      {deleteAll ? <AlertTriangle className=\"w-4 h-4\" /> : <ArrowRight className=\"w-4 h-4\" />}\r\n                      Verify OTP & {deleteAll ? 'Delete All' : 'Transfer'}\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1389, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/components/modals/DeleteBMCModal.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useRef, KeyboardEvent, ClipboardEvent } from 'react';\r\nimport { X, AlertTriangle, Trash2, Send, ShieldCheck } from 'lucide-react';\r\n\r\ninterface DeleteBMCModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: (otp: string) => Promise<void>;\r\n  bmcName: string;\r\n  loading?: boolean;\r\n  societyCount?: number;\r\n  farmerCount?: number;\r\n  collectionCount?: number;\r\n  machineCount?: number;\r\n}\r\n\r\nexport default function DeleteBMCModal({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  bmcName,\r\n  loading = false,\r\n  societyCount = 0,\r\n  farmerCount = 0,\r\n  collectionCount = 0,\r\n  machineCount = 0\r\n}: DeleteBMCModalProps) {\r\n  const [step, setStep] = useState<'confirm' | 'otp'>('confirm');\r\n  const [otp, setOtp] = useState(['', '', '', '', '', '']);\r\n  const [otpLoading, setOtpLoading] = useState(false);\r\n  const [otpError, setOtpError] = useState('');\r\n  const inputRefs = useRef<(HTMLInputElement | null)[]>([]);\r\n\r\n  const handleSendOTP = async () => {\r\n    try {\r\n      setOtpLoading(true);\r\n      setOtpError('');\r\n\r\n      // Get BMC ID from window (stored by parent component)\r\n      const bmcId = (window as Window & { selectedBmcIdForDelete?: number }).selectedBmcIdForDelete;\r\n      if (!bmcId) {\r\n        setOtpError('BMC ID not found. Please try again.');\r\n        return;\r\n      }\r\n\r\n      const response = await fetch('/api/user/bmc/send-delete-otp', {\r\n        method: 'POST',\r\n        headers: { \r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\r\n        },\r\n        body: JSON.stringify({ bmcId }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to send OTP');\r\n      }\r\n\r\n      setStep('otp');\r\n      // Auto-focus first input\r\n      setTimeout(() => inputRefs.current[0]?.focus(), 100);\r\n    } catch (error: unknown) {\r\n      setOtpError(error instanceof Error ? error.message : 'Failed to send OTP');\r\n    } finally {\r\n      setOtpLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleOtpChange = (index: number, value: string) => {\r\n    if (value.length > 1) {\r\n      value = value[0];\r\n    }\r\n\r\n    if (!/^\\d*$/.test(value)) return;\r\n\r\n    const newOtp = [...otp];\r\n    newOtp[index] = value;\r\n    setOtp(newOtp);\r\n\r\n    // Auto-focus next input\r\n    if (value && index < 5) {\r\n      inputRefs.current[index + 1]?.focus();\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (index: number, e: KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === 'Backspace' && !otp[index] && index > 0) {\r\n      inputRefs.current[index - 1]?.focus();\r\n    }\r\n  };\r\n\r\n  const handlePaste = (e: ClipboardEvent<HTMLInputElement>) => {\r\n    e.preventDefault();\r\n    const pastedData = e.clipboardData.getData('text').slice(0, 6);\r\n    if (!/^\\d+$/.test(pastedData)) return;\r\n\r\n    const newOtp = [...otp];\r\n    pastedData.split('').forEach((char, index) => {\r\n      if (index < 6) newOtp[index] = char;\r\n    });\r\n    setOtp(newOtp);\r\n\r\n    const nextEmptyIndex = newOtp.findIndex(val => !val);\r\n    if (nextEmptyIndex !== -1) {\r\n      inputRefs.current[nextEmptyIndex]?.focus();\r\n    } else {\r\n      inputRefs.current[5]?.focus();\r\n    }\r\n  };\r\n\r\n  const handleVerifyOtp = async () => {\r\n    const otpString = otp.join('');\r\n    if (otpString.length !== 6) {\r\n      setOtpError('Please enter the complete 6-digit OTP');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await onConfirm(otpString);\r\n      handleClose();\r\n    } catch (error: unknown) {\r\n      setOtpError(error instanceof Error ? error.message : 'Invalid or expired OTP');\r\n      setOtp(['', '', '', '', '', '']);\r\n      inputRefs.current[0]?.focus();\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setStep('confirm');\r\n    setOtp(['', '', '', '', '', '']);\r\n    setOtpError('');\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"bg-gradient-to-r from-red-500 to-red-600 px-6 py-4 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2 bg-white/20 rounded-lg\">\r\n              <Trash2 className=\"w-5 h-5 text-white\" />\r\n            </div>\r\n            <h3 className=\"text-lg font-semibold text-white\">\r\n              {step === 'confirm' ? 'Delete BMC' : 'Verify OTP'}\r\n            </h3>\r\n          </div>\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={loading || otpLoading}\r\n            className=\"text-white/80 hover:text-white transition-colors disabled:opacity-50\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6\">\r\n          {step === 'confirm' ? (\r\n            <>\r\n              {/* Warning Message */}\r\n              <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-4\">\r\n                <div className=\"flex gap-3\">\r\n                  <AlertTriangle className=\"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-red-900 dark:text-red-100 mb-1\">\r\n                      Warning: This action cannot be undone\r\n                    </p>\r\n                    <p className=\"text-sm text-red-700 dark:text-red-300\">\r\n                      Deleting this BMC will permanently remove:\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Deletion Details */}\r\n              <div className=\"space-y-3 mb-6\">\r\n                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4\">\r\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">BMC Name</p>\r\n                  <p className=\"font-semibold text-gray-900 dark:text-gray-100\">{bmcName}</p>\r\n                </div>\r\n\r\n                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4\">\r\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">The following data will be deleted:</p>\r\n                  <ul className=\"space-y-1 text-sm text-gray-700 dark:text-gray-300\">\r\n                    {societyCount > 0 && (\r\n                      <li className=\"flex items-center gap-2\">\r\n                        <div className=\"w-1.5 h-1.5 bg-red-500 rounded-full\"></div>\r\n                        {societyCount} societ{societyCount > 1 ? 'ies' : 'y'}\r\n                      </li>\r\n                    )}\r\n                    {farmerCount > 0 && (\r\n                      <li className=\"flex items-center gap-2\">\r\n                        <div className=\"w-1.5 h-1.5 bg-red-500 rounded-full\"></div>\r\n                        {farmerCount} farmer{farmerCount > 1 ? 's' : ''} and their data\r\n                      </li>\r\n                    )}\r\n                    {collectionCount > 0 && (\r\n                      <li className=\"flex items-center gap-2\">\r\n                        <div className=\"w-1.5 h-1.5 bg-red-500 rounded-full\"></div>\r\n                        {collectionCount} collection record{collectionCount > 1 ? 's' : ''}\r\n                      </li>\r\n                    )}\r\n                    {machineCount > 0 && (\r\n                      <li className=\"flex items-center gap-2\">\r\n                        <div className=\"w-1.5 h-1.5 bg-red-500 rounded-full\"></div>\r\n                        {machineCount} machine{machineCount > 1 ? 's' : ''} and settings\r\n                      </li>\r\n                    )}\r\n                    {societyCount === 0 && farmerCount === 0 && collectionCount === 0 && machineCount === 0 && (\r\n                      <li className=\"flex items-center gap-2\">\r\n                        <div className=\"w-1.5 h-1.5 bg-red-500 rounded-full\"></div>\r\n                        The BMC details only\r\n                      </li>\r\n                    )}\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Actions */}\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  onClick={handleClose}\r\n                  disabled={loading || otpLoading}\r\n                  className=\"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={handleSendOTP}\r\n                  disabled={loading || otpLoading}\r\n                  className=\"flex-1 px-4 py-2.5 bg-gradient-to-r from-red-500 to-red-600 rounded-lg font-medium text-white hover:from-red-600 hover:to-red-700 transition-all disabled:opacity-50 flex items-center justify-center gap-2\"\r\n                >\r\n                  {otpLoading ? (\r\n                    <>\r\n                      <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\"></div>\r\n                      Sending OTP...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Send className=\"w-4 h-4\" />\r\n                      Send OTP\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              {/* OTP Instructions */}\r\n              <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6\">\r\n                <div className=\"flex gap-3\">\r\n                  <ShieldCheck className=\"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-blue-900 dark:text-blue-100 mb-1\">\r\n                      OTP Sent to Your Email\r\n                    </p>\r\n                    <p className=\"text-sm text-blue-700 dark:text-blue-300\">\r\n                      Please enter the 6-digit OTP to confirm deletion. The code will expire in 10 minutes.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* OTP Input */}\r\n              <div className=\"mb-6\">\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\r\n                  Enter OTP Code\r\n                </label>\r\n                <div className=\"flex gap-2 justify-center\">\r\n                  {otp.map((digit, index) => (\r\n                    <input\r\n                      key={index}\r\n                      ref={el => { inputRefs.current[index] = el; }}\r\n                      type=\"text\"\r\n                      inputMode=\"numeric\"\r\n                      maxLength={1}\r\n                      value={digit}\r\n                      onChange={(e) => handleOtpChange(index, e.target.value)}\r\n                      onKeyDown={(e) => handleKeyDown(index, e)}\r\n                      onPaste={index === 0 ? handlePaste : undefined}\r\n                      className=\"w-12 h-14 text-center text-xl font-bold border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-red-500 focus:ring-2 focus:ring-red-500/20 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                      disabled={loading}\r\n                    />\r\n                  ))}\r\n                </div>\r\n                {otpError && (\r\n                  <p className=\"text-sm text-red-600 dark:text-red-400 mt-2 text-center\">{otpError}</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Actions */}\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  onClick={() => {\r\n                    setStep('confirm');\r\n                    setOtp(['', '', '', '', '', '']);\r\n                    setOtpError('');\r\n                  }}\r\n                  disabled={loading}\r\n                  className=\"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50\"\r\n                >\r\n                  Back\r\n                </button>\r\n                <button\r\n                  onClick={handleVerifyOtp}\r\n                  disabled={loading || otp.some(d => !d)}\r\n                  className=\"flex-1 px-4 py-2.5 bg-gradient-to-r from-red-500 to-red-600 rounded-lg font-medium text-white hover:from-red-600 hover:to-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                >\r\n                  {loading ? (\r\n                    <>\r\n                      <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\"></div>\r\n                      Deleting...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Trash2 className=\"w-4 h-4\" />\r\n                      Delete BMC\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2036, "column": 0}, "map": {"version":3,"sources":["file:///P:/psr-cloud-v2/src/app/admin/bmc/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { formatPhoneInput, validatePhoneOnBlur } from '@/lib/validation/phoneValidation';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { useUser } from '@/contexts/UserContext';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer\r\n} from 'recharts';\r\nimport { \r\n  Factory, \r\n  MapPin,\r\n  Phone,\r\n  Mail,\r\n  User,\r\n  Calendar,\r\n  Activity,\r\n  Building2,\r\n  Milk,\r\n  Save,\r\n  Edit3,\r\n  Trash2,\r\n  Users,\r\n  TrendingUp,\r\n  Award,\r\n  Droplets,\r\n  Eye,\r\n  EyeOff,\r\n  Plus,\r\n  BarChart3,\r\n  X,\r\n  ExternalLink\r\n} from 'lucide-react';\r\nimport { \r\n  FlowerSpinner, \r\n  LoadingSpinner,\r\n  FormModal, \r\n  FormInput, \r\n  FormSelect, \r\n  FormActions, \r\n  FormGrid,\r\n  PageHeader,\r\n  StatusMessage,\r\n  StatsCard,\r\n  FilterControls,\r\n  EmptyState,\r\n  StatusDropdown\r\n} from '@/components';\r\nimport FloatingActionButton from '@/components/management/FloatingActionButton';\r\nimport NavigationConfirmModal from '@/components/NavigationConfirmModal';\r\nimport TransferSocietiesModal from '@/components/modals/TransferSocietiesModal';\r\nimport DeleteBMCModal from '@/components/modals/DeleteBMCModal';\r\n\r\ninterface BMC {\r\n  id: number;\r\n  name: string;\r\n  bmcId: string;\r\n  dairyFarmId: number;\r\n  dairyFarmName?: string;\r\n  location?: string;\r\n  contactPerson?: string;\r\n  phone?: string;\r\n  email?: string;\r\n  capacity?: number;\r\n  status: 'active' | 'inactive' | 'maintenance';\r\n  monthlyTarget?: number;\r\n  createdAt: string;\r\n  lastActivity?: string;\r\n  societyCount?: number;\r\n  totalCollections30d?: number;\r\n  totalQuantity30d?: number;\r\n  totalAmount30d?: number;\r\n  weightedFat30d?: number;\r\n  weightedSnf30d?: number;\r\n  weightedClr30d?: number;\r\n  weightedWater30d?: number;\r\n}\r\n\r\ninterface BMCFormData {\r\n  name: string;\r\n  bmcId: string;\r\n  password: string;\r\n  dairyFarmId: string;\r\n  location: string;\r\n  contactPerson: string;\r\n  phone: string;\r\n  email: string;\r\n  capacity: string;\r\n  status: 'active' | 'inactive' | 'maintenance';\r\n  monthlyTarget: string;\r\n}\r\n\r\nconst initialFormData: BMCFormData = {\r\n  name: '',\r\n  bmcId: '',\r\n  password: '',\r\n  dairyFarmId: '',\r\n  location: '',\r\n  contactPerson: '',\r\n  phone: '',\r\n  email: '',\r\n  capacity: '',\r\n  status: 'active',\r\n  monthlyTarget: ''\r\n};\r\n\r\ninterface Dairy {\r\n  id: number;\r\n  name: string;\r\n  dairyId: string;\r\n}\r\n\r\n// Helper function to highlight matching text in search results\r\nconst highlightText = (text: string | number | null | undefined, searchQuery: string) => {\r\n  if (!text && text !== 0) return text || '';\r\n  if (!searchQuery) return text;\r\n  \r\n  const textStr = text.toString();\r\n  const regex = new RegExp(`(${searchQuery.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\r\n  const parts = textStr.split(regex);\r\n  \r\n  return parts.map((part, index) => \r\n    regex.test(part) ? (\r\n      <span key={index} className=\"bg-yellow-200 dark:bg-yellow-800 px-0.5 rounded\">\r\n        {part}\r\n      </span>\r\n    ) : (\r\n      part\r\n    )\r\n  );\r\n};\r\n\r\nexport default function BMCManagement() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const { user } = useUser();\r\n  const { t } = useLanguage();\r\n  \r\n  // State management\r\n  const [bmcs, setBMCs] = useState<BMC[]>([]);\r\n  const [dairies, setDairies] = useState<Dairy[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [dairiesLoading, setDairiesLoading] = useState(true);\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [showEditForm, setShowEditForm] = useState(false);\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [showTransferModal, setShowTransferModal] = useState(false);\r\n  const [societies, setSocieties] = useState<any[]>([]);\r\n  const [availableBMCs, setAvailableBMCs] = useState<BMC[]>([]);\r\n  const [selectedBMC, setSelectedBMC] = useState<BMC | null>(null);\r\n  const [formData, setFormData] = useState<BMCFormData>(initialFormData);\r\n  const [formLoading, setFormLoading] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'inactive' | 'maintenance'>('all');\r\n  const [dairyFilter, setDairyFilter] = useState<string[]>([]);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [currentPassword, setCurrentPassword] = useState('');\r\n  const [showAddPassword, setShowAddPassword] = useState(false);\r\n  const [fieldErrors, setFieldErrors] = useState<{ \r\n    bmcId?: string; \r\n    name?: string;\r\n    phone?: string;\r\n  }>({});\r\n  const [showGraphModal, setShowGraphModal] = useState(false);\r\n  const [graphMetric, setGraphMetric] = useState<'quantity' | 'revenue' | 'fat' | 'snf' | 'collections' | 'water'>('quantity');\r\n  const [showSocietiesAlert, setShowSocietiesAlert] = useState(false);\r\n  const [bmcForNavigation, setBmcForNavigation] = useState<BMC | null>(null);\r\n\r\n  // Fetch dairies for dropdown\r\n  const fetchDairies = useCallback(async () => {\r\n    try {\r\n      setDairiesLoading(true);\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) return;\r\n\r\n      const response = await fetch('/api/user/dairy', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        setDairies(result.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching dairies:', error);\r\n    } finally {\r\n      setDairiesLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch BMCs\r\n  const fetchBMCs = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) {\r\n        router.push('/login');\r\n        return;\r\n      }\r\n\r\n      const response = await fetch('/api/user/bmc', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (!response.ok) {\r\n        if (response.status === 401 || response.status === 403) {\r\n          localStorage.removeItem('authToken');\r\n          router.push('/login');\r\n          return;\r\n        }\r\n        throw new Error('Failed to fetch BMCs');\r\n      }\r\n\r\n      const result = await response.json();\r\n      setBMCs(result.data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching BMCs:', error);\r\n      setError('Failed to load BMC data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [router]);\r\n\r\n  // Handle Add BMC button click with validation\r\n  const handleAddBMCClick = () => {\r\n    if (dairies.length === 0) {\r\n      setError('Please add a dairy farm first before adding BMC');\r\n      setTimeout(() => setError(''), 5000);\r\n      return;\r\n    }\r\n    setError('');\r\n    setShowAddForm(true);\r\n  };\r\n\r\n  // Add new BMC\r\n  const handleAddBMC = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setFormLoading(true);\r\n    setError('');\r\n\r\n    // Validate required fields\r\n    if (!formData.dairyFarmId) {\r\n      setError('Please select a dairy farm');\r\n      setFormLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/bmc', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          ...formData,\r\n          dairyFarmId: parseInt(formData.dairyFarmId),\r\n          capacity: formData.capacity ? parseInt(formData.capacity) : undefined,\r\n          monthlyTarget: formData.monthlyTarget ? parseInt(formData.monthlyTarget) : undefined\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSuccess('BMC added successfully!');\r\n        setShowAddForm(false);\r\n        setFormData(initialFormData);\r\n        await fetchBMCs();\r\n        \r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        const errorResponse = await response.json();\r\n        const errorMessage = errorResponse.error || 'Failed to add BMC';\r\n        \r\n        // Clear previous field errors\r\n        setFieldErrors({});\r\n        \r\n        // Check for specific field errors\r\n        if (errorMessage.toLowerCase().includes('bmc id') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ bmcId: 'This BMC ID already exists' });\r\n        } else if (errorMessage.toLowerCase().includes('bmc name') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ name: 'This BMC name already exists' });\r\n        } else {\r\n          setError(errorMessage);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding BMC:', error);\r\n      setError('Failed to add BMC');\r\n    } finally {\r\n      setFormLoading(false);\r\n    }\r\n  };\r\n\r\n  // Open edit modal\r\n  const handleEditClick = async (bmc: BMC) => {\r\n    setSelectedBMC(bmc);\r\n    setShowPassword(false);\r\n    setCurrentPassword('');\r\n    \r\n    // Fetch current password\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch(`/api/user/bmc/password?id=${bmc.id}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        const fetchedPassword = result.data?.password || result.password || '';\r\n        setCurrentPassword(fetchedPassword);\r\n        \r\n        setFormData({\r\n          name: bmc.name,\r\n          bmcId: bmc.bmcId,\r\n          password: fetchedPassword,\r\n          dairyFarmId: bmc.dairyFarmId?.toString() || '',\r\n          location: bmc.location || '',\r\n          contactPerson: bmc.contactPerson || '',\r\n          phone: bmc.phone || '',\r\n          email: bmc.email || '',\r\n          capacity: bmc.capacity?.toString() || '',\r\n          status: bmc.status || 'active',\r\n          monthlyTarget: bmc.monthlyTarget?.toString() || ''\r\n        });\r\n      } else {\r\n        setFormData({\r\n          name: bmc.name,\r\n          bmcId: bmc.bmcId,\r\n          password: '',\r\n          dairyFarmId: bmc.dairyFarmId?.toString() || '',\r\n          location: bmc.location || '',\r\n          contactPerson: bmc.contactPerson || '',\r\n          phone: bmc.phone || '',\r\n          email: bmc.email || '',\r\n          capacity: bmc.capacity?.toString() || '',\r\n          status: bmc.status || 'active',\r\n          monthlyTarget: bmc.monthlyTarget?.toString() || ''\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching password:', error);\r\n      setFormData({\r\n        name: bmc.name,\r\n        bmcId: bmc.bmcId,\r\n        password: '',\r\n        dairyFarmId: bmc.dairyFarmId?.toString() || '',\r\n        location: bmc.location || '',\r\n        contactPerson: bmc.contactPerson || '',\r\n        phone: bmc.phone || '',\r\n        email: bmc.email || '',\r\n        capacity: bmc.capacity?.toString() || '',\r\n        status: bmc.status || 'active',\r\n        monthlyTarget: bmc.monthlyTarget?.toString() || ''\r\n      });\r\n    }\r\n    \r\n    setShowEditForm(true);\r\n  };\r\n\r\n  // Update BMC\r\n  const handleUpdateBMC = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!selectedBMC) return;\r\n\r\n    setFormLoading(true);\r\n    setError('');\r\n\r\n    // Validate required fields\r\n    if (!formData.dairyFarmId) {\r\n      setError('Please select a dairy farm');\r\n      setFormLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const updateData: Record<string, string | number | undefined> = {\r\n        id: selectedBMC.id,\r\n        name: formData.name,\r\n        dairyFarmId: parseInt(formData.dairyFarmId),\r\n        location: formData.location,\r\n        contactPerson: formData.contactPerson,\r\n        phone: formData.phone,\r\n        email: formData.email,\r\n        capacity: formData.capacity ? parseInt(formData.capacity) : undefined,\r\n        status: formData.status,\r\n        monthlyTarget: formData.monthlyTarget ? parseInt(formData.monthlyTarget) : undefined\r\n      };\r\n\r\n      // Only include password if it was changed from the original\r\n      if (formData.password && formData.password !== currentPassword) {\r\n        updateData.password = formData.password;\r\n      }\r\n\r\n      const response = await fetch('/api/user/bmc', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(updateData)\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSuccess('BMC updated successfully!');\r\n        setShowEditForm(false);\r\n        setSelectedBMC(null);\r\n        setFormData(initialFormData);\r\n        await fetchBMCs();\r\n        \r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        const errorResponse = await response.json();\r\n        const errorMessage = errorResponse.error || 'Failed to update BMC';\r\n        \r\n        // Clear previous field errors\r\n        setFieldErrors({});\r\n        \r\n        // Check for specific field errors\r\n        if (errorMessage.toLowerCase().includes('bmc name') && errorMessage.toLowerCase().includes('already exists')) {\r\n          setFieldErrors({ name: 'This BMC name already exists' });\r\n        } else {\r\n          setError(errorMessage);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating BMC:', error);\r\n      setError('Failed to update BMC');\r\n    } finally {\r\n      setFormLoading(false);\r\n    }\r\n  };\r\n\r\n  // Update BMC status\r\n  const handleStatusChange = async (bmc: BMC, newStatus: 'active' | 'inactive' | 'maintenance') => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/bmc', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          id: bmc.id,\r\n          status: newStatus\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSuccess(`Status updated to ${newStatus}!`);\r\n        await fetchBMCs();\r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        const error = await response.json();\r\n        setError(error.error || 'Failed to update status');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating status:', error);\r\n      setError('Failed to update status');\r\n    }\r\n  };\r\n\r\n  // Open delete confirmation modal\r\n  const handleDeleteClick = async (bmc: BMC) => {\r\n    setSelectedBMC(bmc);\r\n    \r\n    // Fetch societies for this BMC\r\n    const bmcSocieties = await fetchSocietiesForBMC(bmc.id);\r\n    \r\n    if (bmcSocieties.length > 0) {\r\n      // Has societies - show transfer modal\r\n      setSocieties(bmcSocieties);\r\n      const otherBMCs = bmcs.filter(b => b.id !== bmc.id);\r\n      setAvailableBMCs(otherBMCs);\r\n      setShowTransferModal(true);\r\n    } else {\r\n      // No societies - store BMC ID for OTP modal and show delete modal\r\n      (window as any).selectedBmcIdForDelete = bmc.id;\r\n      setShowDeleteModal(true);\r\n    }\r\n  };\r\n\r\n  // Fetch societies under a specific BMC\r\n  const fetchSocietiesForBMC = async (bmcId: number) => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/society', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        const bmcSocieties = result.data?.filter((s: any) => s.bmc_id === bmcId) || [];\r\n        return bmcSocieties;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching societies:', error);\r\n    }\r\n    return [];\r\n  };\r\n\r\n  // Delete BMC (no societies) with OTP verification\r\n  const handleConfirmDelete = async (otp: string) => {\r\n    if (!selectedBMC) return;\r\n\r\n    try {\r\n      setIsDeleting(true);\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/bmc', {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          id: selectedBMC.id,\r\n          otp\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSuccess('BMC deleted successfully!');\r\n        setShowDeleteModal(false);\r\n        setSelectedBMC(null);\r\n        await fetchBMCs();\r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        const error = await response.json();\r\n        throw new Error(error.error || 'Failed to delete BMC');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error deleting BMC:', error);\r\n      throw error;\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  // Handle transfer and delete\r\n  const handleTransferAndDelete = async (newBmcId: number | null, deleteAll: boolean, otp?: string) => {\r\n    if (!selectedBMC) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch('/api/user/bmc', {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ \r\n          id: selectedBMC.id,\r\n          newBmcId,\r\n          deleteAll,\r\n          otp\r\n        })\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (response.ok) {\r\n        setShowTransferModal(false);\r\n        setSelectedBMC(null);\r\n        if (deleteAll) {\r\n          setSuccess('All data deleted successfully!');\r\n        } else {\r\n          setSuccess(`Transferred ${result.data?.transferredSocieties || 0} societies and deleted BMC successfully!`);\r\n        }\r\n        await fetchBMCs();\r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        setError(result.error || 'Failed to delete BMC');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting BMC:', error);\r\n      setError('Failed to delete BMC');\r\n    }\r\n  };\r\n\r\n  // Handle form input changes\r\n  const handleInputChange = (field: keyof BMCFormData, value: string) => {\r\n    if (field === 'bmcId' && !showEditForm) {\r\n      const cleanValue = value.replace(/^B-/i, '');\r\n      value = `B-${cleanValue}`;\r\n    }\r\n    \r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n    \r\n    // Clear field error when user starts typing\r\n    if (fieldErrors[field as keyof typeof fieldErrors]) {\r\n      setFieldErrors(prev => ({\r\n        ...prev,\r\n        [field]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  // Filter BMCs\r\n  const filteredBMCs = bmcs.filter(bmc => {\r\n    const matchesSearch = searchQuery === '' ||\r\n                         bmc.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         bmc.bmcId.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         bmc.location?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         bmc.contactPerson?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         bmc.phone?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         bmc.email?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         bmc.dairyFarmName?.toLowerCase().includes(searchQuery.toLowerCase());\r\n    \r\n    const matchesStatus = statusFilter === 'all' || bmc.status === statusFilter;\r\n    \r\n    const matchesDairy = dairyFilter.length === 0 || dairyFilter.includes(bmc.dairyFarmId?.toString() || '');\r\n    \r\n    return matchesSearch && matchesStatus && matchesDairy;\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchBMCs();\r\n    fetchDairies();\r\n  }, [fetchBMCs, fetchDairies]);\r\n\r\n  // Listen for global search events from header\r\n  useEffect(() => {\r\n    const handleGlobalSearch = (event: Event) => {\r\n      const customEvent = event as CustomEvent;\r\n      const query = customEvent.detail?.query || '';\r\n      setSearchQuery(query);\r\n    };\r\n    window.addEventListener('globalSearch', handleGlobalSearch);\r\n    return () => window.removeEventListener('globalSearch', handleGlobalSearch);\r\n  }, []);\r\n\r\n  // Handle URL parameters for dairy filter\r\n  useEffect(() => {\r\n    const dairyFilterParam = searchParams.get('dairyFilter');\r\n    if (dairyFilterParam && dairies.length > 0) {\r\n      setDairyFilter([dairyFilterParam]);\r\n    }\r\n  }, [searchParams, dairies]);\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\r\n        <FlowerSpinner />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"p-4 sm:p-6 lg:p-8 space-y-4 sm:space-y-6 lg:pb-8\">\r\n        {/* Page Header */}\r\n        <PageHeader\r\n          title=\"BMC Management\"\r\n          subtitle=\"Manage your Bulk Milk Cooling Centers\"\r\n          icon={<Factory className=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" />}\r\n          onRefresh={fetchBMCs}\r\n        />\r\n\r\n        {/* Success/Error Messages */}\r\n        <StatusMessage \r\n          success={success} \r\n          error={error && !error.includes('dairy farm first') ? error : undefined}\r\n        />\r\n        \r\n        {/* Custom Error Message for Dairy Dependency */}\r\n        {error && error.includes('dairy farm first') && (\r\n          <StatusMessage \r\n            error={error}\r\n          />\r\n        )}\r\n\r\n        {/* Top Performers Section */}\r\n        {bmcs.length > 0 && (() => {\r\n          const bmcsWithStats = bmcs.filter(b => b.totalQuantity30d && Number(b.totalQuantity30d) > 0);\r\n          \r\n          if (bmcsWithStats.length === 0) return null;\r\n\r\n          const topCollection = [...bmcsWithStats].sort((a, b) => \r\n            Number(b.totalQuantity30d || 0) - Number(a.totalQuantity30d || 0)\r\n          )[0];\r\n          \r\n          const topRevenue = [...bmcsWithStats].sort((a, b) => \r\n            Number(b.totalAmount30d || 0) - Number(a.totalAmount30d || 0)\r\n          )[0];\r\n          \r\n          const topFat = [...bmcsWithStats].sort((a, b) => \r\n            Number(b.weightedFat30d || 0) - Number(a.weightedFat30d || 0)\r\n          )[0];\r\n          \r\n          const topSnf = [...bmcsWithStats].sort((a, b) => \r\n            Number(b.weightedSnf30d || 0) - Number(a.weightedSnf30d || 0)\r\n          )[0];\r\n          \r\n          const mostCollections = [...bmcsWithStats].sort((a, b) => \r\n            Number(b.totalCollections30d || 0) - Number(a.totalCollections30d || 0)\r\n          )[0];\r\n          \r\n          const leastWater = [...bmcsWithStats].sort((a, b) => \r\n            Number(a.weightedWater30d || 100) - Number(b.weightedWater30d || 100)\r\n          )[0];\r\n\r\n          return (\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3 sm:gap-4\">\r\n              {topCollection && (\r\n                <div \r\n                  className=\"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-4 rounded-lg border border-green-200 dark:border-green-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                  onClick={() => {\r\n                    setGraphMetric('quantity');\r\n                    setShowGraphModal(true);\r\n                  }}\r\n                >\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-semibold text-green-900 dark:text-green-100\">Top Collection (30d)</h3>\r\n                    <Users className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\r\n                  </div>\r\n                  <p className=\"text-lg font-bold text-green-800 dark:text-green-200\">{topCollection.name}</p>\r\n                  <p className=\"text-sm text-green-600 dark:text-green-400\">{Number(topCollection.totalQuantity30d || 0).toFixed(2)} L</p>\r\n                </div>\r\n              )}\r\n              \r\n              {topRevenue && (\r\n                <div \r\n                  className=\"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                  onClick={() => {\r\n                    setGraphMetric('revenue');\r\n                    setShowGraphModal(true);\r\n                  }}\r\n                >\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-semibold text-blue-900 dark:text-blue-100\">Top Revenue (30d)</h3>\r\n                    <Building2 className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\r\n                  </div>\r\n                  <p className=\"text-lg font-bold text-blue-800 dark:text-blue-200\">{topRevenue.name}</p>\r\n                  <p className=\"text-sm text-blue-600 dark:text-blue-400\">{Number(topRevenue.totalAmount30d || 0).toFixed(2)}</p>\r\n                </div>\r\n              )}\r\n              \r\n              {topFat && (\r\n                <div \r\n                  className=\"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-4 rounded-lg border border-purple-200 dark:border-purple-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                  onClick={() => {\r\n                    setGraphMetric('fat');\r\n                    setShowGraphModal(true);\r\n                  }}\r\n                >\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-semibold text-purple-900 dark:text-purple-100\">Best Quality (30d)</h3>\r\n                    <Eye className=\"w-5 h-5 text-purple-600 dark:text-purple-400\" />\r\n                  </div>\r\n                  <p className=\"text-lg font-bold text-purple-800 dark:text-purple-200\">{topFat.name}</p>\r\n                  <p className=\"text-sm text-purple-600 dark:text-purple-400\">{Number(topFat.weightedFat30d || 0).toFixed(2)}% Fat</p>\r\n                </div>\r\n              )}\r\n              \r\n              {topSnf && (\r\n                <div \r\n                  className=\"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 p-4 rounded-lg border border-orange-200 dark:border-orange-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                  onClick={() => {\r\n                    setGraphMetric('snf');\r\n                    setShowGraphModal(true);\r\n                  }}\r\n                >\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-semibold text-orange-900 dark:text-orange-100\">Best SNF (30d)</h3>\r\n                    <TrendingUp className=\"w-5 h-5 text-orange-600 dark:text-orange-400\" />\r\n                  </div>\r\n                  <p className=\"text-lg font-bold text-orange-800 dark:text-orange-200\">{topSnf.name}</p>\r\n                  <p className=\"text-sm text-orange-600 dark:text-orange-400\">{Number(topSnf.weightedSnf30d || 0).toFixed(2)}% SNF</p>\r\n                </div>\r\n              )}\r\n              \r\n              {mostCollections && (\r\n                <div \r\n                  className=\"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 p-4 rounded-lg border border-pink-200 dark:border-pink-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                  onClick={() => {\r\n                    setGraphMetric('collections');\r\n                    setShowGraphModal(true);\r\n                  }}\r\n                >\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-semibold text-pink-900 dark:text-pink-100\">Most Active (30d)</h3>\r\n                    <Award className=\"w-5 h-5 text-pink-600 dark:text-pink-400\" />\r\n                  </div>\r\n                  <p className=\"text-lg font-bold text-pink-800 dark:text-pink-200\">{mostCollections.name}</p>\r\n                  <p className=\"text-sm text-pink-600 dark:text-pink-400\">{Number(mostCollections.totalCollections30d || 0)} Collections</p>\r\n                </div>\r\n              )}\r\n              \r\n              {leastWater && (\r\n                <div \r\n                  className=\"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 p-4 rounded-lg border border-red-200 dark:border-red-700 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                  onClick={() => {\r\n                    setGraphMetric('water');\r\n                    setShowGraphModal(true);\r\n                  }}\r\n                >\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-semibold text-red-900 dark:text-red-100\">Most Water (30d)</h3>\r\n                    <Droplets className=\"w-5 h-5 text-red-600 dark:text-red-400\" />\r\n                  </div>\r\n                  <p className=\"text-lg font-bold text-red-800 dark:text-red-200\">{leastWater.name}</p>\r\n                  <p className=\"text-sm text-red-600 dark:text-red-400\">{Number(leastWater.weightedWater30d || 0).toFixed(2)}% Water</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })()}\r\n\r\n        {/* Stats Cards removed per request */}\r\n\r\n        {/* Filter Controls */}\r\n        <FilterControls\r\n          icon={<Building2 className=\"w-4 h-4 flex-shrink-0\" />}\r\n          showingText={`Showing ${filteredBMCs.length} of ${bmcs.length} BMCs`}\r\n          filterLabel=\"Filter:\"\r\n          filterValue={statusFilter}\r\n          filterOptions={[\r\n            { value: 'all', label: 'All Status' },\r\n            { value: 'active', label: 'Active' },\r\n            { value: 'inactive', label: 'Inactive' },\r\n            { value: 'maintenance', label: 'Maintenance' }\r\n          ]}\r\n          onFilterChange={(value) => setStatusFilter(value as typeof statusFilter)}\r\n        />\r\n\r\n        {/* Main Content */}\r\n        {loading ? (\r\n          <LoadingSpinner />\r\n        ) : filteredBMCs.length > 0 ? (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6\">\r\n            {filteredBMCs.map((bmc) => (\r\n              <div key={bmc.id} className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-lg transition-all duration-200 overflow-visible border border-gray-200 dark:border-gray-700 hover:border-green-200 dark:hover:border-green-700 relative z-10 hover:z-20\">\r\n                {/* Header */}\r\n                <div className=\"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 border-b border-gray-200 dark:border-gray-700 rounded-t-lg\">\r\n                  <div className=\"flex items-start justify-between gap-3\">\r\n                    <div className=\"flex items-center gap-3 flex-1 min-w-0\">\r\n                      <div className=\"p-2 bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30 rounded-lg flex-shrink-0\">\r\n                        <Factory className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\r\n                      </div>\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white truncate\">{highlightText(bmc.name, searchQuery)}</h3>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">{highlightText(bmc.bmcId, searchQuery)}</p>\r\n                      </div>\r\n                    </div>\r\n                    <StatusDropdown\r\n                      currentStatus={bmc.status}\r\n                      onStatusChange={(status) => handleStatusChange(bmc, status as 'active' | 'inactive' | 'maintenance')}\r\n                      options={[\r\n                        {\r\n                          status: 'active',\r\n                          label: 'Active',\r\n                          color: 'bg-green-500',\r\n                          bgColor: 'hover:bg-green-50 dark:hover:bg-green-900/30'\r\n                        },\r\n                        {\r\n                          status: 'inactive',\r\n                          label: 'Inactive',\r\n                          color: 'bg-red-500',\r\n                          bgColor: 'hover:bg-red-50 dark:hover:bg-red-900/30'\r\n                        },\r\n                        {\r\n                          status: 'maintenance',\r\n                          label: 'Maintenance',\r\n                          color: 'bg-yellow-500',\r\n                          bgColor: 'hover:bg-yellow-50 dark:hover:bg-yellow-900/30'\r\n                        }\r\n                      ]}\r\n                      compact={true}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"p-4 space-y-3\">\r\n                  {/* Basic Info - Two Columns */}\r\n                  <div className=\"grid grid-cols-2 gap-3\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <User className=\"w-4 h-4 text-gray-500 flex-shrink-0\" />\r\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300 truncate\">{highlightText(bmc.contactPerson || 'No Contact', searchQuery)}</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Phone className=\"w-4 h-4 text-gray-500 flex-shrink-0\" />\r\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300 truncate\">{highlightText(bmc.phone || 'No Phone', searchQuery)}</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Location & Dairy - Two Columns */}\r\n                  <div className=\"grid grid-cols-2 gap-3\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <MapPin className=\"w-4 h-4 text-gray-500 flex-shrink-0\" />\r\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300 truncate\">{highlightText(bmc.location || 'No Location', searchQuery)}</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Milk className=\"w-4 h-4 text-blue-500 flex-shrink-0\" />\r\n                      <span className=\"text-sm text-blue-600 dark:text-blue-400 font-medium truncate\">{highlightText(bmc.dairyFarmName || 'No Dairy', searchQuery)}</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Divider */}\r\n                  <div className=\"border-t border-gray-200 dark:border-gray-700 my-3\"></div>\r\n\r\n                  {/* 30-Day Statistics Header */}\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide\">Last 30 Days</span>\r\n                    <Calendar className=\"w-4 h-4 text-gray-400\" />\r\n                  </div>\r\n\r\n                  {/* Collections & Quantity */}\r\n                  <div className=\"flex items-center justify-between bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className=\"w-2 h-2 rounded-full bg-blue-500\"></div>\r\n                      <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Collections</span>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <div className=\"text-lg font-bold text-blue-600 dark:text-blue-400\">{Number(bmc.totalCollections30d || 0)}</div>\r\n                      <div className=\"text-xs text-gray-600 dark:text-gray-400\">{Number(bmc.totalQuantity30d || 0).toFixed(2)} Liters</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Quality Metrics - Three Columns */}\r\n                  <div className=\"grid grid-cols-3 gap-2\">\r\n                    <div className=\"bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-2 text-center\">\r\n                      <div className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">Fat</div>\r\n                      <div className=\"text-sm font-bold text-indigo-600 dark:text-indigo-400\">{Number(bmc.weightedFat30d || 0).toFixed(2)}%</div>\r\n                    </div>\r\n                    <div className=\"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-2 text-center\">\r\n                      <div className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">SNF</div>\r\n                      <div className=\"text-sm font-bold text-purple-600 dark:text-purple-400\">{Number(bmc.weightedSnf30d || 0).toFixed(2)}%</div>\r\n                    </div>\r\n                    <div className=\"bg-pink-50 dark:bg-pink-900/20 rounded-lg p-2 text-center\">\r\n                      <div className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">CLR</div>\r\n                      <div className=\"text-sm font-bold text-pink-600 dark:text-pink-400\">{Number(bmc.weightedClr30d || 0).toFixed(1)}</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Revenue */}\r\n                  <div className=\"flex items-center justify-between bg-emerald-50 dark:bg-emerald-900/20 rounded-lg p-3\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className=\"w-2 h-2 rounded-full bg-emerald-500\"></div>\r\n                      <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Total Revenue</span>\r\n                    </div>\r\n                    <div className=\"text-lg font-bold text-emerald-600 dark:text-emerald-400\">\r\n                      {Number(bmc.totalAmount30d || 0).toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Footer Actions */}\r\n                <div className=\"bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-100 dark:border-gray-700 flex items-center justify-between gap-2 rounded-b-lg\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <button\r\n                      onClick={() => handleEditClick(bmc)}\r\n                      className=\"p-2 text-gray-400 dark:text-gray-500 hover:text-green-600 dark:hover:text-green-400 transition-colors rounded-lg hover:bg-green-50 dark:hover:bg-green-900/30\"\r\n                      title=\"Edit\"\r\n                    >\r\n                      <Edit3 className=\"w-4 h-4\" />\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleDeleteClick(bmc)}\r\n                      className=\"p-2 text-gray-400 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 transition-colors rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30\"\r\n                      title=\"Delete\"\r\n                    >\r\n                      <Trash2 className=\"w-4 h-4\" />\r\n                    </button>\r\n                  </div>\r\n                  \r\n                  {/* Right side actions */}\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <button\r\n                      onClick={() => {\r\n                        setBmcForNavigation(bmc);\r\n                        setShowSocietiesAlert(true);\r\n                      }}\r\n                      className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors group\"\r\n                      title={`View ${bmc.societyCount || 0} societies under ${bmc.name}`}\r\n                    >\r\n                      <Building2 className=\"w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-colors\" />\r\n                      <span className=\"text-sm text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 font-medium transition-colors\">\r\n                        {bmc.societyCount || 0} Societies\r\n                      </span>\r\n                    </button>\r\n                    \r\n                    <button\r\n                      onClick={() => router.push(`/admin/bmc/${bmc.id}`)}\r\n                      className=\"flex items-center px-3 py-1.5 text-sm text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg transition-colors\"\r\n                      title=\"View Details\"\r\n                    >\r\n                      <Eye className=\"w-4 h-4 mr-1\" />\r\n                      <span>View</span>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <EmptyState\r\n            icon={<Factory className=\"w-12 h-12 sm:w-16 sm:h-16 text-gray-400\" />}\r\n            title=\"No BMCs found\"\r\n            message={statusFilter === 'all' ? 'Get started by adding your first BMC' : 'Try changing the filter to see more results'}\r\n            actionText={statusFilter === 'all' ? 'Add Your First BMC' : undefined}\r\n            onAction={statusFilter === 'all' ? handleAddBMCClick : undefined}\r\n            showAction={statusFilter === 'all'}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {/* Floating Action Button */}\r\n      <FloatingActionButton\r\n        actions={[\r\n          {\r\n            icon: <Plus className=\"w-6 h-6 text-white\" />,\r\n            label: 'Add BMC',\r\n            onClick: () => {\r\n              setFieldErrors({});\r\n              setError('');\r\n              setShowAddForm(true);\r\n              fetchDairies();\r\n            },\r\n            color: 'bg-gradient-to-br from-green-500 to-green-600'\r\n          }\r\n        ]}\r\n        directClick={true}\r\n      />\r\n\r\n      {/* Add BMC Modal - Positioned outside main container */}\r\n      <FormModal\r\n        isOpen={showAddForm}\r\n        onClose={() => {\r\n          setShowAddForm(false);\r\n          setFormData(initialFormData);\r\n        }}\r\n        title={t.bmcManagement.addBMC}\r\n        maxWidth=\"lg\"\r\n      >\r\n        <form onSubmit={handleAddBMC} className=\"space-y-4 sm:space-y-6\">\r\n          <FormGrid>\r\n            {/* Mandatory Fields First */}\r\n            <FormInput\r\n              label=\"BMC Name\"\r\n              value={formData.name}\r\n              onChange={(value) => handleInputChange('name', value)}\r\n              placeholder=\"Enter BMC name\"\r\n              required\r\n              error={fieldErrors.name}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"BMC ID\"\r\n              value={formData.bmcId}\r\n              onChange={(value) => handleInputChange('bmcId', value)}\r\n              placeholder=\"B-001\"\r\n              required\r\n              disabled={showEditForm}\r\n              error={fieldErrors.bmcId}\r\n              colSpan={1}\r\n            />\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Password <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type={showAddPassword ? 'text' : 'password'}\r\n                  value={formData.password}\r\n                  onChange={(e) => handleInputChange('password', e.target.value)}\r\n                  placeholder=\"Enter password\"\r\n                  required={!showEditForm}\r\n                  className=\"form-input-custom w-full px-3 sm:px-4 py-2 sm:py-2.5 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-200 focus:outline-none\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowAddPassword(!showAddPassword)}\r\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors\"\r\n                  title={showAddPassword ? 'Hide password' : 'Show password'}\r\n                >\r\n                  {showAddPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <FormSelect\r\n              label=\"Dairy Farm\"\r\n              value={formData.dairyFarmId}\r\n              onChange={(value) => handleInputChange('dairyFarmId', value)}\r\n              options={dairies.map(dairy => ({ \r\n                value: dairy.id, \r\n                label: `${dairy.name} (${dairy.dairyId})` \r\n              }))}\r\n              placeholder=\"Select dairy farm\"\r\n              required\r\n              disabled={dairiesLoading}\r\n              colSpan={1}\r\n            />\r\n\r\n            {/* Optional Fields */}\r\n            <FormInput\r\n              label=\"Capacity (Liters)\"\r\n              type=\"number\"\r\n              value={formData.capacity}\r\n              onChange={(value) => handleInputChange('capacity', value)}\r\n              placeholder=\"2000\"\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Monthly Target (Liters)\"\r\n              type=\"number\"\r\n              value={formData.monthlyTarget}\r\n              onChange={(value) => handleInputChange('monthlyTarget', value)}\r\n              placeholder=\"2000\"\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Contact Person\"\r\n              value={formData.contactPerson}\r\n              onChange={(value) => handleInputChange('contactPerson', value)}\r\n              placeholder=\"Enter contact person\"\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Phone Number\"\r\n              type=\"tel\"\r\n              value={formData.phone}\r\n              onChange={(value) => {\r\n                const formatted = formatPhoneInput(value);\r\n                handleInputChange('phone', formatted);\r\n              }}\r\n              onBlur={() => {\r\n                const error = validatePhoneOnBlur(formData.phone);\r\n                if (error) {\r\n                  setFieldErrors(prev => ({ ...prev, phone: error }));\r\n                } else {\r\n                  setFieldErrors(prev => ({ ...prev, phone: undefined }));\r\n                }\r\n              }}\r\n              placeholder=\"Enter 10-digit phone number\"\r\n              error={fieldErrors.phone}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Email\"\r\n              type=\"email\"\r\n              value={formData.email}\r\n              onChange={(value) => handleInputChange('email', value)}\r\n              placeholder=\"bmc@example.com\"\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormSelect\r\n              label=\"Status\"\r\n              value={formData.status}\r\n              onChange={(value) => handleInputChange('status', value)}\r\n              options={[\r\n                { value: 'active', label: 'Active' },\r\n                { value: 'inactive', label: 'Inactive' },\r\n                { value: 'maintenance', label: 'Maintenance' }\r\n              ]}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label=\"Location\"\r\n              value={formData.location}\r\n              onChange={(value) => handleInputChange('location', value)}\r\n              placeholder=\"Enter location\"\r\n              colSpan={2}\r\n            />\r\n          </FormGrid>\r\n\r\n          <FormActions\r\n            onCancel={() => {\r\n              setShowAddForm(false);\r\n              setFormData(initialFormData);\r\n            }}\r\n            submitText={t.bmcManagement.addBMC}\r\n            isLoading={formLoading}\r\n            cancelText={t.common.cancel}\r\n          />\r\n        </form>\r\n      </FormModal>\r\n\r\n      {/* Edit BMC Modal */}\r\n      <FormModal\r\n        isOpen={showEditForm && !!selectedBMC}\r\n        onClose={() => {\r\n          setShowEditForm(false);\r\n          setSelectedBMC(null);\r\n          setFormData(initialFormData);\r\n        }}\r\n        title={selectedBMC ? `${t.common.edit} ${selectedBMC.name}` : t.common.edit}\r\n        maxWidth=\"lg\"\r\n      >\r\n        <form onSubmit={handleUpdateBMC} className=\"space-y-4 sm:space-y-6\">\r\n          <FormGrid>\r\n            {/* Mandatory Fields First */}\r\n            <FormInput\r\n              label={`${t.bmcManagement.bmcName}`}\r\n              value={formData.name}\r\n              onChange={(value) => handleInputChange('name', value)}\r\n              placeholder={t.bmcManagement.enterBMCName}\r\n              required\r\n              error={fieldErrors.name}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label={`${t.bmcManagement.bmcId} (Read-only)`}\r\n              value={formData.bmcId}\r\n              onChange={() => {}} \r\n              readOnly\r\n              disabled\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormSelect\r\n              label={`${t.bmcManagement.dairyFarm}`}\r\n              value={formData.dairyFarmId}\r\n              onChange={(value) => handleInputChange('dairyFarmId', value)}\r\n              options={dairies.map(dairy => ({ \r\n                value: dairy.id, \r\n                label: `${dairy.name} (${dairy.dairyId})` \r\n              }))}\r\n              placeholder=\"Select dairy farm\"\r\n              required\r\n              disabled={dairiesLoading}\r\n              colSpan={2}\r\n            />\r\n\r\n            {/* Optional Fields */}\r\n            <div className=\"sm:col-span-2\">\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Password\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  value={formData.password}\r\n                  onChange={(e) => handleInputChange('password', e.target.value)}\r\n                  placeholder=\"Enter password\"\r\n                  className=\"form-input-custom w-full px-3 sm:px-4 py-2 sm:py-2.5 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 focus:border-emerald-500 dark:focus:border-emerald-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-200 focus:outline-none\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors\"\r\n                  title={showPassword ? 'Hide password' : 'Show password'}\r\n                >\r\n                  {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                </button>\r\n              </div>\r\n              <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\r\n                Current password is pre-filled. Click eye icon to view or edit to change.\r\n              </p>\r\n            </div>\r\n\r\n            <FormInput\r\n              label={t.bmcManagement.capacity}\r\n              type=\"number\"\r\n              value={formData.capacity}\r\n              onChange={(value) => handleInputChange('capacity', value)}\r\n              placeholder={t.bmcManagement.enterCapacity}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.bmcManagement.monthlyTarget}\r\n              type=\"number\"\r\n              value={formData.monthlyTarget}\r\n              onChange={(value) => handleInputChange('monthlyTarget', value)}\r\n              placeholder={t.bmcManagement.enterMonthlyTarget}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.bmcManagement.contactPerson}\r\n              value={formData.contactPerson}\r\n              onChange={(value) => handleInputChange('contactPerson', value)}\r\n              placeholder={t.bmcManagement.enterContactPerson}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.bmcManagement.phone}\r\n              type=\"tel\"\r\n              value={formData.phone}\r\n              onChange={(value) => {\r\n                const formatted = formatPhoneInput(value);\r\n                handleInputChange('phone', formatted);\r\n              }}\r\n              onBlur={() => {\r\n                const error = validatePhoneOnBlur(formData.phone);\r\n                if (error) {\r\n                  setFieldErrors(prev => ({ ...prev, phone: error }));\r\n                } else {\r\n                  setFieldErrors(prev => ({ ...prev, phone: undefined }));\r\n                }\r\n              }}\r\n              placeholder={t.bmcManagement.enterPhoneNumber}\r\n              error={fieldErrors.phone}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.bmcManagement.email}\r\n              type=\"email\"\r\n              value={formData.email}\r\n              onChange={(value) => handleInputChange('email', value)}\r\n              placeholder={t.bmcManagement.enterEmail}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormSelect\r\n              label={t.bmcManagement.status}\r\n              value={formData.status}\r\n              onChange={(value) => handleInputChange('status', value)}\r\n              options={[\r\n                { value: 'active', label: t.bmcManagement.active },\r\n                { value: 'inactive', label: t.bmcManagement.inactive },\r\n                { value: 'maintenance', label: t.bmcManagement.maintenance }\r\n              ]}\r\n              colSpan={1}\r\n            />\r\n\r\n            <FormInput\r\n              label={t.bmcManagement.location}\r\n              value={formData.location}\r\n              onChange={(value) => handleInputChange('location', value)}\r\n              placeholder={t.bmcManagement.enterLocation}\r\n              colSpan={2}\r\n            />\r\n          </FormGrid>\r\n\r\n          <FormActions\r\n            onCancel={() => {\r\n              setShowEditForm(false);\r\n              setSelectedBMC(null);\r\n              setFormData(initialFormData);\r\n            }}\r\n            submitText={t.bmcManagement.updateBMC}\r\n            isLoading={formLoading}\r\n            cancelText={t.common.cancel}\r\n            loadingText={t.bmcManagement.updatingBMC}\r\n            submitIcon={<Save className=\"w-4 h-4\" />}\r\n          />\r\n        </form>\r\n      </FormModal>\r\n\r\n      {/* Delete Confirmation Modal */}\r\n      <DeleteBMCModal\r\n        isOpen={showDeleteModal && !!selectedBMC}\r\n        onClose={() => {\r\n          setShowDeleteModal(false);\r\n          setSelectedBMC(null);\r\n        }}\r\n        onConfirm={handleConfirmDelete}\r\n        bmcName={selectedBMC?.name || ''}\r\n        loading={isDeleting}\r\n        societyCount={selectedBMC?.societyCount || 0}\r\n      />\r\n\r\n      {/* Transfer Societies Modal */}\r\n      <TransferSocietiesModal\r\n        isOpen={showTransferModal}\r\n        onClose={() => {\r\n          setShowTransferModal(false);\r\n          setSelectedBMC(null);\r\n        }}\r\n        onConfirm={handleTransferAndDelete}\r\n        bmcName={selectedBMC?.name || ''}\r\n        bmcId={selectedBMC?.id || 0}\r\n        societies={societies}\r\n        availableBMCs={availableBMCs}\r\n      />\r\n\r\n      {/* Societies Navigation Alert Modal */}\r\n      <NavigationConfirmModal\r\n        isOpen={showSocietiesAlert && !!bmcForNavigation}\r\n        onClose={() => {\r\n          setShowSocietiesAlert(false);\r\n          setBmcForNavigation(null);\r\n        }}\r\n        onConfirm={() => {\r\n          setShowSocietiesAlert(false);\r\n          router.push(`/admin/society?bmcFilter=${bmcForNavigation?.id}`);\r\n          setBmcForNavigation(null);\r\n        }}\r\n        title=\"Navigate to Society Management\"\r\n        message={`View all societies from ${bmcForNavigation?.name} in the Society Management page with filters applied.`}\r\n        confirmText=\"Go to Society Management\"\r\n        cancelText=\"Cancel\"\r\n      />\r\n\r\n      {/* Graph Modal */}\r\n      {showGraphModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <BarChart3 className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\r\n                <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n                  {graphMetric === 'quantity' && 'Collection Volume - Last 30 Days'}\r\n                  {graphMetric === 'revenue' && 'Revenue - Last 30 Days'}\r\n                  {graphMetric === 'fat' && 'Average Fat % - Last 30 Days'}\r\n                  {graphMetric === 'snf' && 'Average SNF % - Last 30 Days'}\r\n                  {graphMetric === 'collections' && 'Number of Collections - Last 30 Days'}\r\n                  {graphMetric === 'water' && 'Average Water % - Last 30 Days'}\r\n                </h2>\r\n              </div>\r\n              <button\r\n                onClick={() => setShowGraphModal(false)}\r\n                className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\r\n              >\r\n                <X className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Graph Content */}\r\n            <div className=\"flex-1 overflow-y-auto p-6\">\r\n              {(() => {\r\n                const bmcsWithStats = bmcs.filter(b => b.totalQuantity30d && b.totalQuantity30d > 0);\r\n                \r\n                // Prepare data for line chart (all BMCs)\r\n                const chartData = bmcsWithStats.map(bmc => ({\r\n                  name: bmc.name,\r\n                  bmcId: bmc.bmcId,\r\n                  value: graphMetric === 'quantity' ? (bmc.totalQuantity30d || 0) :\r\n                         graphMetric === 'revenue' ? (bmc.totalAmount30d || 0) :\r\n                         graphMetric === 'fat' ? (bmc.weightedFat30d || 0) :\r\n                         graphMetric === 'snf' ? (bmc.weightedSnf30d || 0) :\r\n                         graphMetric === 'collections' ? (bmc.totalCollections30d || 0) :\r\n                         (bmc.weightedWater30d || 0)\r\n                })).sort((a, b) => b.value - a.value);\r\n\r\n                // Get color and settings\r\n                const getLineColor = () => {\r\n                  switch(graphMetric) {\r\n                    case 'quantity': return '#10b981';\r\n                    case 'revenue': return '#3b82f6';\r\n                    case 'fat': return '#8b5cf6';\r\n                    case 'snf': return '#f97316';\r\n                    case 'collections': return '#ec4899';\r\n                    case 'water': return '#ef4444';\r\n                    default: return '#6b7280';\r\n                  }\r\n                };\r\n\r\n                return chartData.length > 0 ? (\r\n                  <div className=\"w-full h-[500px]\">\r\n                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                      <LineChart data={chartData} margin={{ top: 5, right: 30, left: 20, bottom: 80 }}>\r\n                        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" className=\"dark:stroke-gray-700\" />\r\n                        <XAxis \r\n                          dataKey=\"name\" \r\n                          angle={-45}\r\n                          textAnchor=\"end\"\r\n                          height={100}\r\n                          interval={0}\r\n                          tick={{ fontSize: 11 }}\r\n                          stroke=\"#6b7280\"\r\n                          label={{ \r\n                            value: 'BMC Name', \r\n                            position: 'insideBottom', \r\n                            offset: -5,\r\n                            style: { fontSize: 13, fontWeight: 500, fill: '#9ca3af' }\r\n                          }}\r\n                        />\r\n                        <YAxis \r\n                          label={{ \r\n                            value: graphMetric === 'revenue' ? 'Revenue ()' : \r\n                                   graphMetric === 'fat' || graphMetric === 'snf' || graphMetric === 'water' ? 'Percentage (%)' : \r\n                                   graphMetric === 'quantity' ? 'Volume (L)' : 'Count', \r\n                            angle: -90, \r\n                            position: 'insideLeft',\r\n                            style: { fontSize: 13, fontWeight: 500, fill: '#9ca3af' }\r\n                          }}\r\n                          stroke=\"#6b7280\"\r\n                        />\r\n                        <Tooltip \r\n                          contentStyle={{\r\n                            backgroundColor: '#1f2937',\r\n                            border: 'none',\r\n                            borderRadius: '0.5rem',\r\n                            color: '#fff',\r\n                            boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1)'\r\n                          }}\r\n                          formatter={(value: any) => {\r\n                            if (graphMetric === 'revenue') {\r\n                              return ['' + Number(value).toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })];\r\n                            }\r\n                            if (graphMetric === 'fat' || graphMetric === 'snf' || graphMetric === 'water') {\r\n                              return [Number(value).toFixed(2) + '%'];\r\n                            }\r\n                            if (graphMetric === 'quantity') {\r\n                              return [Number(value).toFixed(2) + ' L'];\r\n                            }\r\n                            return [Number(value)];\r\n                          }}\r\n                          labelFormatter={(label: string) => `BMC: ${label}`}\r\n                          cursor={{ stroke: '#9ca3af', strokeWidth: 1 }}\r\n                        />\r\n                        <Line \r\n                          type=\"monotone\" \r\n                          dataKey=\"value\" \r\n                          stroke={getLineColor()} \r\n                          strokeWidth={2}\r\n                          dot={{ fill: getLineColor(), r: 4 }}\r\n                          activeDot={{ r: 6 }}\r\n                          isAnimationActive={true}\r\n                          name=\"Value\"\r\n                        />\r\n                      </LineChart>\r\n                    </ResponsiveContainer>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"flex items-center justify-center h-[500px]\">\r\n                    <div className=\"text-center\">\r\n                      <BarChart3 className=\"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-3\" />\r\n                      <p className=\"text-gray-600 dark:text-gray-400 text-lg\">No data available for this metric</p>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })()}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div className=\"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-700/50\">\r\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                Showing performance metrics for all BMCs over the last 30 days. Click the X to close this view.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}